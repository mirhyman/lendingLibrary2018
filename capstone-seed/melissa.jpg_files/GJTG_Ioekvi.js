if (self.CavalryLogger) { CavalryLogger.start_js(["UQ+gr"]); }

__d("CustomAudienceSharingCapabilities",[],(function a(b,c,d,e,f,g){f.exports={USE_FOR_ADS:"USE_FOR_ADS",USE_FOR_INSIGHTS:"USE_FOR_INSIGHTS"}}),null);
__d("ChatImpressionLogger",["AsyncSignal","ChatConfig","ChatVisibility","Poller","PresencePrivacy","PresenceStatus","requireWeak","debounceAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=null;c("requireWeak")("AvailableList",function(m){return h=m});var i=null;function j(m){if(!i)m([]);else i.getSortedList(function(n){return m(n)})}function k(m){if(!i||!h)return"";var n=[];for(var o=0;o<m.length;o++)n[o]=h.get(m[o]);return n.toString()}var l={init:function m(n){__p&&__p();i=n;j(function(o){var p,q=o.toString(),r=k(o),s=c("ChatConfig").get("chat_impression_logging_periodical",0);if(s)(function(){var t=c("ChatConfig").get("periodical_impression_logging_config.interval"),u=new(c("Poller"))({interval:t,setupRequest:function v(w){w.setURI("/ajax/chat/imps_logging.php").setData({list_availability:r,sorted_list:q,source:"periodical_imps"})},clearOnQuicklingEvents:false,dontStart:true});c("PresencePrivacy").subscribe("privacy-user-presence-changed",c("debounceAcrossTransitions")(function(){if(c("ChatVisibility").isOnline())u.start();else u.stop()}))})()});this.init=function(){}},logImpression:function m(n,o,p){j(function(q){var r=c("ChatConfig").get("chat_impression_logging_with_click"),s={list_availability:r?k(q):"",sorted_list:r?q.toString():"",source:n,target:o,target_presence:c("PresenceStatus").get(o),viewport_width:document.body.clientWidth};new(c("AsyncSignal"))("/ajax/chat/ct.php",Object.assign(s,p)).send()})}};f.exports=l}),null);