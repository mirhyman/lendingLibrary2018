if (self.CavalryLogger) { CavalryLogger.start_js(["kal9i"]); }

__d("ReactComposerFunFactSinglePromptTaggerContainer.react",["cx","Arbiter","AsyncRequest","CurrentUser","FlexLayout.react","FluxContainer","ProfileEngagementTypedLogger","ProfileFunFactsEntryPoint","React","ReactComposerAttachmentStore","ReactComposerContextTypes","ReactComposerEvents","ReactComposerFormattedTextActions","ReactComposerFormattedTextStore","ReactComposerFunFactTaggerComponent.react","ReactComposerLoggingName","ReactComposerTaggerActions","ReactComposerTaggerHideOnEscapeKeyPress.react","ReactComposerTaggerStore","ReactComposerTaggerType","XProfileFunFactsSinglePromptFetchController","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=-1,l=0;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.$ReactComposerFunFactSinglePromptTaggerContainer1=null,this.$ReactComposerFunFactSinglePromptTaggerContainer5=function(){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,null)}.bind(this),o}m.getStores=function(){return[c("ReactComposerAttachmentStore"),c("ReactComposerTaggerStore")]};m.calculateState=function(n,o,p){var q=p.composerID,r=!!o.pinnedPromptID;return{isAttached:c("ReactComposerTaggerStore").hasData(q,c("ReactComposerTaggerType").FUN_FACT),isDisabled:c("ReactComposerTaggerStore").isDisabled(q,c("ReactComposerTaggerType").FUN_FACT),isLoading:n?n.isLoading:r,taggerData:c("ReactComposerTaggerStore").getTaggerData(q,c("ReactComposerTaggerType").FUN_FACT)}};m.prototype.componentDidMount=function(){c("Arbiter").inform("ReactComposerDialogLauncher/expandcomposer/"+this.context.composerID);if(this.props.pinnedPromptID)this.$ReactComposerFunFactSinglePromptTaggerContainer2()};m.prototype.componentDidUpdate=function(n,o){__p&&__p();if(!this.state.isAttached){this.$ReactComposerFunFactSinglePromptTaggerContainer1&&this.$ReactComposerFunFactSinglePromptTaggerContainer1.unsubscribe();return}var p=null,q=null;if(this.state.taggerData.promptID){p=this.state.taggerData.promptID;q="answer_post"}else{p=this.state.taggerData.askedPromptID;q="ask_post"}if(o.isAttached){var r=o.taggerData.promptID||o.taggerData.askedPromptID;if(r===p)return}this.$ReactComposerFunFactSinglePromptTaggerContainer3("enter",q,p,this.state.taggerData.entryPoint||this.props.entryPoint);this.$ReactComposerFunFactSinglePromptTaggerContainer1&&this.$ReactComposerFunFactSinglePromptTaggerContainer1.unsubscribe();this.$ReactComposerFunFactSinglePromptTaggerContainer1=c("Arbiter").subscribeOnce(c("ReactComposerEvents").POST_STARTED+this.context.composerID,function(){if(this.state.isAttached){var s=this.state.taggerData;this.$ReactComposerFunFactSinglePromptTaggerContainer3("create",s.promptID?"answer_post":"ask_post",s.promptID||s.askedPromptID,s.entryPoint||this.props.entryPoint)}}.bind(this));this.$ReactComposerFunFactSinglePromptTaggerContainer4(q==="answer_post")};m.prototype.$ReactComposerFunFactSinglePromptTaggerContainer4=function(n){if(c("ReactComposerTaggerStore").isDisabled(this.context.composerID,c("ReactComposerTaggerType").FORMATTED_TEXT))return;if(n){var o=c("ReactComposerFormattedTextStore").getSelectedIndex(this.context.composerID);if(o===k)c("ReactComposerFormattedTextActions").setSelectedIndex(this.context.composerID,l)}else c("ReactComposerFormattedTextActions").setSelectedIndex(this.context.composerID,k)};m.prototype.$ReactComposerFunFactSinglePromptTaggerContainer3=function(n,o,p,q){var r=new(c("ProfileEngagementTypedLogger"))().setProductBucket("fun_facts").setProfileIDDummy(c("CurrentUser").getID()).setSurface("unknown").setEngagementType(n).setEventMetadata({entry_point:q,prompt_id:p});if(n==="create")r.setItemType(o).log();else if(n==="enter")r.setItemType("composer_page").setItemSubtype(o).log()};m.prototype.$ReactComposerFunFactSinglePromptTaggerContainer2=function(){c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,{promptID:this.props.pinnedPromptID});var n=c("XProfileFunFactsSinglePromptFetchController").getURIBuilder().setInt("fetch_amount",1).setFBID("pinned_prompt_id",this.props.pinnedPromptID).getURI();new(c("AsyncRequest"))(n).setHandler(function(o){var p=this.state.taggerData;p.prompt=o.getPayload().prompts[0];c("ReactComposerTaggerActions").setTaggerData(this.context.composerID,c("ReactComposerLoggingName").FUN_FACT,c("ReactComposerTaggerType").FUN_FACT,p);this.setState({isLoading:false});this.$ReactComposerFunFactSinglePromptTaggerContainer4(true)}.bind(this)).send()};m.prototype.render=function(){if(!this.state.isAttached||this.state.isDisabled)return null;if(this.state.isLoading)return c("React").createElement(c("FlexLayout.react"),{align:"center",className:"_2ph_",direction:"vertical"},c("React").createElement(c("XUISpinner.react"),null));var n=this.state.taggerData.prompt;return c("React").createElement(c("ReactComposerTaggerHideOnEscapeKeyPress.react"),null,c("React").createElement(c("ReactComposerFunFactTaggerComponent.react"),{attribution:n.isCrowdsourced?n.attribution:null,emoji:n.emoji,onClose:this.$ReactComposerFunFactSinglePromptTaggerContainer5,showCloseButton:true,title:n.title}))};m.defaultProps={entryPoint:c("ProfileFunFactsEntryPoint").UNKNOWN};m.contextTypes=c("ReactComposerContextTypes");f.exports=c("FluxContainer").create(m,{withContext:true,withProps:true})}),null);
__d("MontageDirectActionMutationsMutationWebGraphQLMutation",["WebGraphQLMutationBase"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("WebGraphQLMutationBase"));i=h&&h.prototype;j.__getDocID=function(){"use strict";return"1603931976358851"};j.getQueryID=function(){"use strict";return"137658990264468"};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);