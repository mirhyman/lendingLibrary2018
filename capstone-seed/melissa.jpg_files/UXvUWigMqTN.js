if (self.CavalryLogger) { CavalryLogger.start_js(["MJMih"]); }

__d("BaseUnitCarousel",["csx","DOM","tidyEvent","Animation","Ease","Locale","Event"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=39,j=3;function k(l){"use strict";__p&&__p();this.config=l;this.logImpressionsOnSlide=l.log_impressions_on_slide?l.log_impressions_on_slide:false;this.positionProperty=c("Locale").isRTL()?"margin-right":"margin-left";var m=l.elements;this.loggedItems={};this.queuedAnimations=0;this.itemWidth=l.item_width;this.visibleCount=l.visible_count;this.visibleIndex=0;this.slideCount=l.slide_count?l.slide_count:j;this.slideAdjust=l.slide_adjust?l.slide_adjust:i;this.endElementAlign=l.end_element_align;this.carousel=m.node;this.circularCarousel=l.circular_carousel;this.startOffset=l.start_offset;this.position=this.startOffset;this.grid=m.grid;if(this.grid.childElementCount<=2*this.slideCount)this.circularCarousel=false;if(this.circularCarousel){for(var n=0;n<this.slideCount;n++)this.grid.insertBefore(this.grid.lastChild,this.grid.firstChild);this.$BaseUnitCarousel1(this.slideCount)}this.grid.style[this.positionProperty]=this.position+"px";this.grid.style.width=this.itemWidth*this.visibleCount+"px";this.serviceID=m.service_id;this.location=m.location;this.pager=m.pager;this.enableAutoScrolling=l.enable_auto_scrolling;this.enableLargePager=l.enable_large_pager;this.prevPager=m.prev_pager;this.nextPager=m.next_pager;if(this.enableLargePager)c("tidyEvent")([c("Event").listen(this.nextPager,"click",this.slideLeft.bind(this)),c("Event").listen(this.prevPager,"click",this.slideRight.bind(this))]);else c("tidyEvent")([this.pager.subscribe("next",this.slideLeft.bind(this)),this.pager.subscribe("prev",this.slideRight.bind(this))]);this.logImpressions();this.tryLoadMore();this.$BaseUnitCarousel2()}k.prototype.$BaseUnitCarousel1=function(l){"use strict";this.position-=l*this.itemWidth;this.grid.style[this.positionProperty]=this.position+"px";this.visibleIndex+=l};k.prototype.canSlideLeft=function(){"use strict";return this.visibleIndex+this.visibleCount<this.grid.childElementCount};k.prototype.canSlideRight=function(){"use strict";return this.visibleIndex>=1};k.prototype.onXout=function(l,m){"use strict";__p&&__p();if(!m)return;if(this.grid.childElementCount===0){c("DOM").remove(this.carousel);return}if(this.grid.childElementCount<=2*this.slideCount&&this.circularCarousel){this.circularCarousel=false;this.position+=this.startOffset;this.grid.style[this.positionProperty]=this.position+"px"}if(this.grid.childElementCount>=this.visibleCount){var n=this.visibleIndex+this.visibleCount,o=this.grid.childElementCount-n;if(o<0)this.slide(-o)}this.$BaseUnitCarousel2();this.logImpressions();this.tryLoadMore()};k.prototype.slide=function(l){"use strict";__p&&__p();this.toggleXouts(this.visibleIndex,this.visibleIndex+this.visibleCount,true);var m=this.visibleIndex+l,n=this.computeAdjustment(m,l);if(m+this.visibleCount>=this.grid.childElementCount)m=this.grid.childElementCount-this.visibleCount;if(m<0)m=0;l=m-this.visibleIndex;if(m===this.visibleIndex)return;this.position-=l*this.itemWidth+n;this.visibleIndex=m;var o=Math.abs(l*this.itemWidth);if(this.enableLargePager)this.hidePagerButton();var p=false;if(l>0)p=true;this.queuedAnimations++;new(c("Animation"))(this.grid).to(this.positionProperty,this.position).duration(o).ease(c("Ease").sineOut).ondone(this.onSlideDone.bind(this,p)).go()};k.prototype.onSlideDone=function(l){"use strict";this.queuedAnimations--;if(this.logImpressionsOnSlide)this.logImpressions();else if(l||this.circularCarousel)this.logImpressions();if(!this.circularCarousel&&l)this.tryLoadMore();this.$BaseUnitCarousel2()};k.prototype.slideRight=function(){"use strict";if(this.circularCarousel){for(var l=0;l<this.slideCount;l++)this.grid.insertBefore(this.grid.lastChild,this.grid.firstChild);this.$BaseUnitCarousel1(this.slideCount)}this.slide(-this.slideCount)};k.prototype.slideLeft=function(){"use strict";if(this.circularCarousel){for(var l=0;l<this.slideCount;l++)this.grid.appendChild(this.grid.firstChild);this.$BaseUnitCarousel1(-this.slideCount)}this.slide(this.slideCount)};k.prototype.onDone=function(l){"use strict";__p&&__p();this.hasReq=false;if(l&&l.payload&&l.payload.items){var m=l.payload.items;if(m){var n=c("DOM").find(this.grid,"._34bp");c("DOM").insertBefore(n,m);this.onItemsAdded()}}};k.prototype.onError=function(){"use strict";this.hasReq=false};k.prototype.onItemsAdded=function(){"use strict";this.$BaseUnitCarousel2();this.logImpressions();this.tryLoadMore()};k.prototype.toggleXouts=function(l,m,n){"use strict"};k.prototype.logImpressions=function(){"use strict"};k.prototype.tryLoadMore=function(){"use strict"};k.prototype.hidePagerButton=function(){"use strict"};k.prototype.$BaseUnitCarousel2=function(){"use strict";__p&&__p();if(!this.queuedAnimations)this.toggleXouts(this.visibleIndex,this.visibleIndex+this.visibleCount-1,false);if(this.enableAutoScrolling)this.updateAutoSlideListener();if(this.enableLargePager){this.updateLargePager();return}if(this.grid.childElementCount<this.visibleCount){this.pager.setNextEnabled(false);this.pager.setPrevEnabled(false);return}this.pager.setNextEnabled(this.canSlideLeft());this.pager.setPrevEnabled(this.canSlideRight())};k.prototype.computeAdjustment=function(l,m){"use strict";__p&&__p();if(this.circularCarousel)return 0;if(!this.enableAutoScrolling&&!this.enableLargePager)return 0;var n=this.grid.childElementCount-1,o=this.visibleIndex===0&&m>0,p=this.visibleIndex===n&&m<0,q=l<=0,r=l===n;if(o){if(this.endElementAlign&&r)return 2*-this.slideAdjust;return-this.slideAdjust}if(q){l=0;if(this.endElementAlign&&p)return 2*this.slideAdjust;return this.slideAdjust}if(this.endElementAlign){if(r)return-this.slideAdjust;if(p)return this.slideAdjust}return 0};f.exports=k}),null);
__d("XFeedEgoLoadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ego/feed/load/",{loading_id:{type:"String",required:true},ids:{type:"IntVector",required:true},service_id:{type:"String",required:true},replace_data:{type:"String",defaultValue:""},location:{type:"String",defaultValue:""},group_size:{type:"Int",defaultValue:1},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true}})}),null);
__d("EgoUnitCarousel",["csx","DataAttributeUtils","DOM","XFeedEgoImpressionLoggingController","AsyncRequest","Arbiter","XFeedEgoLoadController","BaseUnitCarousel"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("BaseUnitCarousel"));j=i&&i.prototype;function k(l){"use strict";j.constructor.call(this,l);c("Arbiter").subscribe("x-out-ego-suggestions",this.onXout.bind(this))}k.prototype.tryLoadMore=function(){"use strict";__p&&__p();if(this.hasReq)return;var l=this.grid.childElementCount-this.visibleIndex-this.visibleCount-1;if(l>7)return;var m=c("DOM").scry(this.grid,"._34bp")[0];if(!m)return;var n=m.id,o=[],p=this.grid.childNodes,q=p.length-1,r,s;for(var t=0;t<q;++t){var u=JSON.parse(c("DataAttributeUtils").getDataFt(p[t]));if(u.ego_id)o.push(u.ego_id);if(u.qid&&!r)r=u.qid;if(u.mf_story_key&&!s)s=u.mf_story_key}var v=c("XFeedEgoLoadController").getURIBuilder().setString("service_id",this.serviceID).setString("location",this.location).setString("loading_id",n).setIntVector("ids",o).setInt("qid",r).setInt("mf_story_key",s).getURI();new(c("AsyncRequest"))().setURI(v).setHandler(this.onDone.bind(this)).setErrorHandler(this.onError.bind(this)).send();this.hasReq=true};k.prototype.logImpressions=function(){"use strict";var l=this.grid.children,m=l.length,n=this.visibleIndex+Math.min(this.visibleCount,m)-1;if(n===m-1)--n;for(var o=this.visibleIndex;o<=n;++o)this.$EgoUnitCarousel1(l[o])};k.prototype.$EgoUnitCarousel1=function(l){"use strict";__p&&__p();var m=JSON.parse(c("DataAttributeUtils").getDataFt(l));if(!m)return;var n=m.ego_id;if(!n)return;if(this.loggedItems[n])return;var o=c("XFeedEgoImpressionLoggingController").getURIBuilder().setInt("ego_id",n).setInt("qid",m.qid).setInt("mf_story_key",m.mf_story_key).getURI();new(c("AsyncRequest"))().setURI(o).send();this.loggedItems[n]=true};f.exports=k}),null);
__d("legacy:EditSubscriptions",["SubscriptionLevels","EditSubscriptions"],(function a(b,c,d,e,f,g){b.SubscriptionLevels=c("SubscriptionLevels");b.EditSubscriptions=c("EditSubscriptions")}),3);
__d("DynamicFriendListEducation",["Event","Arbiter","AsyncRequest","Dialog","PageTransitionsRegistrar","createArrayFromMixed","removeFromArray"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j,k,l,m;function n(){j&&j.hide();k&&k.hide()}function o(r){c("removeFromArray")(i,r);n();l({accept_tag_education:true})}function p(){n();l({nux_cancel:true})}var q={init:function r(s,t){h=s;i=c("createArrayFromMixed")(t).map(String);c("PageTransitionsRegistrar").registerHandler(function(){n();h=false;l=undefined;i=[]})},showDialog:function r(s,t,u){if(h&&i.includes(s)){n();c("Arbiter").inform("DynamicFriendListEducation/dialogOpen",{uid:t,flid:s});l=u;j=new(c("Dialog"))().setAsync(new(c("AsyncRequest"))("/ajax/friends/lists/smart_list_education.php").setMethod("GET").setData({flid:s,uid:t}).setReadOnly(true)).setHandler(o.bind(this,s)).setCloseHandler(function(){c("Arbiter").inform("DynamicFriendListEducation/dialogClosed",{uid:t,flid:s})}).setCancelHandler(function(){c("Arbiter").inform("DynamicFriendListEducation/dialogCancel",{uid:t,flid:s})}).show()}else u()},showContextualDialog:function r(s,t,u,v){if(h&&i.includes(s)){n();m=u;l=v;new(c("AsyncRequest"))("/ajax/friends/lists/smart_list_contextual_education.php").setMethod("GET").setData({flid:s,uid:t}).setReadOnly(true).send()}else v()},setContextualDialog:function r(s,t,u,v){k=s;k.setContext(m);k.show();c("Event").listen(t,"click",o.bind(this,v));c("Event").listen(u,"click",p)}};f.exports=q}),null);
__d("FriendStatus",["Arbiter","AsyncRequest","SubscribeButton","createArrayFromMixed","forEachObject"],(function a(b,c,d,e,f,g){__p&&__p();function h(l,m,n){this.id=l;this.update(m,n)}Object.assign(h.prototype,{update:function l(m,n){m&&(this.status=m);if(n){this.lists=c("createArrayFromMixed")(n).map(String);this._informListChange()}},isComplete:function l(){return!!this.lists},addToList:function l(m){if(this.lists&&!this.lists.includes(m))this.lists.push(m);this._informListChange()},removeFromList:function l(m){if(this.lists){var n=this.lists.indexOf(m);n!==-1&&this.lists.splice(n,1)}this._informListChange()},updateList:function l(m,n){n?this.addToList(m):this.removeFromList(m)},_informListChange:function l(){c("Arbiter").inform("FriendListMembershipChange",{uid:this.id,lists:this.lists})}});Object.assign(h,{ARE_FRIENDS:1,INCOMING_REQUEST:2,OUTGOING_REQUEST:3,CAN_REQUEST:4});var i={},j={};function k(l,m,n){if(!i[n.uid])i[n.uid]=new h(n.uid,l);else i[n.uid].update(l);c("Arbiter").inform("FriendRequest/change",{uid:n.uid,status:l})}c("Arbiter").subscribe(["FriendRequest/cancel","FriendRequest/unfriend"],function(l,m){m.profile_id=m.uid;m.connected=false;c("Arbiter").inform(c("SubscribeButton").UNSUBSCRIBED,m)});c("Arbiter").subscribe(["FriendRequest/cancel","FriendRequest/unfriend","FriendRequest/sendFail"],k.bind(null,h.CAN_REQUEST));c("Arbiter").subscribe(["FriendRequest/confirmFail"],k.bind(null,h.INCOMING_REQUEST));c("Arbiter").subscribe(["FriendRequest/cancelFail","FriendRequest/sent","FriendRequest/sending"],k.bind(null,h.OUTGOING_REQUEST));c("Arbiter").subscribe(["FriendRequest/confirm","FriendRequest/confirming"],k.bind(null,h.ARE_FRIENDS));Object.assign(h,{CLOSE_FRIENDS:null,ACQUAINTANCES:null,getFriend:function l(m,n){if(i[m]&&i[m].isComplete())n(i[m]);else if(j[m])j[m].push(n);else{j[m]=[n];new(c("AsyncRequest"))().setURI("/ajax/friends/status.php").setData({friend:m}).setHandler(function(o){var p=o.getPayload();setTimeout(h.initFriend.bind(h,m,p.status,p.lists),0)}).send()}},initFriend:function l(m,n,o){var p=i[m]||new h(m);p.update(p.status||n,p.lists||o);i[m]=p;j[m]&&j[m].forEach(function(q){q(p)});j[m]=null},setSpecialLists:function l(m){var n=h.CLOSE_FRIENDS===null;h.CLOSE_FRIENDS=m.close+"";h.ACQUAINTANCES=m.acq+"";if(n)c("forEachObject")(i,function(o,p){o._informListChange()})}});f.exports=h}),null);
__d("FriendEditLists",["Arbiter","AsyncRequest","CSS","DOMQuery","DynamicFriendListEducation","EditSubscriptions","FriendStatus","MenuDeprecated","Parent","ScrollableArea","URI","$","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h=5,i={},j="/ajax/profile/removefriendconfirm.php",k="/ajax/friends/requests/cancel.php",l="/ajax/choose/",m="/profile.php",n,o,p,q,r={profile_browser:43,fbx_top_bar:1,hovercard:5};function s(D,E,F){__p&&__p();var G=i[D.id],H=function H(I){__p&&__p();var J={action:F?"add_list":"del_list",to_friend:G.id,friendlists:[E],source:n};if(I)Object.assign(J,I);G.updateList(E,F);var K;if(F&&E==c("FriendStatus").CLOSE_FRIENDS){K=v(D,c("FriendStatus").ACQUAINTANCES);if(c("MenuDeprecated").isItemChecked(K)){c("MenuDeprecated").toggleItem(K);s(D,c("FriendStatus").ACQUAINTANCES,false)}}else if(F&&E==c("FriendStatus").ACQUAINTANCES){K=v(D,c("FriendStatus").CLOSE_FRIENDS);if(c("MenuDeprecated").isItemChecked(K)){c("MenuDeprecated").toggleItem(K);s(D,c("FriendStatus").CLOSE_FRIENDS,false)}}var L={flid:E,uid:G.id},M=F?"FriendListHovercard/add":"FriendListHovercard/remove";c("Arbiter").inform(M,L);new(c("AsyncRequest"))().setURI("/ajax/add_friend/action.php").setData(J).send()};if(F)c("DynamicFriendListEducation").showDialog(E,G.id,H);else H()}function t(D){var E=c("DOMQuery").scry(D,"input")[0];return E&&E.value}function u(D,E,F){if(c("CSS").hasClass(F,"async_saving"))return;var G={uid:E.id};new(c("AsyncRequest"))().setURI(k).setMethod("POST").setData({friend:E.id,cancel_ref:p,floc:q}).setHandler(function(){return c("Arbiter").inform("FriendRequest/cancel",G)}).setErrorHandler(function(){return c("Arbiter").inform("FriendRequest/cancelFail",G)}).setStatusElement(F).send()}function v(D,E){var F=c("MenuDeprecated").getItems(D);for(var G=0;G<F.length;G++)if(t(F[G])==E)return F[G];return null}function w(D,E){var F=c("MenuDeprecated").getItems(D);F.forEach(function(G){var H=t(G),I=E.lists.includes(H);if(c("MenuDeprecated").isItemChecked(G)!==I)c("MenuDeprecated").toggleItem(G)})}function x(D){__p&&__p();var E=c("MenuDeprecated").getItems(D),F=!c("CSS").hasClass(D,"followButtonFlyout")&&!c("CSS").hasClass(D,"likeButtonFlyout"),G=[],H=[],I=0,J=0;E.forEach(function(O){__p&&__p();if(c("CSS").hasClass(O,"neverHide")){c("CSS").removeClass(O,"underShowMore");I++}else if(c("MenuDeprecated").isItemChecked(O))G.push(O);else if(c("CSS").hasClass(O,"neverShow")||c("CSS").hasClass(O,"FriendListCreateTrigger")||!F&&c("CSS").hasClass(O,"friendOptionsOnly")){c("CSS").addClass(O,"underShowMore");J++}else H.push(O)});var K=h-I,L=G.concat(H),M=J;L.forEach(function(O){__p&&__p();if(c("CSS").hasClass(O,"ShowMoreItem")){K--;return}if(K){c("CSS").removeClass(O,"underShowMore");K--}else{c("CSS").addClass(O,"underShowMore");M=true}});c("CSS").conditionClass(D,"hasMoreFriendListItems",M);var N=c("DOMQuery").scry(D,".FriendListMenuShowMore");N.forEach(function(O){c("CSS").removeClass(O,"FriendListMenuShowMore")})}function y(D,E){c("CSS").conditionClass(D,"FriendListMemorializedUser",E)}function z(D,E){c("CSS").conditionClass(D,"FriendListCannotSuggestFriends",!E)}function A(D,E){__p&&__p();var F=c("DOMQuery").scry(D,".FriendListUnfriend")[0],G=c("DOMQuery").scry(D,".FriendListCancel")[0],H=c("DOMQuery").scry(D,".FriendListSuggestFriends")[0],I=c("DOMQuery").scry(D,".FriendListFriendship")[0];if(G)c("CSS").conditionShow(G,E.status==c("FriendStatus").OUTGOING_REQUEST);if(F){c("CSS").conditionShow(F,E.id!==undefined&&E.status===c("FriendStatus").ARE_FRIENDS);var J=c("DOMQuery").find(F,"a");J.setAttribute("ajaxify",new(c("URI"))(j).addQueryData({uid:E.id,unref:o,floc:q}).toString())}else c("CSS").conditionClass(D,"NoFriendListActionSeparator",!G||E.status!=c("FriendStatus").OUTGOING_REQUEST);if(H)c("DOMQuery").find(H,"a").setAttribute("href",new(c("URI"))(l).addQueryData({type:"suggest_friends",newcomer:E.id,ref:"profile_others_dropdown"}).toString());if(I){c("CSS").conditionShow(I,E.status==c("FriendStatus").ARE_FRIENDS);c("DOMQuery").find(I,"a").setAttribute("href",new(c("URI"))(m).addQueryData({and:E.id}).toString())}}function B(D,E,F){var G=c("DOMQuery").scry(D,"div.FriendListSubscriptionsMenu");if(G.length!==0)c("EditSubscriptions").init(D,E,F)}c("Arbiter").subscribe("FriendRequest/change",function(D,E){for(var F in i){var G=c("ge")(F),H=i[F];if(G&&H&&H.id==E.uid){w(G,H);A(G,H);x(G)}}});c("MenuDeprecated").subscribe("select",function(D,E){if(c("CSS").hasClass(E.item,"ShowMoreItem")&&c("CSS").hasClass(E.menu,"FriendListMenu")){c("CSS").addClass(E.menu,"FriendListMenuShowMore");c("ScrollableArea").poke(E.item)}});var C={init:function D(E,F,G,H,I,J,K,L){__p&&__p();E=c("$")(E);n=G;o=J;p=K;q=L;var M=r[G]||45;if(!i[E.id])c("MenuDeprecated").subscribe("select",function(N,O){__p&&__p();if(c("DOMQuery").contains(E,O.item))if(c("Parent").byClass(O.item,"FriendListItem")){c("MenuDeprecated").toggleItem(O.item);var P=t(O.item);s(E,P,c("MenuDeprecated").isItemChecked(O.item))}else if(c("Parent").byClass(O.item,"FriendListCancel"))u(E,i[E.id],O.item);else if(c("Parent").byClass(O.item,"FriendListUnfriend"))c("Arbiter").inform("FriendEditLists/unfriend")});c("CSS").addClass(E,"async_saving");c("FriendStatus").getFriend(F,function(N){y(E,H);z(E,I);w(E,N);A(E,N);i[E.id]=N;x(E);B(E,F,M);c("CSS").removeClass(E,"async_saving")}.bind(this))}};f.exports=b.FriendEditLists||C}),null);
__d("FriendListFlyoutController",["csx","cx","Arbiter","AsyncRequest","Button","ContextualLayer","CSS","DataStore","DOM","DOMQuery","Event","FriendEditLists","FriendStatus","getActiveElement","ifRequired","Keys","Layer","LayerHideOnEscape","LayerTabIsolation","MenuDeprecated","Parent","ScrollableArea","Style","TabbableElements","UserAgent_DEPRECATED","emptyFunction"],(function aa(a,b,ba,ca,c,da,ea,fa){__p&&__p();var d,e,f,g=null,h=null,i,j,k,l,m,n,o=1500,p,q=false,r=["uiButtonConfirm","uiButtonSpecial","_42gz","_42g-","_4jy2","_51tl","_4jy1"],s={init:function N(O,P){__p&&__p();s.init=b("emptyFunction");d=O;d.subscribe("mouseenter",B);d.subscribe("mouseleave",function(){if(!q)K()});d.subscribe("hide",ga);d.enableBehavior(b("LayerTabIsolation"));d.enableBehavior(b("LayerHideOnEscape"));p=P;if(g)b("DOM").setContent(d.getContent(),[g,h]);var Q=function Q(S){__p&&__p();var T=b("Parent").byClass(S.getTarget(),"enableFriendListFlyout");if(T){q=true;if(i!==T){f&&L();J(T)}}else if(q)L()},R=function R(S){var T=b("Parent").byClass(S.getTarget(),"enableFriendListFlyout");if(T)if(i===T)clearTimeout(l);else{f&&L();J(T)}};b("Event").listen(document.documentElement,{click:Q,mouseover:R,keydown:function S(event){__p&&__p();var T=event.getTarget();if(event.getModifiers().any)return;if(!f||b("DOMQuery").isNodeOfType(T,["input","textarea"]))return;var U=b("Event").getKeyCode(event),V;switch(U){case b("Keys").UP:case b("Keys").DOWN:var W=A();V=y(W);w(W[V+(U===b("Keys").UP?-1:1)]);return false;case b("Keys").SPACE:var X=x(T);if(X){t(X);event.prevent()}break;default:var pa=String.fromCharCode(U).toLowerCase(),Y=A();V=y(Y);var Z=V,qa=Y.length;while((Z=++Z%qa)!==V){var $=b("MenuDeprecated").getItemLabel(Y[Z]);if($&&$.charAt(0).toLowerCase()===pa){w(Y[Z]);return false}}}}});b("Arbiter").subscribe("FriendEditLists/unfriend",L);b("Arbiter").subscribe("FriendRequest/cancel",L);b("Arbiter").subscribe("DynamicFriendListEducation/dialogOpen",function(){n=true});b("Arbiter").subscribe("DynamicFriendListEducation/dialogClosed",function(){n=false;K()})},initContent:function N(O){__p&&__p();b("DOM").appendContent(document.body,O);ha(O);setTimeout(function(){__p&&__p();if(!g){g=O;d&&b("DOM").setContent(d.getContent(),[g,h]);b("CSS").show(g);b("Event").listen(g,"click",oa);f&&H(i)}else{b("DOM").remove(O);O=null}},0)},initNux:function N(O){if(h)return;h=O;d&&b("DOM").setContent(d.getContent(),[g,h])},show:function N(O){I(O)},hide:function N(O){O===false?L():K()},setActiveNode:function N(O){f&&L();i=O;j=b("Event").listen(O,"mouseleave",function(){i=null;j&&j.remove()})},setCloseListener:function N(O,P){b("DataStore").set(O,"flfcloselistener",P);if(i!=O)b("DataStore").set(O,"flfcloselistenertimeout",setTimeout(M.bind(null,O),o))},setCloseListenerTimeout:function N(O){o=O}};function t(N){b("UserAgent_DEPRECATED").firefox()&&v(N).blur();b("MenuDeprecated").inform("select",{menu:u(N),item:N})}function u(N){if(b("CSS").hasClass(N,"uiMenuContainer"))return N;return b("Parent").byClass(N,"uiMenu")}function v(N){return b("DOMQuery").find(N,"a.itemAnchor")}function w(N){if(N&&z(N)){b("MenuDeprecated")._removeSelected(d.getContent());b("CSS").addClass(N,"selected");v(N).focus()}}function x(N){return b("Parent").byClass(N,"uiMenuItem")}function y(N){var O=b("getActiveElement")();if(O){var P=x(O);return N.indexOf(P)}return-1}function z(N){return!b("CSS").hasClass(N,"disabled")&&b("Style").get(N,"display")!=="none"&&b("Style").get(b("Parent").byClass(N,"uiMenu"),"display")!=="none"}function A(){return b("MenuDeprecated").getItems(d.getContent()).filter(z)}function B(){clearTimeout(l)}function C(N){for(var O=0;O<r.length;O++)if(b("CSS").hasClass(N,r[O]))return false;return true}function ga(){__p&&__p();if(i){if(C(i)){b("CSS").removeClass(i,"_52nd");if(b("CSS").hasClass(i,"uiButton")||b("CSS").matchesSelector(i,"._42fu"))b("CSS").removeClass(i,"selected")}if(b("DataStore").get(i,"flfcloselistener")){var N=i;b("DataStore").set(i,"flfcloselistenertimeout",setTimeout(M.bind(null,N),o))}}f=false;G();i=null}function ha(N){var O=b("DOMQuery").scry(N,'[tabindex="0"]');O.forEach(function(P){P.tabIndex="-1"});O[0]&&(O[0].tabIndex="0")}function D(N){if(b("DOMQuery").isNodeOfType(N,"label")&&b("CSS").hasClass(N,"uiButton"))N=b("Button").getInputElement(N);return N}function E(N){return b("DataStore").get(D(N),"profileid")}function ia(N){return b("DataStore").get(D(N),"memorialized")==="true"}function ja(N){return b("DataStore").get(D(N),"cansuggestfriends")==="true"}function F(N){return b("DataStore").get(D(N),"unref")}function ka(N){return b("DataStore").get(D(N),"cancelref")}function la(N){return b("DataStore").get(D(N),"floc")}function G(){j&&j.remove();j=null;m&&b("Layer").unsubscribe(m);m=null;l&&clearTimeout(l);l=null}function H(N){var O=E(N),P=ia(N),Q=ja(N),R=b("DataStore").get(N,"flloc"),S=F(N),T=ka(N),U=la(N);b("FriendEditLists").init(g,O,R,P,Q,S,T,U);b("CSS").conditionClass(g,"followButtonFlyout",b("CSS").hasClass(N,"profileFollowButton"));b("CSS").conditionClass(g,"friendButtonFlyout",b("CSS").hasClass(N,"FriendRequestFriends")||b("CSS").hasClass(N,"FriendRequestIncoming")||b("CSS").hasClass(N,"FriendRequestOutgoing"));b("CSS").conditionClass(g,"likeButtonFlyout",b("CSS").hasClass(N,"profileLikeButton"));var V=b("DOMQuery").scry(g,"div.uiScrollableArea")[0];V&&b("ScrollableArea").poke(V);var W=b("TabbableElements").find(g)[0];W&&W.focus()}function I(N){__p&&__p();if(!d||f)return;d.setContext(N);d.setCausalElement(N);N.setAttribute("aria-expanded","true");if(C(N)){b("CSS").addClass(N,"_52nd");if(b("CSS").hasClass(N,"uiButton")||b("CSS").matchesSelector(N,"._42fu"))b("CSS").addClass(N,"selected")}d.show();i=N;f=true;var O=null;if(g){O="show";H(N)}else{O="init_show";new(b("AsyncRequest"))().setURI("/ajax/friends/lists/flyout_content.php").setStatusElement(d.getContent()).send()}G();j=b("Event").listen(N,"mouseleave",K);m=b("Layer").subscribe("show",ma);if(b("DataStore").get(N,"flfcloselistener"))clearTimeout(b("DataStore").remove(N,"flfcloselistenertimeout"));var P=E(N);b("FriendStatus").getFriend(P,function(Q){if(Q.status==b("FriendStatus").ARE_FRIENDS)new(b("AsyncRequest"))().setURI("/ajax/friends/lists/flyout_log.php").setData({target_id:E(N),unref:F(N),action:O}).send();if(!h)return;if(Q.status==b("FriendStatus").OUTGOING_REQUEST){b("CSS").show(h);b("AsyncRequest").bootstrap("/ajax/friends/lists/nux_flyout.php",null,true)}else b("CSS").hide(h)});if(!e||N.id!==e.id){b("Arbiter").inform("listeditor/close_editor");b("Arbiter").inform("friend-list/close_editor")}e=N}function ma(N,O){if(!(O instanceof b("ContextualLayer"))||!b("DOMQuery").contains(i,O.getContext()))K()}function J(N){i=N;k=setTimeout(I.bind(null,N),p);j=b("Event").listen(N,"mouseleave",function(){clearTimeout(k);i=null;j&&j.remove()})}function K(){l=setTimeout(L,150)}function na(){var N=b("ifRequired")("Dialog",function(P){return P});if(N){var O=N.getCurrent();return O&&b("DOMQuery").scry(O,".friendListDialogTourCarousel")[0]}}function L(){if(n||na())return;q=false;if(d){d.hide();var N=d.getCausalElement();N&&N.setAttribute("aria-expanded","false")}}function oa(event){var N=b("Parent").byTag(event.getTarget(),"a");if(N&&b("CSS").hasClass(N,"FriendListActionItem"))K()}function M(N){var O=b("DataStore").remove(N,"flfcloselistener");O&&O()}c.exports=a.FriendListFlyoutController||s}),null);
__d("AddFriendButton",["Event","Arbiter","AsyncRequest","AsyncResponse","collectDataAttributes","CSS","DOMQuery","FriendListFlyoutController","FriendStatus","ge","goURI","Style","SubscribeButton","getVendorPrefixedName","URI","XPubcontentChainedSuggestionsController"],(function a(b,c,d,e,f,g){__p&&__p();var h={ERROR_ALREADY_ADDED:1431005,init:function i(j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){__p&&__p();var y=j.id,z=null,A=c("DOMQuery").scry(j,".addButton")[0],B=c("DOMQuery").scry(j,".addFriendText")[0],C=c("DOMQuery").scry(j,".outgoingButton")[0],D=c("DOMQuery").scry(j,".incomingButton")[0],E=c("DOMQuery").scry(j,".friendButton")[0],F=c("DOMQuery").scry(j.parentNode.parentNode.parentNode,".friend_status_confirmed")[0],G=c("DOMQuery").scry(j.parentNode,".suggestFriendsButton")[0];function H(O,P,Q){var R=new(c("URI"))(A.getAttribute("ajaxify")),S=c("collectDataAttributes")(j,["ft","gt"]);new(c("AsyncRequest"))().setURI(o).setData({to_friend:k,action:O,how_found:m,ref_param:n,link_data:S,outgoing_id:C.id,xids:R.getQueryData().xids,logging_location:p,no_flyout_on_click:q,ego_log_data:r,http_referer:t,floc:v,frefs:w}).setErrorHandler(P).setServerDialogCancelHandler(Q).setRelativeTo(C).send();if(u&&O==="add_friend"){var T=c("XPubcontentChainedSuggestionsController").getURIBuilder().setInt("friendid",k).getURI();new(c("AsyncRequest"))().setURI(T).send()}c("Arbiter").inform(c("SubscribeButton").SUBSCRIBED,{profile_id:k.toString(),connected:true,chaining:false})}function I(O,P){__p&&__p();if(B)c("CSS").hide(B);else if(A){if(x)c("CSS").hide(x);c("CSS").hide(A)}C&&c("CSS").hide(C);D&&c("CSS").hide(D);E&&c("CSS").hide(E);if(O){c("CSS").show(O);if(x&&"Requestable"===P)c("CSS").show(x)}if("Outgoing"==P&&z!=P&&s){var Q=c("getVendorPrefixedName")("transition"),R=c("Style").get(O,Q),S={backgroundColor:"transparent",borderColor:c("Style").get(O,"borderLeftColor")};S[Q]="2s";var T=c("Event").listen(O,c("getVendorPrefixedName")("transitionend"),function(){c("Style").apply(O,{transition_prop:R});T.remove()});c("Style").apply(O,S)}if("Requestable"==P&&z!=P)G&&c("CSS").hide(G);z&&c("CSS").removeClass(j,"fStatus"+z);z=P;c("CSS").addClass(j,"fStatus"+P)}function J(O){if(c("CSS").hasClass(O,"enableFriendListFlyout"))c("FriendListFlyoutController").show(O);else c("FriendListFlyoutController").hide()}var K=c("Arbiter").subscribe("FriendRequest/change",function(O,P){__p&&__p();N();if(P.uid!=k)return;switch(P.status){case c("FriendStatus").ARE_FRIENDS:return I(E,"Friends");case c("FriendStatus").INCOMING_REQUEST:return I(D,"Incoming");case c("FriendStatus").OUTGOING_REQUEST:return I(C,"Outgoing");case c("FriendStatus").CAN_REQUEST:if(F)c("CSS").hide(F);return I(B?B:A,"Requestable")}}),L=c("Arbiter").subscribe("FriendRequest/unfriend",function(O,P){N();if(P.uid===k&&P.shouldHideButton===true)c("CSS").hide(A)}),M;if(l)M=c("Arbiter").subscribe("FriendRequest/confirm",function(O,P){N();P.uid==k&&c("goURI")(l)});A&&c("Event").listen(A,"click",function(){__p&&__p();c("Arbiter").inform("FriendRequest/sending",{uid:k});if(q)c("FriendListFlyoutController").setActiveNode(C);else J(C);H("add_friend",function(O){var P=O.error==h.ERROR_ALREADY_ADDED?"FriendRequest/sent":"FriendRequest/sendFail";c("Arbiter").inform(P,{uid:k});c("FriendListFlyoutController").hide();c("AsyncResponse").defaultErrorHandler(O)},function(O){c("Arbiter").inform("FriendRequest/sendFail",{uid:k});c("FriendListFlyoutController").hide()})});function N(){if(c("ge")(y))return;K&&K.unsubscribe();M&&M.unsubscribe();L&&L.unsubscribe();K=null;M=null;L=null}}};f.exports=h}),null);
__d("FriendButtonIcon",["Arbiter","FriendStatus","Button"],(function a(b,c,d,e,f,g){__p&&__p();f.exports={register:function h(i,j,k){c("Arbiter").subscribe("FriendListMembershipChange",function(l,m){if(m.uid==k){var n=m.lists.includes(c("FriendStatus").CLOSE_FRIENDS),o=m.lists.includes(c("FriendStatus").ACQUAINTANCES);if(n&&!o)c("Button").setIcon(i,j.close);else if(o&&!n)c("Button").setIcon(i,j.acquaintance);else c("Button").setIcon(i,j.friend)}})}}}),null);
__d("FriendListMenu",["Event","Arbiter","AsyncRequest","CSS","DOM","HTML","Focus","Input","Keys","MenuDeprecated","Parent"],(function a(b,c,d,e,f,g){__p&&__p();var h={init:function i(j){__p&&__p();c("MenuDeprecated").register(j,false);var k=c("DOM").find(j,".FriendListCreateTrigger"),l=c("DOM").find(j,".CreateListInputItem"),m=c("DOM").find(l,".createListInput");c("MenuDeprecated").subscribe("select",function(n,o){if(o.item==k){c("CSS").addClass(j,"FriendListMenuCreate");c("Focus").set(m)}});c("Event").listen(m,"blur",function(n){if(c("Input").isEmpty(m))c("CSS").removeClass(j,"FriendListMenuCreate")});c("Event").listen(m,"keydown",function(n){if(c("Event").getKeyCode(n)==c("Keys").RETURN&&/[^\s]/.test(m.value))new(c("AsyncRequest"))().setURI("/ajax/friends/lists/create.php").setData({name:m.value,id:j.id}).setHandler(function(){c("Input").reset(m);c("CSS").removeClass(j,"FriendListMenuCreate")}).send()});c("Arbiter").subscribe("friend-list/new",function(n,o){var p=c("HTML")(o.new_li).getRootNode();c("DOM").insertBefore(k,p);if(o.id===j.id){c("MenuDeprecated").focusItem(p);c("MenuDeprecated").inform("select",{menu:c("Parent").byClass(p,"uiMenu"),item:p})}else c("MenuDeprecated").toggleItem(p)});c("Arbiter").subscribe("friend-list/close_editor",function(){var n=c("Parent").byClass(j,"FlyoutFriendMenu");c("CSS").removeClass(n,"addToListsOpen");c("CSS").addClass(n,"addToListsClosed")})},addToAnotherList:function i(j,k){c("Event").listen(j,"click",function(event){var l=c("Parent").byClass(j,"FlyoutFriendMenu");c("CSS").removeClass(l,"addToListsClosed");c("CSS").addClass(l,"addToListsOpen")})},goBack:function i(j,k){c("Event").listen(j,"click",function(event){var l=c("Parent").byClass(j,"FlyoutFriendMenu");c("CSS").removeClass(l,"addToListsOpen");c("CSS").addClass(l,"addToListsClosed")})}};f.exports=h}),null);
__d("RestrictedFriendListEducation",["Arbiter","AsyncRequest"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;function j(l,m){__p&&__p();if(m.flid==h)if(l=="FriendListHovercard/add"){if(i)return;i=true;new(c("AsyncRequest"))().setURI("/ajax/friends/lists/restricted_edu.php").setData({target:m.uid,flid:m.flid}).send()}else if(l=="RestrictedListNUX/okay")new(c("AsyncRequest"))().setURI("/ajax/friends/lists/nux_log.php").setData(m).send();return true}var k={init:function l(m){h=m;c("Arbiter").subscribe(["FriendListHovercard/add","RestrictedListNUX/okay"],j)}};f.exports=k}),null);
__d("XEgoHideLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ego/feed/logging/xout/",{ego_id:{type:"Int",required:true},qid:{type:"Int",required:true},mf_story_key:{type:"Int",required:true},service_id:{type:"String",required:true}})}),null);
__d("PymkXout",["AsyncSignal","Arbiter","Event","CSS","DOM","DOMQuery","PymkFunnelLogger","XEgoHideLoggingController"],(function a(b,c,d,e,f,g){__p&&__p();var h={init:function i(j,k,l){__p&&__p();c("Event").listen(k,"click",function(event){__p&&__p();this._logForEgo(j);if(l==="pymk_jewel"||l==="pymk_jewel_first_page"||l==="friends_center")this._logForPymkFunnel(j,l);if(l==="pymk_jewel"||l==="pymk_jewel_first_page")c("CSS").hide(j);else c("DOM").remove(j);c("Arbiter").inform("pymk-x-out",{location:l});var m=event.getTarget().getAttribute("data-pymk-id");if(m)c("Arbiter").inform("x-out-ego-suggestions",{id:m})}.bind(this))},_logForEgo:function i(j){var k=JSON.parse(j.getAttribute("data-ft"));if(k&&k.ego_id){var l=c("XEgoHideLoggingController").getURIBuilder().setInt("ego_id",k.ego_id).setInt("qid",k.qid).setInt("mf_story_key",k.mf_story_key).setString("service_id","PYMK").getURI();new(c("AsyncSignal"))(l,{}).send()}},_logForPymkFunnel:function i(j,k){var l=c("DOMQuery").find(j,"input.friendBrowserID"),m=parseInt(l.value,10),n=parseInt(j.getAttribute("data-signature"),10);c("PymkFunnelLogger").logXOut(m,n,k)}};f.exports=h}),null);
__d("FbFeedAttachmentEgoHScroll",["csx","cx","CSS","DOM","EgoUnitCarousel","Event","debounce"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("EgoUnitCarousel"));k=j&&j.prototype;l.prototype.updateAutoSlideListener=function(){"use strict";this.$FbFeedAttachmentEgoHScroll5();if(this.canSlideLeft())this.$FbFeedAttachmentEgoHScroll6("left",this.visibleIndex+this.visibleCount);if(this.canSlideRight())this.$FbFeedAttachmentEgoHScroll6("right",this.visibleIndex-1)};l.prototype.updateLargePager=function(){"use strict";c("CSS").removeClass(this.carousel,"_vxr");this.$FbFeedAttachmentEgoHScroll7(true);this.$FbFeedAttachmentEgoHScroll7(false);c("CSS").conditionClass(this.carousel,"_vxs",this.canSlideLeft()&&this.canSlideRight());c("CSS").conditionClass(this.carousel,"_vtd",this.canSlideRight())};l.prototype.hidePagerButton=function(){"use strict";c("CSS").addClass(this.carousel,"_vxr")};l.prototype.$FbFeedAttachmentEgoHScroll7=function(m){"use strict";__p&&__p();var n=m?"_vxt":"_vxu",o=m?"_vxv":"_vxw";if(m?this.canSlideRight():this.canSlideLeft()){c("CSS").removeClass(this.carousel,o);c("CSS").removeClass(this.carousel,n)}else{c("CSS").addClass(this.carousel,o);setTimeout(function(){c("CSS").addClass(this.carousel,n)}.bind(this),500)}};l.prototype.$FbFeedAttachmentEgoHScroll5=function(){"use strict";__p&&__p();if(this.$FbFeedAttachmentEgoHScroll1)this.$FbFeedAttachmentEgoHScroll1.remove();this.$FbFeedAttachmentEgoHScroll1=null;if(this.$FbFeedAttachmentEgoHScroll2)this.$FbFeedAttachmentEgoHScroll2.remove();this.$FbFeedAttachmentEgoHScroll2=null;if(this.$FbFeedAttachmentEgoHScroll3)this.$FbFeedAttachmentEgoHScroll3.remove();this.$FbFeedAttachmentEgoHScroll3=null;if(this.$FbFeedAttachmentEgoHScroll4)this.$FbFeedAttachmentEgoHScroll4.remove();this.$FbFeedAttachmentEgoHScroll4=null};l.prototype.$FbFeedAttachmentEgoHScroll6=function(m,n){__p&&__p();var o,p=this,q;"use strict";if(isNaN(n)||m!=="left"&&m!=="right")return;if(m==="left")(function(){var r=c("debounce")(p.slideLeft.bind(p),1e3,p);p.$FbFeedAttachmentEgoHScroll1=c("Event").listen(p.grid.children[n],"mouseover",r);p.$FbFeedAttachmentEgoHScroll3=c("Event").listen(p.grid.children[n],"mouseout",function(){r.reset()})})();else(function(){var r=c("debounce")(p.slideRight.bind(p),1e3,p);p.$FbFeedAttachmentEgoHScroll2=c("Event").listen(p.grid.children[n],"mouseover",r);p.$FbFeedAttachmentEgoHScroll4=c("Event").listen(p.grid.children[n],"mouseout",function(){r.reset()})})()};l.prototype.toggleXouts=function(m,n,o){"use strict";__p&&__p();var p=Math.min(m,n),q=Math.max(m,n),r=this.grid.children;p=Math.max(p,0);q=Math.min(q,r.length-1);var s=void 0;for(var t=p;t<=q;++t){s=r[t];var u=c("DOM").scry(s,"._1r7n")[0];if(u)if(o)c("CSS").hide(u);else c("CSS").show(u)}};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);