if (self.CavalryLogger) { CavalryLogger.start_js(["gsaNR"]); }

__d("XGamesNavigationSliderAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/games/async/navigationslider/",{id:{type:"String",required:true},referral_objects:{type:"StringVector",defaultValue:[]},num_items_per_page:{type:"Int",required:true},num_rows:{type:"Int",defaultValue:1},width:{type:"Int",required:true},height:{type:"Int",required:true}})}),null);
__d("CanvasNavigationSlider",["Event","XGamesNavigationSliderAsyncController","AsyncRequest","DataStore"],(function a(b,c,d,e,f,g){__p&&__p();var h="GamesNavigationSlider";i.init=function(j,k){"use strict";return new i(j,k)};function i(j,k){"use strict";__p&&__p();this.$CanvasNavigationSlider1=k.autoscroll;this.$CanvasNavigationSlider2=j;this.$CanvasNavigationSlider3=k.referral_objects;this.$CanvasNavigationSlider4=j.getNode().id;this.$CanvasNavigationSlider5=k.height;this.$CanvasNavigationSlider6=k.width;this.$CanvasNavigationSlider7=k.num_items_per_page;this.$CanvasNavigationSlider8=k.num_rows;this.$CanvasNavigationSlider9=false;c("DataStore").set(h,this.$CanvasNavigationSlider4,this);if(j.getIndex()>0||this.$CanvasNavigationSlider1)this.$CanvasNavigationSlider10();var l=c("Event").listen(j.getNextArrow(),"click",function(){l.remove();this.$CanvasNavigationSlider10()}.bind(this).bind(this))}i.prototype.$CanvasNavigationSlider10=function(){"use strict";if(this.$CanvasNavigationSlider9)return;this.$CanvasNavigationSlider9=true;var j=c("XGamesNavigationSliderAsyncController").getURIBuilder().setString("id",this.$CanvasNavigationSlider4).setInt("num_items_per_page",this.$CanvasNavigationSlider7).setInt("num_rows",this.$CanvasNavigationSlider8).setInt("width",this.$CanvasNavigationSlider6).setInt("height",this.$CanvasNavigationSlider5).getURI();new(c("AsyncRequest"))(j).setData({referral_objects:this.$CanvasNavigationSlider3}).send()};i.prototype.$CanvasNavigationSlider11=function(j){"use strict";j.forEach(function(k){this.$CanvasNavigationSlider2.push(k)}.bind(this))};i.update=function(j,k){"use strict";var l=c("DataStore").get(h,j);l.$CanvasNavigationSlider11(k)};f.exports=i}),null);
__d("NubController",["ArbiterMixin","Dock"],(function a(b,c,d,e,f,g){__p&&__p();function h(){}Object.assign(h.prototype,c("ArbiterMixin"),{init:function i(j){this.el=j;c("Dock").registerNubController(j,this);return this},buttonContentChanged:function i(){this.inform("nub/button/content-changed")},flyoutContentChanged:function i(){this.inform("nub/flyout/content-changed")},hide:function i(){c("Dock").hide(this.el)},show:function i(){c("Dock").show(this.el)}});f.exports=h}),null);
__d("BuddyListNub",["csx","cx","fbt","Arbiter","AsyncRequest","AvailableList","BootloadedComponent.react","ChannelConnection","ChatOptions","ChatSidebarActions","ChatSidebarStore","ChatSidebarVisibility","ChatVisibility","CSS","Dock","DOM","Event","intlNumUtils","JSLogger","JSResource","KeyEventController","Keys","NubController","OrderedFriendsList","Parent","PresencePrivacy","PresenceStatus","PresenceUtil","React","ReactDOM","Run","SidebarType","Style","Toggler","emptyFunction","gkx"],(function a(b,c,d,e,f,g,h,i,j){__p&&__p();var k,l,m=40,n=253,o="285px",p=c("JSLogger").create("buddylist_nub");k=babelHelpers.inherits(q,c("NubController"));l=k&&k.prototype;function q(r,s,t,u){"use strict";__p&&__p();l.constructor.call(this);l.init.call(this,r);this.root=r;this.orderedList=s;this.button=c("DOM").find(r,"a.fbNubButton");this.unreadCount=c("DOM").find(r,"span._5ayx");this.label=c("DOM").find(r,"span.label");this.body=c("DOM").scry(r,"div.fbNubFlyoutBody")[0];this.container=c("Parent").bySelector(r,"._56ox");var v=c("DOM").find(r,"div.fbNubFlyoutTitlebar");c("Toggler").createInstance(v).setSticky(false);c("Toggler").createInstance(r).setSticky(true);if(u)c("Run").onAfterLoad(function(){this.dropdown=c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function w(){},sidebarType:c("SidebarType").BUDDYLIST}),u)}.bind(this));s.subscribeOnce("render",this.flyoutContentChanged.bind(this));c("Run").onAfterLoad(function(){__p&&__p();var w=c("DOM").find(v,"div._4k48");if(w)c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),w);var x=c("DOM").find(this.button,"div._1us9");if(x)c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("ChatSidebarComposeLink.react").__setRef("BuddyListNub"),className:"_3a-4"}),x);var y=c("DOM").find(this.button,"div._1usa");if(y)c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("ChatSidebarDropdown.react").__setRef("BuddyListNub"),onToggleSidebar:function B(){},sidebarType:c("SidebarType").BUDDYLIST_NUB}),y);if(c("gkx")("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")){var z=c("DOM").find(v,"div._3gl7");if(z)c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub")}),z);var A=c("DOM").find(this.button,"div._3gll");if(A)c("ReactDOM").render(c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("span",null),bootloadLoader:c("JSResource")("ChatSidebarGroupCreateButtonReactComponent").__setRef("BuddyListNub"),className:"newGCF"}),A)}}.bind(this));s.setScrollContainer(this.body);c("AvailableList").subscribe("buddylist/availability-changed",this._updateCount.bind(this));c("Arbiter").subscribe("chat/connect",function(){return this._handleConnect(true)}.bind(this));c("Arbiter").subscribe("chat/option-changed",function(w,x){if(x.name=="hide_groups")this.onResize();else if(x.name==="hide_buddylist")x.value?this.hide():this.show()}.bind(this));c("ChannelConnection").subscribe(c("ChannelConnection").CONNECTED,function(){return this._updateView()}.bind(this));c("ChannelConnection").subscribe(c("ChannelConnection").SHUTDOWN,function(){return this._updateView()}.bind(this));c("ChannelConnection").subscribe(c("ChannelConnection").RECONNECTING,function(){return this._updateView()}.bind(this));c("ChannelConnection").subscribe([c("ChannelConnection").MUTE_WARNING,c("ChannelConnection").UNMUTE_WARNING],function(){return this._updateView()}.bind(this));this.subscribe("show",this.onShow.bind(this));this.subscribe("hide",this.onHide.bind(this));this.subscribe("resize",this.onResize.bind(this));c("Event").listen(r,"keydown",this._onKeyDown.bind(this));c("Event").listen(this.button,"click",this.onButtonClick.bind(this));c("KeyEventController").registerKey("q",function(event){if(!this._isOpen){this.onButtonClick();this.show()}event.prevent()}.bind(this));c("Arbiter").subscribe("minisidebar/show",this.hide.bind(this));c("Arbiter").subscribe("sidebar/visibility",function(w,x){if(x)this.hide();else this._onSidebarHide()}.bind(this));c("Style").set(this.body,"min-height",o);c("Arbiter").subscribe("sidebar/typeahead/active",function(w,x){__p&&__p();if(x){this._typeaheadActive=true;c("CSS").hide(this.body.parentNode);this.orderedList.hide();this.onResize()}else{this._typeaheadActive=false;this.onResize();c("CSS").show(this.body.parentNode);this.orderedList.show()}}.bind(this));c("OrderedFriendsList").getList(function(w){if(c("ChatSidebarStore").isEnabled()&&c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST&&!c("ChatOptions").getSetting("hide_buddylist")&&!c("ChannelConnection").disconnected()&&!c("PresencePrivacy").isUserOffline()&&w.length>0)this.show();c("Event").listen(v,"click",function(x){if(c("CSS").matchesSelector(x.target,".titlebarTextWrapper"))this._syncHideBuddylist(true)}.bind(this));this._updateView();p.log("buddylist_initialized")}.bind(this))}q.prototype._handleVisibilityChange=function(){"use strict";this._updateView();if(!c("ChatVisibility").isOnline())this.hide()};q.prototype._updateView=function(r){"use strict";__p&&__p();var s,t;if(!c("ChatVisibility").isOnline())s=j._("{Chat} (Off)",[j.param("Chat",j._("Chat"))]);else if(c("ChannelConnection").disconnected())s=j._("{Chat} (Disconnected)",[j.param("Chat",j._("Chat"))]);else{var u=c("PresenceStatus").getOnlineCount();if(u){var v=c("DOM").create("span",{className:"count"},"("+c("intlNumUtils").formatNumberWithThousandDelimiters(u)+")");s=j._({"*":"{Chat} {number-available}"},[j.param("Chat",j._("Chat")),j.param("number-available",v,[0,u])])}else{s=j._("Chat");t=true}}this._setPresenceIcon();this._setUnread();this._setLabel(s,t);this.buttonContentChanged()};q.prototype._setPresenceIcon=function(){"use strict";c("CSS").conditionClass(this.root,"offline",!c("ChatVisibility").isOnline()||c("ChannelConnection").disconnected())};q.prototype.onButtonClick=function(){"use strict";if(!c("ChatSidebarStore").isInitialized())return true;c("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(r,s){var t=c("ChatSidebarStore").isEnabled();if(!t&&r)c("ChatSidebarActions").enable(c("SidebarType").SIDEBAR);else c("ChatSidebarActions").show(t&&r?c("SidebarType").SIDEBAR:c("SidebarType").BUDDYLIST)})};q.prototype.onHide=function(){"use strict";this._isOpen=false;if(this._buddyListRenderSubscription){this.orderedList.unsubscribe(this._buddyListRenderSubscription);this._buddyListRenderSubscription=null}this._hideBuddyList();c("Arbiter").inform("buddylist/hide")};q.prototype._onKeyDown=function(event){"use strict";var r=c("Event").getKeyCode(event);if(r===c("Keys").ESC&&!c("CSS").hasClass(this.root,"menuOpened")){this.hide();return false}else if(r==c("Keys").RETURN)c("ChatSidebarVisibility").shouldShowSidebarIgnoreEnabled(null,function(s,t){c("ChatSidebarActions").enable(s?c("SidebarType").SIDEBAR:c("SidebarType").BUDDYLIST)})};q.prototype._onSidebarHide=function(event){"use strict";c("OrderedFriendsList").getList(function(r){if(c("ChatSidebarStore").isEnabled()&&!c("ChatOptions").getSetting("hide_buddylist")&&!c("ChannelConnection").disconnected()&&!c("PresencePrivacy").isUserOffline()&&r.lenth>0)this.show();else this.hide()}.bind(this))};q.prototype.onResize=function(){"use strict";var r=!this._typeaheadActive?n:c("Dock").getMaxFlyoutHeight(this.root)-60;c("Arbiter").inform("buddyList/resized",r,c("Arbiter").BEHAVIOR_PERSISTENT);if(this._typeaheadActive)c("Style").set(this.body,"max-height","none");else c("Style").set(this.body,"max-height",o);var s=Math.max(250,r),t=Math.floor(s/m);this.orderedList.setNumTopFriends(t,false,c("SidebarType").BUDDYLIST)};q.prototype._showBuddyList=function(){"use strict";this._buddyListRenderSubscription=this.orderedList.subscribe("render",function(){if(c("Style").get(this.body,"height")!=o)c("Style").set(this.body,"height",o)}.bind(this));this.orderedList.show();p.bump("buddylist_show")};q.prototype._hideBuddyList=function(){"use strict";this.orderedList.hide();p.bump("buddylist_hide")};q.prototype.onShow=function(){"use strict";this._isOpen=true;if(c("ChannelConnection").disconnected()){c("ChannelConnection").reconnect();this._showBuddyList()}else c("ChatVisibility").goOnline(this._showBuddyList.bind(this));this._syncHideBuddylist(false)};q.prototype._setLabel=function(r,s){"use strict";var t=this.label.textContent||this.label.innerText;if(t!==r){var u=this.label.cloneNode(true);c("DOM").setContent(u,r);c("DOM").replace(this.label,u);this.label=u}this.throbber&&c("CSS").conditionShow(this.throbber,!!s)};q.prototype._setUnread=function(r){"use strict";c("CSS").conditionShow(this.unreadCount,!!r)};q.prototype._updateCount=function(){"use strict";this._updateView()};q.prototype._syncHideBuddylist=function(r){"use strict";c("ChatOptions").setSetting("hide_buddylist",r,"buddylist");new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(c("emptyFunction")).setErrorHandler(c("emptyFunction")).setData({hide_buddylist:r,window_id:c("PresenceUtil").getSessionID()}).setAllowCrossPageTransition(true).send()};c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(r,s){s.buddylist_visible=c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST});f.exports=q}),null);
__d("BuddyListNubLoader",["Arbiter","ChatOptions","ChatSidebarStore","KeyEventController","PresencePrivacy","JSResource","SidebarType","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){return c("ChatSidebarStore").isEnabled()&&!c("ChatOptions").getSetting("hide_buddylist")&&!c("ifRequired")("ChannelConnection",function(j){return j.disconnected()})&&!c("PresencePrivacy").isUserOffline()}function i(j,k,l,m){__p&&__p();this.$BuddyListNubLoader1=j;this.$BuddyListNubLoader2=k;this.$BuddyListNubLoader3=l;this.$BuddyListNubLoader4=m;this.$BuddyListNubLoader5=null;c("ifRequired")("ChatSidebar",c("emptyFunction"),function(){if(h())this.show();else this.load()}.bind(this));c("Arbiter").subscribe("chat/option-changed",function(n,o){if(this.$BuddyListNubLoader7())if(o.name==="hide_buddylist"&&!o.value)this.show()}.bind(this));c("KeyEventController").registerKey("q",function(event){if(this.$BuddyListNubLoader7()){this.show();event.prevent()}}.bind(this));c("ChatSidebarStore").addListener(function(){if(c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST)if(h())this.show();else this.load()}.bind(this));if(c("ChatSidebarStore").getVisibleType()===c("SidebarType").BUDDYLIST)if(h())this.show();else this.load()}i.prototype.load=function(){if(!this.$BuddyListNubLoader6){this.$BuddyListNubLoader6=c("JSResource")("BuddyListNub").__setRef("BuddyListNubLoader").load();this.$BuddyListNubLoader6.done(function(j){this.$BuddyListNubLoader5=new j(this.$BuddyListNubLoader1,this.$BuddyListNubLoader2,this.$BuddyListNubLoader3,this.$BuddyListNubLoader4)}.bind(this))}return this.$BuddyListNubLoader6};i.prototype.show=function(){return this.load().then(function(j){this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.onButtonClick();this.$BuddyListNubLoader5&&this.$BuddyListNubLoader5.show()}.bind(this))};i.prototype.$BuddyListNubLoader7=function(){return!this.$BuddyListNubLoader5&&!this.$BuddyListNubLoader6};f.exports=i}),null);
__d("MercuryFolders",["MercuryFoldersConfig","MessagingTag"],(function a(b,c,d,e,f,g){__p&&__p();var h=[c("MessagingTag").INBOX,c("MessagingTag").PENDING,c("MessagingTag").OTHER,c("MessagingTag").ACTION_ARCHIVED],i={getSupportedFolders:function j(){return h.filter(function(k){if(k===c("MessagingTag").PENDING)return!c("MercuryFoldersConfig").hide_message_filtered;else if(k===c("MessagingTag").OTHER)return!c("MercuryFoldersConfig").hide_message_requests;return true}).concat()},getFromMeta:function j(k){var l=k.folder;if(k.is_archived)l=c("MessagingTag").ACTION_ARCHIVED;return l}};f.exports=i}),null);
__d("MercuryUnreadState",["invariant","MercuryFolders","LogHistory","KeyedCallbackManager","MercuryActionType","MercuryConfig","MercuryDispatcher","MercuryGlobalActionType","MercurySingletonProvider","MercuryThreadlistConstants","MercuryThreadIDMap","MessagingTag","MercuryServerRequests","MercuryThreadInformer","MercuryThreads","createObjectFrom"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=(c("MercuryFolders").getSupportedFolders()||[]).filter(function(p){return p!==c("MessagingTag").ACTION_ARCHIVED}),j="unread_thread_hash",k="unseen_thread_list",l=c("MercuryThreadlistConstants").MAX_UNREAD_COUNT,m=c("LogHistory").getInstance("mercury_unread_state");n.getForFBID=function(p){return o.getForFBID(p)};n.get=function(){return o.get()};function n(p){__p&&__p();this.$MercuryUnreadState1=p;this.$MercuryUnreadState2=c("MercuryServerRequests").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState3=c("MercuryThreadIDMap").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState4=c("MercuryThreadInformer").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState5=c("MercuryThreads").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState6=c("MercuryDispatcher").getForFBID(this.$MercuryUnreadState1);this.$MercuryUnreadState7={};this.$MercuryUnreadState8={};this.$MercuryUnreadState9={};this.$MercuryUnreadState10={};this.$MercuryUnreadState11={};i.forEach(function(q){this.$MercuryUnreadState9[q]=0;this.$MercuryUnreadState10[q]=false;this.$MercuryUnreadState11[q]=new(c("KeyedCallbackManager"))()}.bind(this));this.$MercuryUnreadState6.subscribe("update-unread",this.$MercuryUnreadState12.bind(this));this.$MercuryUnreadState6.subscribe("update-thread-ids",function(q,r){this.$MercuryUnreadState13(r)}.bind(this))}n.prototype.getUnreadCount=function(p){if(this.exceedsMaxCount(p)){m.error("unguarded_unread_count_fetch","{}");return 0}return this.$MercuryUnreadState14(p)};n.prototype.exceedsMaxCount=function(p){return this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>l};n.prototype.markFolderAsRead=function(p){if(this.$MercuryUnreadState10[p]||this.$MercuryUnreadState14(p)>0)this.$MercuryUnreadState2.markFolderAsRead(p);if(c("MercuryConfig").MessengerInboxRequests&&p===c("MessagingTag").INBOX&&this.$MercuryUnreadState14(c("MessagingTag").PENDING)>0)this.$MercuryUnreadState2.markFolderAsRead(c("MessagingTag").PENDING)};n.prototype.getIsThreadUnread=function(p,q){var r=q||c("MessagingTag").INBOX,s=this.$MercuryUnreadState15(r);return!!(s&&s[p])};n.prototype.$MercuryUnreadState16=function(p,q){this.$MercuryUnreadState11[p].setResource(j,q);this.$MercuryUnreadState11[p].setResource(k,Object.keys(q))};n.prototype.$MercuryUnreadState17=function(p,q){var r=this.$MercuryUnreadState11[p].executeOrEnqueue(j,q),s=this.$MercuryUnreadState11[p].getUnavailableResources(r);if(s.length)this.$MercuryUnreadState2.fetchUnreadThreadIDs(p)};n.prototype.$MercuryUnreadState15=function(p){return this.$MercuryUnreadState11[p].getResource(j)};n.prototype.$MercuryUnreadState14=function(p){var q=this.$MercuryUnreadState11[p].getResource(k);if(q)return q.length;else return this.$MercuryUnreadState9[p]};n.prototype.$MercuryUnreadState12=function(p,q){__p&&__p();var r=void 0;(q.unread_thread_fbids||[]).forEach(function(s){__p&&__p();r=s.folder;if(!this.$MercuryUnreadState18(r))return;var t=s.thread_fbids||[];t=t.concat(s.other_user_fbids||[]);var u=this.$MercuryUnreadState19(t);this.$MercuryUnreadState16(r,c("createObjectFrom")(u,true));if(u.length>l)this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState4.updatedUnreadState()}.bind(this));(q.message_counts||[]).forEach(function(s){__p&&__p();if(s.unread_count===undefined)return;r=s.folder;if(s.unread_count>l){this.$MercuryUnreadState10[r]=true;this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}else{this.$MercuryUnreadState9[r]=s.unread_count;if(this.$MercuryUnreadState9[r]===0)this.$MercuryUnreadState16(r,{});this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this));(q.global_actions||[]).forEach(function(s){if(s.action_type===c("MercuryGlobalActionType").MARK_ALL_READ)this.$MercuryUnreadState20(s.folder,s.timestamp)}.bind(this));(q.actions||[]).forEach(function(s){__p&&__p();var t=c("MercuryActionType"),u=s.other_user_fbid?s.other_user_fbid:s.thread_fbid,v=s.thread_id?s.thread_id:u;if(s.action_type==t.DELETE_THREAD)i.forEach(function(x){this.$MercuryUnreadState21(x,v)}.bind(this));else if(s.action_type==t.CHANGE_ARCHIVED_STATUS||s.action_type==t.CHANGE_FOLDER){var w=this.$MercuryUnreadState5.getThreadMetaNow(s.thread_id);!!w||h(0);r=c("MercuryFolders").getFromMeta(w);if(this.$MercuryUnreadState18(r)&&w.unread_count>0)this.$MercuryUnreadState22(r,v);i.forEach(function(x){if(x!=r)this.$MercuryUnreadState21(x,v)}.bind(this))}else{r=this.$MercuryUnreadState23(s);if(!this.$MercuryUnreadState18(r))return;if(s.action_type==t.CHANGE_READ_STATUS)if(s.mark_as_read)this.$MercuryUnreadState21(r,v,s.timestamp);else this.$MercuryUnreadState22(r,v,s.timestamp);else if(s.action_type==t.USER_GENERATED_MESSAGE||s.action_type==t.LOG_MESSAGE)if(s.is_unread)this.$MercuryUnreadState22(r,v,s.timestamp)}}.bind(this))};n.prototype.$MercuryUnreadState22=function(p,q,r){if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){var t=this.$MercuryUnreadState7[p]||0,u=this.$MercuryUnreadState8[q]||0,v=r||Number.POSITIVE_INFINITY;if(v>=t&&v>=u&&!s[q]){s[q]=r||0;this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState21=function(p,q,r){__p&&__p();if(this.$MercuryUnreadState10[p])return;this.$MercuryUnreadState17(p,function(s){__p&&__p();if(r){var t=this.$MercuryUnreadState8[q];if(!t||t<r)this.$MercuryUnreadState8[q]=r}var u=s[q];if(r&&typeof u=="number"&&r<u)return;if(q in s){delete s[q];this.$MercuryUnreadState16(p,s);this.$MercuryUnreadState4.updatedUnreadState()}}.bind(this))};n.prototype.$MercuryUnreadState20=function(p,q){this.$MercuryUnreadState10[p]=false;this.$MercuryUnreadState16(p,{});this.$MercuryUnreadState7[p]=Math.max(this.$MercuryUnreadState7[p]||0,q||0);this.$MercuryUnreadState4.updatedUnreadState()};n.prototype.$MercuryUnreadState19=function(p){return p.map(this.$MercuryUnreadState3.convertThreadIDIfAvailable,this.$MercuryUnreadState3)};n.prototype.$MercuryUnreadState13=function(p){__p&&__p();i.forEach(function(q){__p&&__p();var r=this.$MercuryUnreadState15(q);if(!r)return;for(var s in p){var t=p[s];if(r[s]){r[t]=r[s];delete r[s]}}this.$MercuryUnreadState16(q,r)}.bind(this))};n.prototype.$MercuryUnreadState23=function(p){var q=p.thread_id?this.$MercuryUnreadState5.getThreadMetaNow(p.thread_id):null;return q?c("MercuryFolders").getFromMeta(q):p.folder?p.folder:""};n.prototype.$MercuryUnreadState18=function(p){return!!p&&i.includes(p)};var o=new(c("MercurySingletonProvider"))(n);f.exports=n}),null);
__d("isInFocusMode",["WorkFocusModeController"],(function a(b,c,d,e,f,g){var h=c("WorkFocusModeController").WorkFocusMode,i=function i(j){return!!(h&&h.currentViewerInFocusMode(j))};f.exports=i}),null);
__d("ChatUnreadCount",["ChatConfig","ChatDispatcher","ChatUnreadCountActionTypes","Map","MercuryIDs","MercurySingletonProvider","MercuryThreadInformer","MercuryThreads","MercuryUnreadState","isInFocusMode"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();h.getForFBID=function(j){return i.getForFBID(j)};h.get=function(){return i.get()};function h(j){this.$ChatUnreadCount1=j;this.$ChatUnreadCount2=c("MercuryThreadInformer").getForFBID(j);this.$ChatUnreadCount3=c("MercuryThreads").getForFBID(j);this.$ChatUnreadCount4=new(c("Map"))();this.$ChatUnreadCount5=c("MercuryUnreadState").getForFBID(j);this.setupSubscriptions()}h.prototype.getUnreadCountForUID=function(j){__p&&__p();if(!j)return null;var k=c("MercuryIDs").getThreadIDFromUserID(j);if(!this.$ChatUnreadCount5.getIsThreadUnread(k)&&!c("ChatConfig").get("unread_count_fix")){this.$ChatUnreadCount4["delete"](j);return 0}var l=this.$ChatUnreadCount3.getOrFetch(k),m=l&&l.unread_count;if(!m&&c("ChatConfig").get("unread_count_fix"))this.$ChatUnreadCount4["delete"](j);else this.$ChatUnreadCount4.set(j,m);if(c("isInFocusMode")(k))return 0;return m};h.prototype.setupSubscriptions=function(){__p&&__p();this.$ChatUnreadCount2.subscribe("threads-updated",function(j,k){var l=Object.keys(k).some(function(m){var n=c("MercuryIDs").getUserIDFromThreadID(m);if(!n)return false;var o=this.getUnreadCountForUID(n),p=this.$ChatUnreadCount4.get(n)||0;return o!==p}.bind(this));if(l)c("ChatDispatcher").dispatch({type:c("ChatUnreadCountActionTypes").COUNT_UPDATED})}.bind(this));this.$ChatUnreadCount2.subscribe("unread-updated",function(){return c("ChatDispatcher").dispatch({type:c("ChatUnreadCountActionTypes").COUNT_UPDATED})})};var i=new(c("MercurySingletonProvider"))(h);f.exports=h}),null);
__d("NotificationBeeperConst",["keyMirror"],(function a(b,c,d,e,f,g){var h={IDLE_DELAY:1e4,ACTIVE_DELAY_LONG:4e3,FADE_OUT_LENGTH:1500,BeepStates:c("keyMirror")({PENDING:true,RENDERED:true,READY_TO_HIDE:true,FADING_OUT:true})};f.exports=h}),null);
__d("NotificationBeeperItemCloseButton.react",["cx","fbt","React","XUIAbstractGlyphButton.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;l.prototype.render=function(){"use strict";var m=i._("Close");return c("React").createElement(c("XUIAbstractGlyphButton.react"),babelHelpers["extends"]({},this.props,{className:"_3soc",title:m,label:m,labelIsHidden:true}))};function l(){"use strict";j.apply(this,arguments)}f.exports=l}),null);
__d("XLiveVideoLoadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/live/video/load/",{video_id:{type:"FBID",required:true}})}),null);
__d("NotificationListRendererUtils",["AsyncRequest","Bootloader","NotificationURI","PageTransitions","URI","VideoChainingCaller","XLiveVideoLoadController","idx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=10;function i(event,m){c("Bootloader").loadModules(["FBStoriesLiveNotificationHandler"],function(n){n.renderLiveStory(m)},"NotificationListRendererUtils")}function j(event,m,n){c("Bootloader").loadModules(["TahoeController"],function(o){var p,q=c("NotificationURI").localize(new(c("URI"))(n.url)),r=m.video_channel_caller;o.openFromVideoLink(new(c("URI"))(q),{channelID:m.video_channel_id,caller:r?(p=c("VideoChainingCaller"))!=null?p[r]:p:null})},"NotificationListRendererUtils")}function k(event,m,n){c("Bootloader").loadModules(["VideoChannelHandleLink"],function(o){o.openChannel(m.video_channel_id,m.video_channel_caller,m.video_id);var p=new(c("URI"))(c("NotificationURI").localize(new(c("URI"))(n.url))),q=function q(p){if(p.getQueryData().ref!=="notif_channel")return false;c("PageTransitions").transitionComplete();return true};c("PageTransitions").registerHandler(q,h);c("PageTransitions").go(new(c("URI"))(p.getPath()).addQueryData("ref","notif_channel"))},"NotificationListRendererUtils")}var l={openNotification:function m(event,n){__p&&__p();var o=n.renderer_data;if(o==null)return;if(!l.isStoryOnlyLiveVideoNotification(n)&&(event.metaKey||event.ctrlKey||event.button===1))return;if(o.__typename==="LiveVideoNotificationRendererData"){event.preventDefault();var p=c("XLiveVideoLoadController").getURIBuilder().setFBID("video_id",o.video_id).getURI(),q=new(c("AsyncRequest"))(p).setHandler(function(r){if(r.payload)l.openNotificationInSurface(event,n);else c("PageTransitions").go(n.url)});q.send()}},openNotificationInSurface:function m(event,n){var o=n.renderer_data;if(o==null)return;if(o.bucket_data)i(event,o);else if(o.can_render_in_tahoe)j(event,o,n);else if(!o.can_render_in_tahoe&&o.video_channel_id)k(event,o,n)},isStoryOnlyLiveVideoNotification:function m(n){var o=n.renderer_data;if(o==null)return false;return o.__typename==="LiveVideoNotificationRendererData"&&!!o.bucket_data}};f.exports=l}),null);
__d("RelationshipDelightTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$RelationshipDelightTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:RelationshipDelightLoggerConfig",this.$RelationshipDelightTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$RelationshipDelightTypedLogger1={};return this};h.prototype.updateData=function(j){this.$RelationshipDelightTypedLogger1=babelHelpers["extends"]({},this.$RelationshipDelightTypedLogger1,j);return this};h.prototype.setAlertID=function(j){this.$RelationshipDelightTypedLogger1.alert_id=j;return this};h.prototype.setEvent=function(j){this.$RelationshipDelightTypedLogger1.event=j;return this};h.prototype.setMetadata=function(j){this.$RelationshipDelightTypedLogger1.metadata=j;return this};h.prototype.setVC=function(j){this.$RelationshipDelightTypedLogger1.vc=j;return this};var i={alert_id:true,event:true,metadata:true,vc:true};f.exports=h}),null);
__d("RelationshipDelightUtils",["NotificationRelationshipDelightsConfig","QE2Logger","RelationshipDelightTypedLogger"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={};function i(n){var o=n.eligible_buckets;return!!o&&o.indexOf("SO_NOTIFICATIONS")!==-1}function j(){c("QE2Logger").logExposureForUser(c("NotificationRelationshipDelightsConfig").universeName)}function k(n){var o=c("NotificationRelationshipDelightsConfig").shouldDecorateNotificationWithHearts,p=c("NotificationRelationshipDelightsConfig").shouldLogExposureForNotification;if(i(n)===false)return false;if(p)j();return o===true}function l(n,event,o){var p=event+"-"+n;if(h[p])return;h[p]=true;var q=new(c("RelationshipDelightTypedLogger"))().setEvent(event).setAlertID(n);if(o)q.setMetadata(JSON.stringify(o));q.log()}var m={shouldHeartBadge:function n(o){var p=c("NotificationRelationshipDelightsConfig").shouldDecorateBadgeWithHearts,q=c("NotificationRelationshipDelightsConfig").shouldLogExposureForBadge;if(i(o)===false)return false;if(q)j();return p===true},shouldHeartBeeper:k,shouldHeartNotification:k,logNotificationAnimation:function n(o,p,q){l(o,"notification_animated",{animation:p,rowIndex:q})},logBeeperAnimation:function n(o){l(o,"beeper_animated")},logBadgeAnimation:function n(o){l(o,"badge_animated")}};f.exports=m}),null);
__d("NotificationBeeperItemContents.react",["cx","Animation","AsyncRequest","BootloadedComponent.react","Bootloader","FBProfilePhotoShadow.react","Image.react","ImageBlock.react","JSResource","NotificationBeeperItemCloseButton.react","NotificationInterpolator","NotificationListRendererUtils","NotificationURI","NotificationUserActions","React","ReactDOM","RelationshipDelightUtils","TextWithEntities.react","Timestamp.react","URI"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=j.constructor).call.apply(l,[this].concat(o)),this.isLiveVideo=null,this.$NotificationBeeperItemContents2=function(q){__p&&__p();this.$NotificationBeeperItemContents1();this.props.onHide();if(q.button===1||q.altKey||q.ctrlKey||q.metaKey||q.shiftKey)return;var r=this.props.notification;c("NotificationListRendererUtils").openNotification(q,r);if(q.isDefaultPrevented()===true)return;var s=r.primerAttributes;if(s&&(s.rel==="async"||s.rel==="async-post")){var t=new(c("AsyncRequest"))(s.ajaxify||r.url);if(s.rel==="async-post")t.setMethod("POST");t.send();q.preventDefault()}else if(s&&s.rel==="theater"){q.persist();c("Bootloader").loadModules(["PhotoSnowlift"],function(u){u.bootstrap(s.ajaxify||r.url,q.currentTarget)},"NotificationBeeperItemContents.react");q.preventDefault()}else if(s&&(s.rel==="dialog"||s.rel==="dialog-post")){c("Bootloader").loadModules(["AsyncDialog"],function(u){u.bootstrap(s.ajaxify||r.url,q.currentTarget,"dialog")},"NotificationBeeperItemContents.react");q.preventDefault()}}.bind(this),this.$NotificationBeeperItemContents3=function(){this.$NotificationBeeperItemContents1();this.props.onHide()}.bind(this),m}k.prototype.$NotificationBeeperItemContents1=function(){"use strict";c("NotificationUserActions").markNotificationsAsRead([this.props.notification.alert_id])};k.prototype.$NotificationBeeperItemContents4=function(){"use strict";new(c("Animation"))(c("ReactDOM").findDOMNode(this.refs.inner)).from("opacity","0").to("opacity","1").duration(200).go()};k.prototype.$NotificationBeeperItemContents5=function(){"use strict";var l=this.$NotificationBeeperItemContents6(),m=JSON.parse(l);return m.content_id};k.prototype.$NotificationBeeperItemContents7=function(){"use strict";if(this.isLiveVideo===null){var l=this.$NotificationBeeperItemContents6();this.isLiveVideo=l.indexOf("live_video")!==-1}return!!this.isLiveVideo};k.prototype.$NotificationBeeperItemContents6=function(){"use strict";return this.props.notification.tracking||"{}"};k.prototype.$NotificationBeeperItemContents8=function(){"use strict";var l=this.props.notification,m=c("RelationshipDelightUtils").shouldHeartBeeper(l);if(!m)return null;c("RelationshipDelightUtils").logBeeperAnimation(l.alert_id);return c("React").createElement("div",{className:"_5_xp"},c("React").createElement(c("BootloadedComponent.react"),{bootloadPlaceholder:c("React").createElement("div",null),bootloadLoader:c("JSResource")("RelationshipDelightsActorAnimation.react").__setRef("NotificationBeeperItemContents.react")}))};k.prototype.componentDidMount=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id);if(this.$NotificationBeeperItemContents7())c("Bootloader").loadModules(["VideoPlayerMetaData","PhotoSnowliftVideoNode"],function(l,m){var n=this.$NotificationBeeperItemContents5();if(n)l.genVideoData(n)}.bind(this),"NotificationBeeperItemContents.react")};k.prototype.componentDidUpdate=function(l){"use strict";if(l.notification.alert_id!==this.props.notification.alert_id||l.notification.creation_time!==this.props.notification.creation_time){this.$NotificationBeeperItemContents4();this.props.onReadyToHide(this.props.notification.alert_id)}};k.prototype.render=function(){"use strict";var l=this.props.notification,m=l.thumbnail?l.thumbnail.uri:null,n=l.icon?l.icon.uri:null,o=c("NotificationURI").localize(new(c("URI"))(l.url));return c("React").createElement("div",{ref:"inner",className:this.props.className},c("React").createElement(c("NotificationBeeperItemCloseButton.react"),{onClick:this.$NotificationBeeperItemContents3}),c("React").createElement("a",{href:o,onClick:this.$NotificationBeeperItemContents2,className:"_3soi"},c("React").createElement(c("ImageBlock.react"),{className:"_3soj",spacing:"medium"},c("React").createElement(c("FBProfilePhotoShadow.react"),{className:"_2yt7"},c("React").createElement(c("Image.react"),{src:m,className:"_3sok"+(!m?" hidden_elem":"")})),c("React").createElement("div",{className:"_3sol"},c("React").createElement(c("TextWithEntities.react"),{renderEmoticons:true,renderEmoji:true,interpolator:c("NotificationInterpolator"),ranges:l.title.ranges,aggregatedranges:l.title.aggregated_ranges,text:l.title.text}),c("React").createElement(c("ImageBlock.react"),{className:"_3som"},c("React").createElement(c("Image.react"),{className:"_1x8t"+(!n?" hidden_elem":""),src:n}),c("React").createElement(c("Timestamp.react"),{time:l.timestamp.time,text:l.timestamp.text,verbose:l.timestamp.verbose})))),this.$NotificationBeeperItemContents8()))};f.exports=k}),null);
__d("NotificationBeeperItem.react",["cx","CSSFade","NotificationBeeperConst","NotificationBeeperItemContents.react","NotificationBeeperItemRenderersList","React","ReactDOM","Style","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("NotificationBeeperConst").FADE_OUT_LENGTH;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={encounteredException:false,fadedIn:false,hidden:false},this.$NotificationBeeperItem3=function(){this.setState({hidden:true})}.bind(this),n}l.prototype.componentDidCatch=function(){"use strict";this.props.onReadyToHide(this.props.notification.alert_id);this.setState(function(m){return babelHelpers["extends"]({},m,{encounteredException:true})})};l.prototype.componentDidMount=function(){"use strict";c("setTimeoutAcrossTransitions")(function(){this.setState({fadedIn:true})}.bind(this),50);this.props.onInserted(this.props.notification.alert_id)};l.prototype.componentWillUnmount=function(){"use strict";if(this.$NotificationBeeperItem1)this.$NotificationBeeperItem1.cancel()};l.prototype.render=function(){"use strict";if(this.state.encounteredException)return null;var m=this.props.notification,n=m.renderer_data,o=m.tracking,p=this.$NotificationBeeperItem4(n);return c("React").createElement("li",{className:this.state.hidden?"hidden_elem":"",ref:function(q){return this.$NotificationBeeperItem2=q}.bind(this),"data-gt":o},c("React").createElement(p,{className:"_3sod"+(this.state.fadedIn?" _3soe":""),notification:this.props.notification,onHide:this.$NotificationBeeperItem3,onReadyToHide:this.props.onReadyToHide,onPreventHide:this.props.onPreventHide}))};l.prototype.componentDidUpdate=function(m,n,o){"use strict";__p&&__p();if(!this.$NotificationBeeperItem2)return;var p=c("ReactDOM").findDOMNode(this.$NotificationBeeperItem2);if(!p)return;if(this.props.fadingOut){this.$NotificationBeeperItem1=c("CSSFade").hide(p,{callback:this.$NotificationBeeperItem3,duration:k});p.style.transitionDuration="0ms"}else{if(this.$NotificationBeeperItem1){this.$NotificationBeeperItem1.cancel();this.$NotificationBeeperItem1=undefined}c("Style").set(p,"opacity","1")}};l.prototype.$NotificationBeeperItem4=function(m){"use strict";if(m&&m.__typename==="LiveVideoNotificationRendererData"&&m.video_id==null)return c("NotificationBeeperItemContents.react");return c("NotificationBeeperItemRenderersList")[m&&m.__typename]||c("NotificationBeeperItemContents.react")};f.exports=l}),null);
__d("NotificationImpressions",["AsyncSignal","NotificationTokens","URI"],(function a(b,c,d,e,f,g){var h="/ajax/notifications/impression.php";function i(j,k){var l={ref:k};c("NotificationTokens").untokenizeIDs(j).forEach(function(m,n){l["alert_ids["+n+"]"]=m});new(c("AsyncSignal"))(new(c("URI"))(h).getQualifiedURI().toString(),l).send()}f.exports={log:i}}),null);
__d("SoundPlayer",["Map","URI","createArrayFromMixed"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=new(c("Map"))();function i(l){var m=new(c("URI"))(l);return m.getDomain()?l:new(c("URI"))(window.location.href).setPath(m.getPath()).toString()}function j(l){var m=new(c("URI"))(l).getPath();if(/\.mp3$/.test(m))return"audio/mpeg";if(/\.og[ga]$/.test(m))return"audio/ogg";return""}var k={preload:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q;if(h.has(r))return;var s=document.createElement("audio");if(!s||!s.canPlayType||!s.canPlayType(j(r)))continue;s.preload="auto";s.src=i(r);document.body&&document.body.appendChild(s);h.set(r,s);return}},play:function l(m){__p&&__p();var n=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];for(var o=c("createArrayFromMixed")(m),p=Array.isArray(o),q=0,o=p?o:o[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var r;if(p){if(q>=o.length)break;r=o[q++]}else{q=o.next();if(q.done)break;r=q.value}var s=r;if(!h.has(s))k.preload(s);var t=h.get(s);if(!t)continue;if(n.loop)t.setAttribute("loop","");if(n.volume)t.volume=n.volume;t.play();return}},pause:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();return}}},stop:function l(m){__p&&__p();for(var n=c("createArrayFromMixed")(m),o=Array.isArray(n),p=0,n=o?n:n[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var q;if(o){if(p>=n.length)break;q=n[p++]}else{p=n.next();if(p.done)break;q=p.value}var r=q,s=h.get(r);if(s){s.pause();s.removeAttribute("src");s.src=i(r);return}}}};f.exports=k}),null);
__d("SoundSynchronizer",["SoundPlayer","WebStorage","createArrayFromMixed"],(function a(b,c,d,e,f,g){__p&&__p();var h="fb_sounds_playing3";function i(){__p&&__p();var m=c("WebStorage").getLocalStorage();if(m)try{var n=m[h];if(n){n=JSON.parse(n);if(Array.isArray(n))return n}}catch(o){}return[]}function j(m){var n=c("WebStorage").getLocalStorage();if(n){var o=i();o.push(m);while(o.length>5)o.shift();try{n[h]=JSON.stringify(o)}catch(p){}}}function k(m){return i().some(function(n){return n===m})}var l={play:function m(n,o,p){n=c("createArrayFromMixed")(n);o=o||n[0]+Math.floor(Date.now()/1e3);if(k(o))return;c("SoundPlayer").play(n,{loop:!!p});j(o)},isSupported:function m(){return!!c("WebStorage").getLocalStorage()}};f.exports=l}),null);
__d("SoundRPC",["Event","FBJSON","SoundSynchronizer"],(function a(b,c,d,e,f,g){__p&&__p();function h(j,k,l){c("SoundSynchronizer").play(j,k,l)}var i={playLocal:h,playRemote:function j(k,l,m,n){var o={name:"SoundRPC",data:{paths:l,sync:m,loop:n}};k.postMessage(c("FBJSON").stringify(o),"*")},supportsRPC:function j(){return!!window.postMessage},_listen:function j(){c("Event").listen(window,"message",function(k){if(!/\.facebook.com$/.test(k.origin))return;var l={};try{l=c("FBJSON").parse(k.data)}catch(m){}if(l.name==="SoundRPC")h(l.data.paths,l.data.sync,l.data.loop)})}};f.exports=i}),null);
__d("Sound",["SoundInitialData","SoundPlayer","SoundRPC","SoundSynchronizer","URI","UserAgent_DEPRECATED","Visibility","isFacebookURI"],(function a(b,c,d,e,f,g){__p&&__p();var h=null,i=false,j={init:function n(o){},play:function n(o,p,q){if(h)c("SoundRPC").playRemote(h.contentWindow,o,p,false);else c("SoundRPC").playLocal(o,p,q);i=true},hasPlayedSoundBefore:function n(){return i},playOnlyIfImmediate:function n(o,p,q){if(!i&&c("Visibility").isHidden())return;this.play(o,p,q)},stop:function n(o){if(!h)c("SoundPlayer").stop(o)}},k=new(c("URI"))(location.href);if(k.getSubdomain()&&k.getSubdomain()!=="www")k.setSubdomain("www");var l=k.getDomain();function m(){if(c("UserAgent_DEPRECATED").ie()<9)return false;if(c("SoundInitialData").RPC_DISABLED)return false;return c("SoundSynchronizer").isSupported()&&c("SoundRPC").supportsRPC()}if(c("isFacebookURI")(k)&&location.host!==l&&m()){h=document.createElement("iframe");h.setAttribute("src","//"+l+"/sound_iframe.php");h.style.display="none";document.body.appendChild(h)}f.exports=j}),null);
__d("NotificationSound",["Sound"],(function a(b,c,d,e,f,g){__p&&__p();var h=5e3;c("Sound").init(["audio/mpeg"]);function i(j){this._soundPath=j;this._lastPlayed=0}Object.assign(i.prototype,{play:function j(k){if(!this._soundPath)return;var l=Date.now();if(l-this._lastPlayed<h)return;this._lastPlayed=l;c("Sound").playOnlyIfImmediate(this._soundPath,k)}});f.exports=i}),null);
__d("NotificationBeeper.react",["cx","Arbiter","BusinessUserConf","ChannelConstants","FacebookWebNotificationsSubscription","NotificationBeeperConst","NotificationBeeperItem.react","NotificationConstants","NotificationImpressions","NotificationSound","NotificationUpdates","NotificationUserActions","NotifTestIDs","React","SubscriptionsHandler","WorkFocusModeController","gkx","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("WorkFocusModeController").WorkFocusMode,l=c("NotificationBeeperConst").ACTIVE_DELAY_LONG,m=c("NotificationBeeperConst").BeepStates,n=c("NotificationBeeperConst").FADE_OUT_LENGTH,o=c("NotificationBeeperConst").IDLE_DELAY,p="beeper",q=c("NotificationConstants").PayloadSourceType,r=q.LIVE_SEND,s=q.OTHER_APPLICATION,t=q.CLIENT;i=babelHelpers.inherits(u,c("React").Component);j=i&&i.prototype;function u(){__p&&__p();var v,w;"use strict";for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=j.constructor).call.apply(v,[this].concat(y)),this.state={beeps:{},fading:false,hovering:false,soundEnabled:this.props.soundEnabled},this.onMouseEnter=function(){this.$NotificationBeeper2&&clearTimeout(this.$NotificationBeeper2);var A=[],B=this.state.beeps;Object.keys(B).forEach(function(C){if(B[C].state!=m.PENDING)A.push(C);else B[C].state=m.RENDERED});c("NotificationUserActions").markNotificationsAsSeen(A);this.setState({hovering:true,fading:false,beeps:B})}.bind(this),this.onMouseLeave=function(){this.$NotificationBeeper5(l);this.setState({hovering:false})}.bind(this),this.$NotificationBeeper6=function(A){if(!this.state.hovering)this.$NotificationBeeper5();if(this.state.soundEnabled&&this.state.beeps[A].shouldPlaySound){if(!this.$NotificationBeeper3)this.$NotificationBeeper3=new(c("NotificationSound"))(this.props.soundPath);this.$NotificationBeeper3.play(A)}if(this.props.shouldLogImpressions)c("NotificationImpressions").log([A],p)}.bind(this),this.onReadyToHide=function(A,B){this.setState(function(C){var D=babelHelpers["extends"]({},C.beeps);D[A]=babelHelpers["extends"]({},D[A],{state:m.READY_TO_HIDE});return babelHelpers["extends"]({},C,{beeps:D})});if(!this.$NotificationBeeper2)this.$NotificationBeeper5(B)}.bind(this),this.$NotificationBeeper8=function(A){this.setState(function(B){var C=babelHelpers["extends"]({},B.beeps);C[A]=babelHelpers["extends"]({},C[A],{state:m.RENDERED});return babelHelpers["extends"]({},B,{beeps:C})})}.bind(this),this.$NotificationBeeper7=function(){this.$NotificationBeeper2=null;this.setState(function(A){var B=babelHelpers["extends"]({},A.beeps);Object.keys(B).forEach(function(C){if(B[C].state==m.READY_TO_HIDE)B[C]=babelHelpers["extends"]({},B[C],{state:m.FADING_OUT})});return babelHelpers["extends"]({},A,{beeps:B,fading:true})});c("setTimeoutAcrossTransitions")(c("shield")(this.$NotificationBeeper9,this),n)}.bind(this),this.$NotificationBeeper9=function(){__p&&__p();if(!this.state.fading)return;this.setState(function(A){var B=babelHelpers["extends"]({},A.beeps);Object.keys(B).forEach(function(C){if(B[C].state==m.FADING_OUT)delete B[C]});return babelHelpers["extends"]({},A,{beeps:B,fading:false})});c("setTimeoutAcrossTransitions")(function(){this.setState(function(A){var B=babelHelpers["extends"]({},A.beeps);Object.keys(B).forEach(function(C){if(B[C].state==m.PENDING)B[C]=babelHelpers["extends"]({},B[C],{state:m.RENDERED})});return babelHelpers["extends"]({},A,{beeps:B})})}.bind(this))}.bind(this),w}u.prototype.componentWillMount=function(){"use strict";__p&&__p();var v=c("BusinessUserConf").businessUserID==null&&c("gkx")("AT4A6ZMUIyU9Lv9GalY23GUzOGmhCdrjDTnIRMBXKwTQ3IRz_6KrOYxhP-poHdLcJCp6jBr4hhCVMbQFtZuX6f_Qcs16xJihqv1PHBcY14tXjQ"),w=new(c("SubscriptionsHandler"))();w.addSubscriptions(c("NotificationUpdates").subscribe("update-notifications",function(x,y){if(!v&&y.payloadsource===r||y.payloadsource===s||y.payloadsource===t){if(k&&k.currentViewerInFocusMode())return;var z=y.nodes;if(z&&z.length)this.handleBeepChanges(this.$NotificationBeeper4(z))}}.bind(this)),c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("notif_sound_pref_changed"),function(x,y){this.setState({soundEnabled:y.obj.enabled})}.bind(this)));if(v)w.addSubscriptions(c("FacebookWebNotificationsSubscription").subscribe({event:"NEW_BEEPER",callback:function(x){var y=x.notification,z=x.should_play_sound;if(k&&k.currentViewerInFocusMode())return;if(y!==null){var A;this.handleBeepChanges((A={},A[y.alert_id]={notification:y,shouldPlaySound:z},A))}}.bind(this)}));this.$NotificationBeeper1=w;c("Arbiter").inform("NotificationBeeper/mounted",null,c("Arbiter").BEHAVIOR_PERSISTENT)};u.prototype.componentWillUnmount=function(){"use strict";if(this.$NotificationBeeper1)this.$NotificationBeeper1.release();this.$NotificationBeeper1=null};u.prototype.$NotificationBeeper5=function(v){"use strict";this.$NotificationBeeper2&&clearTimeout(this.$NotificationBeeper2);this.$NotificationBeeper2=c("setTimeoutAcrossTransitions")(c("shield")(this.$NotificationBeeper7,this),v==null?o:v)};u.prototype.handleBeepChanges=function(v){"use strict";__p&&__p();var w=this.state.fading?m.PENDING:m.RENDERED,x=false,y=babelHelpers["extends"]({},this.state.beeps);Object.keys(v).reverse().forEach(function(z){var A=v[z],B=y[z];if(!B||B.notification.alert_id!==A.notification.alert_id||B.notification.creation_time!==A.notification.creation_time){if(B){x=true;delete y[z]}y[z]=babelHelpers["extends"]({},A,{state:w})}});if(x)this.$NotificationBeeper5();this.setState({beeps:y})};u.prototype.render=function(){"use strict";var v=this.state.beeps,w=[];Object.keys(v).reverse().forEach(function(z){var A=v[z];if(A.state==m.PENDING)return;w.push(c("React").createElement(c("NotificationBeeperItem.react"),{key:z,fadingOut:this.state.fading&&A.state==m.FADING_OUT,notification:A.notification,onInserted:this.$NotificationBeeper6,onReadyToHide:this.onReadyToHide,onPreventHide:this.$NotificationBeeper8}))}.bind(this),this);var x=w.length>0,y=(!x?"hidden_elem":"")+" _50d1";return c("React").createElement("ul",{ref:"container",className:y,"data-gt":this.props.tracking,"data-testid":c("NotifTestIDs").BEEPER_LIST,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},w)};u.prototype.$NotificationBeeper4=function(v){"use strict";return v.reduce(function(w,x){w[x.alert_id]={notification:x,shouldPlaySound:!!x.sound};return w},{})};f.exports=u}),null);
__d("NotificationBeeperContainer",["NotificationBeeper.react","React","ReactDOM"],(function a(b,c,d,e,f,g){var h={renderBeeper:function i(j,k){c("ReactDOM").render(c("React").createElement(c("NotificationBeeper.react"),j),k)}};f.exports=h}),null);
__d("LiveVideoBeeperItemContents.react",["BootloadOnRender.react","JSResource","LazyComponent.react","React"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.render=function(){return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("LiveVideoBeeperItemContentsImpl.react").__setRef("LiveVideoBeeperItemContents.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),babelHelpers["extends"]({},this.props,{ref:"itemContents"}))})};function j(){h.apply(this,arguments)}f.exports=j}),null);
__d("ConversationNubAddTabSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NOTIFICATION:"notification",PAGE_REFRESH:"page_refresh",USER_PIN:"user_pin",UNSEEN_NOTIFICATION:"unseen_notification",UNKNOWN:"unknown"})}),null);
__d("PinnedConversationTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$PinnedConversationTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:PinnedConversationLoggerConfig",this.$PinnedConversationTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$PinnedConversationTypedLogger1={};return this};h.prototype.updateData=function(j){this.$PinnedConversationTypedLogger1=babelHelpers["extends"]({},this.$PinnedConversationTypedLogger1,j);return this};h.prototype.setAttemptOpenOnInit=function(j){this.$PinnedConversationTypedLogger1.attempt_open_on_init=j;return this};h.prototype.setBadgeCount=function(j){this.$PinnedConversationTypedLogger1.badge_count=j;return this};h.prototype.setClientEventTimeMs=function(j){this.$PinnedConversationTypedLogger1.client_event_time_ms=j;return this};h.prototype.setEvent=function(j){this.$PinnedConversationTypedLogger1.event=j;return this};h.prototype.setFtID=function(j){this.$PinnedConversationTypedLogger1.ft_id=j;return this};h.prototype.setIsRaised=function(j){this.$PinnedConversationTypedLogger1.is_raised=j;return this};h.prototype.setNotificationType=function(j){this.$PinnedConversationTypedLogger1.notification_type=j;return this};h.prototype.setPageID=function(j){this.$PinnedConversationTypedLogger1.page_id=j;return this};h.prototype.setPromoteOnInit=function(j){this.$PinnedConversationTypedLogger1.promote_on_init=j;return this};h.prototype.setReason=function(j){this.$PinnedConversationTypedLogger1.reason=j;return this};h.prototype.setTabID=function(j){this.$PinnedConversationTypedLogger1.tab_id=j;return this};h.prototype.setTabSessionID=function(j){this.$PinnedConversationTypedLogger1.tab_session_id=j;return this};h.prototype.setTabsInDock=function(j){this.$PinnedConversationTypedLogger1.tabs_in_dock=j;return this};h.prototype.setTabsInMenu=function(j){this.$PinnedConversationTypedLogger1.tabs_in_menu=j;return this};h.prototype.setVC=function(j){this.$PinnedConversationTypedLogger1.vc=j;return this};h.prototype.setWindowInnerHeight=function(j){this.$PinnedConversationTypedLogger1.window_inner_height=j;return this};h.prototype.setWindowInnerWidth=function(j){this.$PinnedConversationTypedLogger1.window_inner_width=j;return this};var i={attempt_open_on_init:true,badge_count:true,client_event_time_ms:true,event:true,ft_id:true,is_raised:true,notification_type:true,page_id:true,promote_on_init:true,reason:true,tab_id:true,tab_session_id:true,tabs_in_dock:true,tabs_in_menu:true,vc:true,window_inner_height:true,window_inner_width:true};f.exports=h}),null);
__d("ConversationNubLogger",["Arbiter","ConversationNubAddCommentSubscription","ConversationNubTabsUpdateEventController","ConversationNubUtils","PinnedConversationTypedLogger","SubscriptionsHandler","UFIUIEvents"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$ConversationNubLogger1=new(c("SubscriptionsHandler"))();this.$ConversationNubLogger2=i;this.$ConversationNubLogger3();this.$ConversationNubLogger4()}h.prototype.$ConversationNubLogger4=function(){__p&&__p();this.$ConversationNubLogger1.addSubscriptions(c("ConversationNubAddCommentSubscription").subscribe(function(i){var j=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_add_comment");this.$ConversationNubLogger5(j,i)}.bind(this)));this.$ConversationNubLogger1.addSubscriptions(c("Arbiter").subscribe(c("UFIUIEvents").ReactionButtonClicked,function(i,j){var k=j.ft_id;if(!k)return;var l=this.$ConversationNubLogger2.getLoadedTabByFeedbackTarget(k);if(!l)return;var m=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_react_post");this.$ConversationNubLogger5(m,l)}.bind(this)))};h.prototype.$ConversationNubLogger3=function(){__p&&__p();this.$ConversationNubLogger1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubUtils").CLOSE_TAB_EVENT,function(i,j){var k=j.tabState,l=j.sessionID,m=j.reason,n=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_close").setReason(m);this.$ConversationNubLogger6(n,k,l)}.bind(this)));this.$ConversationNubLogger1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubUtils").UNPIN_FROM_HEADER_EVENT,function(i,j){var k=j.tab,l=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_hide");this.$ConversationNubLogger5(l,k)}.bind(this)));this.$ConversationNubLogger1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubTabsUpdateEventController").TAB_MAXIMIZED_BY_USER_EVENT,function(i,j){var k=j.tab,l=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_maximize");this.$ConversationNubLogger5(l,k)}.bind(this)));this.$ConversationNubLogger1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubTabsUpdateEventController").TAB_MINIMIZED_BY_USER_EVENT,function(i,j){var k=j.tab,l=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_minimize");this.$ConversationNubLogger5(l,k)}.bind(this)));this.$ConversationNubLogger1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubUtils").OPEN_PERMALINK_FROM_HEADER_EVENT,function(i,j){var k=j.tab,l=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_open_permalink_from_header");this.$ConversationNubLogger5(l,k)}.bind(this)))};h.prototype.$ConversationNubLogger5=function(i,j){i.setTabID(j.getTabID()).setPageID(j.getPageID()).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$ConversationNubLogger2.getNumMenuTabs()).setTabsInDock(this.$ConversationNubLogger2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight);i.setFtID(j.getFeedbackTargetID()).setIsRaised(j.getIsRaised()).setBadgeCount(j.getBadgeCount()).setTabSessionID(j.getSessionID());var k=j.getNotificationType();if(k)i.setNotificationType(k);i.log()};h.prototype.$ConversationNubLogger6=function(i,j,k){i.setTabID(j.tabID).setClientEventTimeMs(Date.now()).setTabsInMenu(this.$ConversationNubLogger2.getNumMenuTabs()).setTabsInDock(this.$ConversationNubLogger2.getNumDockTabs()).setWindowInnerWidth(window.innerWidth).setWindowInnerHeight(window.innerHeight);i.setFtID(j.ftID).setIsRaised(j.isTabRaised).setBadgeCount(j.badgeCount).setTabSessionID(k);if(j.notificationType)i.setNotificationType(j.notificationType);i.log()};h.subscriptionTriggered=function(i){new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_subscription_triggered").setReason(i).log()};h.prototype.addTab=function(i,j){var k=new(c("PinnedConversationTypedLogger"))().setEvent("pinned_conversation_tab_add").setReason(j);this.$ConversationNubLogger5(k,i)};h.prototype.destroy=function(){this.$ConversationNubLogger1.release()};f.exports=h}),null);
__d("ConversationNotificationListeners",["Bootloader","ConversationNubAddTabSource","ConversationNubLogger","FacebookWebNotificationsSubscription","NotificationConstants","NotificationUpdates","PinnedConversationNubsConfig","once"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("NotificationConstants").PayloadSourceType,i=h.LIVE_SEND,j=h.OTHER_APPLICATION;function k(){c("FacebookWebNotificationsSubscription").subscribe({event:"NEW_PINNED_CONVERSATION",callback:function o(p){c("ConversationNubLogger").subscriptionTriggered("graphql");c("Bootloader").loadModules(["NotificationConversationController"],function(q){q.handleNewNotificationFromGraphQL(p,c("ConversationNubAddTabSource").NOTIFICATION)},"ConversationNotificationListeners")}})}function l(){__p&&__p();c("NotificationUpdates").subscribe("update-notifications",function(o,p){__p&&__p();var q;if(p.payloadsource===i||p.payloadsource===j)(function(){var r=p.nodes,s=r&&r.length&&r.some(function(t){return t.pinnedConvoConfig});if(s){c("ConversationNubLogger").subscriptionTriggered("channel");c("Bootloader").loadModules(["NotificationConversationController"],function(t){t.handleNewNotificationsFromChannel(r,c("ConversationNubAddTabSource").NOTIFICATION)},"ConversationNotificationListeners")}})()})}function m(){c("NotificationUpdates").subscribe("update-notifications",function(o,p){if(p.payloadsource===i&&p.readState&&Object.keys(p.readState).length)c("Bootloader").loadModules(["NotificationConversationController"],function(q){q.handleNotificationsRead(p.readState)},"ConversationNotificationListeners")})}var n=c("once")(function(){m();c("PinnedConversationNubsConfig").useGraphQLSubscription?k():l()});f.exports={initialize:function o(){n()}}}),null);
__d("FBPaymentsDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("FBPaymentsDialogActions",["FBPaymentsDispatcher","keyMirror"],(function a(b,c,d,e,f,g){"use strict";var h={types:c("keyMirror")({SHOW_DIALOG:null,HIDE_DIALOG:null}),showDialog:function i(j,k){c("FBPaymentsDispatcher").dispatch({type:h.types.SHOW_DIALOG,data:{dialogClass:j,dialogProps:k}})},hideDialog:function i(){c("FBPaymentsDispatcher").dispatch({type:h.types.HIDE_DIALOG,data:{}})}};f.exports=h}),null);
__d("FBPaymentsDialogStore",["FBPaymentsDialogActions","FBPaymentsDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("FBPaymentsDispatcher"));this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null}}j.prototype.__onDispatch=function(k){var l=k.type,m=k.data;switch(l){case c("FBPaymentsDialogActions").types.SHOW_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:m.dialogClass,dialogProps:m.dialogProps};this.__emitChange();break;case c("FBPaymentsDialogActions").types.HIDE_DIALOG:this.$FBPaymentsDialogStore1={dialogClass:null,dialogProps:null};this.__emitChange();break}};j.prototype.getState=function(){return this.$FBPaymentsDialogStore1};f.exports=new j()}),null);
__d("FBPaymentsDialogContainer.react",["FBPaymentsDialogStore","FBPaymentsDispatcher","FluxContainer","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.calculateState=function(){return c("FBPaymentsDialogStore").getState()};j.getStores=function(){return[c("FBPaymentsDialogStore")]};j.prototype.componentWillMount=function(){c("FBPaymentsDispatcher").explicitlyRegisterStore(c("FBPaymentsDialogStore"))};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};function j(){h.apply(this,arguments)}f.exports=c("FluxContainer").create(j)}),null);
__d("FBPaymentsDialogContainerMount",["FBPaymentsDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("FBPaymentsDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("XGamesHideableXOutAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/games/async/xout/hide/",{unit_type:{type:"String"},fbs:{type:"Int"},app_id:{type:"Int"},extra_data:{type:"String"}})}),null);
__d("GamesUninstallXOut.react",["cx","AsyncRequest","CSS","Dialog","DOMContainer.react","GamesXOut.react","React","ReactDOM","URI","XGamesHideableXOutAsyncController"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={pending:false},this.$GamesUninstallXOut1=function(){var r=c("XGamesHideableXOutAsyncController").getURIBuilder().setInt("app_id",this.props.appID).setString("extra_data",this.props.extraData).setString("unit_type",this.props.unitType).setInt("fbs",this.props.fbs).getURI();this.$GamesUninstallXOut2=new(c("AsyncRequest"))(r).setMethod("POST");this.$GamesUninstallXOut2.send()}.bind(this),this.$GamesUninstallXOut3=function(){var r=new(c("URI"))("/ajax/settings/apps/delete_app.php").setQueryData({app_id:this.props.appID,legacy:false,dialog:true,xout:true});new(c("Dialog"))().setAsync(new(c("AsyncRequest"))(r).setRelativeTo(c("ReactDOM").findDOMNode(this))).setCausalElement(c("ReactDOM").findDOMNode(this)).show()}.bind(this),n}l.appUninstalled=function(m){"use strict";c("CSS").addClass(m,"_4ksu")};l.prototype.render=function(){"use strict";return c("React").createElement(c("GamesXOut.react"),{onClick:this.$GamesUninstallXOut3},c("React").createElement(c("DOMContainer.react"),null,this.props.domChild))};l.propTypes={unitType:k.string.isRequired,appID:k.string.isRequired,domChild:k.any.isRequired,extraData:k.string.isRequired,fbs:k.number.isRequired};f.exports=l}),null);
__d("XPymkFunnelLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pymk/funnel_logging/",{event_ts:{type:"Int",required:true},query_id:{type:"Int"},candidate_id:{type:"Int"},signature:{type:"Int"},loc:{type:"String",required:true},ref:{type:"String"},action:{type:"Enum",required:true,enumType:1}})}),null);
__d("PymkFunnelLogger",["AsyncRequest","DOMQuery","XPymkFunnelLoggingController"],(function a(b,c,d,e,f,g){__p&&__p();var h={setupListeners:function i(j,k,l,m,n){this._setupForSingleElement(j,k,l,"add");this._setupForSingleElement(j,k,m,"click");this._setupForSingleElement(j,k,n,"click")},logImpression:function i(j,k,l){this._logEvent(j,"impression",k,l)},logXOut:function i(j,k,l){this._logEvent(j,"hide",k,l)},_logEvent:function i(j,event,k,l){var m=c("XPymkFunnelLoggingController").getURIBuilder().setInt("candidate_id",j).setInt("signature",k).setInt("event_ts",Math.floor(Date.now()/1e3)).setEnum("action",event).setString("loc",l).getURI();new(c("AsyncRequest"))(m).setMethod("POST").send()},_setupForSingleElement:function i(j,k,l,m){Event.listen(l,"click",function(event){var n=j.getAttribute("data-signature"),o=c("DOMQuery").find(j,"input.friendBrowserID"),p=parseInt(o.value,10);this._logEvent(p,m,n,k)}.bind(this))}};f.exports=h}),null);
__d("XFriendRequestIHEventLoggingController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/requests/interaction_history_logging/",{target_id:{type:"FBID",required:true},log_event:{type:"String",required:true}})}),null);
__d("FriendRequestIHEventLogger",["Event","AsyncRequest","XFriendRequestIHEventLoggingController"],(function a(b,c,d,e,f,g){__p&&__p();var h={setupJewelListeners:function i(j,k,l){this._setupForJewelSingleElement(j,k,"click");if(l)this._setupForJewelSingleElement(j,l,"click")},logImpression:function i(j){this._logEvent(j,"impression")},_logEvent:function i(j,event){if(isNaN(j))return;var k=c("XFriendRequestIHEventLoggingController").getURIBuilder().setFBID("target_id",j).setString("log_event",event).getURI();new(c("AsyncRequest"))(k).setMethod("POST").send()},_setupForJewelSingleElement:function i(j,k,l){c("Event").listen(k,"click",function(event){var m=j.getAttribute("id");if(!m)return;var n=m.substring(0,m.length-6);this._logEvent(n,l)}.bind(this))}};f.exports=h}),null);
__d("QPRenderer",["CSS","FBLogger","XAsyncRequest","XQuickPromotionSimpleLoggingController","ge"],(function a(b,c,d,e,f,g){__p&&__p();var h=function h(m,event,n){var o=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",m).setString("qp_event",event).setStringToStringMap("qp_instance_log_data",n).getURI();new(c("XAsyncRequest"))(o).send()},i=function i(m,n,o){var p=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",m).setEnum("qp_action",n).setStringToStringMap("qp_instance_log_data",o).getURI();new(c("XAsyncRequest"))(p).send()},j=function j(m,n,o,p,q,r){var s=c("ge")(p);if(s!==null)l(m,o,s,r,function(){if(q)c("CSS").hide(n)});else c("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",m,o)},k=function k(m,n,o){__p&&__p();n.show();h(m,"view",{});n.subscribe("cancel",function(){h(m,"dialog_cancel",{})});for(var p=0;p<o.length;p++){var q=o[p],r=c("ge")(q.element_id);if(r!==null){l(m,q.action,r,q.extra_log_data,q.should_close?function(){n.hide()}:function(){});if(q.action=="primary")r.focus()}else c("FBLogger")("quick_promotion").mustfix("Quick Promotion %s is missing %s action element.",m,q.action)}},l=function l(m,n,o,p,q){o.addEventListener("click",function(){var r=c("XQuickPromotionSimpleLoggingController").getURIBuilder().setInt("qp_id",m).setEnum("qp_action",n).setStringToStringMap("qp_instance_log_data",p).getURI();new(c("XAsyncRequest"))(r).send();q()})};g.setAction=j;g.setDialogActionsAndShow=k;g.logAction=i;g.logEvent=h}),null);
__d("JewelQPLogging",["QPRenderer"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=null,j=false;function k(){if(j)return;if(h&&i){j=true;c("QPRenderer").logEvent(i.promotion_id,"view",i.instance_log_data?i.instance_log_data:{})}}var l={onJewelOpened:function m(){h=true;k()},updateQPLogData:function m(n){i=n;k()}};f.exports=l}),null);
__d("RequestsJewelStore",["Arbiter","ArbiterMixin","ChannelConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h=babelHelpers["extends"]({},c("ArbiterMixin"),{_initialized:false,_count:0,_requestList:{},addFriendRequests:function i(j){Object.assign(this._requestList,j)},getRequestListKeys:function i(){return Object.keys(this._requestList)},removeRequest:function i(j){delete this._requestList[j]},getRequestCount:function i(j){return this.getRequestListKeys().length},decrementCount:function i(){this.setCount(Math.max(0,this._count-1))},setCount:function i(j){c("Arbiter").inform("jewel/count-updated",{jewel:"requests",count:j},c("Arbiter").BEHAVIOR_STATE)},setupListeners:function i(){__p&&__p();if(this._initialized)return;this._initialized=true;c("Arbiter").subscribe("jewel/count-updated",function(j,k){k.jewel==="requests"&&this._updateCount(k.count)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_requests_add"),function(j,k){return this._addRequest(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_friending_notifs"),function(j,k){return this._addNotification(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("jewel_requests_remove_old"),function(j,k){return this._removeOldRequest(k)}.bind(this));c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("friend_requests_seen"),function(j,k){return this.setCount(0)}.bind(this))},_updateCount:function i(j){var k=this._count!==j;this._count=j;if(k)this.inform("countUpdated",j)},_addRequest:function i(j){if(!j)return;var k=j.obj,l=k.from,m=k.suggester,n=this._requestList[l];if(!n)this.setCount(this._count+1);var o=n?n.type:null,p=o===19&&!m;this.inform("addRequest",{shouldReplace:p,previousType:o})},_addNotification:function i(j){if(!j||j.obj.notif_type!=="friend_confirmed")return;this.inform("addNotification")},_removeOldRequest:function i(j){if(!j)return;var k=this._requestList[j.obj.from];if(!k)return;this.inform("removeOldRequest",k)}});f.exports=h}),null);
__d("XWebGigaboxxUpdateSeenTimeAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/ajax/gigaboxx/endpoint/update_last_seen_time/",{folder:{type:"String",required:true}})}),null);
__d("RequestsJewelController",["invariant","Promise","Arbiter","AsyncRequest","AsyncSignal","CSS","DOM","DOMQuery","Event","EventProfiler","FriendRequestIHEventLogger","JewelQPLogging","MarauderLogger","Parent","PymkFunnelLogger","RequestsJewelStore","ScrollableArea","XUIBadge","XWebGigaboxxUpdateSeenTimeAsyncController","ge","getElementPosition","getViewportDimensions","requireWeak","throttle","TimeSlice"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=null;c("requireWeak")("FriendBrowserCheckboxController",function(o){return i=o});var j=31,k=600,l=30,m=160;n.getInstance=function(){"use strict";return this.$RequestsJewelController13};n.updateFromDOM=function(){"use strict";var o=this.getInstance();if(o)o.fromDom()};n.setupScroll=function(){"use strict";var o=this.getInstance();if(o)o.setupScroll()};n.setInitialHeight=function(){"use strict";var o=this.getInstance();if(o)o.updateHeight()};n.maybeLoadJewel=function(){"use strict";var o=this.getInstance();if(o)o.maybeLoadJewel()};n.setTitleBadgeCount=function(o){"use strict";if(this.$RequestsJewelController12)this.$RequestsJewelController12.setCount(o)};n.initTitleBadge=function(o,p){"use strict";if(!this.$RequestsJewelController12)c("Arbiter").subscribe(["FriendRequest/delete","FriendRequest/confirm","FriendSuggestion/accepting","FriendSuggestion/ignoring"],function(q,r){return this.decrementTitleBadgeCount(r)}.bind(this));this.$RequestsJewelController12=p};n.decrementTitleBadgeCount=function(o){"use strict";if(this.$RequestsJewelController12)this.$RequestsJewelController12.setCount(this.$RequestsJewelController12.getCount()-1)};n.isOpen=function(){"use strict";var o=this.getInstance();if(o)return o.$RequestsJewelController3();return false};n.create=function(o,p,q){"use strict";!this.$RequestsJewelController13||h(0);return this.$RequestsJewelController13=new n(o,p,q)};n.setupJewelRefresh=function(){"use strict";c("Arbiter").subscribe(["FriendRequest/confirmFromProfile","FriendRequest/deleteFromProfile"],function(o,p){var q={};q.reloadcontent=true;new(c("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(q).setAllowCrossPageTransition(true).send()})};function n(o,p,q){"use strict";__p&&__p();this.$RequestsJewelController3=p;this.$RequestsJewelController2=q;this.$RequestsJewelController1=o;this.$RequestsJewelController5=-1;this.$RequestsJewelController6=-1;this.$RequestsJewelController11=c("Promise").resolve(true);this.$RequestsJewelController9=c("throttle").acrossTransitionsWithBlocking(function(){return this.$RequestsJewelController14({log_impressions:true})}.bind(this),5e3);c("RequestsJewelStore").subscribe("addRequest",this.$RequestsJewelController15.bind(this));c("RequestsJewelStore").subscribe("addNotification",function(){return this.$RequestsJewelController16()}.bind(this));c("RequestsJewelStore").subscribe("removeOldRequest",this.$RequestsJewelController17.bind(this));c("RequestsJewelStore").setupListeners();this.setupScroll();this.$RequestsJewelController18();this.$RequestsJewelController19();this.$RequestsJewelController20()}n.prototype.fromDom=function(){"use strict";__p&&__p();var o={};c("DOMQuery").scry(this.$RequestsJewelController1,"li.objectListItem").forEach(function(p){var q=p.getAttribute("id");if(q){var r=this.$RequestsJewelController21(q);if(r&&r.requester)o[r.requester]=r}}.bind(this));c("RequestsJewelStore").addFriendRequests(o);this.$RequestsJewelController22()};n.prototype.maybeLoadJewel=function(){"use strict";if(this.$RequestsJewelController10){this.$RequestsJewelController10(function(){this.openHandler()}.bind(this));this.$RequestsJewelController10=null}};n.prototype.updateHeight=function(){"use strict";var o=this.$RequestsJewelController23();if(o)o.style.height=this.$RequestsJewelController24()+"px"};n.prototype.markSeen=function(){"use strict";this.$RequestsJewelController11.done(function(){var o=c("DOMQuery").scry(this.$RequestsJewelController1,"li[id]")[0];new(c("AsyncSignal"))(c("XWebGigaboxxUpdateSeenTimeAsyncController").getURIBuilder().setString("folder",this.$RequestsJewelController2).getURI()).send()}.bind(this))};n.prototype.openHandler=function(){"use strict";__p&&__p();if(!this.$RequestsJewelController7&&this.$RequestsJewelController3()){this.$RequestsJewelController7=true;c("EventProfiler").tagCurrentActiveInteractionsAs("FirstRequestsJewelOpen")}c("Arbiter").inform("requestsJewel/opened");var o=c("ge")("fbRequestsJewelLoading"),p=this.$RequestsJewelController23();if(!o&&!p)this.$RequestsJewelController10=c("TimeSlice").getGuardedContinuation("RequestsJewelController clickBeforeE2E continuation");else if(o)this.$RequestsJewelController9();else{var q=c("RequestsJewelStore").getRequestListKeys();if(q.length>0)new(c("AsyncRequest"))().setAllowCrossPageTransition(true).setURI("/friends/requests/log_impressions").setData({ids:q.join(","),ref:"jewel"}).send()}p&&c("ScrollableArea").poke(p);c("JewelQPLogging").onJewelOpened()};n.prototype.closeHandler=function(){"use strict";c("Arbiter").inform("requestsJewel/closed");c("DOMQuery").scry(this.$RequestsJewelController1,"li.jewelItemNew").forEach(function(o){c("CSS").removeClass(o,"jewelItemNew")})};n.prototype.setupScroll=function(){"use strict";var o=this.$RequestsJewelController23();if(o){this.$RequestsJewelController8=this.$RequestsJewelController25();this.$RequestsJewelController4=0;c("ScrollableArea").getInstance(o).subscribe("scroll",this.$RequestsJewelController26.bind(this));this.$RequestsJewelController27();this.$RequestsJewelController28()}};n.prototype.$RequestsJewelController18=function(){"use strict";c("Event").listen(this.$RequestsJewelController1,"submit",function(o){var p=c("Parent").byClass(o.getTarget(),"objectListItem");if(p){c("CSS").removeClass(p,"jewelItemNew");c("CSS").addClass(p,"jewelItemResponded")}})};n.prototype.$RequestsJewelController19=function(){"use strict";c("Event").listen(window,"resize",c("throttle").acrossTransitions(function(){this.updateHeight()}.bind(this)))};n.prototype.$RequestsJewelController20=function(){"use strict";c("Arbiter").subscribe("pymk-x-out",function(o,p){var q=p.location;if(q==="pymk_jewel_first_page"||q==="pymk_jewel")this.$RequestsJewelController27()}.bind(this))};n.prototype.$RequestsJewelController29=function(o){"use strict";var p=parseInt(o,10);return!isNaN(p)?p:null};n.prototype.$RequestsJewelController21=function(o){"use strict";var p=o.match(/^(\d+)_(\d+)/);if(!p)return null;return{requester:this.$RequestsJewelController29(p[1]),type:this.$RequestsJewelController29(p[2])}};n.prototype.$RequestsJewelController30=function(o,p){"use strict";if(o==null||p==null)return null;return o+"_"+p};n.prototype.$RequestsJewelController23=function(){"use strict";return c("DOMQuery").scry(this.$RequestsJewelController1,".uiScrollableArea")[0]};n.prototype.$RequestsJewelController25=function(){"use strict";return c("DOMQuery").scry(this.$RequestsJewelController1,".uiScrollableAreaWrap")[0]};n.prototype.$RequestsJewelController26=function(){"use strict";__p&&__p();var o=c("DOMQuery").scry(this.$RequestsJewelController8,".uiMorePager").pop();if(o){var p=c("getElementPosition")(o).y,q=this.$RequestsJewelController23();if(p>0&&q)c("CSS").addClass(q,"contentAfter");var r=c("DOMQuery").find(o,"a");if(!r)return;var s=c("getElementPosition")(r).y;if(s===this.$RequestsJewelController4)return;var t=c("getElementPosition")(this.$RequestsJewelController8),u=t.y+t.height;if(s-300<u&&s>0){this.$RequestsJewelController4=s;var v=r.getAttribute("ajaxify");if(v)new(c("AsyncRequest"))(v).setRelativeTo(r).setStatusElement(c("Parent").byClass(r,"stat_elem")).send();else if(i)i.getInstance("jewel").showMore()}}this.$RequestsJewelController27();this.$RequestsJewelController28()};n.prototype.$RequestsJewelController27=function(){"use strict";__p&&__p();if(!this.$RequestsJewelController8)return;var o=c("getElementPosition")(this.$RequestsJewelController8),p=o.y+o.height,q=c("DOMQuery").scry(this.$RequestsJewelController1,"li.friendBrowserListUnit"),r=q.length-1;while(r>this.$RequestsJewelController5){var s=c("getElementPosition")(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1}var v=r;while(r>this.$RequestsJewelController5){var w=c("DOMQuery").find(q[r],"input.friendBrowserID"),x=parseInt(w.value,10),y=parseInt(q[r].getAttribute("data-signature"),10);c("PymkFunnelLogger").logImpression(x,y,"pymk_jewel");r--}this.$RequestsJewelController5=Math.max(this.$RequestsJewelController5,v)};n.prototype.$RequestsJewelController28=function(){"use strict";__p&&__p();if(!this.$RequestsJewelController8)return;var o=c("getElementPosition")(this.$RequestsJewelController8),p=o.y+o.height,q=c("DOMQuery").scry(this.$RequestsJewelController1,"li.objectListItem"),r=q.length-1;while(r>this.$RequestsJewelController6){var s=c("getElementPosition")(q[r]),t=s.y,u=t+s.height;if(t>0&&u<=p)break;r-=1}var v=r;while(r>this.$RequestsJewelController6){var w=q[r].getAttribute("id");w=w.substring(0,w.length-6);c("MarauderLogger").log("request_seen","friend_request_waterfall",{request_id:w,request_location:"requests_jewel"});c("FriendRequestIHEventLogger").logImpression(w);r-=1}this.$RequestsJewelController6=Math.max(this.$RequestsJewelController6,v)};n.prototype.$RequestsJewelController14=function(){var o=arguments.length<=0||arguments[0]===undefined?{}:arguments[0];"use strict";this.$RequestsJewelController11=new(c("Promise"))(function(p,q){var r=!c("ge")("fbRequestsJewelLoading");new(c("AsyncRequest"))().setURI("/ajax/requests/loader/").setData(babelHelpers["extends"]({},o,{reloadcontent:r})).setFinallyHandler(function(s){if(!s.getError())p(true);else q()}).send()})};n.prototype.$RequestsJewelController16=function(){"use strict";if(this.$RequestsJewelController3())return;this.$RequestsJewelController14()};n.prototype.$RequestsJewelController15=function(o,p){var q=p.shouldReplace,r=p.previousType;"use strict";if(!q&&(r||this.$RequestsJewelController3()))return;this.$RequestsJewelController14()};n.prototype.$RequestsJewelController17=function(o,p){__p&&__p();var q=p.requester,r=p.type;"use strict";if(this.$RequestsJewelController3()||c("ge")("fbRequestsJewelLoading")!=null)return;var s=this.$RequestsJewelController30(q,r),t=s&&c("ge")(s);if(t){if(c("CSS").hasClass(t,"jewelItemNew"))c("RequestsJewelStore").decrementCount();if(!c("CSS").hasClass(t,"jewelItemResponded")){c("DOM").remove(t);c("RequestsJewelStore").removeRequest(q);this.$RequestsJewelController22()}}};n.prototype.$RequestsJewelController22=function(){"use strict";c("DOMQuery").scry(this.$RequestsJewelController1,"li.empty").forEach(function(o){c("CSS").conditionShow(o,c("RequestsJewelStore").getRequestCount()<=0)})};n.prototype.$RequestsJewelController24=function(){"use strict";return Math.min(Math.max(c("getViewportDimensions")().height-m,l),k)+j};n.$RequestsJewelController13=null;f.exports=n}),null);
__d("ChatAppActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({INITIAL_DISPLAY_DONE:null,HIDE:null,LOAD:null,TTI:null,UNHIDE:null})}),null);
__d("ChatAppStore",["ChatAppActionTypes","ChatDispatcher","FluxStore"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"));this.$ChatAppStore2={initialDisplayDone:false,isHidden:false,isInitialized:false,isLoaded:false};this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2)}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type;this.$ChatAppStore1=babelHelpers["extends"]({},this.$ChatAppStore2);switch(l){case c("ChatAppActionTypes").INITIAL_DISPLAY_DONE:this.$ChatAppStore2.initialDisplayDone=true;this.__emitChange();break;case c("ChatAppActionTypes").HIDE:this.$ChatAppStore2.isHidden=true;this.__emitChange();break;case c("ChatAppActionTypes").UNHIDE:this.$ChatAppStore2.isHidden=false;this.__emitChange();break;case c("ChatAppActionTypes").TTI:this.$ChatAppStore2.isInitialized=this.$ChatAppStore2.isLoaded=true;this.__emitChange();break;case c("ChatAppActionTypes").LOAD:this.$ChatAppStore2.isLoaded=true;this.__emitChange();break}};j.prototype.getPreviousState=function(){return this.$ChatAppStore1};j.prototype.getState=function(){return this.$ChatAppStore2};f.exports=new j()}),null);
__d("ChatTimezoneWarning",["MercuryParticipants","MercuryViewer","MessengerBotIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=1,i={updateUserTimezoneWarning:function j(k,l,m){__p&&__p();c("MercuryParticipants").get(c("MercuryViewer").getID(),function(n){__p&&__p();var o=n.employee,p=n.timezone,q=0;if(k.timezone_warning_dismiss_count!==undefined){var r=k.timezone_warning_dismiss_count;for(var s=Object.entries(r),t=Array.isArray(s),u=0,s=t?s:s[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var v;if(t){if(u>=s.length)break;v=s[u++]}else{u=s.next();if(u.done)break;v=u.value}var w=v,x=w[0],y=w[1];if(x===n.fbid)q=Number(y)}}else return;if(o&&p&&q<h)c("MercuryParticipants").getMulti(k.participants,function(z){__p&&__p();var A={},B=true;for(var C in z){B=B&&z[C].employee;var D=!!c("MessengerBotIDs")[z[C].fbid];if(z[C].timezone!==undefined&&z[C].timezone!==null&&p!==z[C].timezone&&!D){var E=z[C].fbid;A[E]=z[C]}}if(Object.keys(A).length>0&&B){A.self=n;l(A)}else m()})})}};f.exports=i}),null);
__d("FantaAvailableStatus",["AvailableListConstants","ChatVisibility","MercuryIDs","PresenceStatus","ShortProfiles"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports={isAvailable:function h(i,j){var k=void 0,l=this.getStatus(i,j),m=c("MercuryIDs").getUserIDFromThreadID(j);if(m)k=c("ShortProfiles").getNow(m);return l===c("AvailableListConstants").ACTIVE&&(k===undefined||k===null||!k.is_messenger_only)},getStatus:function h(i,j){__p&&__p();var k=c("AvailableListConstants").OFFLINE,l=c("MercuryIDs").getUserIDFromThreadID(j);if(l)k=c("PresenceStatus").get(l);else if(i){var m=i.participants.map(function(n){return c("MercuryIDs").getUserIDFromParticipantID(n)});k=c("PresenceStatus").getGroup(m)}if(!c("ChatVisibility").isOnline())k=c("AvailableListConstants").OFFLINE;return k}}}),null);
__d("ChatVideoCallButton.react",["cx","fbt","invariant","Bootloader","FantaAvailableStatus","FBIDCheck","FBRTCCallabilityStore","FBRTCCore","immutable","ImmutableObject","Keys","LayerFadeOnHide","Link.react","MercuryIDs","MercuryParticipants","MercuryThreadIDMap","MessengerRTCFunnelLogger","ReactComponentWithPureRenderMixin","React","RTCCallState","StoreAndPropBasedStateMixin","TrackingNodes","FBRTCLogger","VideoCallTypedLogger","XUIAmbientNUX.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("MercuryThreadIDMap").get(),l=c("FBRTCLogger").Trigger,m=c("React").PropTypes,n={isCallable:false,shown:false,user:null},o=c("React").createClass({displayName:"ChatVideoCallButton",mixins:[c("ReactComponentWithPureRenderMixin"),c("StoreAndPropBasedStateMixin")(c("FBRTCCallabilityStore"),c("MercuryParticipants"))],propTypes:{isAudio:m.bool,isGroupChat:m.bool,onRTCNuxCloseButtonClick:m.func.isRequired,rtcNuxShown:m.bool.isRequired,threadID:m.string,thread:m.object,viewer:m.string.isRequired,shown:m.bool,rtcCallData:m.object.isRequired},getDefaultProps:function p(){return{shown:true,rtcCallData:{call_state:"NO_ONGOING_CALL"}}},statics:{calculateState:function p(q){__p&&__p();if(!q.threadID)return babelHelpers["extends"]({},n);if(q.isGroupChat)return{isCallable:true,shown:q.shown,user:null};var r=c("MercuryIDs").getUserIDFromThreadID(q.threadID);if(r===q.viewer||!c("FBIDCheck").isUser_deprecated(r))return babelHelpers["extends"]({},n);r&&c("FBIDCheck").isUser_deprecated(r)||j(0);var s=c("MercuryIDs").getParticipantIDFromUserID(r),t=c("MercuryParticipants").getOrFetch(s);return{isCallable:c("FBRTCCallabilityStore").isCallable(r,q.thread),shown:q.shown,user:t}}},getTooltipLabel:function p(){if(this.props.isGroupChat)return this.props.isAudio?i._("Start a group call"):i._("Start a group video chat");var q=this.state.user;if(!q)return undefined;return this.props.isAudio?c("FBRTCCallabilityStore").voiceCallButtonTooltip(q.fbid,q.short_name,this.state.isCallable):c("FBRTCCallabilityStore").callButtonTooltip(q.fbid,q.short_name,this.state.isCallable)},render:function p(){if(!this.state.shown)return null;var q=c("TrackingNodes").getTrackingInfo(this.props.isAudio?c("TrackingNodes").types.VIDEOCHAT:c("TrackingNodes").types.VOICECHAT),r=JSON.stringify({videochat:"call_clicked_bhat_tab"}),s=this.props.threadID&&c("FantaAvailableStatus").isAvailable(this.props.thread,this.props.threadID),t=s&&this.state.isCallable;return c("React").createElement("div",null,c("React").createElement(c("Link.react"),{"aria-label":this.getTooltipLabel(),className:"button _3olv"+(this.props.isAudio?" _2fpc":"")+(!this.props.isAudio?" _2fpd":"")+(this.state.isCallable?" enabled":""),"data-ft":q,"data-gt":r,"data-hover":"tooltip","data-tooltip-content":this.getTooltipLabel(),"data-tooltip-position":"above",onClick:this._handleClick,onKeyUp:this._handleKeyUp,ref:"button"}),c("React").createElement("div",{className:t&&!this.props.isAudio?"_18pe":""}),c("React").createElement(c("XUIAmbientNUX.react"),{alignment:"right",behaviors:{LayerFadeOnHide:c("LayerFadeOnHide")},contextRef:function(){return this.refs.button}.bind(this),onCloseButtonClick:this.props.onRTCNuxCloseButtonClick,shown:this.props.rtcNuxShown,width:"auto"},i._("You can now make a group call.")))},_handleClick:function p(q){q.preventDefault();this._startCall()},_handleKeyUp:function p(q){q.preventDefault();if(q.keyCode!==c("Keys").RETURN)return;if(q.target){q.target instanceof HTMLElement||j(0);q.target.blur()}this._startCall()},_startCall:function p(){c("MessengerRTCFunnelLogger").startFunnel("ChatTab");if(!this.state.isCallable){c("MessengerRTCFunnelLogger").endFunnel("callee_not_callable");return}this.props.onRTCNuxCloseButtonClick();this._initiateCall()},_initiateCall:function p(){__p&&__p();var q=this.props,r=q.isAudio,s=q.isGroupChat,t=q.threadID;!!t||j(0);var u=r?"audio":"video";if(s)if(c("MercuryIDs").isLocalThread(t))k.getServerIDFromClientID(t,function(v){return this._initiateGroupCall(v)}.bind(this));else{c("MessengerRTCFunnelLogger").appendAction("start_in_group_thread");this._initiateGroupCall(c("MercuryIDs").getThreadFBIDFromThreadID(t))}else{c("MessengerRTCFunnelLogger").appendAction("start_in_p2p_thread");c("FBRTCCore").startOutgoingCall(this.state.user.fbid,u,!!r);new(c("VideoCallTypedLogger"))().setEvent("chat_tab_call_click").log()}},_initiateGroupCall:function p(q){__p&&__p();var r=this.props,s=r.isAudio,t=r.rtcCallData,u=t.call_state,v=t.server_info_data;if(u!=="NO_ONGOING_CALL"&&v){c("MessengerRTCFunnelLogger").appendAction("join_existing_call");c("FBRTCCore").startGroupCall({conferenceName:"GROUP:"+q,hasVideo:!s,serverInfoData:v,trigger:u!==c("RTCCallState").AUDIO_GROUP_CALL?s?l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_AUDIO_CALL_VIDEO_BUTTON:s?l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_JOIN_VIDEO_CALL_VIDEO_BUTTON});return}c("Bootloader").loadModules(["FBRTCSupport","MercuryThreads","MessengerParticipantsFetcher.bs","MessengerRTCGroupCallUnsupportedBrowserDialogController","MessengerRTCGroupCallParticipantsPickerDialogController"],function(w,x,y,z,A){__p&&__p();if(!w.isGroupCallWebtrcSupported()){c("MessengerRTCFunnelLogger").endFunnel("unsupported_browser");z.render({hasVideo:!this.props.isAudio});return}x.get().getThreadMeta(this.props.threadID,function(B){var C=B.participants?B.participants.filter(function(D){return D!==c("MercuryIDs").getParticipantIDFromUserID(this.props.viewer)}.bind(this)).map(function(D){return c("MercuryIDs").getUserIDFromParticipantID(D)}):[];if(C.length>0)y.fetch({ids:C}).done(function(C){c("MessengerRTCFunnelLogger").appendAction("render_participant_picker");A.render({participants:c("immutable").Map(C.map(function(D){return[D.id,new(c("ImmutableObject"))(D)]})),thread:B,viewerID:this.props.viewer,trigger:this.props.isAudio?l.MULTIWAY_THREAD_HEADER_AUDIO_BUTTON:l.MULTIWAY_THREAD_HEADER_VIDEO_BUTTON,conferenceName:"GROUP:"+q,hasVideo:!this.props.isAudio})}.bind(this))}.bind(this))}.bind(this),"ChatVideoCallButton.react")}});f.exports=o}),null);
__d("FantaTabMainPlaceholder.react",["cx","React","XUISpinner.react"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(){return c("React").createElement("div",{className:"_59v1"},c("React").createElement("div",{className:"_5qi9 _5qib"},c("React").createElement("div",{className:"_3_9e _s0f _50mz _50m_ fbNub _50-v opened _27_3"},c("React").createElement("div",{className:"fbNubFlyout fbDockChatTabFlyout uiContextualLayerParent"},c("React").createElement("div",{className:"fbNubFlyoutOuter"},c("React").createElement("div",{className:"fbNubFlyoutInner"},c("React").createElement("div",{className:"_5-kq"},c("React").createElement(c("XUISpinner.react"),null))))))))};f.exports=i}),null);
__d("FantaTabsEagerBootloader",["Bootloader","ChatPerfConfig","emptyFunction","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=function j(k){c("ifRequired")("FantaAppStore",function(l){return l.addReducers(k)});h=c("emptyFunction")},i={bootload:function j(){if(!c("ChatPerfConfig").eager_bootload)return;c("ifRequired")("FantaTabsSlimApp",function(k){k.silentPumpUp()});c("Bootloader").loadModules(["FantaReducersGetMessages","FantaTabsReactApp","MessengerGraphQLThreadFetcher.bs"],function(k){h(k)},"FantaTabsEagerBootloader")}};f.exports=i}),null);
__d("P2PActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({CREDIT_CARDS_UPDATED:"credit_cards_updated",CREDIT_CARDS_UPDATED_ERROR:"credit_cards_updated_error",CHANNEL_EVENTS_ALLOWED:"channel_events_allowed",CHANNEL_EVENTS_IGNORED:"channel_events_ignored",CREDIT_CARD_SAVING:"credit_card_saving",CREDIT_CARD_ADDED:"credit_card_added",CREDIT_CARD_ADDED_ERROR:"credit_card_added_error",CREDIT_CARD_ADDED_ERROR_CLEARED:"credit_card_added_error_cleared",CREDIT_CARD_DELETED:"credit_card_deleted",CREDIT_CARD_DELETED_ERROR:"credit_card_deleted_error",CREDIT_CARD_UPDATED:"credit_card_updated",CREDIT_CARD_UPDATED_ERROR:"credit_card_updated_error",PRESET_CREDIT_CARD_UPDATED:"preset_credit_card_updated",PRESET_CREDIT_CARD_UPDATED_ERROR:"preset_credit_card_updated_error",CREDIT_CARD_VERIFIED:"credit_card_verified",CREDIT_CARD_VERIFIED_ERROR:"credit_card_verified_error",PAYMENT_METHODS_UPDATED:"payment_methods_updated",PAYMENT_METHODS_UPDATED_ERROR:"payment_methods_updated_error",TRANSFERS_UPDATED:"transfers_updated",TRANSFERS_UPDATED_ERROR:"transfers_updated_error",NUX_TRANSFERS_UPDATED:"nux_transfers_updated",TRANSFER_ADDED:"transfer_added",TRANSFER_ADDED_ERROR:"transfer_added_error",TRANSFER_UPDATED:"transfer_updated",TRANSFER_UPDATED_ERROR:"transfer_updated_error",TRANSFER_ACCEPTED:"transfer_accepted",TRANSFER_DECLINED:"transfer_declined",CHAT_SEND_VIEW_OPENED:"chat_send_view_opened",CHAT_SEND_VIEW_CLOSED:"chat_send_view_closed",BIN_NUMBER_VALIDATED:"bin_number_validated",BIN_NUMBER_VALIDATED_ERROR:"bin_number_validated_error",USER_ELIGIBILITY_UDPATED:"user_eligibility_updated",FRIENDS_LIST_UPDATED:"friends_list_updated",DIALOG_SHOWN:"dialog_shown",DIALOG_CLOSED:"dialog_closed",BANNER_STATES_UPDATED:"banner_states_updated",BANNER_DISMISSED:"banner_dismissed",BANNER_VIEWED:"banner_viewed",BANNER_COMPLETED:"banner_completed",MONEYPENNY_TRANSFER_CREATED:"moneypenny_transfer_created",MONEYPENNY_TRANSFER_CREATED_ERROR:"moneypenny_transfer_created_error",PLATFORM_CONTEXT_ADDED:"platform_context_added",PLATFORM_CONTEXT_ADDED_ERROR:"platform_context_added_error",PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:"platform_context_save_errors_cleared",PLATFORM_CONTEXT_BANNER_DISMISSED:"platform_context_banner_dismissed",PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:"platform_context_product_item_sold",PLATFORM_CONTEXT_CHANGED:"platform_context_changed",EXTENSIVE_TRANSFER_DETAILS_UPDATED:"extensive_transfer_details_updated",ADDRESS_SAVING:"address_saving",ADDRESSES_UPDATED:"addresses_updated",ADDRESS_ADDED:"address_added",ADDRESS_ADDED_ERROR:"address_added_error",ADDRESS_ADDED_ERROR_CLEARED:"address_added_error_cleared",CHECKOUT_CART_INITIATED:"checkout_cart_initiated",CHECKOUT_CART_CREATED:"checkout_cart_created",CHECKOUT_SHIPPING_OPTION_SELECTED:"checkout_shipping_option_selected",CHECKOUT_ADDRESS_SELECTED:"checkout_address_selected",CHECKOUT_CREDIT_CARD_SELECTED:"checkout_credit_card_selected",CHECKOUT_ADDRESS_FORM_TOGGLED:"checkout_address_form_toggled",CHECKOUT_CREDIT_CARD_FORM_TOGGLED:"checkout_credit_card_form_toggled",CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:"checkout_address_options_toggled",CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:"checkout_credit_card_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_EDIT_OPTIONS_TOGGLED:"checkout_payment_edit_options_toggled",CHECKOUT_PAYMENT_METHOD_SELECTED:"checkout_payment_method_selected",CHECKOUT_PAYMENT_METHOD_CONFIGURED:"checkout_payment_method_configured",CHECKOUT_PAYMENT_METHOD_CONFIRMED:"checkout_payment_method_confirmed",CHECKOUT_ADDRESS_FORM_VALIDATED:"checkout_address_form_validated",CHECKOUT_CREDIT_CARD_FORM_VALIDATED:"checkout_credit_card_form_validated",CHECKOUT_EDIT_COMPLETED:"checkout_completed",CHECKOUT_PROCESSING:"checkout_processing",CHECKOUT_BUYER_PROFILE_UPDATED:"checkout_buyer_profile_updated",CHECKOUT_MANUAL_PAYMENT_RECEIPT_UPDATED:"checkout_manual_payment_receipt_updated",PAYMENT_REQUEST_INITIATED:"payment_request_initiated",PAYMENT_REQUEST_INITIATED_COMPLETE:"payment_request_initiated_completed",PAYMENT_REQUEST_CREATED:"payment_request_created",PAYMENT_REQUEST_CREATED_ERROR:"payment_request_created_error",PAYMENT_REQUEST_UPDATED:"payment_request_updated",PAYMENT_REQUEST_DECLINE_INITIATED:"payment_request_decline_initiated",PAYMENT_REQUEST_DECLINED:"payment_request_declined",PAYMENT_REQUEST_DECLINE_ERROR:"payment_request_decline_error",PAYMENT_REQUESTS_FETCHED:"payment_requests_fetched",PAYMENT_REQUEST_CANCEL_INITIATED:"payment_request_cancel_initiated",PAYMENT_REQUEST_CANCELED:"payment_request_canceled",PAYMENT_REQUEST_CANCEL_ERROR:"payment_request_cancel_error"});f.exports=h}),null);
__d("P2PDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:false})}),null);
__d("FantaTabsSlimApp",["BootloadOnRender.react","ChatPerfInstrumentation","FantaTabMainPlaceholder.react","FantaTabsAppBase","JSResource","LazyComponent.react","Map","React","ReactDOM","emptyFunction","ifRequired","setImmediate"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=void 0;h=babelHelpers.inherits(k,c("FantaTabsAppBase"));i=h&&h.prototype;function k(){__p&&__p();var l,m;for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$FantaTabsSlimApp1=false,this.$FantaTabsSlimApp3=function(q,r){if(this.$FantaTabsSlimApp1)c("ifRequired")("FantaMessageActions",function(s){c("setImmediate")(function(){s.receivedNewMessage(q,r)})});else this.$FantaTabsSlimApp2(function(){c("ifRequired")("FantaMessageActions",function(s){c("setImmediate")(function(){s.receivedNewMessage(q,r)})})})}.bind(this),m}k.prototype.getPumpedUp=function(l){if(this.$FantaTabsSlimApp1)l();else this.$FantaTabsSlimApp2(l)};k.prototype.silentPumpUp=function(){if(!this.$FantaTabsSlimApp1)this.$FantaTabsSlimApp2(c("emptyFunction"),true)};k.prototype.getViewComponent=function(l){var m=l?c("React").createElement("div",null):c("React").createElement(c("FantaTabMainPlaceholder.react"),null);return c("React").createElement(c("BootloadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),{loadDataOnMount:false}),loader:c("JSResource")("FantaMercuryTabsWithMain.react").__setRef("FantaTabsSlimApp"),placeholder:m})};k.prototype.initializeFantaData=function(l){__p&&__p();e(["FantaCookieUtil","MercuryThreadInformer","PresenceState"],function(m,n,o){__p&&__p();o.registerStateLoader(function(p){__p&&__p();var q,r=this;if(this.$FantaTabsSlimApp1)c("ifRequired")("FantaTabActions",function(s){c("ifRequired")("FantaAppStore",function(t){s.loadFromData(m.convertCookieData(p,t.getState().tabGroup,l))})});else(function(){var s=m.convertCookieData(p,null,l);if(s&&s.tabs.length>0)r.$FantaTabsSlimApp2(function(){c("ifRequired")("FantaTabActions",function(t){t.loadFromData(s)})})})()}.bind(this));o.doSync();n.get().subscribe("threads-updated",function(p,q){c("ifRequired")("FantaGetMessageActions",function(r){Object.keys(q).forEach(function(s){c("setImmediate")(function(){r.refreshThread(s)})})})});c("ChatPerfInstrumentation").logInitData()}.bind(this))};k.prototype.$FantaTabsSlimApp2=function(l,m){__p&&__p();c("ifRequired")("FantaAppStore",function(n){l()},function(){__p&&__p();e(["FantaAppStore","FantaCookieUtil","FantaMessageActions","FantaTabActions","FantaTabViewportManager","PresenceState"],function(n,o,p,q,r,s){__p&&__p();s.registerStateStorer(function(t){var u=n.getState().tabGroup;if(!j||j&&!j.equals(u)){j=u;return o.createCookieData(u,t)}else return t});c("ReactDOM").render(this.getViewComponent(m),this.tabsElem);r.init(this.tabsElem);this.$FantaTabsSlimApp1=true;l()}.bind(this))}.bind(this))};k.prototype.initializeFantaUI=function(){e(["FantaMercuryThreadEventsBootloaded","FantaMessageActions","FantaTabActions","FantaTabViewportManager","FBRTCMessageHandler","MercuryBrowserAlerts"],function(l,m,n,o,p,q){p.init();q.init();l.onMessagesReceived(this.$FantaTabsSlimApp3);c("ChatPerfInstrumentation").logInitUI();c("ChatPerfInstrumentation").logDisplayDone()}.bind(this))};f.exports=new k()}),null);
__d("MNCommerceDialogStateStore",["FluxStore","MessengerDispatcher","MNCommerceActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("MessengerDispatcher"));this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null}j.prototype.__onDispatch=function(k){__p&&__p();var l=k.type;switch(l){case c("MNCommerceActionTypes").DIALOG.SHOW:this.$MNCommerceDialogStateStore1=k.dialogContainer;this.$MNCommerceDialogStateStore2=k.state;this.__emitChange();break;case c("MNCommerceActionTypes").DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break}};j.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1};j.prototype.getState=function(){return this.$MNCommerceDialogStateStore2};f.exports=new j()}),null);
__d("PureStoreBasedStateMixin",["invariant","FluxMixinLegacyInstrumentation","StoreBasedStateMixinHelper","setImmediate"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=function(){__p&&__p();for(var j=arguments.length,k=Array(j),l=0;l<j;l++)k[l]=arguments[l];return c("FluxMixinLegacyInstrumentation").addInstrumentation({_callCalculateState:function m(){return this.constructor.calculateState()},getInitialState:function m(){return this._callCalculateState()},componentWillMount:function m(){__p&&__p();this.constructor.calculateState||h(0);this._recalculateStateID=null;var n=function(){if(this.isMounted())this.setState(this._callCalculateState());this._recalculateStateID=null}.bind(this);this._mixin=new(c("StoreBasedStateMixinHelper"))(k);this._mixin.subscribeCallback(function(){if(this._recalculateStateID===null)this._recalculateStateID=c("setImmediate")(n)}.bind(this))},componentWillUnmount:function m(){this._mixin.release();this._mixin=null}})}.bind(this);f.exports=i}),null);
__d("MNCommerceDialogContainer.react",["MNCommerceDialogStateStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"MNCommerceDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("MNCommerceDialogStateStore"))],statics:{calculateState:function i(){var j=c("MNCommerceDialogStateStore").getDialogContainer();return{dialogContainer:j}}},render:function i(){var j=this.state.dialogContainer;if(!j)return null;return c("React").createElement(j,null)}});f.exports=h}),null);
__d("MNCommerceDialogContainerMount",["MNCommerceDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("MNCommerceDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("FBRTCIceStatsParser",[],(function a(b,c,d,e,f,g){__p&&__p();var h=null;i.getInstance=function(){"use strict";if(!h)h=new i();return h};function i(){"use strict"}i.prototype.extractIceInfo=function(j){"use strict";var k=[],l=j.split("\r\n");for(var m=0;m<l.length;m++){var n=l[m];if(this.$FBRTCIceStatsParser1(n))k.push({gen:this.$FBRTCIceStatsParser2(n),type:this.$FBRTCIceStatsParser3(n)})}return k};i.prototype.$FBRTCIceStatsParser1=function(j){"use strict";return j.indexOf("candidate:")>-1};i.prototype.$FBRTCIceStatsParser2=function(j){"use strict";var k=0,l=j.match(/generation (\d+)/);if(l)k=parseInt(l[1],10);return k};i.prototype.$FBRTCIceStatsParser3=function(j){"use strict";var k=j.match(/typ (host|relay|srflx|prflx)/);if(k)return k[1];else return"unknown"};f.exports=i}),null);
__d("FBRTCCallSummary",["FBRTCConstants","FBRTCIceStatsParser","FBRTCLogger","FBRTCUtils","SiteData","UserAgentData","performanceNow"],(function a(b,c,d,e,f,g){__p&&__p();var h=5*60*1e3,i={CALL_STARTED:"started",POPUP_OPENED:"opened",SENT_OFFER:"s_o",RECV_OFFER:"r_o",SENT_OFFER_ACK:"s_oack",RECV_OFFER_ACK:"r_oack",SENT_RETRIED_OFFER:"s_o2",RECV_RETRIED_OFFER:"r_o2",SENT_RETRIED_OFFER_ACK:"s_oack2",RECV_RETRIED_OFFER_ACK:"r_oack2",SENT_PRANSWER:"s_pr",RECV_PRANSWER:"r_pr",NETWORK_READY:"network_ready",SENT_ANSWER:"s_a",RECV_ANSWER:"r_a",SENT_ANSWER_ACK:"s_aack",RECV_ANSWER_ACK:"r_aack",SENT_RETRIED_ANSWER:"s_a2",RECV_RETRIED_ANSWER:"r_a2",SENT_RETRIED_ANSWER_ACK:"s_aack2",RECV_RETRIED_ANSWER_ACK:"r_aack2",SENT_OK:"s_ok",RECV_OK:"r_ok",CALL_CONNECTED:"connected",CALL_ENDED:"ended"},j={ESCALATION_IS_AVAILABLE:"esc_available",USER_INITIATED_REQUEST:"out_started",RECEIVED_INCOMING_REQUEST:"inc_started",REJECTED_INVALID_P2P_STATE:"rej_invalid_state",CONNECTING_TO_MULTIWAY:"u_connecting_mw",CONNECTED_TO_MULTIWAY:"u_connected_mw",PEER_CONNECTING_TO_MULTIWAY:"p_connecting_mw",PEER_CONNECTED_TO_MULTIWAY:"p_connected_mw",READY_TO_ESCALATE:"ready_esc",PEER_FAILED_TO_CONNECT_TO_MULTIWAY:"p_fail_conn",MULTIWAY_CALL_ENDED:"mw_call_ended",TIMED_OUT:"timed_out",PEER_ABORTED:"p_aborted",INTERNAL_ERROR:"internal_err"};function k(l){"use strict";__p&&__p();this.peerID=String(l.peerID);this.callID=String(l.callID);this.$FBRTCCallSummary1=l.isCaller;this.$FBRTCCallSummary2=c("FBRTCUtils").getLocalUploadLogLevel();this.$FBRTCCallSummary11=new Date().valueOf();this.$FBRTCCallSummary3=null;this.$FBRTCCallSummary4={};this.$FBRTCCallSummary6={};this.$FBRTCCallSummary34=null;this.$FBRTCCallSummary35=null;this.$FBRTCCallSummary36=null;this.$FBRTCCallSummary13=0;this.$FBRTCCallSummary14=0;this.$FBRTCCallSummary33=false;this.$FBRTCCallSummary21={};this.$FBRTCCallSummary22={};this.$FBRTCCallSummary7={};this.$FBRTCCallSummary8={};this.$FBRTCCallSummary9={};this.$FBRTCCallSummary10={};this.$FBRTCCallSummary23=null;this.$FBRTCCallSummary16=c("performanceNow")();this.$FBRTCCallSummary12=0;this.$FBRTCCallSummary5={};this.$FBRTCCallSummary15=this.$FBRTCCallSummary16;this.$FBRTCCallSummary17=0;this.$FBRTCCallSummary18={};this.addExtraInfo(c("FBRTCLogger").Key.DEVICE_INFO,this.$FBRTCCallSummary37());this.$FBRTCCallSummary38();this.$FBRTCCallSummary20=c("FBRTCIceStatsParser").getInstance();this.$FBRTCCallSummary19=c("FBRTCLogger").getInstance()}k.prototype.toJsonString=function(){"use strict";this.$FBRTCCallSummary14=new Date().valueOf();return JSON.stringify({version:k.CURRENT_SUMMARY_VERSION,peerID:this.peerID,callID:this.callID,isCaller:this.$FBRTCCallSummary1,uploadLogLevel:this.$FBRTCCallSummary2,clientVersion:this.$FBRTCCallSummary23,callType:this.$FBRTCCallSummary28,isUsingMultiway:this.$FBRTCCallSummary24,conferenceName:this.$FBRTCCallSummary26,activeConn:this.$FBRTCCallSummary25,escP2PCallID:this.$FBRTCCallSummary27,escConfName:this.$FBRTCCallSummary30,serverInfoData:this.$FBRTCCallSummary29,localVideoDuration:this.$FBRTCCallSummary31,remoteVideoDuration:this.$FBRTCCallSummary32,startTime:this.$FBRTCCallSummary11,trigger:this.$FBRTCCallSummary3,signalingTime:this.$FBRTCCallSummary4,escStateTimes:this.$FBRTCCallSummary6,endCallReason:this.$FBRTCCallSummary34,endCallSubreason:this.$FBRTCCallSummary35,isRemoteEnded:this.$FBRTCCallSummary36,lastUpdatedTime:this.$FBRTCCallSummary13,lastSerializedTime:this.$FBRTCCallSummary14,unsetOnRetrieve:this.$FBRTCCallSummary33,openCount:this.$FBRTCCallSummary17,extraInfo:this.$FBRTCCallSummary18,pcStats:this.$FBRTCCallSummary21,captureStats:this.$FBRTCCallSummary22,gen0IceSentCount:this.$FBRTCCallSummary7,gen0IceReceivedCount:this.$FBRTCCallSummary8,iceSentCount:this.$FBRTCCallSummary9,iceReceivedCount:this.$FBRTCCallSummary10,newSignalingTime:this.$FBRTCCallSummary5,accumulatedCallTime:this.$FBRTCCallSummary39()})};k.fromJsonString=function(l){"use strict";__p&&__p();var m=void 0;try{m=JSON.parse(l)}catch(n){return null}if(m.version!==k.CURRENT_SUMMARY_VERSION)return null;if(!Object.prototype.hasOwnProperty.call(m,"peerID")||!Object.prototype.hasOwnProperty.call(m,"callID")||!Object.prototype.hasOwnProperty.call(m,"isCaller")||!Object.prototype.hasOwnProperty.call(m,"startTime")||!Object.prototype.hasOwnProperty.call(m,"trigger")||!Object.prototype.hasOwnProperty.call(m,"signalingTime")||!Object.prototype.hasOwnProperty.call(m,"endCallReason")||!Object.prototype.hasOwnProperty.call(m,"isRemoteEnded")||!Object.prototype.hasOwnProperty.call(m,"lastUpdatedTime")||!Object.prototype.hasOwnProperty.call(m,"lastSerializedTime"))return null;var o=new k({peerID:m.peerID,callID:m.callID,isCaller:m.isCaller});o.$FBRTCCallSummary2=m.uploadLogLevel;o.$FBRTCCallSummary23=m.clientVersion;o.$FBRTCCallSummary11=m.startTime;o.$FBRTCCallSummary3=m.trigger;o.$FBRTCCallSummary4=m.signalingTime;o.$FBRTCCallSummary34=m.endCallReason;o.$FBRTCCallSummary35=m.endCallSubreason;o.$FBRTCCallSummary36=m.isRemoteEnded;o.$FBRTCCallSummary13=m.lastUpdatedTime;o.$FBRTCCallSummary14=m.lastSerializedTime;if(m.callType)o.$FBRTCCallSummary28=m.callType;if(m.isUsingMultiway!=null)o.$FBRTCCallSummary24=m.isUsingMultiway;if(m.conferenceName)o.$FBRTCCallSummary26=m.conferenceName;if(m.escP2PCallID)o.$FBRTCCallSummary27=m.escP2PCallID;if(m.activeConn)o.$FBRTCCallSummary25=m.activeConn;if(m.escConfName)o.$FBRTCCallSummary30=m.escConfName;if(m.serverInfoData)o.$FBRTCCallSummary29=m.serverInfoData;if(m.localVideoDuration)o.$FBRTCCallSummary31=m.localVideoDuration;if(m.remoteVideoDuration)o.$FBRTCCallSummary32=m.remoteVideoDuration;if(m.unsetOnRetrieve)o.$FBRTCCallSummary33=m.unsetOnRetrieve;if(m.openCount)o.$FBRTCCallSummary17=m.openCount;if(m.extraInfo)o.$FBRTCCallSummary18=m.extraInfo;if(m.pcStats)o.$FBRTCCallSummary21=m.pcStats;if(m.captureStats)o.$FBRTCCallSummary22=m.captureStats;if(m.gen0IceSentCount)o.$FBRTCCallSummary7=m.gen0IceSentCount;if(m.gen0IceReceivedCount)o.$FBRTCCallSummary8=m.gen0IceReceivedCount;if(m.iceSentCount)o.$FBRTCCallSummary9=m.iceSentCount;if(m.iceReceivedCount)o.$FBRTCCallSummary10=m.iceReceivedCount;if(m.newSignalingTime)o.$FBRTCCallSummary5=m.newSignalingTime;if(m.accumulatedCallTime)o.$FBRTCCallSummary12=m.accumulatedCallTime;if(m.escStateTimes)o.$FBRTCCallSummary6=m.escStateTimes;return o};k.restoreOrInitialize=function(l,m,n,o,p,q){"use strict";__p&&__p();m=String(m);n=String(n);var r=l.retrieveCallSummary(m,n);if(!r){r=new k({peerID:m,callID:n,isCaller:o});if(p){r.onFullMessageReceived({msg:p});r.onOfferAckSent(p)}else r.onCallStarted(q||c("FBRTCLogger").Trigger.UNKNOWN);c("FBRTCLogger").getInstance().logError(m,n,"Missing call summary from storage")}else if(r.$FBRTCCallSummary33){r.$FBRTCCallSummary34=null;r.$FBRTCCallSummary35=null;r.$FBRTCCallSummary36=null;delete r.$FBRTCCallSummary4[i.CALL_ENDED];delete r.$FBRTCCallSummary5[i.CALL_ENDED];r.$FBRTCCallSummary33=null}return r};k.logSavedSummaries=function(l){"use strict";__p&&__p();var m=l.getLoggableSummaries(),n=m.length;if(n<=0)return;var o=c("FBRTCLogger").getInstance(),p=[];for(var q=0;q<n;q++){var r=m[q];o.logEndCallSummary(r);p.push({peerID:r.peerID,callID:r.callID})}l.removeCallSummaries(p);o.logToConsole("Logged pending summaries: "+n)};k.prototype.save=function(l){"use strict";var m=c("performanceNow")(),n=m-this.$FBRTCCallSummary15;if(n>h){this.$FBRTCCallSummary19.logInfo(this.peerID,this.callID,"Summary too old: "+n);return}l.storeCallSummary(this.peerID,this.callID,this);this.$FBRTCCallSummary15=m};k.prototype.getLastUpdatedTime=function(){"use strict";return this.$FBRTCCallSummary13};k.prototype.setLastUpdatedTime=function(l){"use strict";this.$FBRTCCallSummary13=l};k.prototype.getExtraInfo=function(){"use strict";return this.$FBRTCCallSummary18};k.prototype.getCallTrigger=function(){"use strict";return this.$FBRTCCallSummary3};k.prototype.addExtraInfo=function(l,m){"use strict";this.$FBRTCCallSummary18[l]=m;this.$FBRTCCallSummary38()};k.prototype.isCaller=function(){"use strict";return this.$FBRTCCallSummary1};k.prototype.isNetworkReady=function(){"use strict";if(this.$FBRTCCallSummary4[i.NETWORK_READY])return true;else return false};k.prototype.isAnswerReceived=function(){"use strict";if(this.$FBRTCCallSummary4[i.RECV_ANSWER])return true;else return false};k.prototype.onCallStarted=function(l){"use strict";this.$FBRTCCallSummary3=l;this.$FBRTCCallSummary40(i.CALL_STARTED);this.$FBRTCCallSummary38()};k.prototype.onPopupOpened=function(){"use strict";this.$FBRTCCallSummary40(i.POPUP_OPENED);this.$FBRTCCallSummary17++;this.$FBRTCCallSummary38()};k.prototype.setPcStats=function(l){"use strict";this.$FBRTCCallSummary21=l;this.$FBRTCCallSummary38()};k.prototype.setVideoCaptureStats=function(l,m){"use strict";this.$FBRTCCallSummary22={w:l,h:m};this.$FBRTCCallSummary38()};k.prototype.setVideoCaptureConstraints=function(l){"use strict";this.$FBRTCCallSummary22=l;this.$FBRTCCallSummary38()};k.prototype.setUploadLogLevel=function(l){"use strict";this.$FBRTCCallSummary2=l;this.$FBRTCCallSummary38()};k.prototype.getCallType=function(){"use strict";return this.$FBRTCCallSummary28};k.prototype.setCallType=function(l){"use strict";this.$FBRTCCallSummary28=l;this.addExtraInfo("call_type",l);this.$FBRTCCallSummary38()};k.prototype.setVideoDurations=function(l,m){"use strict";this.$FBRTCCallSummary31=l;this.$FBRTCCallSummary32=m;this.$FBRTCCallSummary38()};k.prototype.setScreenDuration=function(l){"use strict";this.addExtraInfo(c("FBRTCLogger").Key.SCREEN_DURATION,l)};k.prototype.setIsUsingMultiway=function(l){"use strict";this.$FBRTCCallSummary24=l;this.$FBRTCCallSummary38()};k.prototype.setConferenceName=function(l){"use strict";this.$FBRTCCallSummary26=l;this.$FBRTCCallSummary38()};k.prototype.setServerInfoData=function(l){"use strict";this.$FBRTCCallSummary29=l;this.$FBRTCCallSummary38()};k.prototype.setActiveConnection=function(l){"use strict";this.$FBRTCCallSummary25=l;this.$FBRTCCallSummary38()};k.prototype.setEscalationP2PCallID=function(l){"use strict";this.$FBRTCCallSummary27=l;this.$FBRTCCallSummary38()};k.prototype.setEscalationConferenceName=function(l){"use strict";this.$FBRTCCallSummary30=l;this.$FBRTCCallSummary38()};k.prototype.onOfferAckSent=function(l){"use strict";this.onMessageSent({type:c("FBRTCConstants").PayloadType.OFFER_ACK,flag:l.flag})};k.prototype.onMessageSent=function(l){"use strict";__p&&__p();var m=l.flag===1;switch(l.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary41(m,i.SENT_OFFER,i.SENT_RETRIED_OFFER);this.$FBRTCCallSummary42(l,this.$FBRTCCallSummary7,this.$FBRTCCallSummary9);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary41(m,i.SENT_ANSWER,i.SENT_RETRIED_ANSWER);this.$FBRTCCallSummary42(l,this.$FBRTCCallSummary7,this.$FBRTCCallSummary9);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary40(i.SENT_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary40(i.SENT_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary41(m,i.SENT_OFFER_ACK,i.SENT_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary41(m,i.SENT_ANSWER_ACK,i.SENT_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary42(l,this.$FBRTCCallSummary7,this.$FBRTCCallSummary9);break;default:}this.$FBRTCCallSummary38()};k.prototype.$FBRTCCallSummary42=function(l,m,n){"use strict";var o=null,p=null,q=this.$FBRTCCallSummary20.extractIceInfo(l.sdp);for(var r=0;r<q.length;r++){o=q[r].gen;p=q[r].type;if(o===0)this.$FBRTCCallSummary43(m,p);this.$FBRTCCallSummary43(n,p)}};k.prototype.$FBRTCCallSummary43=function(l,m){"use strict";if(!l[m])l[m]=1;else l[m]=l[m]+1};k.prototype.$FBRTCCallSummary44=function(l){"use strict";this.addExtraInfo(c("FBRTCLogger").Key.PEER_IS_MOBILE,l.isFromMobile()?"1":"0")};k.prototype.onFullMessageReceived=function(l){"use strict";__p&&__p();var m=l.msg,n=m.flag===1;switch(m.type){case c("FBRTCConstants").PayloadType.OFFER:this.$FBRTCCallSummary44(l);this.$FBRTCCallSummary41(n,i.RECV_OFFER,i.RECV_RETRIED_OFFER);this.$FBRTCCallSummary42(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;case c("FBRTCConstants").PayloadType.ANSWER:this.$FBRTCCallSummary44(l);this.$FBRTCCallSummary41(n,i.RECV_ANSWER,i.RECV_RETRIED_ANSWER);this.$FBRTCCallSummary42(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;case c("FBRTCConstants").PayloadType.OK:this.$FBRTCCallSummary40(i.RECV_OK);break;case c("FBRTCConstants").PayloadType.PRANSWER:this.$FBRTCCallSummary40(i.RECV_PRANSWER);break;case c("FBRTCConstants").PayloadType.OFFER_ACK:this.$FBRTCCallSummary41(n,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);break;case c("FBRTCConstants").PayloadType.ANSWER_ACK:this.$FBRTCCallSummary41(n,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK);break;case c("FBRTCConstants").PayloadType.ICE_CANDIDATE:this.$FBRTCCallSummary42(m,this.$FBRTCCallSummary8,this.$FBRTCCallSummary10);break;default:}this.$FBRTCCallSummary38()};k.prototype.onMsgAckReceived=function(l,m){"use strict";var n=l.msg.flag===1;if(m)this.$FBRTCCallSummary41(n,i.RECV_OFFER_ACK,i.RECV_RETRIED_OFFER_ACK);else this.$FBRTCCallSummary41(n,i.RECV_ANSWER_ACK,i.RECV_RETRIED_ANSWER_ACK)};k.prototype.onNetworkReady=function(){"use strict";this.$FBRTCCallSummary40(i.NETWORK_READY);this.$FBRTCCallSummary38()};k.prototype.onCallConnected=function(){"use strict";this.$FBRTCCallSummary40(i.CALL_CONNECTED);this.$FBRTCCallSummary38()};k.prototype.onCallEnded=function(l,m,n,o){"use strict";this.$FBRTCCallSummary33=n;this.$FBRTCCallSummary34=String(l);this.$FBRTCCallSummary35=o;this.$FBRTCCallSummary36=m;this.$FBRTCCallSummary40(i.CALL_ENDED);this.$FBRTCCallSummary38()};k.prototype.setOfferSentTime=function(){"use strict";this.$FBRTCCallSummary40(i.SENT_OFFER)};k.prototype.setOfferAckReceivedTime=function(){"use strict";this.$FBRTCCallSummary40(i.RECV_OFFER_ACK)};k.prototype.setAnswerSentTime=function(){"use strict";this.$FBRTCCallSummary40(i.SENT_ANSWER)};k.prototype.setAnswerReceivedTime=function(){"use strict";this.$FBRTCCallSummary40(i.RECV_ANSWER)};k.prototype.setEscalationAvailable=function(){"use strict";this.$FBRTCCallSummary45(j.ESCALATION_IS_AVAILABLE)};k.prototype.setEscalationInitiated=function(){"use strict";this.$FBRTCCallSummary45(j.USER_INITIATED_REQUEST)};k.prototype.setReceivedEscalationRequest=function(){"use strict";this.$FBRTCCallSummary45(j.RECEIVED_INCOMING_REQUEST)};k.prototype.setInvalidP2PEscalationState=function(){"use strict";this.$FBRTCCallSummary45(j.REJECTED_INVALID_P2P_STATE)};k.prototype.setEscalationConnectingToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.CONNECTING_TO_MULTIWAY)};k.prototype.setEscalationConnectedToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.CONNECTED_TO_MULTIWAY)};k.prototype.setEscalationPeerConnectingToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.PEER_CONNECTING_TO_MULTIWAY)};k.prototype.setEscalationPeerConnectedToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.PEER_CONNECTED_TO_MULTIWAY)};k.prototype.setReadyToEscalate=function(){"use strict";this.$FBRTCCallSummary45(j.READY_TO_ESCALATE)};k.prototype.setEscalationPeerFailedToConnectToMultiway=function(){"use strict";this.$FBRTCCallSummary45(j.PEER_FAILED_TO_CONNECT_TO_MULTIWAY)};k.prototype.setEscalationTimedOut=function(){"use strict";this.$FBRTCCallSummary45(j.TIMED_OUT)};k.prototype.toString=function(){"use strict";var l={};l.core_metrics=this.$FBRTCCallSummary46();l.time_series=null;return JSON.stringify(l)};k.prototype.$FBRTCCallSummary46=function(){"use strict";__p&&__p();var l={};l.ver=k.CURRENT_SUMMARY_VERSION;l.log_level=c("FBRTCConstants").uploadLogLevelString(this.$FBRTCCallSummary2);l.caller=this.$FBRTCCallSummary1;l.call_type=this.$FBRTCCallSummary28;l.is_using_multiway=this.$FBRTCCallSummary24;l.active_conn=this.$FBRTCCallSummary25;l.conf_name=this.$FBRTCCallSummary26;l.esc_p2p_call_id=this.$FBRTCCallSummary27;l.esc_state_times=this.$FBRTCCallSummary6;l.esc_conf_name=this.$FBRTCCallSummary30;l.serv_info=this.$FBRTCCallSummary29;l.conn=this.$FBRTCCallSummary47();l.peer_id=this.peerID;l.has_video=true;l.open_count=this.$FBRTCCallSummary17;l.signaling=this.$FBRTCCallSummary48();l.sender=this.$FBRTCCallSummary49();l.receiver=this.$FBRTCCallSummary50();l.end=this.$FBRTCCallSummary51();l.video=this.$FBRTCCallSummary52();l.push_phase=c("SiteData").push_phase;l.client_version=this.$FBRTCCallSummary23;return l};k.prototype.$FBRTCCallSummary47=function(){"use strict";var l={dtls:1};if(this.$FBRTCCallSummary21.sender&&this.$FBRTCCallSummary21.sender.rtt)l.rtt=this.$FBRTCCallSummary21.sender.rtt;return l};k.prototype.$FBRTCCallSummary48=function(){"use strict";__p&&__p();var l={};if(this.$FBRTCCallSummary3)l.trigger=this.$FBRTCCallSummary3;l.start_time=this.$FBRTCCallSummary11;l.time_from_start=this.$FBRTCCallSummary4;var m=this.$FBRTCCallSummary4[i.CALL_CONNECTED],n=this.$FBRTCCallSummary4[i.CALL_ENDED];if(m){if(!n)if(this.$FBRTCCallSummary14)n=this.$FBRTCCallSummary14-this.$FBRTCCallSummary11;else n=this.$FBRTCCallSummary53();var o=n-m;if(o>0)l.duration=o}l.new_time_from_start=this.$FBRTCCallSummary5;m=this.$FBRTCCallSummary5[i.CALL_CONNECTED];n=this.$FBRTCCallSummary5[i.CALL_ENDED];if(m){if(!n)if(this.$FBRTCCallSummary12>0)n=this.$FBRTCCallSummary12;else n=this.$FBRTCCallSummary39();var p=n-m;if(p>0)l.new_duration=p}return l};k.prototype.$FBRTCCallSummary49=function(){"use strict";var l={};if(this.$FBRTCCallSummary7)l.ice_g0=this.$FBRTCCallSummary7;if(this.$FBRTCCallSummary9)l.ice=this.$FBRTCCallSummary9;if(this.$FBRTCCallSummary21.sender)Object.assign(l,this.$FBRTCCallSummary21.sender);return l};k.prototype.$FBRTCCallSummary50=function(){"use strict";var l={};if(this.$FBRTCCallSummary8)l.ice_g0=this.$FBRTCCallSummary8;if(this.$FBRTCCallSummary10)l.ice=this.$FBRTCCallSummary10;return l};k.prototype.$FBRTCCallSummary51=function(){"use strict";__p&&__p();var l={};if(this.$FBRTCCallSummary34!==null){l.end_call_reason_string=c("FBRTCConstants").callEndReasonString(this.$FBRTCCallSummary34);if(this.$FBRTCCallSummary35!==null)l.end_call_subreason_string=this.$FBRTCCallSummary35;l.remote_ended=this.$FBRTCCallSummary36}if(this.$FBRTCCallSummary21.end)Object.assign(l,this.$FBRTCCallSummary21.end);return l};k.prototype.$FBRTCCallSummary52=function(){"use strict";var l={capture:{}};if(this.$FBRTCCallSummary21.video&&this.$FBRTCCallSummary21.video.sender)Object.assign(l,this.$FBRTCCallSummary21.video.sender);if(this.$FBRTCCallSummary22)Object.assign(l.capture,this.$FBRTCCallSummary22);return{sender:l,ld:this.$FBRTCCallSummary31,rd:this.$FBRTCCallSummary32}};k.prototype.$FBRTCCallSummary53=function(){"use strict";return new Date().valueOf()-this.$FBRTCCallSummary11};k.prototype.$FBRTCCallSummary39=function(){"use strict";var l=c("performanceNow")()-this.$FBRTCCallSummary16;return Math.floor(this.$FBRTCCallSummary12+l)};k.prototype.$FBRTCCallSummary40=function(l){"use strict";if(this.$FBRTCCallSummary4[l])return;this.$FBRTCCallSummary4[l]=this.$FBRTCCallSummary53();this.$FBRTCCallSummary5[l]=this.$FBRTCCallSummary39()};k.prototype.$FBRTCCallSummary45=function(l){"use strict";if(this.$FBRTCCallSummary6[l])return;this.$FBRTCCallSummary6[l]=this.$FBRTCCallSummary53()};k.prototype.$FBRTCCallSummary41=function(l,m,n){"use strict";if(l)this.$FBRTCCallSummary40(n);else this.$FBRTCCallSummary40(m)};k.prototype.$FBRTCCallSummary38=function(){"use strict";this.$FBRTCCallSummary13=new Date().valueOf()};k.prototype.$FBRTCCallSummary37=function(){"use strict";return{device:c("UserAgentData").deviceName,os:c("UserAgentData").platformName,os_version:c("UserAgentData").platformFullVersion,browser:c("UserAgentData").browserName,browser_version:c("UserAgentData").browserFullVersion,screen_height:window.screen.availHeight,screen_width:window.screen.availWidth}};k.prototype.setClientVersion=function(l){"use strict";this.$FBRTCCallSummary23=l};k.prototype.getCallDuration=function(){"use strict";var l=this.$FBRTCCallSummary48();return l.duration?l.duration:0};k.CURRENT_SUMMARY_VERSION=19;f.exports=k}),null);
__d("FBRTCCallSummaryStore",["CacheStorage","FBRTCCallSummary","FBRTCLogger","areEqual"],(function a(b,c,d,e,f,g){__p&&__p();var h="localstorage",i="RTC_CALL_SUMMARY_",j="summary",k=2e3,l=3,m=3*60*1e3,n=null;o.getInstance=function(){"use strict";if(!n)n=new o();return n};function o(){"use strict";this.$FBRTCCallSummaryStore1=new(c("CacheStorage"))(h,i);this.$FBRTCCallSummaryStore2=c("FBRTCLogger").getInstance()}o.prototype.storeCallSummary=function(p,q,r){"use strict";__p&&__p();var s=this;this.$FBRTCCallSummaryStore3(function(t){__p&&__p();if(!t[p])t[p]={};var u=t[p][q];if(u){var v=s.$FBRTCCallSummaryStore4(u);if(v&&v.getLastUpdatedTime()>r.getLastUpdatedTime()){s.$FBRTCCallSummaryStore2.logToConsole("Outdated summaries");return null}}t[p][q]=s.$FBRTCCallSummaryStore5(r);return t},s.$FBRTCCallSummaryStore2.logError.bind(s.$FBRTCCallSummaryStore2,p,q))};o.prototype.retrieveCallSummary=function(p,q){"use strict";var r=this.$FBRTCCallSummaryStore6(),s=null;if(r[p])s=r[p][q];if(s)return this.$FBRTCCallSummaryStore4(s);else return null};o.prototype.removeCallSummary=function(p,q){"use strict";this.removeCallSummaries([{peerID:p,callID:q}])};o.prototype.removeCallSummaries=function(p){"use strict";__p&&__p();var q=this;this.$FBRTCCallSummaryStore3(function(r){__p&&__p();var s=p.length;for(var t=0;t<s;t++){var u=p[t].peerID,v=p[t].callID;if(r[u]&&r[u][v]){delete r[u][v];if(q.$FBRTCCallSummaryStore7(r[u]))delete r[u]}}return r},q.$FBRTCCallSummaryStore2.logError.bind(q.$FBRTCCallSummaryStore2,null,null))};o.prototype.getLoggableSummaries=function(){"use strict";__p&&__p();var p=this.$FBRTCCallSummaryStore6(),q=[];for(var r in p)if(Object.prototype.hasOwnProperty.call(p,r))for(var s in p[r])if(Object.prototype.hasOwnProperty.call(p[r],s)){var t=this.$FBRTCCallSummaryStore4(p[r][s],m);if(t)q.push(t)}return q};o.prototype.$FBRTCCallSummaryStore7=function(p){"use strict";for(var q in p)if(Object.prototype.hasOwnProperty.call(p,q))return false;return true};o.prototype.$FBRTCCallSummaryStore5=function(p){"use strict";var q={__t:Date.now(),__d:p.toJsonString()};return q};o.prototype.$FBRTCCallSummaryStore4=function(p,q){"use strict";if(p)if(!q||Date.now()-p.__t>=q)return c("FBRTCCallSummary").fromJsonString(p.__d);return null};o.prototype.$FBRTCCallSummaryStore6=function(){"use strict";var p=this.$FBRTCCallSummaryStore1.get(j)||{};return p};o.prototype.$FBRTCCallSummaryStore3=function(p,q,r,s){__p&&__p();var t,u=this;"use strict";if(r===undefined||r===null)r=l;var v=this.$FBRTCCallSummaryStore6(),w=this.$FBRTCCallSummaryStore6(),x=p(v);if(x===null)return;var y=this.$FBRTCCallSummaryStore6();if(c("areEqual")(w,y)){this.$FBRTCCallSummaryStore1.set(j,x);this.$FBRTCCallSummaryStore2.logToConsole("Updated summaries")}else if(r>0){q("Retry lock");if(s)(function(){var z=u;setTimeout(function(){z.$FBRTCCallSummaryStore3(p,q,r-1,true)},k)})();else this.$FBRTCCallSummaryStore3(p,q,r-1,true)}else q("Failed to lock")};f.exports=o}),null);
__d("FBRTCCallSummaryUploader",["Banzai","FBRTCCallSummary","FBRTCCallSummaryStore"],(function a(b,c,d,e,f,g){var h={init:function i(){var j=c("FBRTCCallSummaryStore").getInstance();c("Banzai").subscribe(c("Banzai").SEND,function(){c("FBRTCCallSummary").logSavedSummaries(j)})}};f.exports=h}),null);
__d("getURLRanges",["URI","URLScraper","UnicodeUtils"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){__p&&__p();var j=arguments.length<=1||arguments[1]===undefined?0:arguments[1],k=i.substr(j),l=c("URLScraper").match(k);if(!l)return[];var m=l;if(!/^[a-z][a-z0-9\-+.]+:\/\//i.test(l))m="http://"+l;if(!c("URI").isValidURI(m))return[];var n=k.indexOf(l),o=c("UnicodeUtils").strlen(k.substr(0,n));j+=o;var p=l.length,q=[{offset:j,length:l.length,entity:{url:m}}];return q.concat(h(i,j+p))}f.exports=h}),null);
__d("NotificationJewelReminderLoader",[],(function a(b,c,d,e,f,g){f.exports={init:function h(i,j){i.load().done(function(k){k.init(j)})}}}),null);
__d("P2PDialogStore",["EventEmitter","P2PActionConstants","P2PDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=void 0,k={};h=babelHelpers.inherits(l,c("EventEmitter"));i=h&&h.prototype;function l(){i.constructor.call(this);j=c("P2PDispatcher").register(this.onEventDispatched.bind(this));k={dialogClass:null,dialogProps:null}}l.prototype.getState=function(){return k};l.prototype.onEventDispatched=function(m){__p&&__p();var n=m.type,o=m.data;switch(n){case c("P2PActionConstants").DIALOG_SHOWN:k.dialogClass=o.dialogClass;k.dialogProps=o.dialogProps;this.emit("change");break;case c("P2PActionConstants").DIALOG_CLOSED:k.dialogClass=null;k.dialogProps=null;this.emit("change");break}};f.exports=new l()}),null);
__d("P2PDialogContainer.react",["P2PDialogStore","React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(){var k,l;for(var m=arguments.length,n=Array(m),o=0;o<m;o++)n[o]=arguments[o];return l=(k=i.constructor).call.apply(k,[this].concat(n)),this.state=c("P2PDialogStore").getState(),this.onDialogStoreChange=function(){this.setState(c("P2PDialogStore").getState())}.bind(this),l}j.prototype.componentDidMount=function(){this.dialogStoreSub=c("P2PDialogStore").addListener("change",this.onDialogStoreChange)};j.prototype.componentWillUnmount=function(){if(this.dialogStoreSub){this.dialogStoreSub.remove();this.dialogStoreSub=null}};j.prototype.render=function(){if(!this.state.dialogClass)return null;var k=this.state.dialogClass;return c("React").createElement(k,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))};f.exports=j}),null);
__d("P2PDialogContainerMount",["P2PDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("P2PDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("PagesPlatformActionConstants",[],(function a(b,c,d,e,f,g){"use strict";var h=Object.freeze({BOOKING_REQUEST_ACCEPT_ERROR:"booking_request_accept_error",BOOKING_REQUEST_ACCEPT_INITIATED:"booking_request_accept_initiated",BOOKING_REQUEST_ACCEPTED:"booking_request_accepted",BOOKING_REQUEST_CREATED:"booking_request_created",BOOKING_REQUEST_DECLINE_ERROR:"booking_request_decline_error",BOOKING_REQUEST_DECLINE_INITIATED:"booking_request_decline_initiated",BOOKING_REQUEST_DECLINED:"booking_request_declined",BOOKING_REQUEST_RESCHEDULE_INITIATED:"booking_request_reschedule_initiated",BOOKING_REQUEST_RESCHEULED:"booking_request_reschedule",DIALOG_CLOSED:"dialog_closed",DIALOG_SHOWN:"dialog_shown",NEW_TIME_CHOSEN:"new_time_chosen"});f.exports=h}),null);
__d("PagesPlatformRequestDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("PagesPlatformDialogStore",["EventEmitter","PagesPlatformActionConstants","PagesPlatformRequestDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j={};h=babelHelpers.inherits(k,c("EventEmitter"));i=h&&h.prototype;function k(){i.constructor.call(this);c("PagesPlatformRequestDispatcher").register(this.onEventDispatched.bind(this));j={dialogClass:null,dialogProps:null}}k.prototype.getState=function(){return j};k.prototype.onEventDispatched=function(l){__p&&__p();var m=l.type,n=l.data;switch(m){case c("PagesPlatformActionConstants").DIALOG_SHOWN:j.dialogClass=n.dialogClass;j.dialogProps=n.dialogProps;this.emit("change");break;case c("PagesPlatformActionConstants").DIALOG_CLOSED:j.dialogClass=null;j.dialogProps=null;this.emit("change");break}};f.exports=new k()}),null);
__d("PagesPlatformDialogContainer.react",["PagesPlatformDialogStore","PureStoreBasedStateMixin","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").createClass({displayName:"PagesPlatformDialogContainer",mixins:[c("PureStoreBasedStateMixin")(c("PagesPlatformDialogStore"))],statics:{calculateState:function i(){return c("PagesPlatformDialogStore").getState()}},render:function i(){if(!this.state.dialogClass)return null;var j=this.state.dialogClass;return c("React").createElement(j,babelHelpers["extends"]({},this.state.dialogProps,{key:"dialog"}))}});f.exports=h}),null);
__d("PagesPlatformDialogContainerMount",["PagesPlatformDialogContainer.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={mount:function i(j){c("ReactDOM").render(c("React").createElement(c("PagesPlatformDialogContainer.react"),null),j)}};f.exports=h}),null);
__d("LiveMessageReceiver",["Arbiter","ChannelConstants","emptyFunction","shield"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){this.eventName=i;this.subs=null;this.handler=c("emptyFunction");this.shutdownHandler=null;this.registered=false;this.appId=1}Object.assign(h,{getAppMessageType:function i(j,k){return"live_message/"+j+":"+k},route:function i(j){var k=function k(l){var m=h.getAppMessageType(j.app_id,j.event_name);c("Arbiter").inform(m,l,c("Arbiter").BEHAVIOR_PERSISTENT)};k(j.response)}});Object.assign(h.prototype,{setAppId:function i(j){this.appId=j;return this},setHandler:function i(j){this.handler=j;this._dirty();return this},setRestartHandler:c("emptyFunction"),setShutdownHandler:function i(j){this.shutdownHandler=c("shield")(j);this._dirty();return this},_dirty:function i(){if(this.registered){this.unregister();this.register()}},register:function i(){var j=function(k,l){return this.handler(l)}.bind(this),k=h.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=c("Arbiter").subscribe(k,j);if(this.shutdownHandler)this.subs.shut=c("Arbiter").subscribe(c("ChannelConstants").ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this},unregister:function i(){if(!this.subs)return this;for(var j in this.subs)if(this.subs[j])this.subs[j].unsubscribe();this.subs=null;this.registered=false;return this}});f.exports=h}),null);
__d("initLiveMessageReceiver",["Arbiter","ChannelConstants","LiveMessageReceiver"],(function a(b,c,d,e,f,g){c("Arbiter").subscribe(c("ChannelConstants").getArbiterType("app_msg"),function(h,i){c("LiveMessageReceiver").route(i.obj)})}),null);
__d("Carousel",["cx","Animation","CSS","Ease","Locale","Slideshow","Style","shield"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("Locale").isRTL()?"right":"left",l=c("Ease").sineInOut;i=babelHelpers.inherits(m,c("Slideshow"));j=i&&i.prototype;function m(n,o){"use strict";j.constructor.call(this,n,o);this.subscribe("items_updated",this._updateItemState.bind(this));this._width=this._config.width}m.prototype._updateItemState=function(n,o){"use strict";this._setContainerPos(n);c("Style").set(this._container,"width",this._items.length*this._config.width+this._config.widthunit)};m.prototype._updateArrowState=function(n){"use strict";if(!this._config.arrows)return;var o=this._config.wrap,p=this._items.length,q=Math.floor(p/this._config.photosperframe);c("CSS").conditionClass(this._arrowNext,"_2xo",q===1||!o&&n===q-1);c("CSS").conditionClass(this._arrowPrev,"_2xo",q===1||!o&&n===0)};m.prototype._animate=function(n){__p&&__p();var o=arguments.length<=1||arguments[1]===undefined?null:arguments[1],p=arguments[2];"use strict";var q=n===-1?this._items.length-1:n,r=0,s=0;r=this._calcOffset(n,this._config.width,this._config.peek,this._config.item_margin);this._animating=true;this.inform("page_start",q);var t=new(c("Animation"))(this._container).setUnit(this._config.widthunit).to(k,r).duration(this._config.animationDuration).ease(l).ondone(p);if(o!==null){s=this._calcOffset(o,this._config.width,this._config.peek,this._config.item_margin);t.from(k,s)}t.go()};m.prototype._calcOffset=function(n,o,p,q){"use strict";__p&&__p();if(this._config.peek_with_offset){var r=-n*(o-p*2);if(n>0)r=r+p-n*(q/2);if(n===this._items.length-1)r+=p;return r}else return-n*o};m.prototype._setContainerPos=function(n){"use strict";c("Style").set(this._container,k,-n*this._config.width+this._config.widthunit)};m.prototype._animateTo=function(n){__p&&__p();var o=arguments.length<=1||arguments[1]===undefined?null:arguments[1];"use strict";if(this._animating)return;var p=this._items.length;if(0<=n&&n<p||!this._config.wrap){var q=(n+p)%p;this._updateArrowState(q);return this._animate(q,o,c("shield")(this._setCurrent,this,q))}var r=n%p,s=r?p-1:0,t=this._items[p-1];c("Style").set(t,"position","absolute");c("Style").set(t,k,-this._config.width+this._config.widthunit);if(s===0)this._setContainerPos(-1);this._animate(r,o,function(){c("Style").set(t,"position","static");c("Style").set(t,k,"auto");this._setContainerPos(s);this._setCurrent(s)}.bind(this))};f.exports=m}),null);
__d("ContextualLayerAutoFlipHorizontal",["ContextualLayerAutoFlip"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("ContextualLayerAutoFlip"));i=h&&h.prototype;j.prototype.getValidPositions=function(k){"use strict";return[k.getPosition()]};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("isSoftNewlineEvent",["Keys"],(function a(b,c,d,e,f,g){"use strict";function h(i){return i.which===c("Keys").RETURN&&(i.getModifierState("Shift")||i.getModifierState("Alt")||i.getModifierState("Control"))}f.exports=h}),null);