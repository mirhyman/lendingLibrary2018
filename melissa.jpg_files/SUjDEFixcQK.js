if (self.CavalryLogger) { CavalryLogger.start_js(["Aareq"]); }

__d("AudienceManagerEngagementVideoSelectionError.react",["cx","ix","CenteredContainer.react","Image.react","Link.react","React","SUIBusinessTheme","SUIText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k;j=babelHelpers.inherits(l,c("React").Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m)}l.prototype.$AudienceManagerEngagementVideoSelectionError1=function(){if(!this.props.subtitleLabel)return null;return c("React").createElement(c("SUIText.react"),{display:"block",shade:"light",size:"meta1",theme:c("SUIBusinessTheme")},this.props.subtitleLabel)};l.prototype.$AudienceManagerEngagementVideoSelectionError2=function(){if(!this.props.actionLabel)return null;if(!this.props.onActionClick)return c("React").createElement(c("SUIText.react"),{display:"block",shade:"light",size:"meta1",theme:c("SUIBusinessTheme")},this.props.actionLabel);return c("React").createElement(c("Link.react"),{onClick:this.props.onActionClick},c("React").createElement("div",{display:"block"},this.props.actionLabel))};l.prototype.render=function(){return c("React").createElement(c("CenteredContainer.react"),{horizontal:true,vertical:true},c("React").createElement(c("Image.react"),{src:i("76143")}),c("React").createElement(c("SUIText.react"),{className:"_3-8x",display:"block",shade:"light",size:"meta1",theme:c("SUIBusinessTheme"),weight:"bold"},this.props.mainLabel),this.$AudienceManagerEngagementVideoSelectionError1(),this.$AudienceManagerEngagementVideoSelectionError2())};f.exports=l}),null);
__d("CommerceCurrencyInputUtils",["Currency"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=100,i={convertPEFormatToPBFormat:function j(k,l){var m=k;if(m){var n=c("Currency").getOffset(l);m=n>0?m*n/h:m}return m},convertPBFormatToPEFormat:function j(k,l){var m=k;if(m){var n=c("Currency").getOffset(l);m=n>0?m*h/n:m}return m}};f.exports=i}),null);
__d("BOFSellerLogger",["BanzaiLogger","Event"],(function a(b,c,d,e,f,g){"use strict";var h="BOFSellerLoggerConfig",i={log:function j(k,l,m){m.event=k;m.seller_profile_id=l;c("BanzaiLogger").log(h,m)},initClickListener:function j(k,l,m,n){c("Event").listen(k,"click",function(){return this.log(l,m,n)}.bind(this))}};f.exports=i}),null);
__d("ProductTaggingTranslations",["fbt"],(function a(b,c,d,e,f,g,h){"use strict";var i={getAddProductTitle:function j(k){return k?h._("Add product"):h._("New product")},getAddProductSubtitle:function j(k){return k?h._("Tag and add to your shop."):h._("Tag a new product in your posts.")}};f.exports=i}),null);
__d("TokenizerExampleSearchSource",["AbstractSearchSource","CountryCodeMap","SearchableEntry","filterObject","forEachObject"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;j.prototype.searchImpl=function(k,l,m){"use strict";__p&&__p();var n=[];m=m||{};if(k){var o=k.toLowerCase(),p=c("filterObject")(c("CountryCodeMap"),function(r){return r.toLowerCase().startsWith(o)}),q=0;c("forEachObject")(p,function(r,s){return n.push(new(c("SearchableEntry"))({order:q++,photo:"/images/mobile/glyph/book_blue_s.png",subtitle:r,title:r,uniqueID:s}))})}l(n,k)};function j(){"use strict";h.apply(this,arguments)}f.exports=j}),null);
__d("AutoPager.react",["DOM","Event","OnVisible","Parent","React","ReactDOM","SubscriptionsHandler","throttle"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").Component);i=h&&h.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.getViewportListener=function(){if(!this.onEnterViewportListener)this.onEnterViewportListener=new(c("OnVisible"))(c("ReactDOM").findDOMNode(this),function(){return this.props.onVisible()}.bind(this),false,this.props.onEnterBuffer,false,this.scrollableArea);return this.onEnterViewportListener}.bind(this),this.onScroll=function(){this.getViewportListener().reset()}.bind(this),m}k.prototype.componentDidMount=function(){"use strict";if(this.props.scrollableAreaClass){this.scrollableArea=c("Parent").byClass(c("ReactDOM").findDOMNode(this),this.props.scrollableAreaClass);var l=c("DOM").find(this.scrollableArea,".uiScrollableAreaWrap")}else l=window;this.subscriptions=new(c("SubscriptionsHandler"))();this.subscriptions.addSubscriptions(c("Event").listen(l,"scroll",c("throttle")(this.onScroll,100)))};k.prototype.componentWillUnmount=function(){"use strict";this.getViewportListener().remove();this.subscriptions.release()};k.prototype.render=function(){"use strict";return c("React").createElement("div",{className:this.props.className})};k.propTypes={className:j.string,onEnterBuffer:j.number.isRequired,onVisible:j.func.isRequired,scrollableAreaClass:j.string};f.exports=k}),null);
__d("moment.instagram",[],(function aa(a,ba,ca,da,b,ea){__p&&__p();(function(c){__p&&__p();var d,fa="2.9.0",e=typeof a!=="undefined"&&(typeof window==="undefined"||window===a.window)?a:this,ga,f=Math.round,ha=Object.prototype.hasOwnProperty,g,h=0,i=1,j=2,k=3,l=4,m=5,n=6,o={},p=[],ia=typeof b!=="undefined"&&b&&b.exports,ja=/^\/?Date\((\-?\d+)/i,ka=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,la=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,ma=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,q=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,na=/\d\d?/,oa=/\d{1,3}/,pa=/\d{1,4}/,qa=/[+\-]?\d{1,6}/,ra=/\d+/,sa=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,r=/Z|[\+\-]\d\d:?\d\d/gi,ta=/T/i,ua=/[\+\-]?\d+/,va=/[\+\-]?\d+(\.\d{1,3})?/,wa=/\d/,xa=/\d\d/,ya=/\d{3}/,za=/\d{4}/,Aa=/[+-]?\d{6}/,Ba=/[+-]?\d+/,Ca=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Da="YYYY-MM-DDTHH:mm:ssZ",s=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],t=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Ea=/([\+\-]|\d\d)/gi,Fa="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),Ga={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},Ha={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},Ia={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},u={},v={s:45,m:45,h:22,d:26,M:11},Ja="DDD w W M D d".split(" "),Ka="M D H h m s w W".split(" "),w={M:function(){return this.month()+1},MMM:function(Q){return this.localeData().monthsShort(this,Q)},MMMM:function(Q){return this.localeData().months(this,Q)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(Q){return this.localeData().weekdaysMin(this,Q)},ddd:function(Q){return this.localeData().weekdaysShort(this,Q)},dddd:function(Q){return this.localeData().weekdays(this,Q)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return G(this.year()%100,2)},YYYY:function(){return G(this.year(),4)},YYYYY:function(){return G(this.year(),5)},YYYYYY:function(){var Q=this.year(),R=Q>=0?"+":"-";return R+G(Math.abs(Q),6)},gg:function(){return G(this.weekYear()%100,2)},gggg:function(){return G(this.weekYear(),4)},ggggg:function(){return G(this.weekYear(),5)},GG:function(){return G(this.isoWeekYear()%100,2)},GGGG:function(){return G(this.isoWeekYear(),4)},GGGGG:function(){return G(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),true)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),false)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return K(this.milliseconds()/100)},SS:function(){return G(K(this.milliseconds()/10),2)},SSS:function(){return G(this.milliseconds(),3)},SSSS:function(){return G(this.milliseconds(),3)},Z:function(){var Q=this.utcOffset(),R="+";if(Q<0){Q=-Q;R="-"}return R+G(K(Q/60),2)+":"+G(K(Q)%60,2)},ZZ:function(){var Q=this.utcOffset(),R="+";if(Q<0){Q=-Q;R="-"}return R+G(K(Q/60),2)+G(K(Q)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},La={},Ma=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],x=false;function y(Q,R,S){switch(arguments.length){case 2:return Q!=null?Q:R;case 3:return Q!=null?Q:R!=null?R:S;default:throw new Error("Implement me")}}function z(Q,R){return ha.call(Q,R)}function A(){return{empty:false,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:false,invalidMonth:null,invalidFormat:false,userInvalidated:false,iso:false}}function Na(Q){d.suppressDeprecationWarnings===false&&typeof console!=="undefined"&&emptyFunction}function B(Q,R){var S=true;return E(function(){if(S){Na(Q);S=false}return R.apply(this,arguments)},R)}function Oa(Q,R){if(!La[Q]){Na(R);La[Q]=true}}function Pa(Q,R){return function(S){return G(Q.call(this,S),R)}}function Qa(Q,R){return function(S){return this.localeData().ordinal(Q.call(this,S),R)}}function Ra(Q,R){var S=(R.year()-Q.year())*12+(R.month()-Q.month()),T=Q.clone().add(S,"months"),U,V;if(R-T<0){U=Q.clone().add(S-1,"months");V=(R-T)/(T-U)}else{U=Q.clone().add(S+1,"months");V=(R-T)/(U-T)}return-(S+V)}while(Ja.length){g=Ja.pop();w[g+"o"]=Qa(w[g],g)}while(Ka.length){g=Ka.pop();w[g+g]=Pa(w[g],2)}w.DDDD=Pa(w.DDD,3);function Sa(Q,R,S){__p&&__p();var T;if(S==null)return R;if(Q.meridiemHour!=null)return Q.meridiemHour(R,S);else if(Q.isPM!=null){T=Q.isPM(S);if(T&&R<12)R+=12;if(!T&&R===12)R=0;return R}else return R}function Ta(){}function C(Q,R){if(R!==false)eb(Q);Ua(this,Q);this._d=new Date(+Q._d);if(x===false){x=true;d.updateOffset(this);x=false}}function D(Q){var R=$a(Q),S=R.year||0,T=R.quarter||0,U=R.month||0,V=R.week||0,W=R.day||0,X=R.hour||0,Y=R.minute||0,Z=R.second||0,$=R.millisecond||0;this._milliseconds=+$+Z*1e3+Y*6e4+X*36e5;this._days=+W+V*7;this._months=+U+T*3+S*12;this._data={};this._locale=d.localeData();this._bubble()}function E(Q,R){for(var g in R)if(z(R,g))Q[g]=R[g];if(z(R,"toString"))Q.toString=R.toString;if(z(R,"valueOf"))Q.valueOf=R.valueOf;return Q}function Ua(Q,R){__p&&__p();var g,S,T;if(typeof R._isAMomentObject!=="undefined")Q._isAMomentObject=R._isAMomentObject;if(typeof R._i!=="undefined")Q._i=R._i;if(typeof R._f!=="undefined")Q._f=R._f;if(typeof R._l!=="undefined")Q._l=R._l;if(typeof R._strict!=="undefined")Q._strict=R._strict;if(typeof R._tzm!=="undefined")Q._tzm=R._tzm;if(typeof R._isUTC!=="undefined")Q._isUTC=R._isUTC;if(typeof R._offset!=="undefined")Q._offset=R._offset;if(typeof R._pf!=="undefined")Q._pf=R._pf;if(typeof R._locale!=="undefined")Q._locale=R._locale;if(p.length>0)for(g in p){S=p[g];T=R[S];if(typeof T!=="undefined")Q[S]=T}return Q}function F(Q){if(Q<0)return Math.ceil(Q);else return Math.floor(Q)}function G(Q,R,S){var T=""+Math.abs(Q),U=Q>=0;while(T.length<R)T="0"+T;return(U?S?"+":"":"-")+T}function Va(Q,R){var S={milliseconds:0,months:0};S.months=R.month()-Q.month()+(R.year()-Q.year())*12;if(Q.clone().add(S.months,"M").isAfter(R))--S.months;S.milliseconds=+R-+Q.clone().add(S.months,"M");return S}function Wa(Q,R){var S;R=M(R,Q);if(Q.isBefore(R))S=Va(Q,R);else{S=Va(R,Q);S.milliseconds=-S.milliseconds;S.months=-S.months}return S}function Xa(Q,R){__p&&__p();return function(S,T){__p&&__p();var U,V;if(T!==null&&!isNaN(+T)){Oa(R,"moment()."+R+"(period, number) is deprecated. Please use moment()."+R+"(number, period).");V=S;S=T;T=V}S=typeof S==="string"?+S:S;U=d.duration(S,T);Ya(this,U,Q);return this}}function Ya(Q,R,S,T){__p&&__p();var U=R._milliseconds,V=R._days,W=R._months;T=T==null?true:T;if(U)Q._d.setTime(+Q._d+U*S);if(V)Lb(Q,"Date",Kb(Q,"Date")+V*S);if(W)Jb(Q,Kb(Q,"Month")+W*S);if(T)d.updateOffset(Q,V||W)}function H(Q){return Object.prototype.toString.call(Q)==="[object Array]"}function I(Q){return Object.prototype.toString.call(Q)==="[object Date]"||Q instanceof Date}function Za(Q,R,S){var T=Math.min(Q.length,R.length),U=Math.abs(Q.length-R.length),V=0,g;for(g=0;g<T;g++)if(S&&Q[g]!==R[g]||!S&&K(Q[g])!==K(R[g]))V++;return V+U}function J(Q){if(Q){var R=Q.toLowerCase().replace(/(.)s$/,"$1");Q=Ha[Q]||Ia[R]||R}return Q}function $a(Q){var R={},S,T;for(T in Q)if(z(Q,T)){S=J(T);if(S)R[S]=Q[T]}return R}function ab(Q){__p&&__p();var R,S;if(Q.indexOf("week")===0){R=7;S="day"}else if(Q.indexOf("month")===0){R=12;S="month"}else return;d[Q]=function(T,U){__p&&__p();var g,V,W=d._locale[Q],X=[];if(typeof T==="number"){U=T;T=c}V=function(g){var Y=d().utc().set(S,g);return W.call(d._locale,Y,T||"")};if(U!=null)return V(U);else{for(g=0;g<R;g++)X.push(V(g));return X}}}function K(Q){var R=+Q,S=0;if(R!==0&&isFinite(R))if(R>=0)S=Math.floor(R);else S=Math.ceil(R);return S}function L(Q,R){return new Date(Date.UTC(Q,R+1,0)).getUTCDate()}function bb(Q,R,S){return O(d([Q,11,31+R-S]),R,S).week}function cb(Q){return db(Q)?366:365}function db(Q){return Q%4===0&&Q%100!==0||Q%400===0}function eb(Q){var R;if(Q._a&&Q._pf.overflow===-2){R=Q._a[i]<0||Q._a[i]>11?i:Q._a[j]<1||Q._a[j]>L(Q._a[h],Q._a[i])?j:Q._a[k]<0||Q._a[k]>24||Q._a[k]===24&&(Q._a[l]!==0||Q._a[m]!==0||Q._a[n]!==0)?k:Q._a[l]<0||Q._a[l]>59?l:Q._a[m]<0||Q._a[m]>59?m:Q._a[n]<0||Q._a[n]>999?n:-1;if(Q._pf._overflowDayOfYear&&(R<h||R>j))R=j;Q._pf.overflow=R}}function fb(Q){if(Q._isValid==null){Q._isValid=!isNaN(Q._d.getTime())&&Q._pf.overflow<0&&!Q._pf.empty&&!Q._pf.invalidMonth&&!Q._pf.nullInput&&!Q._pf.invalidFormat&&!Q._pf.userInvalidated;if(Q._strict)Q._isValid=Q._isValid&&Q._pf.charsLeftOver===0&&Q._pf.unusedTokens.length===0&&Q._pf.bigHour===c}return Q._isValid}function gb(Q){return Q?Q.toLowerCase().replace("_","-"):Q}function hb(Q){__p&&__p();var g=0,R,S,T,U;while(g<Q.length){U=gb(Q[g]).split("-");R=U.length;S=gb(Q[g+1]);S=S?S.split("-"):null;while(R>0){T=ib(U.slice(0,R).join("-"));if(T)return T;if(S&&S.length>=R&&Za(U,S,true)>=R-1)break;R--}g++}return null}function ib(Q){var R=null;return o[Q]}function M(Q,R){var S,T;if(R._isUTC){S=R.clone();T=(d.isMoment(Q)||I(Q)?+Q:+d(Q))-+S;S._d.setTime(+S._d+T);d.updateOffset(S,false);return S}else return d(Q).local()}E(Ta.prototype,{set:function(Q){var R,g;for(g in Q){R=Q[g];if(typeof R==="function")this[g]=R;else this["_"+g]=R}this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(Q){return this._months[Q.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(Q){return this._monthsShort[Q.month()]},monthsParse:function(Q,R,S){__p&&__p();var g,T,U;if(!this._monthsParse){this._monthsParse=[];this._longMonthsParse=[];this._shortMonthsParse=[]}for(g=0;g<12;g++){T=d.utc([2e3,g]);if(S&&!this._longMonthsParse[g]){this._longMonthsParse[g]=new RegExp("^"+this.months(T,"").replace(".","")+"$","i");this._shortMonthsParse[g]=new RegExp("^"+this.monthsShort(T,"").replace(".","")+"$","i")}if(!S&&!this._monthsParse[g]){U="^"+this.months(T,"")+"|^"+this.monthsShort(T,"");this._monthsParse[g]=new RegExp(U.replace(".",""),"i")}if(S&&R==="MMMM"&&this._longMonthsParse[g].test(Q))return g;else if(S&&R==="MMM"&&this._shortMonthsParse[g].test(Q))return g;else if(!S&&this._monthsParse[g].test(Q))return g}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(Q){return this._weekdays[Q.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(Q){return this._weekdaysShort[Q.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(Q){return this._weekdaysMin[Q.day()]},weekdaysParse:function(Q){__p&&__p();var g,R,S;if(!this._weekdaysParse)this._weekdaysParse=[];for(g=0;g<7;g++){if(!this._weekdaysParse[g]){R=d([2e3,1]).day(g);S="^"+this.weekdays(R,"")+"|^"+this.weekdaysShort(R,"")+"|^"+this.weekdaysMin(R,"");this._weekdaysParse[g]=new RegExp(S.replace(".",""),"i")}if(this._weekdaysParse[g].test(Q))return g}},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(Q){var R=this._longDateFormat[Q];if(!R&&this._longDateFormat[Q.toUpperCase()]){R=this._longDateFormat[Q.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(S){return S.slice(1)});this._longDateFormat[Q]=R}return R},isPM:function(Q){return(Q+"").toLowerCase().charAt(0)==="p"},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(Q,R,S){if(Q>11)return S?"pm":"PM";else return S?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(Q,R,S){var T=this._calendar[Q];return typeof T==="function"?T.apply(R,[S]):T},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(Q,R,S,T){var U=this._relativeTime[S];return typeof U==="function"?U(Q,R,S,T):U.replace(/%d/i,Q)},pastFuture:function(Q,R){var S=this._relativeTime[Q>0?"future":"past"];return typeof S==="function"?S(R):S.replace(/%s/i,R)},ordinal:function(Q){return this._ordinal.replace("%d",Q)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(Q){return Q},postformat:function(Q){return Q},week:function(Q){return O(Q,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}});function jb(Q){if(Q.match(/\[[\s\S]/))return Q.replace(/^\[|\]$/g,"");return Q.replace(/\\/g,"")}function kb(Q){__p&&__p();var R=Q.match(ma),g,S;for(g=0,S=R.length;g<S;g++)if(w[R[g]])R[g]=w[R[g]];else R[g]=jb(R[g]);return function(T){var U="";for(g=0;g<S;g++)U+=R[g]instanceof Function?R[g].call(T,Q):R[g];return U}}function N(Q,R){if(!Q.isValid())return Q.localeData().invalidDate();R=lb(R,Q.localeData());if(!u[R])u[R]=kb(R);return u[R](Q)}function lb(Q,R){__p&&__p();var g=5;function S(T){return R.longDateFormat(T)||T}q.lastIndex=0;while(g>=0&&q.test(Q)){Q=Q.replace(q,S);q.lastIndex=0;g-=1}return Q}function mb(Q,R){__p&&__p();var S,T=R._strict;switch(Q){case"Q":return wa;case"DDDD":return ya;case"YYYY":case"GGGG":case"gggg":return T?za:pa;case"Y":case"G":case"g":return Ba;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return T?Aa:qa;case"S":if(T)return wa;case"SS":if(T)return xa;case"SSS":if(T)return ya;case"DDD":return oa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return sa;case"a":case"A":return R._locale._meridiemParse;case"x":return ua;case"X":return va;case"Z":case"ZZ":return r;case"T":return ta;case"SSSS":return ra;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return T?xa:na;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return na;case"Do":return T?R._locale._ordinalParse:R._locale._ordinalParseLenient;default:S=new RegExp(vb(ub(Q.replace("\\","")),"i"));return S}}function nb(Q){Q=Q||"";var R=Q.match(r)||[],S=R[R.length-1]||[],T=(S+"").match(Ea)||["-",0,0],U=+(T[1]*60)+K(T[2]);return T[0]==="+"?U:-U}function ob(Q,R,S){__p&&__p();var T,U=S._a;switch(Q){case"Q":if(R!=null)U[i]=(K(R)-1)*3;break;case"M":case"MM":if(R!=null)U[i]=K(R)-1;break;case"MMM":case"MMMM":T=S._locale.monthsParse(R,Q,S._strict);if(T!=null)U[i]=T;else S._pf.invalidMonth=R;break;case"D":case"DD":if(R!=null)U[j]=K(R);break;case"Do":if(R!=null)U[j]=K(parseInt(R.match(/\d{1,2}/)[0],10));break;case"DDD":case"DDDD":if(R!=null)S._dayOfYear=K(R);break;case"YY":U[h]=d.parseTwoDigitYear(R);break;case"YYYY":case"YYYYY":case"YYYYYY":U[h]=K(R);break;case"a":case"A":S._meridiem=R;break;case"h":case"hh":S._pf.bigHour=true;case"H":case"HH":U[k]=K(R);break;case"m":case"mm":U[l]=K(R);break;case"s":case"ss":U[m]=K(R);break;case"S":case"SS":case"SSS":case"SSSS":U[n]=K(("0."+R)*1e3);break;case"x":S._d=new Date(K(R));break;case"X":S._d=new Date(parseFloat(R)*1e3);break;case"Z":case"ZZ":S._useUTC=true;S._tzm=nb(R);break;case"dd":case"ddd":case"dddd":T=S._locale.weekdaysParse(R);if(T!=null){S._w=S._w||{};S._w.d=T}else S._pf.invalidWeekday=R;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":Q=Q.substr(0,1);case"gggg":case"GGGG":case"GGGGG":Q=Q.substr(0,2);if(R){S._w=S._w||{};S._w[Q]=K(R)}break;case"gg":case"GG":S._w=S._w||{};S._w[Q]=d.parseTwoDigitYear(R)}}function pb(Q){__p&&__p();var R,S,T,U,V,W,X;R=Q._w;if(R.GG!=null||R.W!=null||R.E!=null){V=1;W=4;S=y(R.GG,Q._a[h],O(d(),1,4).year);T=y(R.W,1);U=y(R.E,1)}else{V=Q._locale._week.dow;W=Q._locale._week.doy;S=y(R.gg,Q._a[h],O(d(),V,W).year);T=y(R.w,1);if(R.d!=null){U=R.d;if(U<V)++T}else if(R.e!=null)U=R.e+V;else U=V}X=Gb(S,T,U,W,V);Q._a[h]=X.year;Q._dayOfYear=X.dayOfYear}function qb(Q){__p&&__p();var g,R,S=[],T,U;if(Q._d)return;T=sb(Q);if(Q._w&&Q._a[j]==null&&Q._a[i]==null)pb(Q);if(Q._dayOfYear){U=y(Q._a[h],T[h]);if(Q._dayOfYear>cb(U))Q._pf._overflowDayOfYear=true;R=Cb(U,0,Q._dayOfYear);Q._a[i]=R.getUTCMonth();Q._a[j]=R.getUTCDate()}for(g=0;g<3&&Q._a[g]==null;++g)Q._a[g]=S[g]=T[g];for(;g<7;g++)Q._a[g]=S[g]=Q._a[g]==null?g===2?1:0:Q._a[g];if(Q._a[k]===24&&Q._a[l]===0&&Q._a[m]===0&&Q._a[n]===0){Q._nextDay=true;Q._a[k]=0}Q._d=(Q._useUTC?Cb:Bb).apply(null,S);if(Q._tzm!=null)Q._d.setUTCMinutes(Q._d.getUTCMinutes()-Q._tzm);if(Q._nextDay)Q._a[k]=24}function rb(Q){var R;if(Q._d)return;R=$a(Q._i);Q._a=[R.year,R.month,R.day||R.date,R.hour,R.minute,R.second,R.millisecond];qb(Q)}function sb(Q){var R=new Date();if(Q._useUTC)return[R.getUTCFullYear(),R.getUTCMonth(),R.getUTCDate()];else return[R.getFullYear(),R.getMonth(),R.getDate()]}function tb(Q){__p&&__p();if(Q._f===d.ISO_8601){xb(Q);return}Q._a=[];Q._pf.empty=true;var R=""+Q._i,g,S,T,U,V,W=R.length,X=0;T=lb(Q._f,Q._locale).match(ma)||[];for(g=0;g<T.length;g++){U=T[g];S=(R.match(mb(U,Q))||[])[0];if(S){V=R.substr(0,R.indexOf(S));if(V.length>0)Q._pf.unusedInput.push(V);R=R.slice(R.indexOf(S)+S.length);X+=S.length}if(w[U]){if(S)Q._pf.empty=false;else Q._pf.unusedTokens.push(U);ob(U,S,Q)}else if(Q._strict&&!S)Q._pf.unusedTokens.push(U)}Q._pf.charsLeftOver=W-X;if(R.length>0)Q._pf.unusedInput.push(R);if(Q._pf.bigHour===true&&Q._a[k]<=12)Q._pf.bigHour=c;Q._a[k]=Sa(Q._locale,Q._a[k],Q._meridiem);qb(Q);eb(Q)}function ub(Q){return Q.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(R,S,T,U,V){return S||T||U||V})}function vb(Q){return Q.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function wb(Q){__p&&__p();var R,S,T,g,U;if(Q._f.length===0){Q._pf.invalidFormat=true;Q._d=new Date(NaN);return}for(g=0;g<Q._f.length;g++){U=0;R=Ua({},Q);if(Q._useUTC!=null)R._useUTC=Q._useUTC;R._pf=A();R._f=Q._f[g];tb(R);if(!fb(R))continue;U+=R._pf.charsLeftOver;U+=R._pf.unusedTokens.length*10;R._pf.score=U;if(T==null||U<T){T=U;S=R}}E(Q,S||R)}function xb(Q){__p&&__p();var g,R,S=Q._i,T=Ca.exec(S);if(T){Q._pf.iso=true;for(g=0,R=s.length;g<R;g++)if(s[g][1].exec(S)){Q._f=s[g][0]+(T[6]||" ");break}for(g=0,R=t.length;g<R;g++)if(t[g][1].exec(S)){Q._f+=t[g][0];break}if(S.match(r))Q._f+="Z";tb(Q)}else Q._isValid=false}function yb(Q){xb(Q);if(Q._isValid===false){delete Q._isValid;d.createFromInputFallback(Q)}}function zb(Q,R){var S=[],g;for(g=0;g<Q.length;++g)S.push(R(Q[g],g));return S}function Ab(Q){__p&&__p();var R=Q._i,S;if(R===c)Q._d=new Date();else if(I(R))Q._d=new Date(+R);else if((S=ja.exec(R))!==null)Q._d=new Date(+S[1]);else if(typeof R==="string")yb(Q);else if(H(R)){Q._a=zb(R.slice(0),function(T){return parseInt(T,10)});qb(Q)}else if(typeof R==="object")rb(Q);else if(typeof R==="number")Q._d=new Date(R);else d.createFromInputFallback(Q)}function Bb(Q,R,S,T,U,V,W){var X=new Date(Q,R,S,T,U,V,W);if(Q<1970)X.setFullYear(Q);return X}function Cb(Q){var R=new Date(Date.UTC.apply(null,arguments));if(Q<1970)R.setUTCFullYear(Q);return R}function Db(Q,R){if(typeof Q==="string")if(!isNaN(Q))Q=parseInt(Q,10);else{Q=R.weekdaysParse(Q);if(typeof Q!=="number")return null}return Q}function Eb(Q,R,S,T,U){return U.relativeTime(R||1,!!S,Q,T)}function Fb(Q,R,S){var T=d.duration(Q).abs(),U=f(T.as("s")),V=f(T.as("m")),W=f(T.as("h")),X=f(T.as("d")),Y=f(T.as("M")),Z=f(T.as("y")),$=U<v.s&&["s",U]||V===1&&["m"]||V<v.m&&["mm",V]||W===1&&["h"]||W<v.h&&["hh",W]||X===1&&["d"]||X<v.d&&["dd",X]||Y===1&&["M"]||Y<v.M&&["MM",Y]||Z===1&&["y"]||["yy",Z];$[2]=R;$[3]=+Q>0;$[4]=S;return Eb.apply({},$)}function O(Q,R,S){var T=S-R,U=S-Q.day(),V;if(U>T)U-=7;if(U<T-7)U+=7;V=d(Q).add(U,"d");return{week:Math.ceil(V.dayOfYear()/7),year:V.year()}}function Gb(Q,R,S,T,U){var V=Cb(Q,0,1).getUTCDay(),W,X;V=V===0?7:V;S=S!=null?S:U;W=U-V+(V>T?7:0)-(V<U?7:0);X=7*(R-1)+(S-U)+W+1;return{year:X>0?Q:Q-1,dayOfYear:X>0?X:cb(Q-1)+X}}function Hb(Q){__p&&__p();var R=Q._i,S=Q._f,T;Q._locale=Q._locale||d.localeData(Q._l);if(R===null||S===c&&R==="")return d.invalid({nullInput:true});if(typeof R==="string")Q._i=R=Q._locale.preparse(R);if(d.isMoment(R))return new C(R,true);else if(S)if(H(S))wb(Q);else tb(Q);else Ab(Q);T=new C(Q);if(T._nextDay){T.add(1,"d");T._nextDay=c}return T}d=function(Q,R,S,T){__p&&__p();var U;if(typeof S==="boolean"){T=S;S=c}U={};U._isAMomentObject=true;U._i=Q;U._f=R;U._l=S;U._strict=T;U._isUTC=false;U._pf=A();return Hb(U)};d.suppressDeprecationWarnings=false;d.createFromInputFallback=B("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(Q){Q._d=new Date(Q._i+(Q._useUTC?" UTC":""))});function Ib(Q,R){__p&&__p();var S,g;if(R.length===1&&H(R[0]))R=R[0];if(!R.length)return d();S=R[0];for(g=1;g<R.length;++g)if(R[g][Q](S))S=R[g];return S}d.min=function(){var Q=[].slice.call(arguments,0);return Ib("isBefore",Q)};d.max=function(){var Q=[].slice.call(arguments,0);return Ib("isAfter",Q)};d.utc=function(Q,R,S,T){__p&&__p();var U;if(typeof S==="boolean"){T=S;S=c}U={};U._isAMomentObject=true;U._useUTC=true;U._isUTC=true;U._l=S;U._i=Q;U._f=R;U._strict=T;U._pf=A();return Hb(U).utc()};d.unix=function(Q){return d(Q*1e3)};d.duration=function(Q,R){__p&&__p();var S=Q,T=null,U,V,W,X;if(d.isDuration(Q))S={ms:Q._milliseconds,d:Q._days,M:Q._months};else if(typeof Q==="number"){S={};if(R)S[R]=Q;else S.milliseconds=Q}else if(!!(T=ka.exec(Q))){U=T[1]==="-"?-1:1;S={y:0,d:K(T[j])*U,h:K(T[k])*U,m:K(T[l])*U,s:K(T[m])*U,ms:K(T[n])*U}}else if(!!(T=la.exec(Q))){U=T[1]==="-"?-1:1;W=function(Y){var Z=Y&&parseFloat(Y.replace(",","."));return(isNaN(Z)?0:Z)*U};S={y:W(T[2]),M:W(T[3]),d:W(T[4]),h:W(T[5]),m:W(T[6]),s:W(T[7]),w:W(T[8])}}else if(S==null)S={};else if(typeof S==="object"&&("from"in S||"to"in S)){X=Wa(d(S.from),d(S.to));S={};S.ms=X.milliseconds;S.M=X.months}V=new D(S);if(d.isDuration(Q)&&z(Q,"_locale"))V._locale=Q._locale;return V};d.version=fa;d.defaultFormat=Da;d.ISO_8601=function(){};d.momentProperties=p;d.updateOffset=function(){};d.relativeTimeThreshold=function(Q,R){if(v[Q]===c)return false;if(R===c)return v[Q];v[Q]=R;return true};d.lang=B("moment.lang is deprecated. Use moment.locale instead.",function(Q,R){return d.locale(Q,R)});d.locale=function(Q,R){var S;if(Q){if(typeof R!=="undefined")S=d.defineLocale(Q,R);else S=d.localeData(Q);if(S)d.duration._locale=d._locale=S}return d._locale._abbr};d.defineLocale=function(Q,R){__p&&__p();if(R!==null){R.abbr=Q;if(!o[Q])o[Q]=new Ta();o[Q].set(R);d.locale(Q);return o[Q]}else{delete o[Q];return null}};d.langData=B("moment.langData is deprecated. Use moment.localeData instead.",function(Q){return d.localeData(Q)});d.localeData=function(Q){__p&&__p();var R;if(Q&&Q._locale&&Q._locale._abbr)Q=Q._locale._abbr;if(!Q)return d._locale;if(!H(Q)){R=ib(Q);if(R)return R;Q=[Q]}return hb(Q)};d.isMoment=function(Q){return Q instanceof C||Q!=null&&z(Q,"_isAMomentObject")};d.isDuration=function(Q){return Q instanceof D};for(g=Ma.length-1;g>=0;--g)ab(Ma[g]);d.normalizeUnits=function(Q){return J(Q)};d.invalid=function(Q){var R=d.utc(NaN);if(Q!=null)E(R._pf,Q);else R._pf.userInvalidated=true;return R};d.parseZone=function(){return d.apply(null,arguments).parseZone()};d.parseTwoDigitYear=function(Q){return K(Q)+(K(Q)>68?1900:2e3)};d.isDate=I;E(d.fn=C.prototype,{clone:function(){return d(this)},valueOf:function(){return+this._d-(this._offset||0)*6e4},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var Q=d(this).utc();if(0<Q.year()&&Q.year()<=9999)if("function"===typeof Date.prototype.toISOString)return this.toDate().toISOString();else return N(Q,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]");else return N(Q,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var Q=this;return[Q.year(),Q.month(),Q.date(),Q.hours(),Q.minutes(),Q.seconds(),Q.milliseconds()]},isValid:function(){return fb(this)},isDSTShifted:function(){if(this._a)return this.isValid()&&Za(this._a,(this._isUTC?d.utc(this._a):d(this._a)).toArray())>0;return false},parsingFlags:function(){return E({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(Q){return this.utcOffset(0,Q)},local:function(Q){if(this._isUTC){this.utcOffset(0,Q);this._isUTC=false;if(Q)this.subtract(this._dateUtcOffset(),"m")}return this},format:function(Q){var R=N(this,Q||d.defaultFormat);return this.localeData().postformat(R)},add:Xa(1,"add"),subtract:Xa(-1,"subtract"),diff:function(Q,R,S){__p&&__p();var T=M(Q,this),U=(T.utcOffset()-this.utcOffset())*6e4,V,W,X,Y;R=J(R);if(R==="year"||R==="month"||R==="quarter"){X=Ra(this,T);if(R==="quarter")X=X/3;else if(R==="year")X=X/12}else{W=this-T;X=R==="second"?W/1e3:R==="minute"?W/6e4:R==="hour"?W/36e5:R==="day"?(W-U)/864e5:R==="week"?(W-U)/6048e5:W}return S?X:F(X)},from:function(Q,R){return d.duration({to:this,from:Q}).locale(this.locale()).humanize(!R)},fromNow:function(Q){return this.from(d(),Q)},calendar:function(Q){var R=Q||d(),S=M(R,this).startOf("day"),T=this.diff(S,"days",true),U=T<-6?"sameElse":T<-1?"lastWeek":T<0?"lastDay":T<1?"sameDay":T<2?"nextDay":T<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(U,this,d(R)))},isLeapYear:function(){return db(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(Q){var R=this._isUTC?this._d.getUTCDay():this._d.getDay();if(Q!=null){Q=Db(Q,this.localeData());return this.add(Q-R,"d")}else return R},month:P("Month",true),startOf:function(Q){__p&&__p();Q=J(Q);switch(Q){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}if(Q==="week")this.weekday(0);else if(Q==="isoWeek")this.isoWeekday(1);if(Q==="quarter")this.month(Math.floor(this.month()/3)*3);return this},endOf:function(Q){Q=J(Q);if(Q===c||Q==="millisecond")return this;return this.startOf(Q).add(1,Q==="isoWeek"?"week":Q).subtract(1,"ms")},isAfter:function(Q,R){var S;R=J(typeof R!=="undefined"?R:"millisecond");if(R==="millisecond"){Q=d.isMoment(Q)?Q:d(Q);return+this>+Q}else{S=d.isMoment(Q)?+Q:+d(Q);return S<+this.clone().startOf(R)}},isBefore:function(Q,R){var S;R=J(typeof R!=="undefined"?R:"millisecond");if(R==="millisecond"){Q=d.isMoment(Q)?Q:d(Q);return+this<+Q}else{S=d.isMoment(Q)?+Q:+d(Q);return+this.clone().endOf(R)<S}},isBetween:function(Q,R,S){return this.isAfter(Q,S)&&this.isBefore(R,S)},isSame:function(Q,R){var S;R=J(R||"millisecond");if(R==="millisecond"){Q=d.isMoment(Q)?Q:d(Q);return+this===+Q}else{S=+d(Q);return+this.clone().startOf(R)<=S&&S<=+this.clone().endOf(R)}},min:B("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(Q){Q=d.apply(null,arguments);return Q<this?this:Q}),max:B("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(Q){Q=d.apply(null,arguments);return Q>this?this:Q}),zone:B("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(Q,R){if(Q!=null){if(typeof Q!=="string")Q=-Q;this.utcOffset(Q,R);return this}else return-this.utcOffset()}),utcOffset:function(Q,R){__p&&__p();var S=this._offset||0,T;if(Q!=null){if(typeof Q==="string")Q=nb(Q);if(Math.abs(Q)<16)Q=Q*60;if(!this._isUTC&&R)T=this._dateUtcOffset();this._offset=Q;this._isUTC=true;if(T!=null)this.add(T,"m");if(S!==Q)if(!R||this._changeInProgress)Ya(this,d.duration(Q-S,"m"),1,false);else if(!this._changeInProgress){this._changeInProgress=true;d.updateOffset(this,true);this._changeInProgress=null}return this}else return this._isUTC?S:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&this._offset===0},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){if(this._tzm)this.utcOffset(this._tzm);else if(typeof this._i==="string")this.utcOffset(nb(this._i));return this},hasAlignedHourOffset:function(Q){if(!Q)Q=0;else Q=d(Q).utcOffset();return(this.utcOffset()-Q)%60===0},daysInMonth:function(){return L(this.year(),this.month())},dayOfYear:function(Q){var R=f((d(this).startOf("day")-d(this).startOf("year"))/864e5)+1;return Q==null?R:this.add(Q-R,"d")},quarter:function(Q){return Q==null?Math.ceil((this.month()+1)/3):this.month((Q-1)*3+this.month()%3)},weekYear:function(Q){var R=O(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return Q==null?R:this.add(Q-R,"y")},isoWeekYear:function(Q){var R=O(this,1,4).year;return Q==null?R:this.add(Q-R,"y")},week:function(Q){var R=this.localeData().week(this);return Q==null?R:this.add((Q-R)*7,"d")},isoWeek:function(Q){var R=O(this,1,4).week;return Q==null?R:this.add((Q-R)*7,"d")},weekday:function(Q){var R=(this.day()+7-this.localeData()._week.dow)%7;return Q==null?R:this.add(Q-R,"d")},isoWeekday:function(Q){return Q==null?this.day()||7:this.day(this.day()%7?Q:Q-7)},isoWeeksInYear:function(){return bb(this.year(),1,4)},weeksInYear:function(){var Q=this.localeData()._week;return bb(this.year(),Q.dow,Q.doy)},get:function(Q){Q=J(Q);return this[Q]()},set:function(Q,R){var S;if(typeof Q==="object")for(S in Q)this.set(S,Q[S]);else{Q=J(Q);if(typeof this[Q]==="function")this[Q](R)}return this},locale:function(Q){var R;if(Q===c)return this._locale._abbr;else{R=d.localeData(Q);if(R!=null)this._locale=R;return this}},lang:B("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(Q){if(Q===c)return this.localeData();else return this.locale(Q)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return-Math.round(this._d.getTimezoneOffset()/15)*15}});function Jb(Q,R){var S;if(typeof R==="string"){R=Q.localeData().monthsParse(R);if(typeof R!=="number")return Q}S=Math.min(Q.date(),L(Q.year(),R));Q._d["set"+(Q._isUTC?"UTC":"")+"Month"](R,S);return Q}function Kb(Q,R){return Q._d["get"+(Q._isUTC?"UTC":"")+R]()}function Lb(Q,R,S){if(R==="Month")return Jb(Q,S);else return Q._d["set"+(Q._isUTC?"UTC":"")+R](S)}function P(Q,R){return function(S){if(S!=null){Lb(this,Q,S);d.updateOffset(this,R);return this}else return Kb(this,Q)}}d.fn.millisecond=d.fn.milliseconds=P("Milliseconds",false);d.fn.second=d.fn.seconds=P("Seconds",false);d.fn.minute=d.fn.minutes=P("Minutes",false);d.fn.hour=d.fn.hours=P("Hours",true);d.fn.date=P("Date",true);d.fn.dates=B("dates accessor is deprecated. Use date instead.",P("Date",true));d.fn.year=P("FullYear",true);d.fn.years=B("years accessor is deprecated. Use year instead.",P("FullYear",true));d.fn.days=d.fn.day;d.fn.months=d.fn.month;d.fn.weeks=d.fn.week;d.fn.isoWeeks=d.fn.isoWeek;d.fn.quarters=d.fn.quarter;d.fn.toJSON=d.fn.toISOString;d.fn.isUTC=d.fn.isUtc;function Mb(Q){return Q*400/146097}function Nb(Q){return Q*146097/400}E(d.duration.fn=D.prototype,{_bubble:function(){__p&&__p();var Q=this._milliseconds,R=this._days,S=this._months,T=this._data,U,V,W,X=0;T.milliseconds=Q%1e3;U=F(Q/1e3);T.seconds=U%60;V=F(U/60);T.minutes=V%60;W=F(V/60);T.hours=W%24;R+=F(W/24);X=F(Mb(R));R-=F(Nb(X));S+=F(R/30);R%=30;X+=F(S/12);S%=12;T.days=R;T.months=S;T.years=X},abs:function(){__p&&__p();this._milliseconds=Math.abs(this._milliseconds);this._days=Math.abs(this._days);this._months=Math.abs(this._months);this._data.milliseconds=Math.abs(this._data.milliseconds);this._data.seconds=Math.abs(this._data.seconds);this._data.minutes=Math.abs(this._data.minutes);this._data.hours=Math.abs(this._data.hours);this._data.months=Math.abs(this._data.months);this._data.years=Math.abs(this._data.years);return this},weeks:function(){return F(this.days()/7)},valueOf:function(){return this._milliseconds+this._days*864e5+this._months%12*2592e6+K(this._months/12)*31536e6},humanize:function(Q){var R=Fb(this,!Q,this.localeData());if(Q)R=this.localeData().pastFuture(+this,R);return this.localeData().postformat(R)},add:function(Q,R){var S=d.duration(Q,R);this._milliseconds+=S._milliseconds;this._days+=S._days;this._months+=S._months;this._bubble();return this},subtract:function(Q,R){var S=d.duration(Q,R);this._milliseconds-=S._milliseconds;this._days-=S._days;this._months-=S._months;this._bubble();return this},get:function(Q){Q=J(Q);return this[Q.toLowerCase()+"s"]()},as:function(Q){__p&&__p();var R,S;Q=J(Q);if(Q==="month"||Q==="year"){R=this._days+this._milliseconds/864e5;S=this._months+Mb(R)*12;return Q==="month"?S:S/12}else{R=this._days+Math.round(Nb(this._months/12));switch(Q){case"week":return R/7+this._milliseconds/6048e5;case"day":return R+this._milliseconds/864e5;case"hour":return R*24+this._milliseconds/36e5;case"minute":return R*24*60+this._milliseconds/6e4;case"second":return R*24*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(R*24*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+Q)}}},lang:d.fn.lang,locale:d.fn.locale,toIsoString:B("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var Q=Math.abs(this.years()),R=Math.abs(this.months()),S=Math.abs(this.days()),T=Math.abs(this.hours()),U=Math.abs(this.minutes()),V=Math.abs(this.seconds()+this.milliseconds()/1e3);if(!this.asSeconds())return"P0D";return(this.asSeconds()<0?"-":"")+"P"+(Q?Q+"Y":"")+(R?R+"M":"")+(S?S+"D":"")+(T||U||V?"T":"")+(T?T+"H":"")+(U?U+"M":"")+(V?V+"S":"")},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}});d.duration.fn.toString=d.duration.fn.toISOString;function Ob(Q){d.duration.fn[Q]=function(){return this._data[Q]}}for(g in Ga)if(z(Ga,g))Ob(g.toLowerCase());d.duration.fn.asMilliseconds=function(){return this.as("ms")};d.duration.fn.asSeconds=function(){return this.as("s")};d.duration.fn.asMinutes=function(){return this.as("m")};d.duration.fn.asHours=function(){return this.as("h")};d.duration.fn.asDays=function(){return this.as("d")};d.duration.fn.asWeeks=function(){return this.as("weeks")};d.duration.fn.asMonths=function(){return this.as("M")};d.duration.fn.asYears=function(){return this.as("y")};d.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(Q){var R=Q%10,S=K(Q%100/10)===1?"th":R===1?"st":R===2?"nd":R===3?"rd":"th";return Q+S}});function Pb(Q){if(typeof ender!=="undefined")return;ga=e.moment;if(Q)e.moment=B("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",d);else e.moment=d}if(ia)b.exports=d;else if(typeof define==="function"&&define.amd){define(function(ba,ea,b){if(b.config&&b.config()&&b.config().noGlobal===true)e.moment=ga;return d});Pb(true)}else Pb()}).call(this)}),null);
__d("SphericalMediaPerformanceTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$SphericalMediaPerformanceTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:SphericalMediaPerformanceLoggerConfig",this.$SphericalMediaPerformanceTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$SphericalMediaPerformanceTypedLogger1={};return this};h.prototype.updateData=function(j){this.$SphericalMediaPerformanceTypedLogger1=babelHelpers["extends"]({},this.$SphericalMediaPerformanceTypedLogger1,j);return this};h.prototype.setComputationTimeMs=function(j){this.$SphericalMediaPerformanceTypedLogger1.computation_time_ms=j;return this};h.prototype.setEndTimestampS=function(j){this.$SphericalMediaPerformanceTypedLogger1.end_timestamp_s=j;return this};h.prototype.setEvent=function(j){this.$SphericalMediaPerformanceTypedLogger1.event=j;return this};h.prototype.setFallbackDuration=function(j){this.$SphericalMediaPerformanceTypedLogger1.fallback_duration=j;return this};h.prototype.setFallbackReason=function(j){this.$SphericalMediaPerformanceTypedLogger1.fallback_reason=j;return this};h.prototype.setNormalizedFrameTime=function(j){this.$SphericalMediaPerformanceTypedLogger1.normalized_frame_time=j;return this};h.prototype.setNumSpatialAudioStutters=function(j){this.$SphericalMediaPerformanceTypedLogger1.num_spatial_audio_stutters=j;return this};h.prototype.setProductName=function(j){this.$SphericalMediaPerformanceTypedLogger1.product_name=j;return this};h.prototype.setProjection=function(j){this.$SphericalMediaPerformanceTypedLogger1.projection=j;return this};h.prototype.setSpatialReactionsCacheUsed=function(j){this.$SphericalMediaPerformanceTypedLogger1.spatial_reactions_cache_used=j;return this};h.prototype.setSpatialReactionsClustersCount=function(j){this.$SphericalMediaPerformanceTypedLogger1.spatial_reactions_clusters_count=j;return this};h.prototype.setSpatialReactionsCount=function(j){this.$SphericalMediaPerformanceTypedLogger1.spatial_reactions_count=j;return this};h.prototype.setSphericalRendererSetupDuration=function(j){this.$SphericalMediaPerformanceTypedLogger1.spherical_renderer_setup_duration=j;return this};h.prototype.setStartTimestampS=function(j){this.$SphericalMediaPerformanceTypedLogger1.start_timestamp_s=j;return this};h.prototype.setVideoID=function(j){this.$SphericalMediaPerformanceTypedLogger1.video_id=j;return this};var i={computation_time_ms:true,end_timestamp_s:true,event:true,fallback_duration:true,fallback_reason:true,normalized_frame_time:true,num_spatial_audio_stutters:true,product_name:true,projection:true,spatial_reactions_cache_used:true,spatial_reactions_clusters_count:true,spatial_reactions_count:true,spherical_renderer_setup_duration:true,start_timestamp_s:true,video_id:true};f.exports=h}),null);
__d("VideoThumbnailUIActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:VideoThumbnailUIActionsLoggerConfig",this.$VideoThumbnailUIActionsTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:VideoThumbnailUIActionsLoggerConfig",this.$VideoThumbnailUIActionsTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$VideoThumbnailUIActionsTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$VideoThumbnailUIActionsTypedLogger1)};h.prototype.updateData=function(j){this.$VideoThumbnailUIActionsTypedLogger1=babelHelpers["extends"]({},this.$VideoThumbnailUIActionsTypedLogger1,j);return this};h.prototype.setEditLocation=function(j){this.$VideoThumbnailUIActionsTypedLogger1.edit_location=j;return this};h.prototype.setEvent=function(j){this.$VideoThumbnailUIActionsTypedLogger1.event=j;return this};h.prototype.setProfileID=function(j){this.$VideoThumbnailUIActionsTypedLogger1.profile_id=j;return this};h.prototype.setThumbnailIndex=function(j){this.$VideoThumbnailUIActionsTypedLogger1.thumbnail_index=j;return this};h.prototype.setVC=function(j){this.$VideoThumbnailUIActionsTypedLogger1.vc=j;return this};h.prototype.setVideoID=function(j){this.$VideoThumbnailUIActionsTypedLogger1.video_id=j;return this};var i={edit_location:true,event:true,profile_id:true,thumbnail_index:true,vc:true,video_id:true};f.exports=h}),null);
__d("AsyncUploadQueue",["AsyncUploadBase"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AsyncUploadBase"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this,k);this._pending=[];this._waiting=[]}j.prototype.enqueue=function(k,l,m){"use strict";return this._add(this._waiting.push.bind(this._waiting),k,l,m)};j.prototype.prepend=function(k,l,m){"use strict";return this._add(this._waiting.unshift.bind(this._waiting),k,l,m)};j.prototype._add=function(k,l,m,n){"use strict";var o=babelHelpers["extends"]({},this._data,n),p=this._createFileUpload(l,m,o);k(p);this._processQueue();return p};j.prototype.dequeue=function(k){"use strict";this._abort(k)};f.exports=j}),null);
__d("Waiter",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";this.$Waiter1=i;this.$Waiter2=0;this.$Waiter3=false}h.prototype.wait=function(i){"use strict";__p&&__p();var j=this,k=false;this.$Waiter4();return function(){if(k)return;for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];i&&i.apply(this,m);j.$Waiter5();k=true}};h.prototype.go=function(){"use strict";this.$Waiter3=true;this.$Waiter6();return this};h.prototype.$Waiter4=function(){"use strict";this.$Waiter2++};h.prototype.$Waiter6=function(){"use strict";if(!this.$Waiter2&&this.$Waiter3)this.$Waiter1()};h.prototype.$Waiter5=function(){"use strict";this.$Waiter2--;this.$Waiter6()};f.exports=h}),null);
__d("PageCreateFundraiserAction.react",["ix","Image.react","PageActionOpenURLAsyncDialog.react","React","fbglyph"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){return c("React").createElement(c("PageActionOpenURLAsyncDialog.react"),babelHelpers["extends"]({},j,{image:c("React").createElement(c("Image.react"),{src:h("128224")})}))};f.exports=i}),null);
__d("PageReviewAction.react",["ix","Image.react","PageActionOpenURLAsyncDialog.react","React","fbglyph"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(j){return c("React").createElement(c("PageActionOpenURLAsyncDialog.react"),babelHelpers["extends"]({},j,{image:c("React").createElement(c("Image.react"),{src:h("128414")})}))};f.exports=i}),null);
__d("ComputerPanelActionState",["keyMirror"],(function a(b,c,d,e,f,g){var h=c("keyMirror")({NEUTRAL:null,DROP:null});f.exports=h}),null);
__d("DragDropFilePicker",["DragDropTarget","mixin","ArbiterMixin","FilePickerEvent","FileSelectionContainer","createArrayFromMixed","SelectionSource"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k,l){"use strict";__p&&__p();i.constructor.call(this);this.$DragDropFilePicker1=new(c("DragDropTarget"))(k);if(l.onDocumentDragEnterCallback)this.$DragDropFilePicker1.setOnDocumentDragEnterCallback(l.onDocumentDragEnterCallback);if(l.onDocumentDragLeaveCallback)this.$DragDropFilePicker1.setOnDocumentDragLeaveCallback(l.onDocumentDragLeaveCallback);if(l.onDragEnterCallback)this.$DragDropFilePicker1.setOnDragEnterCallback(l.onDragEnterCallback);if(l.onDragLeaveCallback)this.$DragDropFilePicker1.setOnDragLeaveCallback(l.onDragLeaveCallback);this.$DragDropFilePicker1.setOnFilesDropCallback(function(m){var n=c("createArrayFromMixed")(m).filter(function(o){return!l.isFileValid||l.isFileValid(o)}).map(function(o){return new(c("FileSelectionContainer"))(o)});if(n.length>0)this.inform(c("FilePickerEvent").SELECTED,{sender:this,source:c("SelectionSource").FILE,selections:n});else l.onDocumentDragLeaveCallback.call(null)}.bind(this));this.$DragDropFilePicker1.enable()}j.prototype.disable=function(){"use strict";this.$DragDropFilePicker1.disable()};f.exports=j}),null);
__d("PUWUploaders",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({HTML5:"html5",FLASH:"flash"})}),null);
__d("OmnipickerHTML5FilePickerFactory",["fbt","HTML5FilePicker","PUWApplications","PUWMethods","PUWUploaders"],(function a(b,c,d,e,f,g,h){var i={create:function j(k){return new(c("HTML5FilePicker"))(k,{accept:"image/*",fallbackFunction:function l(){},multiple:true,qn:"todo",waterfallApp:c("PUWApplications").WEB_OMNIPICKER,waterfallUploader:c("PUWUploaders").HTML5,waterfallMethod:c("PUWMethods").FILE_SELECTOR,title:h._("Choose files to upload")})}};f.exports=i}),null);
__d("OmnipickerDispatcher",["Dispatcher_DEPRECATED"],(function a(b,c,d,e,f,g){"use strict";f.exports=new(c("Dispatcher_DEPRECATED"))()}),null);
__d("OmnipickerActions",["OmnipickerDispatcher","clamp","keyMirror"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("keyMirror")({APP_INITIALIZED:null,FILE_PICKER_SELECT_STARTED:null,FILE_PICKER_SELECTED:null,FILE_PICKER_SELECT_CANCELED:null,EXISTING_PHOTOS_FETCHED:null,PANEL_INITIALIZED:null,PHOTO_SELECTED_OPTIMISTICALLY:null,PHOTO_SOURCE_SELECTED:null,RESIZE_FAILED:null,RESIZE_STARTED:null,RESIZE_SUCCEEDED:null,SELECTION_CHANGED:null,UPLOAD_CANCELED:null,UPLOAD_FAILED:null,UPLOAD_FINISHED:null,UPLOAD_PROGRESSED:null,UPLOAD_QUEUED:null,UPLOAD_STARTED:null}),i={types:h,appInitialized:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.APP_INITIALIZED,appID:k,logger:l,initialSource:m})},panelInitialized:function j(k,l){c("OmnipickerDispatcher").dispatch({type:h.PANEL_INITIALIZED,appID:k,source:l})},photoSourceSelected:function j(k,l){c("OmnipickerDispatcher").dispatch({type:h.PHOTO_SOURCE_SELECTED,appID:k,source:l})},filePickerSelectStarted:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.FILE_PICKER_SELECT_STARTED,appID:k,method:l,ref:m})},filePickerSelected:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.FILE_PICKER_SELECTED,appID:k,method:l,ref:m})},filePickerSelectCancelled:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.FILE_PICKER_SELECT_CANCELED,appID:k,method:l,ref:m})},resizeFailed:function j(k,l,m,n){c("OmnipickerDispatcher").dispatch({type:h.RESIZE_FAILED,appID:k,dt:l,bytes:m,errorCode:n})},resizeStarted:function j(k){c("OmnipickerDispatcher").dispatch({type:h.RESIZE_STARTED,appID:k})},resizeSucceeded:function j(k,l,m,n,o){c("OmnipickerDispatcher").dispatch({type:h.RESIZE_SUCCEEDED,appID:k,dt:l,bytes:m,originalSize:n,customTags:o})},uploadQueued:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_QUEUED,appID:k,source:l,ids:m.map(function(n){return n.getSelectionContainerID()}),volume:m.length})},selectionChanged:function j(k,l,m,n){c("OmnipickerDispatcher").dispatch({type:h.SELECTION_CHANGED,appID:k,source:l,id:m,checked:n})},uploadStart:function j(k,l,m,n){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_STARTED,appID:k,source:l,id:m,bytes:n})},uploadProgress:function j(k,l,m,n){var o=c("clamp")(n.bytesTransferred/n.file.size*100,0,100);c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_PROGRESSED,appID:k,source:l,id:m,progress:o})},uploadDone:function j(k,l,m,n,o,p){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_FINISHED,appID:k,source:l,id:m,src:n,fbid:o,retriesNeeded:p})},uploadFailed:function j(k,l,m,n,o){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_FAILED,appID:k,source:l,id:m,retriesNeeded:n,errorCode:o})},existingPhotosFetched:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.EXISTING_PHOTOS_FETCHED,appID:k,photos:m.map(function(n){return{source:l,id:n.id,src:n.image.uri}})})},optimisticSelect:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.PHOTO_SELECTED_OPTIMISTICALLY,appID:k,source:l,id:m})},cancelUpload:function j(k,l,m){c("OmnipickerDispatcher").dispatch({type:h.UPLOAD_CANCELED,appID:k,source:l,id:m})}};f.exports=i}),null);
__d("OmnipickerUploadController",["OmnipickerActions","SelectionSource"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$OmnipickerUploadController1={}}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadController1[i]={}};h.prototype.registerAdapter=function(i,j,k){__p&&__p();this.$OmnipickerUploadController1[i][k]=j;var l=c("SelectionSource").toPhotoSourceType(k);j.subscribe("maxReached",function(){});j.subscribe("resize_start",this.$OmnipickerUploadController2.bind(this,i));j.subscribe("resize_done",this.$OmnipickerUploadController3.bind(this,i));j.subscribe("resize_hires_start",function(){});j.subscribe("upload_start",this.$OmnipickerUploadController4.bind(this,i,l));j.subscribe("upload_progress",this.$OmnipickerUploadController5.bind(this,i,l));j.subscribe("upload_done",this.$OmnipickerUploadController6.bind(this,i,l));j.subscribe("upload_failed",this.$OmnipickerUploadController7.bind(this,i,l));j.subscribe("finished",function(){})};h.prototype.uploadSelections=function(i,j,k,l){__p&&__p();if(!k.every(function(o){return o.getSource()==j}))throw new Error("Selections' source must be "+j);var m=this.$OmnipickerUploadController1[i][j],n=c("SelectionSource").toPhotoSourceType(j);if(!m){k.forEach(function(o){var p=o.getExistingImageID(),q=o.getSrc();c("OmnipickerActions").uploadDone(i,n,p,q,p,0)});return}if(!k[0].hasPlaceholderUI())c("OmnipickerActions").uploadQueued(i,n,k);m.uploadSelections(k,l)};h.prototype.cancelUpload=function(i,j,k){c("OmnipickerActions").cancelUpload(i,j,k)};h.prototype.$OmnipickerUploadController2=function(i,event,j){c("OmnipickerActions").resizeStarted(i)};h.prototype.$OmnipickerUploadController3=function(i,event,j){var k=j.scubaData.scuba_ints,l=k.timeResizing||k.dt,m=k.resizedSize;if(j.error)c("OmnipickerActions").resizeFailed(i,l,m,j.error.message);else c("OmnipickerActions").resizeSucceeded(i,l,m,k.originalSize,{skipped_resizing:j.scubaData.scuba_tags.skippedResizing})};h.prototype.$OmnipickerUploadController4=function(i,j,event,k){c("OmnipickerActions").uploadStart(i,j,k.uploadID,k.size)};h.prototype.$OmnipickerUploadController5=function(i,j,event,k){c("OmnipickerActions").uploadProgress(i,j,k.uploadID,k)};h.prototype.$OmnipickerUploadController6=function(i,j,event,k){c("OmnipickerActions").uploadDone(i,j,k.uploadID,k.response.src,k.response.fbid,k.retriesNeeded)};h.prototype.$OmnipickerUploadController7=function(i,j,event,k){c("OmnipickerActions").uploadFailed(i,j,k.uploadID,k.retriesNeeded,k.response_error)};f.exports=new h()}),null);
__d("OmnipickerUploadSession",["FilePickerEvent","OmnipickerActions","OmnipickerUploadController","PhotoSourceTypes","SubscriptionsHandler"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.$OmnipickerUploadSession1={}}h.prototype.registerOmnipicker=function(i){this.$OmnipickerUploadSession1[i]={pickersData:[]}};h.prototype.addPicker=function(i,j,k,l){__p&&__p();var m=new(c("SubscriptionsHandler"))();m.addSubscriptions(j.subscribe(c("FilePickerEvent").SELECT_START,function(n,o){c("OmnipickerActions").filePickerSelectStarted(i,l,k)}),j.subscribe(c("FilePickerEvent").SELECTED,function(n,o){if(o.selections&&o.selections.length>0){c("OmnipickerActions").filePickerSelected(i,l,k);var p=o.selections[0].getSource();c("OmnipickerUploadController").uploadSelections(i,p,o.selections)}}),j.subscribe(c("FilePickerEvent").SELECT_CANCELED,function(n,o){c("OmnipickerActions").filePickerSelectCancelled(i,l,k)}));this.$OmnipickerUploadSession1[i].pickersData.push({picker:j,subscriptions:m})};h.prototype.removePicker=function(i,j){var k=this.$OmnipickerUploadSession1[i].pickersData;k.forEach(function(l,m){if(l.picker===j){l.subscriptions.release();k.splice(m,1)}})};h.prototype.cancelUpload=function(i,j,k){if(j!==c("PhotoSourceTypes").COMPUTER)throw new Error("Can only cancel "+c("PhotoSourceTypes").COMPUTER+" uploads. Actual source: "+j);c("OmnipickerUploadController").cancelUpload(i,j,k)};f.exports=new h()}),null);
__d("HTML5FilePickerButton.react",["fbt","OmnipickerHTML5FilePickerFactory","OmnipickerUploadSession","React","ReactDOM","PhotoSourceTypes","PUWMethods","XUIButton.react"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.componentDidMount=function(){"use strict";this.picker=c("OmnipickerHTML5FilePickerFactory").create(c("ReactDOM").findDOMNode(this.refs.fileButton));c("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,c("PhotoSourceTypes").COMPUTER,c("PUWMethods").FILE_SELECTOR)};l.prototype.componentWillUnmount=function(){"use strict";c("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)};l.prototype.render=function(){"use strict";var m=h._("Select Files");return c("React").createElement(c("XUIButton.react"),{ref:"fileButton",href:"#",size:"xlarge",label:m})};function l(){"use strict";i.apply(this,arguments)}l.propTypes={appID:k.string.isRequired};f.exports=l}),null);
__d("DragDropInstructions.react",["cx","fbt","ComputerPanelActionState","HTML5FilePickerButton.react","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.renderInstructions=function(){switch(this.props.actionState){case c("ComputerPanelActionState").DROP:return c("React").createElement("div",null,c("React").createElement("div",{className:"_39ld"},c("React").createElement("div",{className:"_4zwj"})),c("React").createElement("div",{className:"_4zwc"},i._("Drop photos here")));case c("ComputerPanelActionState").NEUTRAL:return c("React").createElement("div",null,c("React").createElement("div",null,c("React").createElement("div",{className:"_39ld"},c("React").createElement("div",{className:"_4zwd"})),c("React").createElement("div",{className:"_4zwc"},i._("Drag photos here"))),c("React").createElement("div",{className:"_4zwi"},c("React").createElement("span",{className:"_4zwe"}),i._("or"),c("React").createElement("span",{className:"_4zwe"})),c("React").createElement("div",{className:"_4zwf"},c("React").createElement(c("HTML5FilePickerButton.react"),{appID:this.props.appID})))}}.bind(this),this.renderOverlay=function(){return c("React").createElement("div",{className:"_4zwg"},c("React").createElement("div",{className:"_4zwh"},this.renderInstructions()))}.bind(this),o}m.prototype.render=function(){"use strict";if(this.props.isOverlay)return this.renderOverlay();return this.renderInstructions()};m.propTypes={actionState:l.oneOf(Object.keys(c("ComputerPanelActionState"))).isRequired,appID:l.string.isRequired,isOverlay:l.bool};f.exports=m}),null);
__d("EmptyPanel.react",["cx","DragDropInstructions.react","React","ComputerPanelActionState"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m="_2gyt"+(this.props.actionState===c("ComputerPanelActionState").NEUTRAL?" _2gyu":"")+(this.props.actionState===c("ComputerPanelActionState").DROP?" _2gyw":"");return c("React").createElement("div",{className:m},c("React").createElement("div",{className:"_2gyv"},c("React").createElement(c("DragDropInstructions.react"),{actionState:this.props.actionState,appID:this.props.appID})))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={actionState:k.oneOf(Object.keys(c("ComputerPanelActionState"))).isRequired,appID:k.string.isRequired};f.exports=l}),null);
__d("HTML5UploadAdapter",["AsyncUploadQueue","ArbiterMixin","PhotosUploadWaterfall","PhotosUploadWaterfallErrorCodes","PhotosUploadWaterfallMixin","PhotosMimeType","JpegResizer","JpegResizerConfig","SphericalImage","SphericalPhotoConfig","performanceNow","SphericalPhotoUploadHelper","URI"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h=c("SphericalPhotoUploadHelper").shouldResize360;function i(j){__p&&__p();this._config=babelHelpers["extends"]({maxRetries:0,retryTimeout:250,uri:null,qn:null,postParams:{}},j);this._uploads={};this._numProcessing=0;this._activeUploadCount=0;this._uploadQueue=new(c("AsyncUploadQueue"))(this._config.uri);this._uploadQueue.setAllowCrossOrigin(true);this._uploadQueue.setLimit(j.maxParallel);this._uploadQueue.subscribe("start",this._handleStart.bind(this));this._uploadQueue.subscribe("failure",this._handleFailure.bind(this));this._uploadQueue.subscribe("success",this._handleSuccess.bind(this));this._uploadQueue.subscribe("progress",this._handleProgress.bind(this));this._uploadQueue.subscribe("success_after_abort",this._handleCanceledPhotoUploadedAnyway.bind(this));if(c("JpegResizer").isSupported()){this._jpegResizer=new(c("JpegResizer"))(j.maxParallel);if(Object.prototype.hasOwnProperty.call(j,"useHighQuality"))this._jpegResizer.setHighQuality(j.useHighQuality);this._jpegResizer.setUndershoot(c("JpegResizerConfig").undershoot).setEncodeQuality(c("JpegResizerConfig").quality)}this._uploadQueue.setPreprocessHandler(this._resizeUpload.bind(this))}Object.assign(i,{isSupported:function j(){return c("AsyncUploadQueue").isSupported()&&c("JpegResizer").isSupported()},MAX_WIDTH:2048,MAX_HEIGHT:2048});Object.assign(i.prototype,c("ArbiterMixin"),c("PhotosUploadWaterfallMixin"),{getUploaderApp:function j(){return c("PhotosUploadWaterfall").APP_HTML5},getWaterfallID:function j(){return this._config.qn},getWaterfallSource:function j(){return this._config.ref},uploadFiles:function j(k,l){__p&&__p();var m=function(o,p){o.sphericalImage=p;this._enqueueUpload(o,babelHelpers["extends"]({},this._config.postParams,l))}.bind(this),n=function(o){var p=c("performanceNow")(),q=function(s){m(o,s);this.logWaterfallStep(c("PhotosUploadWaterfall").DONE_SPHERICAL_CHECK,{scuba_ints:{dt:c("performanceNow")()-p},projection_type:s.getProjectionType()})}.bind(this),r=function(s){m(o);this.logWaterfallStep(c("PhotosUploadWaterfall").FAIL_SPHERICAL_CHECK,{code:c("PhotosUploadWaterfallErrorCodes").SPHERICAL_CHECK_FAILED,scuba_ints:{dt:c("performanceNow")()-p}})}.bind(this);c("SphericalImage").createFromBlob(o).then(q)["catch"](r).done()}.bind(this);k.forEach(n)},uploadSelections:function j(k,l){var m=k.map(function(n){var o=n.getFile();o.uploadID=n.getSelectionContainerID();return o});this.uploadFiles(m,l)},setHiRes:function j(k){if(Object.prototype.hasOwnProperty.call(this._config,"useHighQuality"))this._jpegResizer&&this._jpegResizer.setHighQuality(k)},setNumSelected:function j(k){},markDeleted:function j(k){},addPostParam:function j(k,l){this._config.postParams=this._config.postParams||{};this._config.postParams[k]=l},cancelIndividualUpload:function j(k){var l=this._getUpload(k);if(l){this._uploadQueue.dequeue(l);this._removeUpload(l)}},cancelAllUploads:function j(){for(var k in this._uploads){var l=this._getUpload(k);this._uploadQueue.dequeue(l);this._removeUpload(l)}},getActiveUploadCount:function j(){return this._activeUploadCount},_getUpload:function j(k){if(k&&this._uploads[k])return this._uploads[k];else return null},_removeUpload:function j(k){if(!this._uploads[k.getFile().uploadID])return;delete this._uploads[k.getFile().uploadID];if(!k.isWaiting())this._activeUploadCount--},_handleStart:function j(k,l){this._activeUploadCount++;this.inform("upload_start",{uploadID:l.getFile().uploadID,retry:!!l.getFile()._retryCount,file:l.getFile(),size:l.getFile().size})},_handleFailure:function j(k,l){var m=Math.pow(2,l.getFile()._retryCount);this._removeUpload(l);if(l.getFile()._retryCount++<this._config.maxRetries){setTimeout(this._enqueueUpload.bind(this,l.getFile(),babelHelpers["extends"]({},this._config.postParams,{retry:l.getFile()._retryCount})),this._config.retryTimeout*m);this.logWaterfallStep(c("PhotosUploadWaterfall").RETRY_UPLOAD,{code:l.getResponse().getError()});this.inform("upload_retry",{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse(),retry:l.getFile()._retryCount})}else this.inform("upload_failed",{uploadID:l.getFile().uploadID,file:l.getFile(),response:l.getResponse()});return false},_handleSuccess:function j(k,l){this._removeUpload(l);var m=l.getResponse(),n=m.payload;if(n.metadata)n=n.metadata;this.inform("upload_done",{uploadID:l.getFile().uploadID,response:n[0],hiRes:true,retriesNeeded:l.getFile()._retryCount})},_handleProgress:function j(k,l){this.inform("upload_progress",{file:l.getFile(),uploadID:l.getFile().uploadID,bytesTransferred:l.getProgressEvent().loaded})},_resizeUpload:function j(k,l){__p&&__p();var m=k.getFile();if(!c("PhotosMimeType").isJpeg(m.type))return l(k);this.inform("resize_start",{uploadID:m.uploadID,file:m});var n=c("performanceNow")(),o=function(t,u,v,w,x){__p&&__p();if(t)this.logWaterfallStep(c("PhotosUploadWaterfall").CLIENT_ERROR,{code:c("PhotosUploadWaterfall").CERROR_RESIZING_FAILED,meta:{message:t.message}});var y=t||v;this.inform("resize_done",{uploadID:m.uploadID,scubaData:{scuba_tags:{skippedResizing:+y},scuba_ints:{timeResizing:c("performanceNow")()-n,originalSize:m.size,resizedSize:u&&u.size}},error:t});if(!y){u.uploadID=m.uploadID;u.name=m.name;k.setFile(u);k.getAdditionalData().set("js_resized",true).set("original_width",w).set("original_height",x)}l(k)}.bind(this);if(m.sphericalImage&&m.sphericalImage.isSpherical()){var p=m.sphericalImage,q=p.getSize(),r=c("SphericalPhotoConfig").upload_size_limit,s=p.getProjectionType();if(this._jpegResizer&&h(s,q,r))this._jpegResizer.resize360Blob(m,o,function(){},r);else o(false,m,true)}else if(this._jpegResizer)this._jpegResizer.resizeBlob(m,o);else o(false,m,true)},_handleCanceledPhotoUploadedAnyway:function j(k,l){this.inform("canceled_photo_uploaded",l.payload[0].fbid)},_enqueueUpload:function j(k,l){l=babelHelpers["extends"]({},l,{uploader:"html5"});k._retryCount=k._retryCount||0;this._uploads[k.uploadID]=k._retryCount?this._uploadQueue.prepend(k.fileName,k,l):this._uploadQueue.enqueue(k.fileName,k,l)}});f.exports=i}),null);
__d("OmnipickerPanelMixin.react",["PhotoSourceTypes","React"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i={propTypes:{appID:h.string,photoData:h.object,sourceType:h.oneOf(Object.keys(c("PhotoSourceTypes"))),selectionSource:h.string.isRequired}};f.exports=i}),null);
__d("OmnipickerPhotoUploadState",["keyMirror"],(function a(b,c,d,e,f,g){var h=c("keyMirror")({NOT_STARTED:null,UPLOADING:null,DONE:null,FAILED:null});f.exports=h}),null);
__d("OmnipickerPhoto.react",["cx","fbt","Event","Image.react","OmnipickerActions","OmnipickerPhotoUploadState","OmnipickerUploadSession","PhotoSourceTypes","ProgressBar.react","React","ShimButton.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes,m=2e4;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={canCancel:false},this.onDragStart=function(event){c("Event").kill(event)},this.onMouseDown=function(){},this.onMouseUp=function(){var t=true;if(!this.props.checked&&this.props.onPhotoSelected)t=this.props.onPhotoSelected.call(null,this.props.id);if(t)c("OmnipickerActions").selectionChanged(this.props.appID,this.props.photoSourceType,this.props.id,!this.props.checked)}.bind(this),this.getImage=function(){if(!this.props.src)return null;return c("React").createElement(c("Image.react"),{src:this.props.src,className:"_2dh3"})}.bind(this),this.getSelection=function(){if(!this.props.checked)return null;return c("React").createElement("div",{className:"_2dh3 _1cyy"})}.bind(this),this.getCancelOverlay=function(){if(this.props.uploadState!==c("OmnipickerPhotoUploadState").UPLOADING||!this.state.canCancel)return null;return c("React").createElement("div",{className:"_5goe"},c("React").createElement(c("ShimButton.react"),{className:"_5gof _1cu0",onClick:this.onCancel},i._("Cancel Upload")))}.bind(this),this.getFailedOverlay=function(){if(this.props.uploadState!==c("OmnipickerPhotoUploadState").FAILED)return null;return c("React").createElement("div",{className:"_5goe"},c("React").createElement("div",{className:"_5gof"},i._("Upload Failed")))}.bind(this),this.getProgressBar=function(){if(!this.props.showUploadProgress||this.props.uploadState!==c("OmnipickerPhotoUploadState").UPLOADING)return null;var t=null;if(this.props.progress<100)t=c("React").createElement(c("ProgressBar.react"),{value:this.props.progress,min:0,max:100});else t=c("React").createElement("div",{className:"_1t2c"});return c("React").createElement("div",{className:"_1cyx"},t)}.bind(this),this.onCancel=function(){c("OmnipickerUploadSession").cancelUpload(this.props.appID,this.props.photoSourceType,this.props.id)}.bind(this),this.setCancelTimeout=function(){this.cancelTimeout=setTimeout(function(){this.setState({canCancel:true})}.bind(this),m)}.bind(this),this.clearCancelTimeout=function(){if(this.cancelTimeout){clearTimeout(this.cancelTimeout);this.cancelTimeout=null}}.bind(this),p}n.prototype.componentDidMount=function(){if(this.props.supportsCancel&&this.props.uploadState===c("OmnipickerPhotoUploadState").UPLOADING)this.setCancelTimeout()};n.prototype.componentWillReceiveProps=function(o){if(this.props.supportsCancel){var p=this.props.uploadState!==o.uploadState||this.props.progress!==o.progress;if(p){this.clearCancelTimeout();if(o.uploadState===c("OmnipickerPhotoUploadState").UPLOADING)this.setCancelTimeout()}}};n.prototype.componentWillUnmount=function(){this.clearCancelTimeout()};n.prototype.render=function(){return c("React").createElement("div",{className:"_47pv",onDragStart:this.onDragStart,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp},this.getImage(),this.getSelection(),this.getCancelOverlay(),this.getFailedOverlay(),this.getProgressBar())};n.propTypes={appID:l.string.isRequired,checked:l.bool,id:l.string.isRequired,onPhotoSelected:l.func,photoSourceType:l.oneOf(Object.keys(c("PhotoSourceTypes"))).isRequired,progress:l.number,showUploadProgress:l.bool,src:l.string,supportsCancel:l.bool,uploadState:l.oneOf([c("OmnipickerPhotoUploadState").NOT_STARTED,c("OmnipickerPhotoUploadState").UPLOADING,c("OmnipickerPhotoUploadState").DONE,c("OmnipickerPhotoUploadState").FAILED]).isRequired};n.defaultProps={checked:false,progress:0,showUploadProgress:true,supportsCancel:false};f.exports=n}),null);
__d("OmnipickerPhotoGrid.react",["cx","AutoPager.react","OmnipickerPhoto.react","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=300;i=babelHelpers.inherits(m,c("React").Component);j=i&&i.prototype;function m(){__p&&__p();var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=j.constructor).call.apply(n,[this].concat(q)),this.getPhotos=function(){return Object.keys(this.props.photos).map(function(s){var t=this.props.photos[s];return c("React").createElement(c("OmnipickerPhoto.react"),{appID:this.props.appID,checked:t.checked,id:t.id,key:t.id,onPhotoSelected:this.props.onPhotoSelected,photoSourceType:this.props.photoSourceType,progress:t.progress,showUploadProgress:this.props.showUploadProgress,src:t.src,supportsCancel:this.props.supportsCancel,uploadState:t.uploadState})}.bind(this))}.bind(this),this.getAutoPager=function(){if(!this.props.onScrollPositionThresholdReached)return null;return c("React").createElement(c("AutoPager.react"),{className:"_4qgs",onEnterBuffer:l,onVisible:this.props.onScrollPositionThresholdReached,scrollableAreaClass:"_xhf"})}.bind(this),o}m.prototype.render=function(){return c("React").createElement("div",{className:"_xhf"},c("React").createElement("div",{className:"uiScrollableAreaWrap _1-nf"},this.getPhotos(),this.getAutoPager()))};m.propTypes={appID:k.string.isRequired,onPhotoSelected:k.func,onScrollPositionThresholdReached:k.func,photos:k.object.isRequired,photoSourceType:k.oneOf(Object.keys(c("PhotoSourceTypes"))).isRequired,showUploadProgress:k.bool,supportsCancel:k.bool};m.defaultProps={showUploadProgress:true,supportsCancel:false};f.exports=m}),null);
__d("PhotoPanel.react",["cx","fbt","ComputerPanelActionState","DragDropInstructions.react","HTML5FilePickerButton.react","OmnipickerPhotoGrid.react","PhotoSourceTypes","React","ReactDOM","Scroll"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={photoCount:0},this.renderInstructions=function(){return c("React").createElement("div",{className:"_1-nd"},c("React").createElement("div",null,c("React").createElement("div",{className:"_4zwc"},i._("Drag more photos"))),c("React").createElement("div",{className:"_4zwi"},c("React").createElement("span",{className:"_4zwe"}),i._("or"),c("React").createElement("span",{className:"_4zwe"})),c("React").createElement("div",{className:"_4zwf"},c("React").createElement(c("HTML5FilePickerButton.react"),{appID:this.props.appID})))}.bind(this),this.renderDragAndDropInstructions=function(){if(this.props.actionState!==c("ComputerPanelActionState").NEUTRAL)return c("React").createElement(c("DragDropInstructions.react"),{actionState:this.props.actionState,appID:this.props.appID,isOverlay:true})}.bind(this),this.renderPhotoGrid=function(){return c("React").createElement(c("OmnipickerPhotoGrid.react"),{appID:this.props.appID,photos:this.props.photoData,photoSourceType:c("PhotoSourceTypes").COMPUTER,supportsCancel:true})}.bind(this),o}m.prototype.componentWillReceiveProps=function(n){"use strict";var o=Object.keys(n.photoData).length;this.setState({photoCount:o})};m.prototype.componentDidUpdate=function(n,o){"use strict";if(this.state.photoCount>o.photoCount){var p=c("ReactDOM").findDOMNode(this.refs.pickerBox);c("Scroll").setTop(p,p.scrollHeight)}};m.prototype.render=function(){"use strict";return c("React").createElement("div",null,c("React").createElement("div",{className:"_1x-l"},c("React").createElement("div",{className:"_1-ne _1-nf",ref:"pickerBox"},this.renderPhotoGrid(),this.renderInstructions())),this.renderDragAndDropInstructions())};m.propTypes={actionState:l.oneOf(Object.keys(c("ComputerPanelActionState"))).isRequired,appID:l.string.isRequired,photoData:l.object.isRequired};f.exports=m}),null);
__d("ComputerPanel.react",["ComputerPanelActionState","DragDropFilePicker","EmptyPanel.react","FilePickerEvent","HTML5UploadAdapter","React","OmnipickerConfig","OmnipickerPanelMixin.react","OmnipickerUploadSession","PhotosMimeType","PhotoPanel.react","PhotoSourceTypes","PUWMethods","PUWUploaders","SelectionSource"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("React").createClass({displayName:"ComputerPanel",mixins:[c("OmnipickerPanelMixin.react")],statics:{getAdapter:function i(j,k){var l=c("OmnipickerConfig").FILE_UPLOAD_URI;if(k&&k.fileUploadURI)l=k.fileUploadURI;return new(c("HTML5UploadAdapter"))({uri:l,maxRetries:c("OmnipickerConfig").HTML5_UPLOADER_MAX_RETRIES,maxParallel:c("OmnipickerConfig").HTML5_UPLOADER_MAX_PARALLEL,postParams:{},qn:j.getWaterfallID(),waterfallApp:j.getWaterfallAppName(),waterfallUploader:c("PUWUploaders").HTML5})}},getDefaultProps:function i(){return{selectionSource:c("SelectionSource").FILE,sourceType:c("PhotoSourceTypes").COMPUTER}},getInitialState:function i(){return{actionState:c("ComputerPanelActionState").NEUTRAL}},componentDidMount:function i(){this.picker=new(c("DragDropFilePicker"))(document.documentElement,{onDocumentDragEnterCallback:function(){this.setState({actionState:c("ComputerPanelActionState").DROP})}.bind(this),onDocumentDragLeaveCallback:function(){this.setState({actionState:c("ComputerPanelActionState").NEUTRAL})}.bind(this),isFileValid:function j(k){return c("PhotosMimeType").isImage(k.type)}});c("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,c("PhotoSourceTypes").COMPUTER,c("PUWMethods").DRAGDROP);this.picker.subscribe(c("FilePickerEvent").SELECTED,this.onFilesDropped)},componentWillUnmount:function i(){this.picker.disable();c("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)},onFilesDropped:function i(j){this.setState({actionState:c("ComputerPanelActionState").NEUTRAL})},renderEmptyPanel:function i(){return c("React").createElement(c("EmptyPanel.react"),{actionState:this.state.actionState,appID:this.props.appID})},renderPhotoPanel:function i(){return c("React").createElement(c("PhotoPanel.react"),{actionState:this.state.actionState,appID:this.props.appID,photoData:this.props.photoData})},render:function i(){var j=Object.keys(this.props.photoData).length,k=j===0?this.renderEmptyPanel():this.renderPhotoPanel();return c("React").createElement("div",null,k)}});f.exports=h}),null);
__d("OmnipickerLoggerStore",["invariant","OmnipickerActions","FluxStore","OmnipickerDispatcher","PUWSteps"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("OmnipickerActions").types;i=babelHelpers.inherits(l,c("FluxStore"));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerLoggerStore1={}}l.prototype.__onDispatch=function(m){__p&&__p();if(m.type===k.APP_INITIALIZED){m.logger||h(0);this.$OmnipickerLoggerStore1[m.appID]=m.logger;return}var n=this.$OmnipickerLoggerStore1[m.appID];n||h(0);switch(m.type){case k.FILE_PICKER_SELECT_STARTED:case k.FILE_PICKER_SELECTED:case k.FILE_PICKER_SELECT_CANCELED:this.$OmnipickerLoggerStore2(m,n);break;case k.RESIZE_STARTED:n.logStep(c("PUWSteps").CLIENT_UPLOAD_BEGIN);n.logStep(c("PUWSteps").CLIENT_PROCESS_BEGIN);break;case k.RESIZE_SUCCEEDED:n.logStep(c("PUWSteps").CLIENT_PROCESS_SUCCESS,{dt:m.dt,bytes:m.bytes,media_data_size:m.originalSize,custom_tags:m.customTags});break;case k.RESIZE_FAILED:n.logStep(c("PUWSteps").CLIENT_PROCESS_FAIL,{dt:m.dt,bytes:m.bytes,error_code:m.errorCode});break;case k.UPLOAD_STARTED:n.logStep(c("PUWSteps").CLIENT_TRANSFER_BEGIN,{bytes:m.bytes,ref:m.source});break;case k.UPLOAD_FINISHED:n.logStep(c("PUWSteps").CLIENT_TRANSFER_SUCCESS,{auto_retry_count:m.retriesNeeded,ref:m.source});n.logStep(c("PUWSteps").CLIENT_UPLOAD_SUCCESS,{fbid:m.fbid,ref:m.source});break;case k.UPLOAD_FAILED:n.logStep(c("PUWSteps").CLIENT_UPLOAD_FAIL,{auto_retry_count:m.retriesNeeded,error_code:m.errorCode,ref:m.source});break;case k.UPLOAD_QUEUED:n.logStep(c("PUWSteps").CLIENT_TRANSFER_BATCH_BEGIN,{ref:m.source,volume:m.volume});break;default:}};l.prototype.$OmnipickerLoggerStore2=function(m,n){__p&&__p();var o=void 0;switch(m.type){case k.FILE_PICKER_SELECT_STARTED:o=c("PUWSteps").CLIENT_SELECT_BEGIN;break;case k.FILE_PICKER_SELECTED:o=c("PUWSteps").CLIENT_SELECT_SUCCESS;break;case k.FILE_PICKER_SELECT_CANCELED:o=c("PUWSteps").CLIENT_SELECT_CANCEL;break;default:h(0)}var p=m.method,q=m.ref;n.logStep(o,{method:p,ref:q})};f.exports=new l(c("OmnipickerDispatcher"))}),null);
__d("OmnipickerPanelList.react",["cx","ix","Image.react","OmnipickerActions","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.componentWillMount=function(){"use strict";c("React").Children.forEach(this.props.children,function(n){if(!n)return;var o=this.props.appID;c("OmnipickerActions").panelInitialized(o,n.props.sourceType)}.bind(this))};m.prototype.render=function(){"use strict";__p&&__p();var n=null;if(this.props.doneSelecting)n=c("React").createElement("div",{className:"_5e8d"},c("React").createElement("div",{className:"_5e8e"},c("React").createElement(c("Image.react"),{className:"_5e8o",src:i("95719")})));var o;if(this.props.children.length)o=this.props.children.find(function(p){if(!p)return false;return p.props.sourceType===this.props.selectedSourceType}.bind(this));else o=this.props.children;o=c("React").cloneElement(o,{photoData:this.props.photoData,appID:this.props.appID});return c("React").createElement("div",null,n,c("React").createElement("div",{className:"_5gfy"},o))};function m(){"use strict";j.apply(this,arguments)}m.propTypes={appID:l.string,photoData:l.object,doneSelecting:l.bool,selectedSourceType:l.oneOf(Object.keys(c("PhotoSourceTypes")))};f.exports=m}),null);
__d("OmnipickerPhotoSourceStore",["OmnipickerActions","FluxStore","OmnipickerDispatcher"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("OmnipickerActions").types;h=babelHelpers.inherits(k,c("FluxStore"));i=h&&h.prototype;function k(l){i.constructor.call(this,l);this.$OmnipickerPhotoSourceStore1={}}k.prototype.__onDispatch=function(l){switch(l.type){case j.APP_INITIALIZED:this.$OmnipickerPhotoSourceStore1[l.appID]={currentSource:l.initialSource};break;case j.PHOTO_SOURCE_SELECTED:this.$OmnipickerPhotoSourceStore1[l.appID].currentSource=l.source;this.__emitChange();break;default:return}};k.prototype.getCurrentSource=function(l){return this.$OmnipickerPhotoSourceStore1[l].currentSource};f.exports=new k(c("OmnipickerDispatcher"))}),null);
__d("OmnipickerPhotoStore",["invariant","OmnipickerActions","FluxStore","OmnipickerDispatcher","OmnipickerPhotoUploadState"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("OmnipickerActions").types;i=babelHelpers.inherits(l,c("FluxStore"));j=i&&i.prototype;function l(m){j.constructor.call(this,m);this.$OmnipickerPhotoStore1={}}l.prototype.__onDispatch=function(m){__p&&__p();m.appID||h(0);var n=this.$OmnipickerPhotoStore1[m.appID];if(n){var o=n.deletedPhotos;if(o&&o[m.id])return}switch(m.type){case k.APP_INITIALIZED:this.$OmnipickerPhotoStore2(m);return;case k.PANEL_INITIALIZED:this.$OmnipickerPhotoStore3(m);return;case k.EXISTING_PHOTOS_FETCHED:this.$OmnipickerPhotoStore4(m);break;case k.PHOTO_SELECTED_OPTIMISTICALLY:this.$OmnipickerPhotoStore5(m);break;case k.SELECTION_CHANGED:this.$OmnipickerPhotoStore6(m);break;case k.UPLOAD_CANCELED:this.$OmnipickerPhotoStore7(m);break;case k.UPLOAD_FAILED:this.$OmnipickerPhotoStore8(m);break;case k.UPLOAD_FINISHED:this.$OmnipickerPhotoStore9(m);break;case k.UPLOAD_PROGRESSED:this.$OmnipickerPhotoStore10(m);break;case k.UPLOAD_QUEUED:this.$OmnipickerPhotoStore11(m);break;case k.UPLOAD_STARTED:this.$OmnipickerPhotoStore12(m);break;default:return}this.__emitChange()};l.prototype.getState=function(m){var n=this.$OmnipickerPhotoStore1[m];return{numPhotosSelected:this.$OmnipickerPhotoStore13(n).length,photosOptimisticallyUploading:n.photosOptimisticallyUploading,photosWaitingForUpload:n.photosWaitingForUpload,photoData:n.photos}};l.prototype.getSelectedPhotos=function(m){var n=this.$OmnipickerPhotoStore1[m];return this.$OmnipickerPhotoStore13(n,n.uploadOrder).filter(function(o){return o.fbid!==""})};l.prototype.$OmnipickerPhotoStore13=function(m,n){var o=n||m.photos,p=[];Object.keys(m.photos).forEach(function(q){var r=Array.isArray(o[q])?o[q]:Object.keys(o[q]);r.forEach(function(s){var t=this.$OmnipickerPhotoStore14(m,q,s);if(t.checked)if(t)p.push(t)}.bind(this))}.bind(this));return p};l.prototype.$OmnipickerPhotoStore14=function(m,n,o){var p=m.photos;p[n]||h(0);var q=p[n][o];q||h(0);return q};l.prototype.$OmnipickerPhotoStore15=function(m){this.$OmnipickerPhotoStore16(m,["source","id"]);return this.$OmnipickerPhotoStore14(this.$OmnipickerPhotoStore1[m.appID],m.source,m.id)};l.prototype.$OmnipickerPhotoStore17=function(m,n){Object.prototype.hasOwnProperty.call(m,n)||h(0);m[n]!==undefined&&m[n]!==null||h(0)};l.prototype.$OmnipickerPhotoStore16=function(m,n){n.push("appID");n.forEach(function(o){return this.$OmnipickerPhotoStore17(m,o)}.bind(this))};l.prototype.$OmnipickerPhotoStore18=function(m,n,o){var p=m.photos;p[n]||h(0);!p[n][o]||h(0);m.uploadOrder[n].push(o);return p[n][o]={id:o,checked:false,fbid:"",progress:0,src:"",uploadState:c("OmnipickerPhotoUploadState").NOT_STARTED}};l.prototype.$OmnipickerPhotoStore19=function(m,n){m.photosWaitingForUpload[n.id]=true};l.prototype.$OmnipickerPhotoStore2=function(m){var n=m.appID;!this.$OmnipickerPhotoStore1[n]||h(0);this.$OmnipickerPhotoStore1[n]={deletedPhotos:{},photos:{},photosWaitingForUpload:{},photosOptimisticallyUploading:{},uploadOrder:{}}};l.prototype.$OmnipickerPhotoStore5=function(m){var n=this.$OmnipickerPhotoStore15(m);n.checked=true;var o=this.$OmnipickerPhotoStore1[m.appID];o.photosOptimisticallyUploading[m.id]=true};l.prototype.$OmnipickerPhotoStore6=function(m){this.$OmnipickerPhotoStore16(m,["checked"]);var n=this.$OmnipickerPhotoStore15(m);n.checked=m.checked};l.prototype.$OmnipickerPhotoStore3=function(m){this.$OmnipickerPhotoStore16(m,["source"]);var n=this.$OmnipickerPhotoStore1[m.appID];n.photos[m.source]={};n.uploadOrder[m.source]=[]};l.prototype.$OmnipickerPhotoStore20=function(m,n,o,p){if(p===c("OmnipickerPhotoUploadState").FAILED||m.photosOptimisticallyUploading[o])return;n.checked=true};l.prototype.$OmnipickerPhotoStore21=function(m,n,o,p){n.uploadState=p;delete m.photosWaitingForUpload[o];delete m.photosOptimisticallyUploading[o]};l.prototype.$OmnipickerPhotoStore22=function(m,n,o){var p=n.id;delete m.photos[o][p];delete m.photosWaitingForUpload[p];delete m.photosOptimisticallyUploading[p];var q=m.uploadOrder[o].indexOf(p);m.uploadOrder[o].splice(q,1);m.deletedPhotos[p]=true};l.prototype.$OmnipickerPhotoStore4=function(m){this.$OmnipickerPhotoStore17(m,"photos");var n=this.$OmnipickerPhotoStore1[m.appID];m.photos.forEach(function(o){var p=o.source,q=o.id,r=o.src,s=this.$OmnipickerPhotoStore18(n,p,q);s.src=r}.bind(this))};l.prototype.$OmnipickerPhotoStore7=function(m){var n=this.$OmnipickerPhotoStore15(m);this.$OmnipickerPhotoStore22(this.$OmnipickerPhotoStore1[m.appID],n,m.source)};l.prototype.$OmnipickerPhotoStore8=function(m){var n=this.$OmnipickerPhotoStore1[m.appID];this.$OmnipickerPhotoStore21(n,this.$OmnipickerPhotoStore15(m),m.id,c("OmnipickerPhotoUploadState").FAILED)};l.prototype.$OmnipickerPhotoStore9=function(m){this.$OmnipickerPhotoStore16(m,["src","fbid"]);var n=m.appID,o=m.id,p=m.src,q=m.fbid,r=this.$OmnipickerPhotoStore1[n],s=this.$OmnipickerPhotoStore15(m),t=c("OmnipickerPhotoUploadState").DONE;this.$OmnipickerPhotoStore20(r,s,o,t);this.$OmnipickerPhotoStore21(r,s,o,t);s.src=p;s.fbid=q};l.prototype.$OmnipickerPhotoStore10=function(m){this.$OmnipickerPhotoStore17(m,"progress");var n=this.$OmnipickerPhotoStore15(m);n.progress=100};l.prototype.$OmnipickerPhotoStore12=function(m){var n=this.$OmnipickerPhotoStore15(m);n.uploadState=c("OmnipickerPhotoUploadState").UPLOADING};l.prototype.$OmnipickerPhotoStore11=function(m){this.$OmnipickerPhotoStore16(m,["source","ids"]);var n=m.source,o=this.$OmnipickerPhotoStore1[m.appID],p=m.ids;p.forEach(function(q){return this.$OmnipickerPhotoStore19(o,this.$OmnipickerPhotoStore18(o,n,q))}.bind(this))};f.exports=new l(c("OmnipickerDispatcher"))}),null);
__d("OmnipickerWaterfallLogger",["PhotosUploadWaterfallXMixin","mixin"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("PhotosUploadWaterfallXMixin")));i=h&&h.prototype;function j(k,l){"use strict";i.constructor.call(this);this.$OmnipickerWaterfallLogger1=k;this.$OmnipickerWaterfallLogger2=l}j.prototype.getWaterfallAppName=function(){"use strict";return this.$OmnipickerWaterfallLogger1};j.prototype.getWaterfallID=function(){"use strict";return this.$OmnipickerWaterfallLogger2};f.exports=j}),null);
__d("Omnipicker.react",["invariant","ClientIDs","OmnipickerActions","OmnipickerPanelList.react","OmnipickerPhotoSourceStore","OmnipickerPhotoStore","OmnipickerUploadController","OmnipickerUploadSession","OmnipickerWaterfallLogger","React","SubscriptionsHandler","Waiter","OmnipickerLoggerStore"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;c("OmnipickerLoggerStore");c("OmnipickerPhotoSourceStore");c("OmnipickerPhotoStore");var k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){__p&&__p();var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.state={numPhotosSelected:0,numPhotosUploading:0,photoData:{}},this.handlePhotosChangeEvent=function(){__p&&__p();var r=c("OmnipickerPhotoStore").getState(this.state.appID),s=Object.keys(r.photosWaitingForUpload).length,t=Object.keys(r.photosOptimisticallyUploading).length;if(t>0){if(!this.$Omnipicker3)this.$Omnipicker3=this.$Omnipicker2.wait()}else if(this.$Omnipicker3){this.$Omnipicker3.call(this);this.$Omnipicker3=null}this.setState({numPhotosSelected:r.numPhotosSelected,numPhotosUploading:s,photoData:r.photoData});this.props.onPhotosChange&&this.props.onPhotosChange(r.numPhotosSelected,s)}.bind(this),this.handleSourceChangeEvent=function(){this.setState({sourceType:c("OmnipickerPhotoSourceStore").getCurrentSource(this.state.appID)})}.bind(this),n}l.prototype.componentWillMount=function(){"use strict";__p&&__p();var m="Omnipicker_ID_"+c("ClientIDs").getNewClientID();c("OmnipickerUploadController").registerOmnipicker(m);c("OmnipickerUploadSession").registerOmnipicker(m);var n=[];c("React").Children.forEach(this.props.children,function(q){if(q.type===c("OmnipickerPanelList.react"))n.push(c("React").cloneElement(q,{appID:m}))});n.length===1||h(0);var o=n[0],p=null;c("React").Children.forEach(o.props.children,function(q){if(!q)return;if(!p||q.props.isSelected)p=q.props.sourceType;if(q.type.getAdapter)c("OmnipickerUploadController").registerAdapter(m,q.type.getAdapter(this.props.logger,q.props.config),q.props.selectionSource)}.bind(this));!!p||h(0);this.setState({appID:m,sourceType:p});c("OmnipickerActions").appInitialized(m,this.props.logger,p)};l.prototype.componentDidMount=function(){"use strict";this.$Omnipicker1=new(c("SubscriptionsHandler"))();this.$Omnipicker1.addSubscriptions(c("OmnipickerPhotoStore").addListener(this.handlePhotosChangeEvent),c("OmnipickerPhotoSourceStore").addListener(this.handleSourceChangeEvent));this.$Omnipicker2=new(c("Waiter"))(function(){this.props.onDoneSelecting(c("OmnipickerPhotoStore").getSelectedPhotos(this.state.appID),this.state.sourceType)}.bind(this))};l.prototype.componentWillUnmount=function(){"use strict";this.$Omnipicker1.release()};l.prototype.componentDidUpdate=function(){"use strict";if(this.props.doneSelecting)this.$Omnipicker2.go()};l.prototype.render=function(){"use strict";var m=c("React").Children.map(this.props.children,function(n){var o={selectedSourceType:this.state.sourceType,appID:this.state.appID};if(n.type===c("OmnipickerPanelList.react"))Object.assign(o,{photoData:this.state.photoData[this.state.sourceType]||{},doneSelecting:this.props.doneSelecting});return c("React").cloneElement(n,o)}.bind(this));return c("React").createElement("div",null,m)};l.propTypes={doneSelecting:k.bool.isRequired,logger:k.instanceOf(c("OmnipickerWaterfallLogger")).isRequired,onDoneSelecting:k.func.isRequired,onPhotosChange:k.func};l.defaultProps={doneSelecting:false};f.exports=l}),null);
__d("OmnipickerSelector.react",["cx","OmnipickerActions","PhotoSourceTypes","React","ShimButton.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;"use strict";for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.onClick=function(){c("OmnipickerActions").photoSourceSelected(this.props.appID,this.props.sourceType)}.bind(this),n}l.prototype.render=function(){"use strict";return c("React").createElement("li",{className:"_1ys7"},c("React").createElement(c("ShimButton.react"),{className:"_1ys8"+(this.props.isSelected?" selected":""),onClick:this.onClick},c("React").createElement("div",{className:"_1ys9"},c("React").createElement("span",{className:c("joinClasses")("_1ysb",this.props.iconClass)}),c("React").createElement("span",{className:"_1ysc"},this.props.children))))};l.propTypes={appID:k.string.isRequired,iconClass:k.string.isRequired,isSelected:k.bool.isRequired,sourceType:k.oneOf(Object.keys(c("PhotoSourceTypes"))).isRequired};f.exports=l}),null);
__d("OmnipickerComputerSelector.react",["cx","fbt","OmnipickerSelector.react","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){"use strict";return c("React").createElement(c("OmnipickerSelector.react"),babelHelpers["extends"]({iconClass:"_5o68"},this.props),this.props.labelText)};function m(){"use strict";j.apply(this,arguments)}m.propTypes={labelText:l.string};m.defaultProps={sourceType:c("PhotoSourceTypes").COMPUTER,labelText:i._("Computer")};f.exports=m}),null);
__d("OmnipickerDialog.react",["cx","fbt","DOM","Event","Keys","Link.react","OmnipickerConfig","React","SubscriptionsHandler","XUICloseButton.react","XUIDialog.react","XUIDialogButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;function m(){__p&&__p();var n,o;"use strict";for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.state={doneSelecting:false,numPhotosSelected:0,numPhotosUploading:0,uploadProgress:0},this.getButtonLabel=function(){var s=this.state.numPhotosSelected;if(s===1)return i._("Use Photo");if(s>1)return i._("Use Photos ({number})",[i.param("number",s)]);return i._("Use Photos")}.bind(this),this.handleUsePhotos=function(){this.setState({doneSelecting:true})}.bind(this),this.handleKeyDownEvent=function(event){if(c("Event").getKeyCode(event)===c("Keys").ESC)this.props.onCancel()}.bind(this),this.handlePhotosChange=function(s,t){this.setState({numPhotosSelected:s,numPhotosUploading:t})}.bind(this),o}m.prototype.componentDidMount=function(){"use strict";this.$OmnipickerDialog1=new(c("SubscriptionsHandler"))();this.$OmnipickerDialog1.addSubscriptions(c("Event").listen(document,"keydown",this.handleKeyDownEvent))};m.prototype.componentWillUnmount=function(){"use strict";this.$OmnipickerDialog1.release()};m.prototype.render=function(){"use strict";var n=this.state.doneSelecting||this.state.numPhotosSelected<1||this.state.numPhotosUploading>0,o=null;if(c("OmnipickerConfig").FEEDBACK_GROUP_PATH)o=c("React").createElement("div",{className:"_2srv"},c("React").createElement(c("Link.react"),{href:c("OmnipickerConfig").FEEDBACK_GROUP_PATH,target:"_blank"},"Omnipicker Feedback Group"));var p=c("React").Children.only(this.props.children);p=c("React").cloneElement(p,{onPhotosChange:this.handlePhotosChange,doneSelecting:this.state.doneSelecting});return c("React").createElement(c("XUIDialog.react"),{shown:true,layerHideOnBlur:false,width:c("OmnipickerConfig").DIALOG_WIDTH,key:"dialog"},c("React").createElement(c("XUIDialogTitle.react"),{showCloseButton:false},c("React").createElement("span",null,this.props.title),c("React").createElement(c("XUICloseButton.react"),{className:"_51-t",label:i._("Close"),onClick:this.props.onCancel})),p,c("React").createElement("div",{className:"_3bnc"},c("React").createElement(c("XUIDialogFooter.react"),{className:"_3bnd",leftContent:o},c("React").createElement(c("XUIDialogButton.react"),{action:"button",label:i._("Cancel"),onClick:this.props.onCancel,size:"xlarge"}),c("React").createElement(c("XUIDialogButton.react"),{className:"_3bne",use:"confirm",action:"confirm",size:"xlarge",disabled:n,label:this.getButtonLabel(),onClick:this.handleUsePhotos}))))};m.propTypes={onCancel:l.func.isRequired,title:l.string.isRequired};f.exports=m}),null);
__d("OmnipickerDialogRenderer",["DOM","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(i){this.$OmnipickerDialogRenderer1=i;this.$OmnipickerDialogRenderer2=i.props.$OmnipickerDialogRenderer2;if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c("DOM").create("div");c("DOM").appendContent(document.body,this.$OmnipickerDialogRenderer2)}}h.prototype.show=function(){if(!this.$OmnipickerDialogRenderer2){this.$OmnipickerDialogRenderer2=c("DOM").create("div");c("DOM").appendContent(document.body,this.$OmnipickerDialogRenderer2)}c("ReactDOM").render(this.$OmnipickerDialogRenderer1,this.$OmnipickerDialogRenderer2)};h.prototype.hide=function(){c("ReactDOM").unmountComponentAtNode(this.$OmnipickerDialogRenderer2);c("DOM").remove(this.$OmnipickerDialogRenderer2);this.$OmnipickerDialogRenderer2=null};h.prototype.isShowing=function(){return!!this.$OmnipickerDialogRenderer2};f.exports=h}),null);
__d("ExistingPhotoSelectionContainer",["BaseSelectionContainer"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("BaseSelectionContainer"));i=h&&h.prototype;function j(k,l,m){"use strict";i.constructor.call(this);this.$ExistingPhotoSelectionContainer1=k;this.$ExistingPhotoSelectionContainer2=l;this.$ExistingPhotoSelectionContainer3=m}j.prototype.getExistingImageID=function(){"use strict";return this.$ExistingPhotoSelectionContainer1};j.prototype.getSrc=function(){"use strict";return this.$ExistingPhotoSelectionContainer2};j.prototype.getSource=function(){"use strict";return this.$ExistingPhotoSelectionContainer3};j.prototype.hasPlaceholderUI=function(){"use strict";return true};f.exports=j}),null);
__d("ExistingPhotoPicker",["ArbiterMixin","mixin","FilePickerEvent","ExistingPhotoSelectionContainer"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("mixin")(c("ArbiterMixin")));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.$ExistingPhotoPicker1=k}j.prototype.begin=function(){"use strict";this.inform(c("FilePickerEvent").BEGIN)};j.prototype.select=function(k,l){"use strict";this.inform(c("FilePickerEvent").SELECTED,{sender:this,selections:[new(c("ExistingPhotoSelectionContainer"))(k,l,this.$ExistingPhotoPicker1)]})};f.exports=j}),null);
__d("OmnipickerExistingPhotosPanelMixin.react",["cx","invariant","ExistingPhotoPicker","OmnipickerActions","OmnipickerPanelMixin.react","OmnipickerPhotoGrid.react","OmnipickerUploadSession","PhotoStore","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("React").PropTypes,k={mixins:[c("OmnipickerPanelMixin.react")],propTypes:{initBatchSize:j.number,pageBatchSize:j.number,puwMethod:j.string.isRequired,setID:j.string.isRequired},componentWillMount:function l(){typeof this.getViewState==="function"||i(0);this.picker=new(c("ExistingPhotoPicker"))(this.props.selectionSource);c("OmnipickerUploadSession").addPicker(this.props.appID,this.picker,this.props.sourceType,this.props.puwMethod)},componentDidMount:function l(){this.getViewState().initViewState();this.picker.begin()},componentWillUnmount:function l(){this.getViewState().destroy();c("OmnipickerUploadSession").removePicker(this.props.appID,this.picker)},render:function l(){return c("React").createElement("div",null,this.getThrobber(),this.getPhotoGrid())},onViewStateChanged:function l(m){c("OmnipickerActions").existingPhotosFetched(this.props.appID,this.props.sourceType,m.media.filter(function(n){return!this.props.photoData[n.id]}.bind(this)))},onPhotoSelected:function l(m){this.picker.select(m,this.props.photoData[m].src);return false},getPhotoGrid:function l(){if(!c("PhotoStore").hasBeenCreated(this.props.setID))return null;var m=null;if(!c("PhotoStore").hasBeenCreated(this.props.setID)||c("PhotoStore").hasNextPage(this.props.setID))m=function(){this.getViewState().fetchMore()}.bind(this);return c("React").createElement(c("OmnipickerPhotoGrid.react"),{appID:this.props.appID,onPhotoSelected:this.onPhotoSelected,onScrollPositionThresholdReached:m,photos:this.props.photoData,photoSourceType:this.props.sourceType,showUploadProgress:false})},getThrobber:function l(){if(c("PhotoStore").hasBeenCreated(this.props.setID))return null;return c("React").createElement("div",{className:"_j0-"})}};f.exports=k}),null);
__d("ScrollablePhotoViewStateCore",["SubscriptionsHandler","emptyFunction"],(function a(b,c,d,e,f,g){__p&&__p();function h(i){"use strict";__p&&__p();this.$ScrollablePhotoViewStateCore1=i.photoStore;this.$ScrollablePhotoViewStateCore2=i.viewer;this.$ScrollablePhotoViewStateCore3=i.setToken;this.$ScrollablePhotoViewStateCore4=i.updateCallback;this.$ScrollablePhotoViewStateCore5=i.subscribeUpdatePhotos;this.$ScrollablePhotoViewStateCore6=i.fetchInitData;this.$ScrollablePhotoViewStateCore7=i.initBatchSize;this.$ScrollablePhotoViewStateCore8=i.pageBatchSize;this.$ScrollablePhotoViewStateCore9=new(c("SubscriptionsHandler"))()}h.prototype.initViewState=function(){"use strict";this.$ScrollablePhotoViewStateCore9.addSubscriptions(this.$ScrollablePhotoViewStateCore5(this.updateData.bind(this)));if(this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)){var i=this.$ScrollablePhotoViewStateCore1.getAvailableRange(this.$ScrollablePhotoViewStateCore3).length;if(i>=this.$ScrollablePhotoViewStateCore7||!this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3))this.syncState();return}this.$ScrollablePhotoViewStateCore6(this.$ScrollablePhotoViewStateCore3)};h.prototype.hasNextPage=function(){"use strict";return this.$ScrollablePhotoViewStateCore1.hasBeenCreated(this.$ScrollablePhotoViewStateCore3)&&this.$ScrollablePhotoViewStateCore1.hasNextPage(this.$ScrollablePhotoViewStateCore3)};h.prototype.fetchToIndex=function(i){"use strict";var j=this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),k=i-j;if(k<=0)return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,j,k,c("emptyFunction"))};h.prototype.fetchMore=function(i){"use strict";if(!this.hasNextPage())return;this.$ScrollablePhotoViewStateCore1.getItemsAfterIndex(this.$ScrollablePhotoViewStateCore3,this.$ScrollablePhotoViewStateCore1.getEndIndex(this.$ScrollablePhotoViewStateCore3),this.$ScrollablePhotoViewStateCore8,i||c("emptyFunction"))};h.prototype.destroy=function(){"use strict";this.$ScrollablePhotoViewStateCore9.release()};h.prototype.updateData=function(i){"use strict";if(i.set_id!=this.$ScrollablePhotoViewStateCore3)return;var j=i.query_results&&i.query_results.result_type;if(j=="init")this.$ScrollablePhotoViewStateCore1.executePostCreate(this.$ScrollablePhotoViewStateCore3,function(){this.syncState()}.bind(this));else this.syncState()};f.exports=h}),null);
__d("fetchInitPhotoViewState",["AsyncRequest"],(function a(b,c,d,e,f,g){function h(i,j){new(c("AsyncRequest"))(i).setData({set:j}).send()}f.exports=h}),null);
__d("subscribeToArbiterUpdatePhotos",["Arbiter"],(function a(b,c,d,e,f,g){function h(i){return c("Arbiter").subscribe("update-photos",function(j,k){i(k)})}f.exports=h}),null);
__d("OmnipickerExistingPhotosViewState",["PhotoStore","ScrollablePhotoViewStateCore","subscribeToArbiterUpdatePhotos","fetchInitPhotoViewState"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;function j(l,m){c("fetchInitPhotoViewState")(l,m)}h=babelHelpers.inherits(k,c("ScrollablePhotoViewStateCore"));i=h&&h.prototype;function k(l,m,n,o,p,q){"use strict";i.constructor.call(this,{fetchInitData:j.bind(null,p),initBatchSize:n,pageBatchSize:o,photoStore:c("PhotoStore"),setToken:m,subscribeUpdatePhotos:c("subscribeToArbiterUpdatePhotos"),updateCallback:q,viewer:l});this.$OmnipickerExistingPhotosViewState1=n;this.$OmnipickerExistingPhotosViewState2=m;this.$OmnipickerExistingPhotosViewState3=q}k.prototype.syncState=function(){"use strict";this.$OmnipickerExistingPhotosViewState3({media:c("PhotoStore").getItemsInAvailableRange(this.$OmnipickerExistingPhotosViewState2),hasNextPage:c("PhotoStore").hasNextPage(this.$OmnipickerExistingPhotosViewState2)})};f.exports=k}),null);
__d("XPagesManagerPostedPhotosController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/content_tab/posted_photos/",{set:{type:"String",required:true},size:{type:"Int",required:true}})}),null);
__d("OmnipickerPagePostedPhotosPanel.react",["ActorURI","OmnipickerConfig","OmnipickerExistingPhotosPanelMixin.react","OmnipickerExistingPhotosViewState","PhotoSourceTypes","PUWMethods","React","SelectionSource","XPagesManagerPostedPhotosController"],(function a(b,c,d,e,f,g){"use strict";var h=c("React").PropTypes,i=c("React").createClass({displayName:"OmnipickerPagePostedPhotosPanel",mixins:[c("OmnipickerExistingPhotosPanelMixin.react")],_viewState:null,propTypes:{pageID:h.string.isRequired},getDefaultProps:function j(){return{initBatchSize:20,pageBatchSize:16,puwMethod:c("PUWMethods").RECENT_PHOTOS,selectionSource:c("SelectionSource").PAGES_POSTED_PHOTOS,setID:c("OmnipickerConfig").POSTED_PHOTOS_SET_ID,sourceType:c("PhotoSourceTypes").PAGES_POSTED_PHOTOS}},componentWillMount:function j(){var k=c("ActorURI").create(c("XPagesManagerPostedPhotosController").getURIBuilder().setString("set",this.props.setID).setInt("size",this.props.initBatchSize).getURI(),this.props.pageID);this._viewState=new(c("OmnipickerExistingPhotosViewState"))(this,this.props.setID,this.props.initBatchSize,this.props.pageBatchSize,k,this.onViewStateChanged)},getViewState:function j(){return this._viewState}});f.exports=i}),null);
__d("OmnipickerPagePostedPhotosSelector.react",["cx","fbt","OmnipickerSelector.react","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.render=function(){return c("React").createElement(c("OmnipickerSelector.react"),babelHelpers["extends"]({iconClass:"_2_y4"},this.props),this.props.labelText)};function m(){j.apply(this,arguments)}m.propTypes={labelText:l.node};m.defaultProps={sourceType:c("PhotoSourceTypes").PAGES_POSTED_PHOTOS,labelText:i._("Page Photos")};f.exports=m}),null);
__d("OmnipickerSelectorList.react",["cx","PhotoSourceTypes","React"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=c("React").Children.map(this.props.children,function(n){if(!n)return;return c("React").cloneElement(n,{isSelected:n.props.sourceType===this.props.selectedSourceType,appID:this.props.appID})}.bind(this));return c("React").createElement("div",{className:"_1n6_"},c("React").createElement("ul",null,m))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={appID:k.string,selectedSourceType:k.oneOf(Object.keys(c("PhotoSourceTypes")))};f.exports=l}),null);
__d("ProductVideoChunkedUploader",["AdsVideoUploadEvents","AdsVideoUploadSession","AdsVideoUploadUtil","URI","VideoUploader","VideoUploadProgressBar"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j="/v2.4",k="graph-video";h=babelHelpers.inherits(l,c("VideoUploader"));i=h&&h.prototype;function l(m){"use strict";var n=m.config,o=new(c("URI"))(j+"/"+m.target_id+"/videos?access_token="+m.access_token).setSubdomain(k).toString(),p={start_uri:o,receive_uri:o,post_uri:o,chunk_start_uri:o,chunk_receive_uri:o,chunk_post_uri:o,min_size:n.minSize,min_width:n.minWidth,min_height:n.minHeight,min_length:n.minLength,max_size:n.maxSize,max_length:n.maxLength,extensions:n.extensions,logging_delay:n.loggingDelay,max_transport_retries:n.maxTransportRetries,transport_retry_interval_base:n.transportRetryIntervalBase,max_server_retries:n.maxServerRetries,server_retry_interval_base:n.serverRetryIntervalBase,source:m.source,target_id:m.target_id,target_type:m.target_type};i.constructor.call(this,p);this.$ProductVideoChunkedUploader1=""}l.prototype.getUploadTime=function(){"use strict";if(this.__getSession()!==null)return this.__getSession().getUploadTime();return null};l.prototype.getEncodingTime=function(){"use strict";if(this.__getSession()!==null)return this.__getSession().getEncodingTime();return null};l.prototype.abort=function(){"use strict";this.cancel()};l.prototype.upload=function(m){"use strict";var n=m.getFile(),o=c("AdsVideoUploadUtil").getVideoTitle(n);this.$ProductVideoChunkedUploader1=o?o:"";i.upload.call(this,m)};l.prototype.__getVideoUploadSession=function(m){"use strict";return new(c("AdsVideoUploadSession"))(m)};l.prototype.getVideoTitle=function(){"use strict";return this.$ProductVideoChunkedUploader1};l.prototype.__createSession=function(m){"use strict";return new(c("AdsVideoUploadSession"))(m)};l.prototype.__getEventsWhichShouldListenFromSession=function(){"use strict";var m=i.__getEventsWhichShouldListenFromSession.call(this);m.push(c("AdsVideoUploadEvents").ENCODING_SUCCESS,c("AdsVideoUploadEvents").ENCODING_ERROR);return m};l.prototype.__getEventsForWhichSessionShouldBeSetToNull=function(){"use strict";return["upload-failed",c("AdsVideoUploadEvents").ENCODING_SUCCESS,c("AdsVideoUploadEvents").ENCODING_ERROR]};l.prototype.__delegateEvent=function(event,m){"use strict";__p&&__p();var n=null;if(event==="upload-progressed"){var o=c("VideoUploadProgressBar").computeProgress(m.start_offset,m.sent_bytes,m.file_size,0,0);n=o/100}else if(event==="upload-finished")this.post({});else if(event==="post-finished")n=m.video_id;else if(event==="post-failed")event="upload-failed";i.__delegateEvent.call(this,event,n)};f.exports=l}),null);
__d("PageContentTabProductUploadVideoButton.react",["cx","fbt","AdsVideoUploadConfig","AdsVideoUploadEvents","AsyncRequest","FileInput.react","GraphAPI","Link.react","ProductVideoChunkedUploader","React","VideoUploadFile","VideoUploadTargetType","XUIGrayText.react"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=1e3,m=c("React").PropTypes;j=babelHelpers.inherits(n,c("React").Component);k=j&&j.prototype;function n(){__p&&__p();var o,p;for(var q=arguments.length,r=Array(q),s=0;s<q;s++)r[s]=arguments[s];return p=(o=k.constructor).call.apply(o,[this].concat(r)),this.state={videoUploaders:[],lastEncodingStatusCheckTimes:[]},this.$PageContentTabProductUploadVideoButton1=function(){__p&&__p();var t=this.refs.fileInput.getFileInput().getInput(),u=c("VideoUploadFile").fromFileInput(t),v=new(c("ProductVideoChunkedUploader"))({config:c("AdsVideoUploadConfig"),source:"product_edit_tool",target_id:this.props.productCatalogID,target_type:c("VideoUploadTargetType").PRODUCT_CATALOG,access_token:this.props.pageContentTabAccessToken}),w=this.state.videoUploaders.length;v.subscribe("upload-failed",this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe(c("AdsVideoUploadEvents").UPLOAD_ERROR,this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe("post-failed",this.$PageContentTabProductUploadVideoButton2.bind(this,w));v.subscribe("post-finished",this.$PageContentTabProductUploadVideoButton3.bind(this,w));this.props.onVideoSelected(w);v.upload(u);var x=this.state.videoUploaders;x[w]=v;this.setState({videoUploaders:x})}.bind(this),this.$PageContentTabProductUploadVideoButton2=function(t){this.props.onVideoUploadError(t)}.bind(this),this.$PageContentTabProductUploadVideoButton3=function(t){this.$PageContentTabProductUploadVideoButton4(t)}.bind(this),this.$PageContentTabProductUploadVideoButton5=function(t){var u=this.$PageContentTabProductUploadVideoButton6(t),v=this.state.lastEncodingStatusCheckTimes;v[t]=Date.now();this.setState({lastEncodingStatusCheckTimes:v});new(c("AsyncRequest"))().setURI("/ajax/video/encode/feedback/ping/").setData({video_id:u}).setHandler(this.$PageContentTabProductUploadVideoButton7.bind(this,t)).send()}.bind(this),this.$PageContentTabProductUploadVideoButton8=function(t,u){var v=this.$PageContentTabProductUploadVideoButton6(t),w=u.data;if(w)for(var x=0;x<w.length;x++)if(w[x].is_preferred){this.props.onVideoUploadFinished(t,v,w[x].uri);return}}.bind(this),this.$PageContentTabProductUploadVideoButton6=function(t){return this.state.videoUploaders[t].getUploadSession().getVideoID()}.bind(this),p}n.prototype.render=function(){return c("React").createElement(c("FileInput.react"),{name:"video",ref:"fileInput",onChange:this.$PageContentTabProductUploadVideoButton1},c("React").createElement(c("Link.react"),{className:"_25dc"},c("React").createElement("div",{className:"_25dd _25de"},c("React").createElement(c("XUIGrayText.react"),{className:"_25df",size:"meta1",display:"block"},i._("Add Videos")))))};n.prototype.$PageContentTabProductUploadVideoButton4=function(o){var p=this.state.lastEncodingStatusCheckTimes[o]+l,q=Math.max(0,p-Date.now());setTimeout(this.$PageContentTabProductUploadVideoButton5.bind(this,o),q)};n.prototype.$PageContentTabProductUploadVideoButton7=function(o,p){var q=this.$PageContentTabProductUploadVideoButton6(o),r=p.payload;if(r)if(r.is_ready)c("GraphAPI")("2.3").object("video",q).edge("thumbnails").get({access_token:this.props.pageContentTabAccessToken}).done(this.$PageContentTabProductUploadVideoButton8.bind(this,o));else if(r.error)this.$PageContentTabProductUploadVideoButton2(o);else this.$PageContentTabProductUploadVideoButton4(o)};n.propTypes={onVideoSelected:m.func.isRequired,onVideoUploadError:m.func.isRequired,onVideoUploadFinished:m.func.isRequired,pageContentTabAccessToken:m.string.isRequired,productCatalogID:m.string.isRequired};f.exports=n}),null);
__d("XPagesManagerProductPhotoUploadController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/upload/file/product/photo/",{waterfall_id:{type:"String"}})}),null);
__d("PageProductPhotoEditButton.react",["cx","fbt","ActorURI","Arbiter","AsyncRequest","BOFSellerLogger","BOFSellerLoggerEvent","ReactComposerPhotoActions","PhotoEditorTargetType","XPagesManagerProductPhotoUploadController","React","Tooltip","XComposerPhotoUploader","XStickerPhotoEditorController"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("React").PropTypes;j=babelHelpers.inherits(m,c("React").Component);k=j&&j.prototype;m.prototype.componentDidMount=function(){c("Arbiter").subscribe("PageProductPhotoEditor/newImage"+this.props.composerID,this.$PageProductPhotoEditButton2.bind(this))};m.prototype.render=function(){var n=i._("Edit photo");return c("React").createElement("button",babelHelpers["extends"]({className:"_k4v",onClick:this.$PageProductPhotoEditButton3.bind(this)},c("Tooltip").propsFor(n)),c("React").createElement("div",{className:"_k4w"}))};m.prototype.$PageProductPhotoEditButton3=function(){__p&&__p();if(this.$PageProductPhotoEditButton1)return;c("BOFSellerLogger").log(c("BOFSellerLoggerEvent").ACTN_EDIT_PHOTO_CLICK,this.props.pageID,{target_class:"Photo",target_id:this.props.photoID});var n=void 0,o=void 0;if(this.props.photoID==parseInt(this.props.photoID,10)){n=parseInt(this.props.photoID,10);o=""}else{n=0;o=this.props.photoID}var p=c("ActorURI").create(c("XStickerPhotoEditorController").getURIBuilder().setString("grid_id",this.props.composerID).setEnum("target_type",c("PhotoEditorTargetType").PAGE_PRODUCT_COMPOSER).setInt("photo_fbid",n).setString("encrypted_photo_id",o).getURI(),this.props.pageID);this.$PageProductPhotoEditButton1=new(c("AsyncRequest"))(p).setFinallyHandler(function(){this.$PageProductPhotoEditButton1=null}.bind(this)).send();c("ReactComposerPhotoActions").startPhotoEdit(this.props.composerID,null)};m.prototype.$PageProductPhotoEditButton2=function(n,o){var p=c("ActorURI").create(c("XPagesManagerProductPhotoUploadController").getURIBuilder().getURI(),this.props.pageID),q=o.encryptedID||o.fbid,r=new(c("XComposerPhotoUploader"))({uploadEndpoint:p,onUploadSuccess:function(n,s){this.props.onPhotoEdited(q,s.response.payload[0])}.bind(this)});r.getAsyncUploadRequest([o.blob]).send()};function m(){j.apply(this,arguments)}m.propTypes={composerID:l.string.isRequired,onPhotoEdited:l.func.isRequired,pageID:l.string.isRequired,photoID:l.string.isRequired};f.exports=m}),null);
__d("PageContentTabProductPhotoUploader.react",["cx","fbt","invariant","ActorURI","AudienceManagerEngagementVideoSelectionError.react","Image.react","Link.react","Omnipicker.react","ComputerPanel.react","OmnipickerComputerSelector.react","OmnipickerDialog.react","OmnipickerDialogRenderer","OmnipickerPagePostedPhotosPanel.react","OmnipickerPagePostedPhotosSelector.react","OmnipickerPanelList.react","OmnipickerSelectorList.react","OmnipickerWaterfallLogger","PageContentTabProductUploadVideoButton.react","PageProductPhotoEditButton.react","XPagesManagerProductPhotoUploadController","PUWApplications","PUWSteps","React","WaterfallIDGenerator","XUICloseButton.react","XUIError.react","XUIGrayText.react","XUISpinner.react"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=c("React").PropTypes,l=c("React").createClass({displayName:"PageContentTabProductPhotoUploader",_waterfallLogger:c("OmnipickerWaterfallLogger"),propTypes:{className:k.string,maxPhotosCount:k.number,pageID:k.string.isRequired,onPhotoEdited:k.func,onPhotosSelected:k.func.isRequired,onPhotoRemoved:k.func.isRequired,photos:k.array.isRequired,photoEditingEnabled:k.bool.isRequired,productCatalogID:k.string,pageContentTabAccessToken:k.string,videos:k.array,onVideoSelected:k.func,onVideoUploadFinished:k.func,onVideoUploadError:k.func,onVideoRemoved:k.func,showVideoUploadButton:k.bool,xuiError:k.any},getInitialState:function m(){var n={fileUploadURI:c("ActorURI").create(c("XPagesManagerProductPhotoUploadController").getURIBuilder().getURI(),this.props.pageID)};this._waterfallLogger=new(c("OmnipickerWaterfallLogger"))(c("PUWApplications").WEB_PRODUCT_PHOTO_OMNIPICKER,c("WaterfallIDGenerator").generate());return{dialogRenderer:new(c("OmnipickerDialogRenderer"))(c("React").createElement(c("OmnipickerDialog.react"),{onCancel:this.onPickerCancel,title:i._("Select photo")},c("React").createElement(c("Omnipicker.react"),{logger:this._waterfallLogger,onDoneSelecting:this.onPickerAddPhotos},c("React").createElement(c("OmnipickerSelectorList.react"),null,c("React").createElement(c("OmnipickerComputerSelector.react"),null),c("React").createElement(c("OmnipickerPagePostedPhotosSelector.react"),null)),c("React").createElement(c("OmnipickerPanelList.react"),null,c("React").createElement(c("ComputerPanel.react"),{config:n}),c("React").createElement(c("OmnipickerPagePostedPhotosPanel.react"),{pageID:this.props.pageID})))))}},onPickerCancel:function m(){this.state.dialogRenderer.hide();this._waterfallLogger.logStep(c("PUWSteps").CLIENT_FLOW_CANCEL)},onPickerAddPhotos:function m(n){this.state.dialogRenderer.hide();this.props.onPhotosSelected(n)},render:function m(){var n=null,o=null,p=this.props.photos.length;if(this.props.videos)p+=this.props.videos.length;if(!this.props.maxPhotosCount||p<this.props.maxPhotosCount){n=this._renderAddPhotoLink();o=this._renderAddVideoLink()}return c("React").createElement("div",{className:this.props.className},this._renderUploadedMedia(),n,o)},_renderUploadedPhoto:function m(n){var o=null;if(this.props.photoEditingEnabled)o=c("React").createElement(c("PageProductPhotoEditButton.react"),{composerID:this._waterfallLogger.getWaterfallID(),onPhotoEdited:this.props.onPhotoEdited,pageID:this.props.pageID,photoID:n.fbid});return c("React").createElement("div",{key:n.fbid,className:"_5m94"},c("React").createElement(c("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(p){return this.props.onPhotoRemoved(n)}.bind(this)}),c("React").createElement(c("Image.react"),{className:"_19tc",src:n.src}),o,c("React").createElement("div",{className:"_19td"}))},_renderUploadedVideo:function m(n){var o=null;if(!n.ready&&!n.error)o=c("React").createElement(c("XUISpinner.react"),{className:"_37cg",size:"large"});var p=null;if(n.error)p=c("React").createElement("div",{className:"_37ch"},c("React").createElement(c("AudienceManagerEngagementVideoSelectionError.react"),{mainLabel:i._("Upload failed")}));return c("React").createElement("div",{key:n.fbid,className:"_5m94"},c("React").createElement(c("XUICloseButton.react"),{className:"_5m95",size:"medium",shade:"light",onClick:function(){this.props.onVideoRemoved||j(0);this.props.onVideoRemoved(n)}.bind(this)}),c("React").createElement(c("Image.react"),{className:"_19tc",src:n.src}),o,p,c("React").createElement("div",{className:"_37cj"}),c("React").createElement("div",{className:"_37cm"},c("React").createElement("div",{className:"_37cn"})),c("React").createElement("div",{className:"_19td"}))},_renderUploadedMedia:function m(){var n=this.props.videos&&this.props.onVideoRemoved?this.props.videos.map(this._renderUploadedVideo):[],o=this.props.photos.map(this._renderUploadedPhoto);return n.concat(o)},_renderAddPhotoLink:function m(){return c("React").createElement(c("Link.react"),{className:"_3ff7",ref:"uploadButton",onClick:this._onPickerLaunch},c("React").createElement(c("XUIError.react"),{xuiError:this.props.xuiError},c("React").createElement("div",{className:"_22to _19tc"},c("React").createElement(c("XUIGrayText.react"),{className:"_3ff8",size:"meta1",display:"block"},i._("Add photos")))))},_renderAddVideoLink:function m(){if(!this.props.showVideoUploadButton||!this.props.onVideoSelected||!this.props.onVideoUploadFinished||!this.props.onVideoUploadError||!this.props.productCatalogID||!this.props.pageContentTabAccessToken)return null;return c("React").createElement(c("PageContentTabProductUploadVideoButton.react"),{productCatalogID:this.props.productCatalogID,onVideoSelected:this.props.onVideoSelected,onVideoUploadFinished:this.props.onVideoUploadFinished,onVideoUploadError:this.props.onVideoUploadError,pageContentTabAccessToken:this.props.pageContentTabAccessToken})},_onPickerLaunch:function m(){this._waterfallLogger.logStep(c("PUWSteps").CLIENT_FLOW_BEGIN);this.state.dialogRenderer.show()}});f.exports=l}),null);
__d("XControllerWithPageTokenURIUpdater",[],(function a(b,c,d,e,f,g){var h={updateURI:function i(j){window.history&&window.history.replaceState(window.history.state,null,j)}};f.exports=h}),null);
__d("AnyTokenSearchSource",["AbstractSearchSource","SearchableEntry"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("AbstractSearchSource"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.$AnyTokenSearchSource1=k||this.$AnyTokenSearchSource1}j.prototype.$AnyTokenSearchSource1=function(k){"use strict";return new(c("SearchableEntry"))({uniqueID:k,title:k})};j.prototype.searchImpl=function(k,l,m){"use strict";var n=[];if(k&&k.length)n.push(this.$AnyTokenSearchSource1(k));l(n,k)};f.exports=j}),null);
__d("CommercialBreakSkywalkerSubscriptionManager",["Map","RTISubscriptionManager"],(function a(b,c,d,e,f,g){__p&&__p();var h=new(c("Map"))(),i=new(c("Map"))(),j={subscribe:function k(l,m){__p&&__p();var n;if(!h.has(l))(function(){__p&&__p();var o=[];h.set(l,o);var p=c("RTISubscriptionManager").subscribe(l,function(q){__p&&__p();for(var r=o,s=Array.isArray(r),t=0,r=s?r:r[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var u;if(s){if(t>=r.length)break;u=r[t++]}else{t=r.next();if(t.done)break;u=t.value}var v=u;v(q)}});i.set(l,p)})();var o=h.get(l);if(o)o.push(m);return i.get(l)}};f.exports=j}),null);
__d("InstreamVideoAdsController",["CommercialBreakMobileEvent","DataAttributeUtils","DateConsts","DOMQuery","Map","MarauderLogger","NonBlockingIFrame","URI","VideoPlayerStates","ViewableImpressionConfig"],(function a(b,c,d,e,f,g){__p&&__p();var h=null;function i(){"use strict";this.$InstreamVideoAdsController1=new(c("Map"))()}i.prototype.$InstreamVideoAdsController2=function(j){"use strict";var k=[];this.$InstreamVideoAdsController1.forEach(function(l,m){if(!m.isState(c("VideoPlayerStates").DESTROYED)&&c("DOMQuery").contains(j,m.getRootNode()))k.push(m)});if(k.length===0)return null;return k[0]};i.prototype.$InstreamVideoAdsController3=function(j,k){"use strict";if(this.$InstreamVideoAdsController1.has(j))return;this.$InstreamVideoAdsController1.set(j,k)};i.registerVideoController=function(j,k){"use strict";if(h===null)h=new i();h.$InstreamVideoAdsController3(j,k);c("MarauderLogger").log(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_REGISTER_VIDEO,"commercial_break",{commercial_break_ad_client_token:j.getAdClientToken()});var l=h;j.once("beginPlayback",function(){l.$InstreamVideoAdsController4(j)})};i.prototype.$InstreamVideoAdsController4=function(j){"use strict";var k=this.$InstreamVideoAdsController1.get(j);if(c("DOMQuery").contains(k,j.getRootNode())){var l=c("DataAttributeUtils").getDataAttribute(k,"data-xt"),m=Math.floor(Date.now()/c("DateConsts").MS_PER_SEC),n={xt:l,isv:1,cts:m};c("NonBlockingIFrame").loadIFrame(new(c("URI"))(c("ViewableImpressionConfig").impressionURL).addQueryData(n).toString())}};i.findVideoControllerForStory=function(j){"use strict";if(h===null)return null;return h.$InstreamVideoAdsController2(j)};f.exports=i}),null);
__d("CommercialBreakVideoAdOverlay",["cx","Arbiter","Bootloader","CommercialBreakMobileEvent","CommercialBreakNoAdReason","CommercialBreakState","CSS","DOM","DOMDimensions","Event","InstreamVideoAdsController","InstreamVideoAdType","SubscriptionsHandler","VideoPlayerFormats","VideoPlayerFormatsMap","VideoPlayerHTML5Experiments","VideoPlayerLoggerEvent","VideoPlayerLoggerEventField","VideoPlayerReason","VideoPlayerStates","getFullScreenElement","gkx"],(function a(b,c,d,e,f,g,h){__p&&__p();function i(j,k){"use strict";__p&&__p();this.$CommercialBreakVideoAdOverlay7=k;this.$CommercialBreakVideoAdOverlay9=false;this.$CommercialBreakVideoAdOverlay1=j;this.$CommercialBreakVideoAdOverlay4=null;this.$CommercialBreakVideoAdOverlay10=false;this.$CommercialBreakVideoAdOverlay11=false;this.$CommercialBreakVideoAdOverlay12=0;this.$CommercialBreakVideoAdOverlay14=false;this.$CommercialBreakVideoAdOverlay15={};this.$CommercialBreakVideoAdOverlay16=0;this.$CommercialBreakVideoAdOverlay17=false;this.$CommercialBreakVideoAdOverlay6=j.addListener("optionsChange",function(){return this.$CommercialBreakVideoAdOverlay18()}.bind(this));this.$CommercialBreakVideoAdOverlay18()}i.prototype.stopAdWithoutTransition=function(){"use strict";this.$CommercialBreakVideoAdOverlay19();if(this.$CommercialBreakVideoAdOverlay3)this.$CommercialBreakVideoAdOverlay3.reset()};i.prototype.$CommercialBreakVideoAdOverlay18=function(){"use strict";__p&&__p();this.$CommercialBreakVideoAdOverlay2=this.$CommercialBreakVideoAdOverlay1.getOption("VideoWithInstreamVideo","controller");if(!this.$CommercialBreakVideoAdOverlay2)return;this.$CommercialBreakVideoAdOverlay3=this.$CommercialBreakVideoAdOverlay1.getOption("VideoWithCommercialBreak","controller");if(!this.$CommercialBreakVideoAdOverlay3)return;this.$CommercialBreakVideoAdOverlay6.remove();this.$CommercialBreakVideoAdOverlay8=this.$CommercialBreakVideoAdOverlay2.getConfig();this.$CommercialBreakVideoAdOverlay1.addListener("commercialBreak/vodBreakStarting",function(){this.$CommercialBreakVideoAdOverlay20()}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener("commercialBreak/videoAdStoryFetched",function(j,k,l,m,n){if(j){c("DOM").setContent(this.$CommercialBreakVideoAdOverlay7,j);this.$CommercialBreakVideoAdOverlay10=true;this.$CommercialBreakVideoAdOverlay11=!k;this.$CommercialBreakVideoAdOverlay12=l;this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(m);this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakClientToken(n)}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener("commercialBreak/videoAdPodFetched",function(j,k,l){__p&&__p();if(j){this.$CommercialBreakVideoAdOverlay14=true;this.$CommercialBreakVideoAdOverlay15=j;this.$CommercialBreakVideoAdOverlay16=0;for(var m=0;this.$CommercialBreakVideoAdOverlay15[m];m++){var n=this.$CommercialBreakVideoAdOverlay15[m];if(n.videoAdStory){this.$CommercialBreakVideoAdOverlay10=true;this.$CommercialBreakVideoAdOverlay11=true;this.$CommercialBreakVideoAdOverlay12=l;c("DOM").appendContent(this.$CommercialBreakVideoAdOverlay7,n.videoAdStory)}}var o=this.$CommercialBreakVideoAdOverlay15[this.$CommercialBreakVideoAdOverlay16];if(o){var p=o.instreamVideoAdBreakVideoID;this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(p)}}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener("commercialBreak/stateChange",function(j){__p&&__p();var k=j.state;switch(k){case c("CommercialBreakState").AD_REQUEST_SENT:case c("CommercialBreakState").ENTERING_TRANSITION:var l=this.$CommercialBreakVideoAdOverlay21();if(!!l.height&&!!l.width)this.$CommercialBreakVideoAdOverlay13=l;break;case c("CommercialBreakState").PLAY_AD_COUNTDOWN:this.$CommercialBreakVideoAdOverlay22();break;case c("CommercialBreakState").INIT:this.$CommercialBreakVideoAdOverlay19();break;case c("CommercialBreakState").LEAVING_TRANSITION:if(this.$CommercialBreakVideoAdOverlay8.isBroadcast)this.$CommercialBreakVideoAdOverlay19();break}}.bind(this));this.$CommercialBreakVideoAdOverlay3.addListener("commercialBreak/inTransition",function(j){return this.$CommercialBreakVideoAdOverlay23(j.shouldShowAd)}.bind(this));this.$CommercialBreakVideoAdOverlay1.addListener("commercialBreak/CTAClicked",this.$CommercialBreakVideoAdOverlay24.bind(this))};i.prototype.$CommercialBreakVideoAdOverlay24=function(){"use strict";this.$CommercialBreakVideoAdOverlay17=true};i.prototype.$CommercialBreakVideoAdOverlay25=function(j){__p&&__p();var k;"use strict";j.setLogEntryPropertyGetters((k={},k[c("VideoPlayerLoggerEventField").HOST_VIDEO_ID]=this.$CommercialBreakVideoAdOverlay8.hostVideoID,k[c("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_INDEX]=this.$CommercialBreakVideoAdOverlay12,k));j.addListener("stateChange",function(){if(!this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay26();else if(this.$CommercialBreakVideoAdOverlay4.isState(c("VideoPlayerStates").FINISHED))if(this.$CommercialBreakVideoAdOverlay14)this.$CommercialBreakVideoAdOverlay27();else this.$CommercialBreakVideoAdOverlay26()}.bind(this));j.addListener("playRequested",function(l){if(l===c("VideoPlayerReason").USER)this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PLAY_AD)}.bind(this));j.addListener("pauseRequested",function(l){this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_PAUSE_AD,{video_player_reason:l})}.bind(this));if(this.$CommercialBreakVideoAdOverlay8.videoChannelCaller)j.addListener("clickVideo",this.$CommercialBreakVideoAdOverlay28.bind(this));this.$CommercialBreakVideoAdOverlay2.registerInstreamVideo(j);this.$CommercialBreakVideoAdOverlay29();this.$CommercialBreakVideoAdOverlay30();this.$CommercialBreakVideoAdOverlay31()};i.prototype.$CommercialBreakVideoAdOverlay32=function(){"use strict";__p&&__p();var j=null,k=this.$CommercialBreakVideoAdOverlay2.getCurrentInstreamVideoAdType();switch(k){case c("InstreamVideoAdType").LIVE:if(this.$CommercialBreakVideoAdOverlay3.getIsDuplicateVideo())j=c("CommercialBreakNoAdReason").DUPLICATE_VIDEO;else if(!this.$CommercialBreakVideoAdOverlay10)j=c("CommercialBreakNoAdReason").WAIT_FOR_FAILED;else if(!this.$CommercialBreakVideoAdOverlay11)j=c("CommercialBreakNoAdReason").NO_VIDEO_AD;else j=c("CommercialBreakNoAdReason").PLAYBACK_ERROR;this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_STATIC_COUNTDOWN,{commercial_break_no_ad_reason:j});break;case c("InstreamVideoAdType").VOD:case c("InstreamVideoAdType").NONLIVE:j=c("CommercialBreakNoAdReason").PLAYBACK_ERROR;this.$CommercialBreakVideoAdOverlay2.logMarauderEvent(this.$CommercialBreakVideoAdOverlay8.disableNoAdTransition?c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING:c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_NO_AD_TRANSITION,{commercial_break_no_ad_reason:j});this.$CommercialBreakVideoAdOverlay3.reset();break}};i.prototype.$CommercialBreakVideoAdOverlay26=function(){"use strict";if(this.$CommercialBreakVideoAdOverlay8.isBroadcast)this.$CommercialBreakVideoAdOverlay19();this.$CommercialBreakVideoAdOverlay3.onLeaveTransition()};i.prototype.$CommercialBreakVideoAdOverlay22=function(){"use strict";this.$CommercialBreakVideoAdOverlay9=false;this.$CommercialBreakVideoAdOverlay20();if(this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay25(this.$CommercialBreakVideoAdOverlay4);else this.$CommercialBreakVideoAdOverlay32()};i.prototype.$CommercialBreakVideoAdOverlay20=function(){"use strict";this.$CommercialBreakVideoAdOverlay4=c("InstreamVideoAdsController").findVideoControllerForStory(this.$CommercialBreakVideoAdOverlay7);if(this.$CommercialBreakVideoAdOverlay4&&!this.$CommercialBreakVideoAdOverlay4.hasOption("CommercialBreakVideoAdOverlay","videoController"))this.$CommercialBreakVideoAdOverlay4.registerOption("CommercialBreakVideoAdOverlay","videoController",function(){return this.$CommercialBreakVideoAdOverlay1}.bind(this));if(this.$CommercialBreakVideoAdOverlay4&&!this.$CommercialBreakVideoAdOverlay4.hasOption("VideoContextMenu","disablePauseMenuItem"))this.$CommercialBreakVideoAdOverlay4.registerOption("VideoContextMenu","disablePauseMenuItem",function(){return this.$CommercialBreakVideoAdOverlay8.isLive||!this.$CommercialBreakVideoAdOverlay8.canPauseAdBreak}.bind(this))};i.prototype.$CommercialBreakVideoAdOverlay27=function(){"use strict";__p&&__p();this.$CommercialBreakVideoAdOverlay16++;var j=this.$CommercialBreakVideoAdOverlay15[this.$CommercialBreakVideoAdOverlay16];if(!j)this.$CommercialBreakVideoAdOverlay26();else{var k=j.videoAdStory,l=j.instreamVideoAdBreakVideoID;if(k){if(this.$CommercialBreakVideoAdOverlay7.children.length>0)c("DOM").remove(this.$CommercialBreakVideoAdOverlay7.children[0]);this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(l);var m=this.$CommercialBreakVideoAdOverlay4?this.$CommercialBreakVideoAdOverlay4.isMuted():true,n=this.$CommercialBreakVideoAdOverlay4?this.$CommercialBreakVideoAdOverlay4.getVolume():0;if(this.$CommercialBreakVideoAdOverlay5)this.$CommercialBreakVideoAdOverlay5.release();if(this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay4.destroy();this.$CommercialBreakVideoAdOverlay4=null;this.$CommercialBreakVideoAdOverlay22();var o=this.$CommercialBreakVideoAdOverlay4;if(o){o.setVolume(n);if(m)o.mute();else o.unmute()}}else this.$CommercialBreakVideoAdOverlay26()}};i.prototype.$CommercialBreakVideoAdOverlay21=function(){"use strict";var j=c("DOMDimensions").getElementDimensions(this.$CommercialBreakVideoAdOverlay1.getRootNode());if(this.$CommercialBreakVideoAdOverlay1.isFullscreen())j=c("DOMDimensions").getElementDimensions(c("getFullScreenElement")());return j};i.prototype.$CommercialBreakVideoAdOverlay29=function(){"use strict";var j=this.$CommercialBreakVideoAdOverlay4;if(!j)return;var k=this.$CommercialBreakVideoAdOverlay21();if((!k.width||!k.height)&&this.$CommercialBreakVideoAdOverlay13)k=this.$CommercialBreakVideoAdOverlay13;j.setDimensions(k.width,k.height)};i.prototype.$CommercialBreakVideoAdOverlay30=function(){"use strict";var j=this.$CommercialBreakVideoAdOverlay4;if(!j)return;var k=this.$CommercialBreakVideoAdOverlay1.getSource();if(k)j.updateSource(k)};i.prototype.$CommercialBreakVideoAdOverlay33=function(){"use strict";if(this.$CommercialBreakVideoAdOverlay2.shouldPlayInstreamAd()){c("CSS").removeClass(this.$CommercialBreakVideoAdOverlay7,"_50m2");if(!this.$CommercialBreakVideoAdOverlay8.isBroadcast)this.$CommercialBreakVideoAdOverlay1.emit("commercialBreak/hideUFI");this.$CommercialBreakVideoAdOverlay2.playInstreamAd()}};i.prototype.$CommercialBreakVideoAdOverlay28=function(){"use strict";if(!this.$CommercialBreakVideoAdOverlay4||!this.$CommercialBreakVideoAdOverlay4.isState(c("VideoPlayerStates").PLAYING))return;var j=this.$CommercialBreakVideoAdOverlay1.getOption("VideoWithClickToChannelView","isChannelEligible"),k=this.$CommercialBreakVideoAdOverlay1.getOption("WatchAndScroll","isActive");if(j&&!k)c("Bootloader").loadModules(["VideoChannelController"],function(l){l.openFromVideoPlayer(this.$CommercialBreakVideoAdOverlay1,this.$CommercialBreakVideoAdOverlay1.getVideoChannelID(),this.$CommercialBreakVideoAdOverlay8.videoChannelCaller)}.bind(this),"CommercialBreakVideoAdOverlay")};i.prototype.$CommercialBreakVideoAdOverlay23=function(j){"use strict";if(j){this.$CommercialBreakVideoAdOverlay20();this.$CommercialBreakVideoAdOverlay29();if(this.$CommercialBreakVideoAdOverlay4)c("CSS").removeClass(this.$CommercialBreakVideoAdOverlay7,"_50m2")}else this.$CommercialBreakVideoAdOverlay19()};i.prototype.$CommercialBreakVideoAdOverlay31=function(){"use strict";__p&&__p();if(this.$CommercialBreakVideoAdOverlay9)return;this.$CommercialBreakVideoAdOverlay9=true;this.$CommercialBreakVideoAdOverlay5=new(c("SubscriptionsHandler"))();this.$CommercialBreakVideoAdOverlay5.addSubscriptions(this.$CommercialBreakVideoAdOverlay1.addListener("VideoChannelController/enterChannel",this.$CommercialBreakVideoAdOverlay34.bind(this)),c("Arbiter").subscribe("VideoChannelView/closed",this.$CommercialBreakVideoAdOverlay34.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener("TahoeController/exitTahoe",this.$CommercialBreakVideoAdOverlay34.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener("TahoeController/enterTahoe",this.$CommercialBreakVideoAdOverlay34.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener("toggleFullscreen",function(){this.$CommercialBreakVideoAdOverlay29();if(this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay4.logEvent(this.$CommercialBreakVideoAdOverlay4.isFullscreen()?c("VideoPlayerLoggerEvent").ENTERED_FS:c("VideoPlayerLoggerEvent").EXITED_FS)}.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener("WatchAndScroll/positionUpdated",this.$CommercialBreakVideoAdOverlay29.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener("commercialBreak/scrollAway",function(){if(this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c("VideoPlayerStates").PLAYING)){this.$CommercialBreakVideoAdOverlay4.pause(c("VideoPlayerReason").AUTOPLAY);this.$CommercialBreakVideoAdOverlay1.once("commercialBreak/scrollInto",function(){if(this.$CommercialBreakVideoAdOverlay9&&this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c("VideoPlayerStates").PAUSED))this.$CommercialBreakVideoAdOverlay4.play(c("VideoPlayerReason").AUTOPLAY)}.bind(this))}}.bind(this)),this.$CommercialBreakVideoAdOverlay1.addListener("commercialBreak/scrollInto",function(){if(this.$CommercialBreakVideoAdOverlay9&&this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c("VideoPlayerStates").READY))this.$CommercialBreakVideoAdOverlay33()}.bind(this)),c("Event").listen(window,"focus",this.$CommercialBreakVideoAdOverlay35.bind(this)));this.$CommercialBreakVideoAdOverlay33()};i.prototype.$CommercialBreakVideoAdOverlay35=function(){"use strict";if(this.$CommercialBreakVideoAdOverlay17&&c("gkx")("AT66Z79NswpYFsO2HRr4G1bTG5VJVqTPW01ZncfhaP9KYk7xRjZpH31DhXmSLmHqwAl8I-jzWVNqbJuSv73dKTUSC2M6ufJ3-1EqUthLG94bOQ"))this.$CommercialBreakVideoAdOverlay3.endCommercialBreakByCTAClick()};i.prototype.$CommercialBreakVideoAdOverlay34=function(){"use strict";this.$CommercialBreakVideoAdOverlay29();this.$CommercialBreakVideoAdOverlay30()};i.prototype.$CommercialBreakVideoAdOverlay19=function(){"use strict";__p&&__p();if(!this.$CommercialBreakVideoAdOverlay9)return;this.$CommercialBreakVideoAdOverlay9=false;this.$CommercialBreakVideoAdOverlay10=false;this.$CommercialBreakVideoAdOverlay11=false;this.$CommercialBreakVideoAdOverlay12=0;this.$CommercialBreakVideoAdOverlay14=false;this.$CommercialBreakVideoAdOverlay15={};this.$CommercialBreakVideoAdOverlay16=0;this.$CommercialBreakVideoAdOverlay2.setCurrentInstreamVideoAdBreakVideoID(null);this.$CommercialBreakVideoAdOverlay17=false;c("CSS").addClass(this.$CommercialBreakVideoAdOverlay7,"_50m2");if(this.$CommercialBreakVideoAdOverlay4&&this.$CommercialBreakVideoAdOverlay4.isState(c("VideoPlayerStates").PLAYING))this.$CommercialBreakVideoAdOverlay4.pause(c("VideoPlayerReason").AUTOPLAY);this.$CommercialBreakVideoAdOverlay5.release();if(this.$CommercialBreakVideoAdOverlay4)this.$CommercialBreakVideoAdOverlay4.destroy();this.$CommercialBreakVideoAdOverlay4=null;while(this.$CommercialBreakVideoAdOverlay7.children.length>0)c("DOM").remove(this.$CommercialBreakVideoAdOverlay7.children[0])};f.exports=i}),null);
__d("InstreamNFXHideType",[],(function a(b,c,d,e,f,g){f.exports={HIDE_AD:"HIDE_AD",HIDE_AD_BREAKS:"HIDE_AD_BREAKS"}}),null);
__d("VideoCommercialBreakTransitionOverlay",["cx","fbt","CommercialBreakState","CountdownTimer.react","CSS","React","ReactDOM","SubscriptionsHandler"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j=300,k=300;function l(m,n,o){"use strict";__p&&__p();this.$VideoCommercialBreakTransitionOverlay9=null;this.$VideoCommercialBreakTransitionOverlay10=null;this.$VideoCommercialBreakTransitionOverlay1=n;this.$VideoCommercialBreakTransitionOverlay2=o;this.$VideoCommercialBreakTransitionOverlay7=new(c("SubscriptionsHandler"))();this.$VideoCommercialBreakTransitionOverlay4=m;this.$VideoCommercialBreakTransitionOverlay5=m.addListener("optionsChange",function(){return this.$VideoCommercialBreakTransitionOverlay11()}.bind(this));this.$VideoCommercialBreakTransitionOverlay11()}l.prototype.$VideoCommercialBreakTransitionOverlay11=function(){"use strict";__p&&__p();this.$VideoCommercialBreakTransitionOverlay3=this.$VideoCommercialBreakTransitionOverlay4.getOption("VideoWithCommercialBreak","controller");if(!this.$VideoCommercialBreakTransitionOverlay3)return;var m=this.$VideoCommercialBreakTransitionOverlay4.getOption("VideoWithInstreamVideo","controller");if(!m)return;this.$VideoCommercialBreakTransitionOverlay6=m.getConfig();this.$VideoCommercialBreakTransitionOverlay5.remove();this.$VideoCommercialBreakTransitionOverlay7.engage();this.$VideoCommercialBreakTransitionOverlay7.addSubscriptions(this.$VideoCommercialBreakTransitionOverlay3.addListener("commercialBreak/stateChange",function(n){var o=n.state,p=n.countdownDurationMsecs;this.$VideoCommercialBreakTransitionOverlay12(o,p)}.bind(this)));this.$VideoCommercialBreakTransitionOverlay4.addListener("VideoChannelController/exitChannel",this.$VideoCommercialBreakTransitionOverlay13.bind(this));this.$VideoCommercialBreakTransitionOverlay4.addListener("stateChange",this.$VideoCommercialBreakTransitionOverlay13.bind(this))};l.prototype.$VideoCommercialBreakTransitionOverlay12=function(m,n){"use strict";__p&&__p();this.$VideoCommercialBreakTransitionOverlay8=m;switch(m){case c("CommercialBreakState").ENTERING_TRANSITION:case c("CommercialBreakState").VOD_BREAK_WITH_NO_VIDEO_AD:this.$VideoCommercialBreakTransitionOverlay14();break;case c("CommercialBreakState").PLAY_AD_COUNTDOWN:this.$VideoCommercialBreakTransitionOverlay15(n);break;case c("CommercialBreakState").LEAVING_TRANSITION:this.$VideoCommercialBreakTransitionOverlay16();break;case c("CommercialBreakState").INIT:this.$VideoCommercialBreakTransitionOverlay17();break}this.$VideoCommercialBreakTransitionOverlay13()};l.prototype.$VideoCommercialBreakTransitionOverlay14=function(){"use strict";if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast){this.$VideoCommercialBreakTransitionOverlay18(i._("will be back soon"),null);this.$VideoCommercialBreakTransitionOverlay4.emit("commercialBreak/hideUFI")}else this.$VideoCommercialBreakTransitionOverlay19()};l.prototype.$VideoCommercialBreakTransitionOverlay19=function(){"use strict";__p&&__p();if(!this.$VideoCommercialBreakTransitionOverlay6.beginningNonLiveTransitionTimeMs)return;this.$VideoCommercialBreakTransitionOverlay20();var m=Math.max(j,this.$VideoCommercialBreakTransitionOverlay6.beginningNonLiveTransitionTimeMs-j);c("CSS").addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hax");this.$VideoCommercialBreakTransitionOverlay9=setTimeout(function(){clearTimeout(this.$VideoCommercialBreakTransitionOverlay9);this.$VideoCommercialBreakTransitionOverlay3.emit("commercialBreak/inTransition",{shouldShowAd:true});c("CSS").addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hay")}.bind(this),m)};l.prototype.$VideoCommercialBreakTransitionOverlay16=function(){"use strict";if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast)this.$VideoCommercialBreakTransitionOverlay18(i._("is returning now"),null);else this.$VideoCommercialBreakTransitionOverlay21()};l.prototype.$VideoCommercialBreakTransitionOverlay21=function(){"use strict";if(!this.$VideoCommercialBreakTransitionOverlay6.endingNonLiveTransitionTimeMs)return;this.$VideoCommercialBreakTransitionOverlay20();c("CSS").addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hax");this.$VideoCommercialBreakTransitionOverlay10=setTimeout(function(){clearTimeout(this.$VideoCommercialBreakTransitionOverlay10);this.$VideoCommercialBreakTransitionOverlay3.emit("commercialBreak/inTransition",{shouldShowAd:false});c("CSS").addClass(this.$VideoCommercialBreakTransitionOverlay2,"_hay")}.bind(this),k)};l.prototype.$VideoCommercialBreakTransitionOverlay20=function(){"use strict";c("CSS").removeClass(this.$VideoCommercialBreakTransitionOverlay2,"_hax");c("CSS").removeClass(this.$VideoCommercialBreakTransitionOverlay2,"_hay")};l.prototype.$VideoCommercialBreakTransitionOverlay15=function(m){"use strict";if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast)if(m)this.$VideoCommercialBreakTransitionOverlay18(i._("will return in"),m);else this.$VideoCommercialBreakTransitionOverlay18(i._("will be back soon"),null)};l.prototype.$VideoCommercialBreakTransitionOverlay18=function(m,n){"use strict";c("ReactDOM").unmountComponentAtNode(this.$VideoCommercialBreakTransitionOverlay2);var o=null;if(n)o=c("React").createElement("div",{className:"_4fih"},c("React").createElement(c("CountdownTimer.react"),{endTime:Date.now()+n,format:"digital"}));c("ReactDOM").render(c("React").createElement("div",null,c("React").createElement("div",{className:"_4fid"},m),o),this.$VideoCommercialBreakTransitionOverlay2)};l.prototype.$VideoCommercialBreakTransitionOverlay17=function(){"use strict";c("ReactDOM").unmountComponentAtNode(this.$VideoCommercialBreakTransitionOverlay2);this.$VideoCommercialBreakTransitionOverlay4.emit("commercialBreak/showUFI");clearTimeout(this.$VideoCommercialBreakTransitionOverlay9);clearTimeout(this.$VideoCommercialBreakTransitionOverlay10)};l.prototype.$VideoCommercialBreakTransitionOverlay22=function(){"use strict";return this.$VideoCommercialBreakTransitionOverlay4?this.$VideoCommercialBreakTransitionOverlay4.getVideoNodeNullable():null};l.prototype.$VideoCommercialBreakTransitionOverlay23=function(){"use strict";c("CSS").addClass(this.$VideoCommercialBreakTransitionOverlay1,"_4fii");var m=this.$VideoCommercialBreakTransitionOverlay22();if(m)c("CSS").removeClass(m,"_1_d3")};l.prototype.$VideoCommercialBreakTransitionOverlay24=function(){"use strict";c("CSS").removeClass(this.$VideoCommercialBreakTransitionOverlay1,"_4fii");var m=this.$VideoCommercialBreakTransitionOverlay22();if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast&&m)c("CSS").addClass(m,"_1_d3")};l.prototype.$VideoCommercialBreakTransitionOverlay13=function(){"use strict";switch(this.$VideoCommercialBreakTransitionOverlay8){case c("CommercialBreakState").ENTERING_TRANSITION:case c("CommercialBreakState").LEAVING_TRANSITION:this.$VideoCommercialBreakTransitionOverlay24();break;case c("CommercialBreakState").VOD_BREAK_WITH_NO_VIDEO_AD:case c("CommercialBreakState").PLAY_AD_COUNTDOWN:if(this.$VideoCommercialBreakTransitionOverlay6.isBroadcast)this.$VideoCommercialBreakTransitionOverlay24();else this.$VideoCommercialBreakTransitionOverlay23();break;default:this.$VideoCommercialBreakTransitionOverlay23()}};f.exports=l}),null);
__d("AdBreakToastEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FETCH_AD:"fetch_ad",FETCH_AD_SUCCEED:"fetch_ad_succeed",FETCH_AD_FAIL:"fetch_ad_fail",IMPRESSION_LOGGING:"impression_logging",VIEWER_TABLE_LOGGING:"viewer_table_logging"})}),null);
__d("InstreamPlacement",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({PRE_ROLL:"pre_roll",MID_ROLL:"mid_roll",POST_ROLL:"post_roll"})}),null);
__d("XInstreamVideoDemoStoryAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/instream_demo/view/story/async/",{instream_video_type:{type:"Enum",required:true,enumType:1},instream_video_break_index:{type:"Int",required:true}})}),null);
__d("XInstreamVideoSponsoredStoryAsyncController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/video/instream_video/view/story/async/",{host_video_id:{type:"FBID",required:true},instream_video_type:{type:"Enum",required:true,enumType:1},instream_video_break_index:{type:"Int",required:true},player_origin:{type:"String"},player_sub_origin:{type:"String"},script_path:{type:"String"},video_channel_caller:{type:"Enum",enumType:1},is_sponsored_host_video:{type:"Bool",defaultValue:false},referrer:{type:"String"},option_menu_button_id:{type:"String"},host_video_stall_count:{type:"Int"},ad_break_duration_ms:{type:"Int"},player_format:{type:"String"},instream_placement:{type:"Enum",enumType:1}})}),null);
__d("VideoWithCommercialBreak",["cx","AdBreakToastEvent","AsyncRequest","BanzaiODS","Base64","CommercialBreakExperiments","CommercialBreakHostStoryComponentType","CommercialBreakMobileEvent","CommercialBreakSkywalkerSubscriptionManager","CommercialBreakState","CSS","DataStore","DateConsts","EntstreamFeedObjectFollowup","EventEmitter","InstreamNFXHideType","InstreamPlacement","RTISubscriptionManager","ScriptPath","StoryComponentVideoPlayerControllerRegistry","SubscriptionsHandler","VideoPlayerFormats","VideoPlayerFormatsMap","VideoPlayerLoggerSource","VideoPlayerReason","VideoPlayerStates","XInstreamVideoDemoStoryAsyncController","XInstreamVideoSponsoredStoryAsyncController","hasAdblock","uniqueID"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=Object.freeze({INTENT:"intent",START:"start"}),l=Object.freeze({SHORT_AD_COUNTDOWN_MS:3e3}),m=Object.freeze({NONE:"none",PLAYBACK_FINISHED:"playback_finished",CUT_OFF:"cut_off",HIDE_AD:"hide_ad",HIDE_AD_BREAKS:"hide_ad_breaks",CALL_TO_ACTION_BUTTON_CLICKS:"call_to_action_button_clicks"}),n=Object.freeze({NORMAL:"normal",STALL_STREAM:"stall_stream",STREAM_DRY_OUT:"stream_dry_out"});i=babelHelpers.inherits(o,c("EventEmitter"));j=i&&i.prototype;function o(p){"use strict";__p&&__p();j.constructor.call(this);this.$VideoWithCommercialBreak5=c("CommercialBreakState").INIT;this.$VideoWithCommercialBreak10=new(c("SubscriptionsHandler"))();this.$VideoWithCommercialBreak1=p;this.$VideoWithCommercialBreak11=null;this.$VideoWithCommercialBreak13=-1;this.$VideoWithCommercialBreak19=false;this.$VideoWithCommercialBreak12={};this.$VideoWithCommercialBreak22=0;this.$VideoWithCommercialBreak18=null;this.$VideoWithCommercialBreak26=c("uniqueID")();this.$VideoWithCommercialBreak28=-1;this.$VideoWithCommercialBreak2=p.addListener("optionsChange",function(){return this.$VideoWithCommercialBreak29()}.bind(this));this.$VideoWithCommercialBreak29();c("hasAdblock")(function(q){this.$VideoWithCommercialBreak21=q}.bind(this))}o.prototype.$VideoWithCommercialBreak29=function(){"use strict";__p&&__p();this.$VideoWithCommercialBreak9=this.$VideoWithCommercialBreak1.getOption("VideoWithInstreamVideo","controller");if(!this.$VideoWithCommercialBreak9)return;this.$VideoWithCommercialBreak2.remove();this.$VideoWithCommercialBreak4=this.$VideoWithCommercialBreak9.getConfig();if(!this.$VideoWithCommercialBreak4.isComposerPreviewing){if(c("CommercialBreakExperiments").instreamAdsNFXOnContextCard)c("StoryComponentVideoPlayerControllerRegistry").registerVideoPlayerController(this.$VideoWithCommercialBreak1,c("CommercialBreakHostStoryComponentType").POP_OVER_MENU);if(c("CommercialBreakExperiments").instreamAdsEnableGreyHostStory)c("StoryComponentVideoPlayerControllerRegistry").registerVideoPlayerController(this.$VideoWithCommercialBreak1,c("CommercialBreakHostStoryComponentType").HOST_STORY_HEADER)}this.reset();this.$VideoWithCommercialBreak1.registerOption("VideoWithCommercialBreak","enabled",function(){return true});this.$VideoWithCommercialBreak1.registerOption("VideoWithCommercialBreak","controller",function(){return this}.bind(this));this.$VideoWithCommercialBreak1.registerOption("VideoWithCommercialBreak","isInstreamPausedByNFX",this.$VideoWithCommercialBreak30.bind(this));if(this.$VideoWithCommercialBreak4.skywalkerTopic){if(c("RTISubscriptionManager").isSubscribed(this.$VideoWithCommercialBreak4.skywalkerTopic))this.$VideoWithCommercialBreak17=true;var p=c("CommercialBreakSkywalkerSubscriptionManager").subscribe(this.$VideoWithCommercialBreak4.skywalkerTopic,this.$VideoWithCommercialBreak31.bind(this));if(p){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").SUBSCRIPTION_SUCCESS);if(this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak1.addListener("commercialBreak/scrollAway",function(){if(this.$VideoWithCommercialBreak13<0)this.$VideoWithCommercialBreak13=Date.now()}.bind(this));this.$VideoWithCommercialBreak1.addListener("commercialBreak/scrollInto",function(){this.$VideoWithCommercialBreak13=-1}.bind(this))}}else this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").SUBSCRIPTION_FAILURE)}};o.prototype.$VideoWithCommercialBreak32=function(){"use strict";return this.$VideoWithCommercialBreak4.isLive&&this.$VideoWithCommercialBreak23==="false"&&this.$VideoWithCommercialBreak11===null};o.prototype.$VideoWithCommercialBreak33=function(p){__p&&__p();var q=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];"use strict";if(p===this.$VideoWithCommercialBreak5)return;if(p===c("CommercialBreakState").ENTERING_TRANSITION&&this.$VideoWithCommercialBreak32()){this.reset();return}q.state=p;if(p===c("CommercialBreakState").INIT){this.$VideoWithCommercialBreak9.resetInstreamVideo();this.$VideoWithCommercialBreak10.release();this.$VideoWithCommercialBreak10.engage();this.$VideoWithCommercialBreak11=null;this.$VideoWithCommercialBreak24=null;this.$VideoWithCommercialBreak25=null;this.$VideoWithCommercialBreak27=null;this.$VideoWithCommercialBreak28=-1}else if(p===c("CommercialBreakState").ENTERING_TRANSITION||p===c("CommercialBreakState").PLAY_AD_COUNTDOWN||p===c("CommercialBreakState").LEAVING_TRANSITION||p===c("CommercialBreakState").VOD_BREAK_WITH_NO_VIDEO_AD)this.$VideoWithCommercialBreak9.registerInstreamVideo(null);this.$VideoWithCommercialBreak5=p;this.emit("commercialBreak/stateChange",q)};o.prototype.getChevronButtonID=function(){"use strict";return this.$VideoWithCommercialBreak26};o.prototype.getInstreamVideoOptionMenuURI=function(){"use strict";return this.$VideoWithCommercialBreak18};o.prototype.getIsCommercialBreakOngoing=function(){"use strict";return this.$VideoWithCommercialBreak5===c("CommercialBreakState").ENTERING_TRANSITION&&this.$VideoWithCommercialBreak4.isBroadcast||this.$VideoWithCommercialBreak5===c("CommercialBreakState").PLAY_AD_COUNTDOWN||this.$VideoWithCommercialBreak5===c("CommercialBreakState").LEAVING_TRANSITION||this.$VideoWithCommercialBreak5===c("CommercialBreakState").VOD_BREAK_WITH_NO_VIDEO_AD};o.prototype.getIsDuringTransition=function(){"use strict";return this.$VideoWithCommercialBreak5===c("CommercialBreakState").ENTERING_TRANSITION||this.$VideoWithCommercialBreak5===c("CommercialBreakState").LEAVING_TRANSITION};o.prototype.reset=function(){"use strict";__p&&__p();this.$VideoWithCommercialBreak33(c("CommercialBreakState").INIT);this.$VideoWithCommercialBreak6=0;this.$VideoWithCommercialBreak22=0;this.$VideoWithCommercialBreak7=-1;this.$VideoWithCommercialBreak8=-1;this.$VideoWithCommercialBreak16=null;this.$VideoWithCommercialBreak19=false;this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(null);this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakVideoID(null);this.$VideoWithCommercialBreak18=null};o.prototype.logAndEndCommercialBreak=function(p){"use strict";this.$VideoWithCommercialBreak16=p||null;this.$VideoWithCommercialBreak34();this.reset()};o.prototype.endCommercialBreakByCTAClick=function(){"use strict";this.logAndEndCommercialBreak(m.CALL_TO_ACTION_BUTTON_CLICKS)};o.prototype.$VideoWithCommercialBreak35=function(p){"use strict";var q=this.$VideoWithCommercialBreak12[p.type];if(!q)return false;var r=true;Object.keys(q).forEach(function(s){if(q[s]!==p[s])r=false});return r};o.prototype.$VideoWithCommercialBreak31=function(p){"use strict";__p&&__p();p=JSON.parse(p.payload);if(this.$VideoWithCommercialBreak35(p)){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_SKYWALKER_RECEIVED_DUPLICATE_EVENT);return}var q=p.type;if(q===k.START){this.$VideoWithCommercialBreak12[k.START]=p;this.onStartCommand(p)}else if(q===k.INTENT){this.$VideoWithCommercialBreak12[k.INTENT]=p;this.onIntentCommand(p)}else this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").RECEIVE_INVALID_MSG)};o.prototype.onIntentCommand=function(p){"use strict";__p&&__p();var q=p.commercial_break_length_ms?parseInt(p.commercial_break_length_ms,10):null,r=Object.prototype.hasOwnProperty.call(p,"index")?parseInt(p.index,10):0;if(this.$VideoWithCommercialBreak4.isLive&&p.type===k.INTENT){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").RECEIVE_INTENT_MSG,{topic:this.$VideoWithCommercialBreak4.skywalkerTopic,commercial_break_length_ms:q,ad_break_index:r});if(this.$VideoWithCommercialBreak13>0&&Date.now()-this.$VideoWithCommercialBreak13>this.$VideoWithCommercialBreak4.maxDurationHostVideoOffscreenToFetchMs)return}if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").INIT&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").PREPARE&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak33(c("CommercialBreakState").INIT);this.$VideoWithCommercialBreak33(c("CommercialBreakState").PREPARE);this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(r);if(this.$VideoWithCommercialBreak4.isLive&&q)this.$VideoWithCommercialBreak6=q;if(this.$VideoWithCommercialBreak17)return;var s=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType(),t=this.$VideoWithCommercialBreak1.getSource()===c("VideoPlayerLoggerSource").PERMALINK?document.referrer:null;if(!s||!this.$VideoWithCommercialBreak4.hostVideoID&&!this.$VideoWithCommercialBreak4.shouldShowDemoAd){c("BanzaiODS").bumpEntityKey("instreamads","missing_query_params");return}var u={host_video_id:this.$VideoWithCommercialBreak4.hostVideoID,instream_video_type:s,instream_video_break_index:r,player_origin:this.$VideoWithCommercialBreak1.getPlayerOrigin(),script_path:c("ScriptPath").getScriptPath(),player_sub_origin:this.$VideoWithCommercialBreak1.getPlayerSuborigin()||this.$VideoWithCommercialBreak1.getSource(),is_sponsored_host_video:this.$VideoWithCommercialBreak4.isSponsored,video_channel_caller:this.$VideoWithCommercialBreak4.videoChannelCaller,host_video_stall_count:this.$VideoWithCommercialBreak1.getStallCount(),ad_break_duration_ms:q,referrer:t,option_menu_button_id:"",should_show_demo_ad:this.$VideoWithCommercialBreak4.shouldShowDemoAd,player_format:this.$VideoWithCommercialBreak36(),instream_placement:c("InstreamPlacement").MID_ROLL};if(c("CommercialBreakExperiments").instreamAdsNFXOnContextCard)u.option_menu_button_id=this.getChevronButtonID();this.$VideoWithCommercialBreak37(u);this.$VideoWithCommercialBreak33(c("CommercialBreakState").AD_REQUEST_SENT)};o.prototype.$VideoWithCommercialBreak36=function(){"use strict";if(this.$VideoWithCommercialBreak1.isFullscreen())return c("VideoPlayerFormats").FULL_SCREEN;var p=this.$VideoWithCommercialBreak1.getSource();if(p)return c("VideoPlayerFormatsMap")[p];return c("VideoPlayerFormats").INLINE};o.prototype.$VideoWithCommercialBreak37=function(p){"use strict";__p&&__p();var q=null;if(p.should_show_demo_ad){var r=c("XInstreamVideoDemoStoryAsyncController").getURIBuilder().setEnum("instream_video_type",p.instream_video_type).setInt("instream_video_break_index",p.instream_video_break_index);q=new(c("AsyncRequest"))(r.getURI()).setMethod("GET").setReadOnly(true).setHandler(function(u){this.$VideoWithCommercialBreak38(u.getPayload())}.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak39.bind(this))}else if(c("CommercialBreakExperiments").instreamAdsFetchFromFeedEndpoint&&this.$VideoWithCommercialBreak21){var s="/ajax/pagelet/generic.php/LitestandTailLoadPagelet";q=new(c("AsyncRequest"))(s).setMethod("GET").setReadOnly(true).setData({data:c("Base64").encode(JSON.stringify(p))}).setHandler(this.$VideoWithCommercialBreak40.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak39.bind(this))}else{var t=c("XInstreamVideoSponsoredStoryAsyncController").getURIBuilder().setFBID("host_video_id",p.host_video_id).setEnum("instream_video_type",p.instream_video_type).setInt("instream_video_break_index",p.instream_video_break_index).setEnum("video_channel_caller",p.video_channel_caller).setBool("is_sponsored_host_video",p.is_sponsored_host_video).setInt("host_video_stall_count",p.host_video_stall_count).setInt("ad_break_duration_ms",p.ad_break_duration_ms).setString("player_origin",p.player_origin).setString("player_sub_origin",p.player_sub_origin).setString("script_path",p.script_path).setString("referrer",p.referrer).setString("option_menu_button_id",p.option_menu_button_id).setString("player_format",p.player_format).setEnum("instream_placement",p.instream_placement);q=new(c("AsyncRequest"))(t.getURI()).setMethod("GET").setReadOnly(true).setHandler(function(u){this.$VideoWithCommercialBreak38(u.getPayload())}.bind(this)).setErrorHandler(this.$VideoWithCommercialBreak39.bind(this))}q&&q.send();this.$VideoWithCommercialBreak1.emit("commercialBreak/toast",c("AdBreakToastEvent").FETCH_AD);this.$VideoWithCommercialBreak28=Date.now()};o.prototype.$VideoWithCommercialBreak40=function(p){"use strict";this.$VideoWithCommercialBreak38(JSON.parse(c("Base64").decode(p.getPayload())))};o.prototype.$VideoWithCommercialBreak39=function(){"use strict";c("hasAdblock")(function(p){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").VIDEO_FETCH_FAILURE,{is_ad_block_enabled:p})}.bind(this));this.$VideoWithCommercialBreak1.emit("commercialBreak/toast",c("AdBreakToastEvent").FETCH_AD_FAIL)};o.prototype.$VideoWithCommercialBreak38=function(p){"use strict";__p&&__p();if(!this.$VideoWithCommercialBreak4.isBroadcast&&this.$VideoWithCommercialBreak5===c("CommercialBreakState").ENTERING_TRANSITION)return;if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").AD_REQUEST_SENT&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").CB_SCHEDULED&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").ENTERING_TRANSITION)return;var q=p.isEmpty,r=p.instreamVideoAdBreakIndex,s=p.instreamVideoAdType,t=p.videoAdPodContents,u=t?t[0]:null,v=u?u.videoAdStory:p.videoAdStory,w=u?u.instreamVideoAdBreakVideoID:p.instreamVideoAdBreakVideoID,x=u?u.instreamVideoOptionMenuURI:p.instreamVideoOptionMenuURI;if(p.shouldParseAdPods)if(t){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").VIDEO_FETCH_SUCCESS,{is_empty:q});var y=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType();if(s===y){this.$VideoWithCommercialBreak11=q?null:r;this.emit("commercialBreak/videoAdPodFetched",t,q,r)}}else this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").VIDEO_FETCH_FAILURE);else if(v){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").VIDEO_FETCH_SUCCESS,{is_empty:q,commercial_break_ad_client_token:p.instreamVideoAdBreakClientToken,client_side_ads_query_consumed_time_in_ms:this.$VideoWithCommercialBreak28>0?Date.now()-this.$VideoWithCommercialBreak28:null});var z=this.$VideoWithCommercialBreak9.getCurrentInstreamVideoAdType();if(s===z){this.$VideoWithCommercialBreak11=q?null:r;var A=q?null:w;this.$VideoWithCommercialBreak24=p.callToAction;this.$VideoWithCommercialBreak25=p.contextCardTrackingWrapper;this.$VideoWithCommercialBreak27=p.infoCardNuxID;this.emit("commercialBreak/videoAdStoryFetched",v,q,r,A,p.instreamVideoAdBreakClientToken);this.emit("commercialBreak/runFraudDetector",p.instreamAdImpressionIdentifier);this.$VideoWithCommercialBreak1.emit("commercialBreak/toast",c("AdBreakToastEvent").FETCH_AD_SUCCEED,{isEmpty:q,disabledReason:p.disabledReason});if(c("CommercialBreakExperiments").instreamAdsNFXOnContextCard&&!q)this.$VideoWithCommercialBreak18=x}}else this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").VIDEO_FETCH_FAILURE)};o.prototype.getCallToAction=function(){"use strict";return this.$VideoWithCommercialBreak24};o.prototype.getContextCardTrackingWrapper=function(){"use strict";return this.$VideoWithCommercialBreak25};o.prototype.getInfoCardNuxID=function(){"use strict";return this.$VideoWithCommercialBreak27};o.prototype.onStartCommand=function(p){"use strict";__p&&__p();var q=parseInt(p.commercial_break_start_time_ms,10);this.$VideoWithCommercialBreak7=q;var r=this.$VideoWithCommercialBreak41();this.$VideoWithCommercialBreak8=r;this.$VideoWithCommercialBreak23=Object.prototype.hasOwnProperty.call(p,"commercial_break_drop_live_stream")?p.commercial_break_drop_live_stream:null;var s=Object.prototype.hasOwnProperty.call(p,"index")?parseInt(p.index,10):0;if(this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").RECEIVE_START_MSG,{topic:this.$VideoWithCommercialBreak4.skywalkerTopic,commercial_break_start_time_ms:q,ad_break_index:s});if(q<r-this.$VideoWithCommercialBreak4.allowedStartTimeDeltaMs){if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").INIT)c("BanzaiODS").bumpEntityKey("instreamads","receive_start_after_break");return}}if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").INIT&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").PREPARE&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").AD_REQUEST_SENT)return;this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(s);if(this.$VideoWithCommercialBreak5===c("CommercialBreakState").INIT){var t=p.commercial_break_length_ms?parseInt(p.commercial_break_length_ms,10):null;this.$VideoWithCommercialBreak6=t?t:this.$VideoWithCommercialBreak4.commercialBreakLengthMs;this.onIntentCommand(p)}this.$VideoWithCommercialBreak33(c("CommercialBreakState").CB_SCHEDULED);if(this.$VideoWithCommercialBreak4.isLive)this.$VideoWithCommercialBreak10.addSubscriptions(this.$VideoWithCommercialBreak1.addListener("streamInterrupted",this.$VideoWithCommercialBreak42.bind(this,true)));this.$VideoWithCommercialBreak3=this.$VideoWithCommercialBreak1.addListener("updateStatus",function(){return this.$VideoWithCommercialBreak42()}.bind(this));this.$VideoWithCommercialBreak42()};o.prototype.$VideoWithCommercialBreak42=function(){__p&&__p();var p=arguments.length<=0||arguments[0]===undefined?false:arguments[0];"use strict";if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").CB_SCHEDULED){this.$VideoWithCommercialBreak3.remove();return}var q=this.$VideoWithCommercialBreak41(),r=this.$VideoWithCommercialBreak7-q,s=r>0&&r<=this.$VideoWithCommercialBreak4.startFromStreamDryDeltaMs&&this.$VideoWithCommercialBreak1.isBuffering()&&this.$VideoWithCommercialBreak1.isState(c("VideoPlayerStates").PLAYING);if(!this.$VideoWithCommercialBreak4.isLive||Math.abs(r)<=this.$VideoWithCommercialBreak4.allowedStartTimeDeltaMs||s||p){this.$VideoWithCommercialBreak3.remove();var t=n.NORMAL;if(s)t=n.STALL_STREAM;else if(p)t=n.STREAM_DRY_OUT;var u=this.$VideoWithCommercialBreak7-this.$VideoWithCommercialBreak8;this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START,{timestamp_delta_ms:parseInt(r,10),timestamp_latency_ms:parseInt(u,10),playback_trigger_event:t,viewer_count:this.$VideoWithCommercialBreak43()});this.$VideoWithCommercialBreak33(c("CommercialBreakState").ENTERING_TRANSITION);this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT);var v=this.$VideoWithCommercialBreak4.isBroadcast?this.$VideoWithCommercialBreak4.beginningTransitionTimeMs:this.$VideoWithCommercialBreak4.beginningNonLiveTransitionTimeMs;setTimeout(this.$VideoWithCommercialBreak44.bind(this),v)}else if(q>this.$VideoWithCommercialBreak7){this.$VideoWithCommercialBreak3.remove();this.reset()}};o.prototype.$VideoWithCommercialBreak44=function(){"use strict";__p&&__p();if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").CB_SCHEDULED&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").ENTERING_TRANSITION&&this.$VideoWithCommercialBreak5!==c("CommercialBreakState").PLAY_AD_COUNTDOWN)return;var p=this.$VideoWithCommercialBreak6-this.$VideoWithCommercialBreak4.beginningTransitionTimeMs,q=p-this.$VideoWithCommercialBreak4.endingTransitionTimeMs;if(this.$VideoWithCommercialBreak4.isLive)this.$VideoWithCommercialBreak22=q;this.$VideoWithCommercialBreak33(c("CommercialBreakState").PLAY_AD_COUNTDOWN,{countdownDurationMsecs:this.$VideoWithCommercialBreak4.isLive?q:0});if(this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak14=true;setTimeout(function(){this.$VideoWithCommercialBreak14=false}.bind(this),q-l.SHORT_AD_COUNTDOWN_MS);setTimeout(this.$VideoWithCommercialBreak45.bind(this),q);this.$VideoWithCommercialBreak15=false;setTimeout(this.$VideoWithCommercialBreak46.bind(this),p);setTimeout(this.$VideoWithCommercialBreak47.bind(this),p+this.$VideoWithCommercialBreak4.maxOverduePlayingTimeMs)}};o.prototype.onLeaveTransition=function(){"use strict";__p&&__p();var p=this.$VideoWithCommercialBreak30();if(!this.$VideoWithCommercialBreak4.isLive){this.$VideoWithCommercialBreak16=p?this.$VideoWithCommercialBreak20==c("InstreamNFXHideType").HIDE_AD_BREAKS?m.HIDE_AD_BREAKS:m.HIDE_AD:m.PLAYBACK_FINISHED;this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak33(c("CommercialBreakState").LEAVING_TRANSITION);var q=this.$VideoWithCommercialBreak4.isBroadcast?this.$VideoWithCommercialBreak4.endingTransitionTimeMs:this.$VideoWithCommercialBreak4.endingNonLiveTransitionTimeMs;setTimeout(function(){this.$VideoWithCommercialBreak34();this.reset()}.bind(this),q);return}if(this.$VideoWithCommercialBreak5===c("CommercialBreakState").PLAY_AD_COUNTDOWN)if(!this.$VideoWithCommercialBreak9.getIsAdActive()){this.$VideoWithCommercialBreak16=m.NONE;this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak33(c("CommercialBreakState").LEAVING_TRANSITION)}else if((this.$VideoWithCommercialBreak9.isState(c("VideoPlayerStates").FINISHED)||this.$VideoWithCommercialBreak9.isState(c("VideoPlayerStates").DESTROYED))&&!this.$VideoWithCommercialBreak14||p){this.$VideoWithCommercialBreak16=p?m.HIDE_AD:m.PLAYBACK_FINISHED;if(this.$VideoWithCommercialBreak15){this.$VideoWithCommercialBreak34();this.reset()}else{this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_TRANSIT);this.$VideoWithCommercialBreak33(c("CommercialBreakState").LEAVING_TRANSITION)}}};o.prototype.$VideoWithCommercialBreak46=function(){"use strict";if(this.$VideoWithCommercialBreak5===c("CommercialBreakState").LEAVING_TRANSITION){this.$VideoWithCommercialBreak34();this.reset()}else if(this.$VideoWithCommercialBreak5===c("CommercialBreakState").PLAY_AD_COUNTDOWN)this.$VideoWithCommercialBreak15=true};o.prototype.$VideoWithCommercialBreak47=function(){"use strict";if(this.$VideoWithCommercialBreak30())return;if(this.$VideoWithCommercialBreak5===c("CommercialBreakState").PLAY_AD_COUNTDOWN){this.$VideoWithCommercialBreak16=m.CUT_OFF;this.$VideoWithCommercialBreak34();this.reset()}};o.prototype.$VideoWithCommercialBreak45=function(){"use strict";if(this.$VideoWithCommercialBreak30())return;this.onLeaveTransition()};o.prototype.$VideoWithCommercialBreak34=function(){"use strict";if(this.$VideoWithCommercialBreak9.getIsVisibleForAutoplay())this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_END,{ending_reason:this.$VideoWithCommercialBreak16})};o.prototype.$VideoWithCommercialBreak41=function(){"use strict";var p=this.$VideoWithCommercialBreak1.getCurrentTimePosition()*c("DateConsts").MS_PER_SEC;return p};o.prototype.$VideoWithCommercialBreak43=function(){"use strict";if(!this.$VideoWithCommercialBreak4.isLive)return null;var p=this.$VideoWithCommercialBreak1.getOption("VideoWithLiveBroadcast","viewCount"),q=p&&JSON.parse(c("DataStore").get(p,"store",null));return q?q.viewerCount:null};o.prototype.$VideoWithCommercialBreak30=function(){"use strict";var p=this.$VideoWithCommercialBreak9.getAdController();return p&&p.isState(c("VideoPlayerStates").PAUSED)&&this.$VideoWithCommercialBreak5===c("CommercialBreakState").PLAY_AD_COUNTDOWN&&this.$VideoWithCommercialBreak19};o.prototype.startBreakWithNoVideoAd=function(p,q,r){"use strict";__p&&__p();this.$VideoWithCommercialBreak9.setCurrentInstreamVideoAdBreakIndex(r);if(this.$VideoWithCommercialBreak4.disableNoAdTransition||!this.$VideoWithCommercialBreak4.isBroadcast){this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_SHOW_NOTHING,{commercial_break_no_ad_reason:p});this.reset();return}var s=q-this.$VideoWithCommercialBreak41();this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START,{timestamp_delta_ms:parseInt(s,10),playback_trigger_event:"normal"});this.$VideoWithCommercialBreak33(c("CommercialBreakState").VOD_BREAK_WITH_NO_VIDEO_AD);this.$VideoWithCommercialBreak9.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_NO_AD_TRANSITION,{commercial_break_no_ad_reason:p});setTimeout(function(){this.$VideoWithCommercialBreak16=m.NONE;this.$VideoWithCommercialBreak34();this.reset()}.bind(this),this.$VideoWithCommercialBreak4.breakWithNoVideoAdDurationMs)};o.prototype.hasReceivedAdStory=function(p){"use strict";return p===this.$VideoWithCommercialBreak11};o.prototype.getIsDuplicateVideo=function(){"use strict";return this.$VideoWithCommercialBreak17};o.prototype.onPauseAdFromNFX=function(){"use strict";__p&&__p();if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").PLAY_AD_COUNTDOWN)return;this.$VideoWithCommercialBreak19=true;c("EntstreamFeedObjectFollowup").addInstreamAdsFollowup(this.$VideoWithCommercialBreak1.getRootNode());var p=this.$VideoWithCommercialBreak9.getAdController();if(p){p.pause(c("VideoPlayerReason").USER);c("CSS").addClass(p.getVideoNode(),"_1_d3");c("CSS").addClass(p.getRootNode(),"_4ap-")}};o.prototype.onPlayAdFromNFX=function(){"use strict";__p&&__p();if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").PLAY_AD_COUNTDOWN)return;var p=this.$VideoWithCommercialBreak9.getAdController();if(p){this.$VideoWithCommercialBreak19=false;c("CSS").removeClass(p.getVideoNode(),"_1_d3");c("CSS").removeClass(p.getRootNode(),"_4ap-");this.$VideoWithCommercialBreak9.play(c("VideoPlayerReason").USER)}};o.prototype.onLeaveAdFromNFX=function(p){"use strict";if(this.$VideoWithCommercialBreak5!==c("CommercialBreakState").PLAY_AD_COUNTDOWN)return;this.$VideoWithCommercialBreak20=p;this.onLeaveTransition();this.$VideoWithCommercialBreak19=false;this.$VideoWithCommercialBreak20=null};o.prototype.getLiveCountdownDurationMs=function(){"use strict";return this.$VideoWithCommercialBreak22};f.exports=o}),null);
__d("VideoWithInstreamVideo",["BanzaiODS","CommercialBreakMobileEvent","CommercialBreakShouldLogMarauderEvent","DateConsts","EventEmitter","InstreamVideoAdType","MarauderLogger","SubscriptionsHandler","VideoPlayerLoggerEventField","VideoPlayerReason","VideoPlayerStates","onViewportChanged"],(function a(b,c,d,e,f,g){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("EventEmitter"));i=h&&h.prototype;function j(k){"use strict";i.constructor.call(this);this.$VideoWithInstreamVideo4=k}j.prototype.enable=function(k){"use strict";__p&&__p();if(this.$VideoWithInstreamVideo2)return;this.$VideoWithInstreamVideo2=k;this.$VideoWithInstreamVideo3=k;this.$VideoWithInstreamVideo12=false;this.$VideoWithInstreamVideo13=this.getIsVisibleForAutoplay();c("onViewportChanged")(this.$VideoWithInstreamVideo17.bind(this));this.$VideoWithInstreamVideo1=new(c("SubscriptionsHandler"))();this.$VideoWithInstreamVideo1.engage();this.$VideoWithInstreamVideo14=[];this.$VideoWithInstreamVideo18();this.$VideoWithInstreamVideo2.registerOption("VideoWithInstreamVideo","enabled",function(){return true});this.$VideoWithInstreamVideo2.registerOption("VideoWithInstreamVideo","controller",function(){return this}.bind(this))};j.prototype.disable=function(){"use strict"};j.prototype.$VideoWithInstreamVideo19=function(){"use strict";var k=["play","pause","mute","unmute","constructor","destroy","addListener","isMuted","isState","updateSource"],l=this.$VideoWithInstreamVideo2.constructor.prototype,m=Object.getOwnPropertyNames(l).filter(function(n){var o=l[n];return typeof o==="function"&&k.indexOf(n)<0});return m};j.prototype.$VideoWithInstreamVideo18=function(){"use strict";var k=this.$VideoWithInstreamVideo19(),l=function l(m){this.constructor.prototype[m]=function(){return this.$VideoWithInstreamVideo2[m].apply(this.$VideoWithInstreamVideo2,arguments)}};k.forEach(l,this)};j.prototype.$VideoWithInstreamVideo20=function(){"use strict";var k=this.$VideoWithInstreamVideo19();k.forEach(function(l){return delete this.constructor.prototype[l]}.bind(this))};j.prototype.$VideoWithInstreamVideo21=function(){var k;"use strict";(k=i.emit).call.apply(k,[this].concat(Array.prototype.slice.call(arguments)))};j.prototype.emit=function(){var k;"use strict";(k=this.$VideoWithInstreamVideo2).emit.apply(k,arguments)};j.prototype.$VideoWithInstreamVideo22=function(event){"use strict";if(this.$VideoWithInstreamVideo14.indexOf(event)<0){this.$VideoWithInstreamVideo14.push(event);var k=function(event){return this.$VideoWithInstreamVideo21.bind(this,event)}.bind(this);this.$VideoWithInstreamVideo1.addSubscriptions(this.$VideoWithInstreamVideo2.addListener(event,k(event)))}};j.prototype.addListener=function(event){var k;"use strict";this.$VideoWithInstreamVideo22(event);return(k=i.addListener).call.apply(k,[this].concat(Array.prototype.slice.call(arguments)))};j.prototype.registerInstreamVideo=function(k){"use strict";__p&&__p();if(!this.$VideoWithInstreamVideo12){this.$VideoWithInstreamVideo12=true;this.$VideoWithInstreamVideo2.instreamVideoStart()}if(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2){this.$VideoWithInstreamVideo8=this.$VideoWithInstreamVideo2.isState(c("VideoPlayerStates").PLAYING);this.$VideoWithInstreamVideo10=this.$VideoWithInstreamVideo2.isMuted();this.$VideoWithInstreamVideo11=this.$VideoWithInstreamVideo2.getVolume();var l=this.getCurrentInstreamVideoAdType();if(l===c("InstreamVideoAdType").LIVE)this.$VideoWithInstreamVideo2.mute();else if(l===c("InstreamVideoAdType").VOD||l===c("InstreamVideoAdType").NONLIVE){var m;this.$VideoWithInstreamVideo2.setLogEntryPropertyGetters((m={},m[c("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_INDEX]=this.$VideoWithInstreamVideo5,m[c("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_VIDEO_ID]=this.$VideoWithInstreamVideo6?this.$VideoWithInstreamVideo6:-1,m));this.$VideoWithInstreamVideo2.pause(c("VideoPlayerReason").COMMERCIAL_BREAK)}}this.$VideoWithInstreamVideo3=k};j.prototype.resetInstreamVideo=function(){"use strict";__p&&__p();this.$VideoWithInstreamVideo2.removeLogEntryPropertyGetters([c("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_INDEX,c("VideoPlayerLoggerEventField").INSTREAM_VIDEO_AD_BREAK_VIDEO_ID]);if(this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2){var k=this.getCurrentInstreamVideoAdType();if(k===c("InstreamVideoAdType").LIVE&&!this.$VideoWithInstreamVideo10&&this.$VideoWithInstreamVideo2.isMuted())this.$VideoWithInstreamVideo2.unmute();else if((k===c("InstreamVideoAdType").VOD||k===c("InstreamVideoAdType").NONLIVE)&&this.$VideoWithInstreamVideo8&&!this.$VideoWithInstreamVideo2.isState(c("VideoPlayerStates").PLAYING))this.$VideoWithInstreamVideo2.play(c("VideoPlayerReason").COMMERCIAL_BREAK)}this.$VideoWithInstreamVideo3=this.$VideoWithInstreamVideo2;this.$VideoWithInstreamVideo12=false;this.$VideoWithInstreamVideo2.instreamVideoEnd()};j.prototype.shouldPlayInstreamAd=function(){"use strict";if(this.$VideoWithInstreamVideo4.isLive&&!this.$VideoWithInstreamVideo8)return false;return this.getIsVisibleForAutoplay()};j.prototype.playInstreamAd=function(){"use strict";__p&&__p();if(!this.$VideoWithInstreamVideo3||this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2){c("BanzaiODS").bumpEntityKey("instreamads","missing_ad_player");return}var k=this.$VideoWithInstreamVideo3;this.logMarauderEvent(c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_START_AD);k.once("beginPlayback",function(){this.$VideoWithInstreamVideo15={adClientToken:k.getAdClientToken(),adStartPlayingTimeMs:Date.now(),adPositionInVideoMs:this.$VideoWithInstreamVideo2.getCurrentTimePosition()*c("DateConsts").MS_PER_SEC}}.bind(this));if(this.$VideoWithInstreamVideo10)k.mute();else{k.unmute();k.setVolume(this.$VideoWithInstreamVideo11)}this.$VideoWithInstreamVideo9=false;k.play(c("VideoPlayerReason").AUTOPLAY)};j.prototype.play=function(k){__p&&__p();var l,m=this;"use strict";this.$VideoWithInstreamVideo8=true;if(this.$VideoWithInstreamVideo3&&(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2||this.$VideoWithInstreamVideo3.isState(c("VideoPlayerStates").PAUSED)||this.$VideoWithInstreamVideo3.isState(c("VideoPlayerStates").PLAYING)))(function(){var n=m.$VideoWithInstreamVideo3;if(!m.$VideoWithInstreamVideo2.getOption("VideoWithCommercialBreak","isInstreamPausedByNFX"))if(m.$VideoWithInstreamVideo9&&n!==m.$VideoWithInstreamVideo2)n.once("pausePlayback",function(){return n.play(k)});else n.play(k)})();if(this.$VideoWithInstreamVideo4.isLive&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo2.play(k)};j.prototype.pause=function(k){"use strict";__p&&__p();if(k===c("VideoPlayerReason").USER&&this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2&&this.$VideoWithInstreamVideo2.getOption("VideoWithInstreamVideo","disableClickToPause"))return;this.$VideoWithInstreamVideo8=false;if(this.$VideoWithInstreamVideo3&&(this.$VideoWithInstreamVideo3===this.$VideoWithInstreamVideo2||this.$VideoWithInstreamVideo3.isState(c("VideoPlayerStates").PLAYING))){var l=this.$VideoWithInstreamVideo3;if(l!==this.$VideoWithInstreamVideo2){this.$VideoWithInstreamVideo9=true;l.once("pausePlayback",function(){return this.$VideoWithInstreamVideo9=false}.bind(this))}l.pause(k)}if(this.$VideoWithInstreamVideo4.isLive&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo2.pause(k)};j.prototype.mute=function(){"use strict";this.$VideoWithInstreamVideo10=true;if(this.$VideoWithInstreamVideo3)this.$VideoWithInstreamVideo3.mute()};j.prototype.unmute=function(){"use strict";this.$VideoWithInstreamVideo10=false;if(this.$VideoWithInstreamVideo3)this.$VideoWithInstreamVideo3.unmute()};j.prototype.isMuted=function(){"use strict";if(this.$VideoWithInstreamVideo3)return this.$VideoWithInstreamVideo3.isMuted();return this.$VideoWithInstreamVideo2.isMuted()};j.prototype.isState=function(k){"use strict";if(this.$VideoWithInstreamVideo3)return this.$VideoWithInstreamVideo3.isState(k);return this.$VideoWithInstreamVideo2.isState(k)};j.prototype.destroy=function(){"use strict";if(this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo3.destroy();this.$VideoWithInstreamVideo2.destroy()};j.prototype.updateSource=function(k){"use strict";if(this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2)this.$VideoWithInstreamVideo3.updateSource(k);this.$VideoWithInstreamVideo2.updateSource(k)};j.prototype.getConfig=function(){"use strict";return this.$VideoWithInstreamVideo4};j.prototype.setCurrentInstreamVideoAdBreakIndex=function(k){"use strict";this.$VideoWithInstreamVideo5=k};j.prototype.setCurrentInstreamVideoAdBreakVideoID=function(k){"use strict";this.$VideoWithInstreamVideo6=k};j.prototype.setCurrentInstreamVideoAdBreakClientToken=function(k){"use strict";this.$VideoWithInstreamVideo7=k};j.prototype.setThumbnailURLForPreview=function(k){"use strict";this.$VideoWithInstreamVideo16=k};j.prototype.getPreferredThumbnailURI=function(){"use strict";if(this.$VideoWithInstreamVideo4.isComposerPreviewing)return this.$VideoWithInstreamVideo16;return this.$VideoWithInstreamVideo4.preferredThumbnailURI};j.prototype.getCurrentInstreamVideoAdType=function(){"use strict";if(this.$VideoWithInstreamVideo4.isLive)return c("InstreamVideoAdType").LIVE;else if(this.$VideoWithInstreamVideo4.isBroadcast)return c("InstreamVideoAdType").VOD;else return c("InstreamVideoAdType").NONLIVE};j.prototype.getCurrentInstreamVideoAdBreakVideoID=function(){"use strict";return this.$VideoWithInstreamVideo6};j.prototype.getCurrentInstreamVideoAdBreakIndex=function(){"use strict";return this.$VideoWithInstreamVideo5};j.prototype.getIsAdActive=function(){"use strict";return this.$VideoWithInstreamVideo3&&this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2};j.prototype.getAdController=function(){"use strict";if(this.getIsAdActive())return this.$VideoWithInstreamVideo3;return null};j.prototype.$VideoWithInstreamVideo17=function(){"use strict";__p&&__p();var k=this.getIsVisibleForAutoplay();if(this.$VideoWithInstreamVideo13!==k){if(this.$VideoWithInstreamVideo3!==this.$VideoWithInstreamVideo2){var l=null,m=this.$VideoWithInstreamVideo3;if(m&&m.getPlaybackDuration()>0)l=c("DateConsts").MS_PER_SEC*(m.getPlaybackDuration()-m.getCurrentTimePosition());this.logMarauderEvent(k?c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_SCROLLED_INTO:c("CommercialBreakMobileEvent").COMMERCIAL_BREAK_SCROLLED_AWAY,{remaining_ad_duration_ms:l})}this.$VideoWithInstreamVideo2.emit(k?"commercialBreak/scrollInto":"commercialBreak/scrollAway")}this.$VideoWithInstreamVideo13=k};j.prototype.getIsVisibleForAutoplay=function(){"use strict";var k=this.$VideoWithInstreamVideo2.getOption("FeedAutoplay","isVisibleForAutoplay");return k||k===undefined};j.prototype.getMostRecentAdInfo=function(){"use strict";return this.$VideoWithInstreamVideo15};j.prototype.logMarauderEvent=function(k){__p&&__p();var l=arguments.length<=1||arguments[1]===undefined?{}:arguments[1];"use strict";if(!Object.prototype.hasOwnProperty.call(c("CommercialBreakShouldLogMarauderEvent"),k)||!c("CommercialBreakShouldLogMarauderEvent")[k])return;l.host_video_id=this.$VideoWithInstreamVideo4.hostVideoID;l.instream_video_ad_type=this.getCurrentInstreamVideoAdType();if(!Object.prototype.hasOwnProperty.call(l,"ad_break_index"))l.ad_break_index=this.$VideoWithInstreamVideo5;l.is_sponsored=this.$VideoWithInstreamVideo4.isSponsored;l.is_visible=this.getIsVisibleForAutoplay();l.player_origin=this.$VideoWithInstreamVideo4.playerOrigin;if(!Object.prototype.hasOwnProperty.call(l,"commercial_break_ad_client_token"))l.commercial_break_ad_client_token=this.$VideoWithInstreamVideo7;c("MarauderLogger").log(k,"commercial_break",l)};f.exports=j}),null);
__d("VideoComponentCommercialBreakVideoAdOverlay.react",["cx","CommercialBreakVideoAdOverlay","React","VideoComponent"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").Component);j=i&&i.prototype;k.prototype.enable=function(l){this.$VideoComponentCommercialBreakVideoAdOverlay1=new(c("CommercialBreakVideoAdOverlay"))(l,this.refs.root)};k.prototype.disable=function(){this.$VideoComponentCommercialBreakVideoAdOverlay1&&this.$VideoComponentCommercialBreakVideoAdOverlay1.stopAdWithoutTransition();this.$VideoComponentCommercialBreakVideoAdOverlay1=null};k.prototype.componentWillReceiveProps=function(l,m){if(l.adsStopped&&!this.props.adsStopped&&this.$VideoComponentCommercialBreakVideoAdOverlay1)this.$VideoComponentCommercialBreakVideoAdOverlay1.stopAdWithoutTransition()};k.prototype.shouldComponentUpdate=function(l,m){return false};k.prototype.render=function(){var l="_4wd3 _50m2 _167h _4ubd _2lwf";return c("React").createElement("div",{ref:"root",className:l})};function k(){i.apply(this,arguments)}f.exports=c("VideoComponent").createContainer(k)}),null);
__d("VideoComponentWithCommercialBreak.react",["React","VideoComponent","VideoWithCommercialBreak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;j.prototype.enable=function(k){this.$VideoComponentWithCommercialBreak1=new(c("VideoWithCommercialBreak"))(k)};j.prototype.disable=function(){this.$VideoComponentWithCommercialBreak1=null};j.prototype.render=function(){return null};function j(){h.apply(this,arguments)}f.exports=c("VideoComponent").createContainer(j)}),null);
__d("VideoComponentWithInstreamVideo.react",["ComposerAdBreaksPreviewConfig","React","RelayClassic_DEPRECATED","VideoComponent","VideoWithInstreamVideo"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").Component);i=h&&h.prototype;function j(k){i.constructor.call(this,k);if(k.shouldUsePreviewConfig&&c("ComposerAdBreaksPreviewConfig").config)this.$VideoComponentWithInstreamVideo1=c("ComposerAdBreaksPreviewConfig").config}j.prototype.componentWillReceiveProps=function(k){if(!k.shouldUsePreviewConfig&&k.video&&k.video!==this.props.video){this.$VideoComponentWithInstreamVideo1=JSON.parse(k.video.adBreaksViewerConfig);this.$VideoComponentWithInstreamVideo4()}if(this.$VideoComponentWithInstreamVideo2&&k.thumbnailURLForPreview)this.$VideoComponentWithInstreamVideo2.setThumbnailURLForPreview(k.thumbnailURLForPreview)};j.prototype.enable=function(k){this.$VideoComponentWithInstreamVideo3=k;this.$VideoComponentWithInstreamVideo4()};j.prototype.$VideoComponentWithInstreamVideo4=function(){if(this.$VideoComponentWithInstreamVideo3&&this.$VideoComponentWithInstreamVideo1){this.$VideoComponentWithInstreamVideo2=new(c("VideoWithInstreamVideo"))(this.$VideoComponentWithInstreamVideo1);this.$VideoComponentWithInstreamVideo2.enable(this.$VideoComponentWithInstreamVideo3)}};j.prototype.disable=function(){this.$VideoComponentWithInstreamVideo2=null;this.$VideoComponentWithInstreamVideo3=null};j.prototype.render=function(){return null};f.exports=c("VideoComponent").createContainer(j,{relayVideoConfig:{fragments:{video:function k(){return function(){return{children:[{alias:"adBreaksViewerConfig",fieldName:"ad_breaks_viewer_config",kind:"Field",metadata:{},type:"String"},{fieldName:"id",kind:"Field",metadata:{isGenerated:true,isRequisite:true},type:"ID"}],id:c("RelayClassic_DEPRECATED").QL.__id(),kind:"Fragment",metadata:{},name:"VideoComponentWithInstreamVideo_react_VideoRelayQL",type:"Video"}}()}}}})}),null);
__d("SphericalVideoComponentDispatcher",["ExplicitRegistrationReactDispatcher"],(function a(b,c,d,e,f,g){"use strict";var h,i;h=babelHelpers.inherits(j,c("ExplicitRegistrationReactDispatcher"));i=h&&h.prototype;function j(k){i.constructor.call(this,k);this.dispatch=this.dispatch.bind(this)}f.exports=new j({strict:true})}),null);
__d("SphericalVideoComponentActions",["SphericalVideoComponentDispatcher"],(function a(b,c,d,e,f,g){__p&&__p();var h={registerVideoPlayerController:function i(j){var k={type:"SphericalVideoComponent/registerVideoPlayerController",controller:j,id:j.getVideoPlayerID()};c("SphericalVideoComponentDispatcher").dispatch(k)},updateVideoPlayerState:function i(j,k){var l={type:"SphericalVideoComponent/updateVideoPlayerState",id:j,state:k};c("SphericalVideoComponentDispatcher").dispatch(l)},togglePlay:function i(j,k){var l={type:"SphericalVideoComponent/togglePlay",id:j,nextIsPlaying:k};c("SphericalVideoComponentDispatcher").dispatch(l)},toggleChannelView:function i(j,k){var l={type:"SphericalVideoComponent/toggleChannelView",id:j,isInChannelView:k};c("SphericalVideoComponentDispatcher").dispatch(l)},toggleTahoe:function i(j,k){var l={type:"SphericalVideoComponent/toggleTahoe",id:j,isInTahoe:k};c("SphericalVideoComponentDispatcher").dispatch(l)},setCurrentVideoTime:function i(j,k){var l={type:"SphericalVideoComponent/setCurrentPlaytime",id:j,time:k};c("SphericalVideoComponentDispatcher").dispatch(l)},setVideoDuration:function i(j,k){var l={type:"SphericalVideoComponent/setVideoDuration",id:j,durationSeconds:k};c("SphericalVideoComponentDispatcher").dispatch(l)},seekStart:function i(j){var k={type:"SphericalVideoComponent/seekStart",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},registerSphericalViewportControl:function i(j,k,l){var m={type:"SphericalVideoComponent/registerSphericalViewportControl",id:j,sphericalViewportControl:k,viewport:l};c("SphericalVideoComponentDispatcher").dispatch(m)},changeViewport:function i(j,k,l,m){var n={type:"SphericalVideoComponent/changeViewport",id:j,yaw:k,pitch:l,fieldOfView:m};c("SphericalVideoComponentDispatcher").dispatch(n)},toggleViewportGrabbed:function i(j){var k={type:"SphericalVideoComponent/toggleViewportGrabbed",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},updateViewportDimensions:function i(j,k,l){var m={type:"SphericalVideoComponent/updateViewportDimensions",id:j,width:k,height:l};c("SphericalVideoComponentDispatcher").dispatch(m)},setUserIsInactive:function i(j){var k={type:"SphericalVideoComponent/setUserIsInactive",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},setInitialViewport:function i(j,k,l){var m={type:"SphericalVideoComponent/setInitialViewport",id:j,yaw:k,pitch:l};c("SphericalVideoComponentDispatcher").dispatch(m)},registerNewSpatialReactionsState:function i(j){var k={type:"SphericalVideoComponent/registerNewSpatialReactionsState",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},addSpatialReactionClusters:function i(j,k){var l={type:"SphericalVideoComponent/addSpatialReactions",id:j,reactionClusters:k};c("SphericalVideoComponentDispatcher").dispatch(l)},tickAnimation:function i(j){var k={type:"SphericalVideoComponent/tickAnimation",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},startAnimationForFrame:function i(j,k,l,m,n,o,p){var q={type:"SphericalVideoComponent/startAnimationForFrame",id:j,timestamp:k,yaw:l,pitch:m,fieldOfView:n,viewportWidth:o,viewportHeight:p};c("SphericalVideoComponentDispatcher").dispatch(q)},setMouseDown:function i(j,k,l){var m={type:"SphericalVideoComponent/setMouseDown",id:j,reactionCenter:k,wasVideoPlaying:l};c("SphericalVideoComponentDispatcher").dispatch(m)},setMouseUp:function i(j,k){var l={type:"SphericalVideoComponent/setMouseUp",id:j,reactionCenter:k};c("SphericalVideoComponentDispatcher").dispatch(l)},setIsDragging:function i(j,k){var l={type:"SphericalVideoComponent/setIsDragging",id:j,isDragging:k};c("SphericalVideoComponentDispatcher").dispatch(l)},setShouldLeaveReactionMenuOpen:function i(j,k){var l={type:"SphericalVideoComponent/setShouldLeaveReactionMenuOpen",id:j,leaveOpen:k};c("SphericalVideoComponentDispatcher").dispatch(l)},clickReaction:function i(j,k){var l={type:"SphericalVideoComponent/clickReaction",id:j,reactionType:k};c("SphericalVideoComponentDispatcher").dispatch(l)},dropReaction:function i(j,k,l,m,n,o,p,q,r,s){var t={type:"SphericalVideoComponent/dropReaction",id:j,reactionType:k,reactionOutsideViewport:l,recordMouseLocation:m,viewportWidth:n,viewportHeight:o,viewportYaw:p,viewportPitch:q,viewportFieldOfView:r,recordReactionCallback:s};c("SphericalVideoComponentDispatcher").dispatch(t)},clickLikeButton:function i(j){var k={type:"SphericalVideoComponent/clickLikeButton",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},openReactionMenu:function i(j){var k={type:"SphericalVideoComponent/openReactionMenu",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},closeReactionMenu:function i(j){var k={type:"SphericalVideoComponent/closeReactionMenu",id:j};c("SphericalVideoComponentDispatcher").dispatch(k)},registerExperimentConfig:function i(j,k){var l={type:"SphericalVideoComponent/registerExperimentConfig",id:j,config:k};c("SphericalVideoComponentDispatcher").dispatch(l)}};f.exports=h}),null);
__d("SphericalVideoComponentConstants",[],(function a(b,c,d,e,f,g){var h={ACTIONS:{REGISTER_VIDEO_PLAYER_CONTROLLER:"SphericalVideoComponent/registerVideoPlayerController",UPDATE_VIDEO_PLAYER_STATE:"SphericalVideoComponent/updateVideoPlayerState",TOGGLE_PLAY:"SphericalVideoComponent/togglePlay",SET_CURRENT_PLAY_TIME:"SphericalVideoComponent/setCurrentPlaytime",SET_VIDEO_DURATION:"SphericalVideoComponent/setVideoDuration",TOGGLE_CHANNEL_VIEW:"SphericalVideoComponent/toggleChannelView",TOGGLE_TAHOE:"SphericalVideoComponent/toggleTahoe",SEEK_START:"SphericalVideoComponent/seekStart",REGISTER_SPHERICAL_VIEWPORT_CONTROL:"SphericalVideoComponent/registerSphericalViewportControl",CHANGE_VIEWPORT:"SphericalVideoComponent/changeViewport",TOGGLE_VIEWPORT_GRABBED:"SphericalVideoComponent/toggleViewportGrabbed",UPDATE_VIEWPORT_DIMENSIONS:"SphericalVideoComponent/updateViewportDimensions",SET_USER_IS_INACTIVE:"SphericalVideoComponent/setUserIsInactive",SET_INITIAL_VIEWPORT:"SphericalVideoComponent/setInitialViewport",REGISTER_NEW_REACTIONS_STATE:"SphericalVideoComponent/registerNewSpatialReactionsState",ADD_SPATIAL_REACTIONS:"SphericalVideoComponent/addSpatialReactions",SET_MOUSE_DOWN:"SphericalVideoComponent/setMouseDown",SET_MOUSE_UP:"SphericalVideoComponent/setMouseUp",SET_IS_DRAGGING:"SphericalVideoComponent/setIsDragging",SET_SHOULD_LEAVE_REACTION_MENU_OPEN:"SphericalVideoComponent/setShouldLeaveReactionMenuOpen",CLICK_REACTION:"SphericalVideoComponent/clickReaction",DROP_REACTION:"SphericalVideoComponent/dropReaction",TICK_ANIMATION:"SphericalVideoComponent/tickAnimation",START_ANIMATION_FOR_FRAME:"SphericalVideoComponent/startAnimationForFrame",CLICK_LIKE_BUTTON:"SphericalVideoComponent/clickLikeButton",OPEN_REACTION_MENU:"SphericalVideoComponent/openReactionMenu",CLOSE_REACTION_MENU:"SphericalVideoComponent/closeReactionMenu",REGISTER_EXPERIMENT_CONFIG:"SphericalVideoComponent/registerExperimentConfig"}};f.exports=h}),null);
__d("SphericalViewportControlStore",["SphericalVideoComponentActions","SphericalVideoComponentDispatcher","immutable","FluxMapStore","SphericalVideoComponentConstants","Rect","Vector","curry","throttle","setTimeout"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k,l={fieldOfView:-1,initialPitch:-1,initialYaw:-1,isInChannelView:false,isInTahoe:false,pitch:-1,viewport:null,viewportGrabbed:false,viewportHeight:0,viewportInactivityTimeout:0,viewportPanStart:false,viewportWidth:0,yaw:-1},m=5e3;h=babelHelpers.inherits(n,c("immutable").Record(l));i=h&&h.prototype;function n(){h.apply(this,arguments)}j=babelHelpers.inherits(o,c("FluxMapStore"));k=j&&j.prototype;o.prototype.getInitialState=function(){return c("immutable").Map({sphericalViewportControls:c("immutable").Map({}),sphericalViewportControlStates:c("immutable").Map({})})};o.prototype.reduce=function(p,q){__p&&__p();var r=q.id;switch(q.type){case c("SphericalVideoComponentConstants").ACTIONS.REGISTER_SPHERICAL_VIEWPORT_CONTROL:var s=q.sphericalViewportControl,t=q.viewport;p=this.$SphericalViewportStore1(p,r,s,t);break;case c("SphericalVideoComponentConstants").ACTIONS.CHANGE_VIEWPORT:var u=q.yaw,v=q.pitch,w=q.fieldOfView;p=this.$SphericalViewportStore2(p,r,u,v,w);break;case c("SphericalVideoComponentConstants").ACTIONS.TOGGLE_VIEWPORT_GRABBED:p=this.$SphericalViewportStore3(p,r);break;case c("SphericalVideoComponentConstants").ACTIONS.UPDATE_VIEWPORT_DIMENSIONS:var x=q.width,y=q.height;p=this.$SphericalViewportStore4(p,r,x,y);break;case c("SphericalVideoComponentConstants").ACTIONS.TOGGLE_CHANNEL_VIEW:var z=q.isInChannelView;p=this.$SphericalViewportStore5(p,r,z);break;case c("SphericalVideoComponentConstants").ACTIONS.TOGGLE_TAHOE:var A=q.isInTahoe;p=this.$SphericalViewportStore6(p,r,A);break;case c("SphericalVideoComponentConstants").ACTIONS.SET_USER_IS_INACTIVE:p=this.$SphericalViewportStore7(p,r);break;case c("SphericalVideoComponentConstants").ACTIONS.SET_INITIAL_VIEWPORT:p=this.$SphericalViewportStore8(p,r,q.yaw,q.pitch);break;default:break}return p};o.prototype.getSphericalViewportControl=function(p){var q=this.get("sphericalViewportControls");if(q&&q.has(p))return q.get(p);else throw new Error("Video player controller with id "+p+" is not registered")};o.prototype.getOrientation=function(p){var q=this.$SphericalViewportStore9(this.getState(),p),r=q.yaw,s=q.pitch;return{yaw:r,pitch:s}};o.prototype.getUserIsActive=function(p){var q=this.$SphericalViewportStore9(this.getState(),p);return q.viewportInactivityTimeout!==0};o.prototype.getFieldOfView=function(p){return this.$SphericalViewportStore9(this.getState(),p).fieldOfView};o.prototype.getViewportGrabbed=function(p){return this.$SphericalViewportStore9(this.getState(),p).viewportGrabbed};o.prototype.getInitialYaw=function(p){return this.$SphericalViewportStore9(this.getState(),p).initialYaw};o.prototype.getInitialPitch=function(p){return this.$SphericalViewportStore9(this.getState(),p).initialPitch};o.prototype.getIsInChannelView=function(p){return this.$SphericalViewportStore9(this.getState(),p).isInChannelView};o.prototype.getIsInTahoe=function(p){return this.$SphericalViewportStore9(this.getState(),p).isInTahoe};o.prototype.getViewportDimensions=function(p){return{width:this.$SphericalViewportStore9(this.getState(),p).viewportWidth,height:this.$SphericalViewportStore9(this.getState(),p).viewportHeight}};o.prototype.getViewportPositionVector=function(p){var q=this.$SphericalViewportStore9(this.getState(),p);return new(c("Rect"))(q.viewport).getPositionVector()};o.prototype.getViewportCenterVector=function(p){var q=this.getViewportPositionVector(p),r=this.getViewportDimensions(p),s=r.width,t=r.height,u=new(c("Vector"))(s/2,t/2);return q.add(u)};o.prototype.onViewportGrabbed=function(p){c("SphericalVideoComponentActions").toggleViewportGrabbed(p)};o.prototype.onViewportPanStart=function(p,q){return};o.prototype.onViewportPanEnd=function(p){c("SphericalVideoComponentActions").toggleViewportGrabbed(p)};o.prototype.onViewportChange=function(p,q,r,s){c("SphericalVideoComponentActions").changeViewport(p,q,r,s)};o.prototype.$SphericalViewportStore1=function(p,q,r,s){__p&&__p();var t=p.get("sphericalViewportControls");if(t.has(q))return p;t=t.set(q,r);p=p.set("sphericalViewportControls",t);var u=p.get("sphericalViewportControlStates"),v=new n({yaw:r.getOrientation().x,pitch:r.getOrientation().y,fieldOfView:r.getVerticalFieldOfView(),viewport:s});u=u.set(q,v);p=p.set("sphericalViewportControlStates",u);r.addListener("viewportChange",c("throttle")(c("curry")(this.onViewportChange,q),16));r.addListener("updateViewportBegin",c("curry")(this.onViewportGrabbed,q));r.addListener("updateViewportEnd",c("curry")(this.onViewportPanEnd,q));return p};o.prototype.$SphericalViewportStore2=function(p,q,r,s,t){__p&&__p();var u=[["yaw",r],["pitch",s],["fieldOfView",t]];for(var v=u,w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y,A=z[0],B=z[1];p=this.$SphericalViewportStore10(p,q,A,B)}var C=this.getSphericalViewportControl(q);C.setSphericalOrientation(r,s);C.setFieldOfView(t);var D=this.$SphericalViewportStore9(p,q).get("viewportInactivityTimeout");clearTimeout(D);p=this.$SphericalViewportStore10(p,q,"viewportInactivityTimeout",this.$SphericalViewportStore11(q));return p};o.prototype.$SphericalViewportStore11=function(p){return c("setTimeout")(function(){return c("SphericalVideoComponentActions").setUserIsInactive(p)},m)};o.prototype.$SphericalViewportStore7=function(p,q){p=this.$SphericalViewportStore10(p,q,"viewportInactivityTimeout",0);return p};o.prototype.$SphericalViewportStore8=function(p,q,r,s){p=this.$SphericalViewportStore10(p,q,"initialYaw",r);p=this.$SphericalViewportStore10(p,q,"initialPitch",s);return p};o.prototype.$SphericalViewportStore4=function(p,q,r,s){p=this.$SphericalViewportStore10(p,q,"viewportWidth",r);p=this.$SphericalViewportStore10(p,q,"viewportHeight",s);return p};o.prototype.$SphericalViewportStore3=function(p,q){var r=this.$SphericalViewportStore9(p,q).viewportGrabbed;return this.$SphericalViewportStore10(p,q,"viewportGrabbed",!r)};o.prototype.$SphericalViewportStore5=function(p,q,r){return this.$SphericalViewportStore10(p,q,"isInChannelView",r)};o.prototype.$SphericalViewportStore6=function(p,q,r){return this.$SphericalViewportStore10(p,q,"isInTahoe",r)};o.prototype.$SphericalViewportStore10=function(p,q,r,s){var t=this.$SphericalViewportStore9(p,q),u=p.get("sphericalViewportControlStates");t=t.set(r,s);u=u.set(q,t);return p.set("sphericalViewportControlStates",u)};o.prototype.$SphericalViewportStore9=function(p,q){var r=p.get("sphericalViewportControlStates").get(q);if(!r)this.$SphericalViewportStore12(q);return r};o.prototype.$SphericalViewportStore12=function(p){throw new Error("Viewport control with id "+p+" does not exist")};function o(){j.apply(this,arguments)}f.exports=new o(c("SphericalVideoComponentDispatcher"))}),null);
__d("VideoPlayerControllerStore",["FluxMapStore","immutable","SphericalVideoComponentActions","SphericalVideoComponentConstants","SphericalVideoComponentDispatcher","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","curry"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j,k;h=babelHelpers.inherits(l,c("immutable").Record({currentTime:-1,currentVideoPlayerState:c("VideoPlayerStates").UNKNOWN,durationSeconds:-1,videoId:"",unpauseOnMouseUp:false}));i=h&&h.prototype;function l(){h.apply(this,arguments)}j=babelHelpers.inherits(m,c("FluxMapStore"));k=j&&j.prototype;function m(){var n,o;for(var p=arguments.length,q=Array(p),r=0;r<p;r++)q[r]=arguments[r];return o=(n=k.constructor).call.apply(n,[this].concat(q)),this.onVideoPlayerControllerStateChange=function(s){var t=s.getVideoPlayerID(),u=this.$VideoPlayerControllerStore7(this.getState(),t),v=u.videoPlayerState,w=s.getState();if(v!==w)c("SphericalVideoComponentActions").updateVideoPlayerState(t,w)}.bind(this),o}m.prototype.getInitialState=function(){return c("immutable").Map({videoPlayerControllers:c("immutable").Map({}),videoPlayerControllerStates:c("immutable").Map({})})};m.prototype.reduce=function(n,o){__p&&__p();var p=o.id,q=void 0;switch(o.type){case c("SphericalVideoComponentConstants").ACTIONS.REGISTER_VIDEO_PLAYER_CONTROLLER:var r=o.controller;n=this.$VideoPlayerControllerStore1(n,r,p);break;case c("SphericalVideoComponentConstants").ACTIONS.UPDATE_VIDEO_PLAYER_STATE:n=this.$VideoPlayerControllerStore2(n,p,o.state);break;case c("SphericalVideoComponentConstants").ACTIONS.TOGGLE_PLAY:n=this.$VideoPlayerControllerStore3(n,p,o.nextIsPlaying);break;case c("SphericalVideoComponentConstants").ACTIONS.SET_CURRENT_PLAY_TIME:n=this.$VideoPlayerControllerStore4(n,p,o.time);break;case c("SphericalVideoComponentConstants").ACTIONS.SET_VIDEO_DURATION:n=this.$VideoPlayerControllerStore5(n,p,o.durationSeconds);break;case c("SphericalVideoComponentConstants").ACTIONS.SET_MOUSE_DOWN:var s=o.wasVideoPlaying;if(s){n=this.$VideoPlayerControllerStore6(n,p,"unpauseOnMouseUp",s);n=this.$VideoPlayerControllerStore3(n,p,false)}break;case c("SphericalVideoComponentConstants").ACTIONS.DROP_REACTION:q=this.$VideoPlayerControllerStore7(n,p);if(q.unpauseOnMouseUp){n=this.$VideoPlayerControllerStore3(n,p,true);n=this.$VideoPlayerControllerStore6(n,p,"unpauseOnMouseUp",false)}break;default:break}return n};m.prototype.getVideoPlayerController=function(n){var o=this.get("videoPlayerControllers");if(o&&o.has(n))return o.get(n);else throw new Error("Video player controller with id "+n+" is not registered")};m.prototype.getIsVideoPlayable=function(n){var o=this.$VideoPlayerControllerStore7(this.getState(),n).currentVideoPlayerState;return o!==c("VideoPlayerStates").FALLBACK&&o!==c("VideoPlayerStates").DESTROYED&&o!==c("VideoPlayerStates").UNKNOWN};m.prototype.getIsPlaying=function(n){var o=this.getVideoPlayerController(n).isBuffering(),p=this.$VideoPlayerControllerStore7(this.getState(),n).currentVideoPlayerState;return p===c("VideoPlayerStates").PLAYING&&!o};m.prototype.getCurrentTime=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).currentTime};m.prototype.getVideoID=function(n){return this.$VideoPlayerControllerStore7(this.getState(),n).videoId};m.prototype.$VideoPlayerControllerStore1=function(n,o,p){__p&&__p();var q=n.get("videoPlayerControllers");if(q.has(p))return n;q=q.set(p,o);n=n.set("videoPlayerControllers",q);var r=n.get("videoPlayerControllerStates"),s=new l({isPlaying:o.isState(c("VideoPlayerStates").PLAYING),currentTime:o.getCurrentTimePosition(),videoId:o.getVideoID()});r=r.set(p,s);n=n.set("videoPlayerControllerStates",r);o.addListener("stateChange",c("curry")(this.onVideoPlayerControllerStateChange,o));o.addListener("updateStatus",c("curry")(this.onTimeUpdate,o));o.addListener("updateMetadata",c("curry")(this.onUpdateMetaData,o));o.addListener("VideoChannelController/pendingElementsShown",c("curry")(this.onToggleChannelView,o,true));o.addListener("VideoChannelController/exitChannel",c("curry")(this.onToggleChannelView,o,false));o.addListener("seekRequested",c("curry")(this.onSeekStart,o));o.addListener("TahoeController/enterTahoe",c("curry")(this.onToggleTahoe,o,true));o.addListener("TahoeController/exitTahoe",c("curry")(this.onToggleTahoe,o,false));return n};m.prototype.onTimeUpdate=function(n,event){c("SphericalVideoComponentActions").setCurrentVideoTime(n.getVideoPlayerID(),event.position)};m.prototype.onSeekStart=function(n){c("SphericalVideoComponentActions").seekStart(n.getVideoPlayerID())};m.prototype.onUpdateMetaData=function(n){c("SphericalVideoComponentActions").setVideoDuration(n.getVideoPlayerID(),n.getPlaybackDuration())};m.prototype.onToggleChannelView=function(n,o){c("SphericalVideoComponentActions").toggleChannelView(n.getVideoPlayerID(),o)};m.prototype.onToggleTahoe=function(n,o){c("SphericalVideoComponentActions").toggleTahoe(n.getVideoPlayerID(),o)};m.prototype.$VideoPlayerControllerStore3=function(n,o,p){var q=this.getVideoPlayerController(o),r=this.$VideoPlayerControllerStore7(this.getState(),o),s=r.currentVideoPlayerState;if(s===c("VideoPlayerStates").PLAYING&&!p||s===c("VideoPlayerStates").PAUSED&&p)p?q.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").USER)):q.pause();return n};m.prototype.$VideoPlayerControllerStore4=function(n,o,p){return this.$VideoPlayerControllerStore6(n,o,"currentTime",p)};m.prototype.$VideoPlayerControllerStore2=function(n,o,p){return this.$VideoPlayerControllerStore6(n,o,"currentVideoPlayerState",p)};m.prototype.$VideoPlayerControllerStore5=function(n,o,p){return this.$VideoPlayerControllerStore6(n,o,"durationSeconds",p)};m.prototype.$VideoPlayerControllerStore7=function(n,o){var p=n.get("videoPlayerControllerStates").get(o);if(!p)this.$VideoPlayerControllerStore8(o);return p};m.prototype.$VideoPlayerControllerStore6=function(n,o,p,q){var r=n.get("videoPlayerControllerStates"),s=this.$VideoPlayerControllerStore7(n,o);s=s.set(p,q);r=r.set(o,s);return n.set("videoPlayerControllerStates",r)};m.prototype.$VideoPlayerControllerStore8=function(n){throw new Error("Video player controller with id "+n+" does not exist")};f.exports=new m(c("SphericalVideoComponentDispatcher"))}),null);
__d("ComposerVideoUploadSphericalEvents",[],(function a(b,c,d,e,f,g){"use strict";f.exports={GUIDE:{KEYFRAMES_UPDATE:"ComposerVideoUploadSphericalVideoPreviewGuide/keyframesUpdate",CURRENT_POI_UPDATE:"ComposerVideoUploadSphericalVideoPreviewGuide/currentPOIUpdate"},PREVIEW:{INITAL_VIEWPORT_UPDATE:"ComposerVideoUploadSphericalVideoPreview/initialViewportUpdate",GUIDE_KEYFRAMES_UPDATE:"ComposerVideoUploadSphericalVideoPreview/guideKeyframesUpdate",GUIDE_STATE_UPDATE:"ComposerVideoUploadSphericalVideoPreview/guideStateUpdate",GUIDE_VISIBILITY_UPDATE:"ComposerVideoUploadSphericalVideoPreview/guideVisibilityUpdate",KEYFRAME_EDITING_STATE_UPDATE:"ComposerVideoUploadSphericalVideoPreview/keyframeEditingStateUpdate",FIELD_OF_VIEW_UPDATE:"ComposerVideoUploadSphericalVideoPreview/fieldOfViewUpdate",MOBILE_PREVIEW_UPDATE:"ComposerVideoUploadSphericalVideoPreview/mobilePreviewUpdate"},OVERLAY_BUTTONS:{ADD_POI:"ComposerVideoUploadSphericalVideoPreviewOverlayButtons/addPOI",SAVE_POI:"ComposerVideoUploadSphericalVideoPreviewOverlayButtons/savePOI",EDIT_POI:"ComposerVideoUploadSphericalVideoPreviewOverlayButtons/editPOI",REMOVE_POI:"ComposerVideoUploadSphericalVideoPreviewOverlayButtons/removePOI",CLEAR_POI:"ComposerVideoUploadSphericalVideoPreviewOverlayButtons/clearPOI",CREATE_THUMBNAIL:"ComposerVideoUploadSphericalVideoPreviewOverlayButtons/createThumbnail"},VIEWPORT_CONTROL:{VIEWPORT_UPDATE:"ComposerVideoUploadSphericalVideoPreviewViewportControl/viewportUpdate",FIELD_OF_VIEW_UPDATE:"ComposerVideoUploadSphericalVideoPreviewViewportControl/fieldOfViewUpdate"},MEDIA_TOOLKIT:{SAVE_HOTSPOT:"composerVideoUploadSphericalMediaToolkit/saveHotspot"}}}),null);
__d("SphericalMediaUtils",[],(function a(b,c,d,e,f,g){"use strict";var h={getDPR:function i(){return Math.max(window.devicePixelRatio||1,1)}};f.exports=h}),null);
__d("SphericalMediaHeadingIndicator.react",["cx","EventListener","React","SphericalMediaConstants","SphericalMediaUtils","SphericalPhotoPartialLimits","SphericalPhotoProjectionUtils","SubscriptionsHandler","degToRad","easeInOutInterpolate","requestAnimationFrame","uniqueID"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("SphericalMediaConstants").HI_SIZE_NORMAL,l=c("SphericalMediaConstants").HI_SIZE_FULL,m=c("SphericalMediaConstants").HI_ALPHA_BG,n=c("SphericalMediaConstants").HI_ALPHA_ELEMENT,o=c("SphericalMediaConstants").HI_ALPHA_DURATION,p=c("SphericalMediaConstants").HI_FADE_OUT_DELAY,q=c("SphericalMediaConstants").HI_BLINK_ARC_RAD,r=c("SphericalMediaConstants").HI_BLINK_DURATION,s=c("SphericalMediaUtils").getDPR,t=c("SphericalPhotoPartialLimits").makePartialLimits,u=function u(y){return y!==undefined&&y!==null},v=function v(y,z,A,B){y.beginPath();y.arc(z.x,z.y,A*s(),0,2*Math.PI,false);y.fillStyle=B;y.lineWidth=0;y.fill()},w=function w(y,z,A,B,C,D,E){var F=s();y.beginPath();y.arc(z.x,z.y,A*F,B,C,false);y.lineWidth=D*F;y.strokeStyle=E;y.stroke()};i=babelHelpers.inherits(x,c("React").Component);j=i&&i.prototype;function x(y){__p&&__p();j.constructor.call(this,y);this.$SphericalMediaHeadingIndicator24=function(){__p&&__p();var A=this.__getDrawData();if(!u(A.poiYaw)){this.$SphericalMediaHeadingIndicator11=false;this.draw(A);return}var B=(Date.now()-this.__blinkStartTime)%r<r/2;if(this.$SphericalMediaHeadingIndicator11!==B){this.$SphericalMediaHeadingIndicator11=B;this.draw(A)}c("requestAnimationFrame")(this.$SphericalMediaHeadingIndicator24)}.bind(this);this.$SphericalMediaHeadingIndicator14=function(){if(this.$SphericalMediaHeadingIndicator6===m.end)return;this.$SphericalMediaHeadingIndicator25(m.start,m.end,n.start,n.end)}.bind(this);this.$SphericalMediaHeadingIndicator15=function(){if(this.$SphericalMediaHeadingIndicator6===m.start)return;this.$SphericalMediaHeadingIndicator25(m.end,m.start,n.end,n.start)}.bind(this);this.$SphericalMediaHeadingIndicator2=c("uniqueID")();this.$SphericalMediaHeadingIndicator5=0;this.$SphericalMediaHeadingIndicator6=m.start;this.$SphericalMediaHeadingIndicator7=n.start;this.$SphericalMediaHeadingIndicator8=null;this.$SphericalMediaHeadingIndicator9=false;this.$SphericalMediaHeadingIndicator10=false;this.$SphericalMediaHeadingIndicator11=false;if(!this.constructor.__subClassMethods)throw new Error('Must implement "static __subClassMethods"');for(var z in this.constructor.__subClassMethods)if(typeof this[z]!=="function")throw new Error('Must implement "'+z+'"')}x.prototype.componentWillReceiveProps=function(y){var z=y.isActive&&y.isPanning!==this.props.isPanning;if(z)this.$SphericalMediaHeadingIndicator13(y.isPanning)};x.prototype.shouldComponentUpdate=function(y){var z=y.aspectRatio!==this.props.aspectRatio||y.isActive!==this.props.isActive||y.isGuideAuto!==this.props.isGuideAuto||y.useLargeHeadingIndicator!==this.props.useLargeHeadingIndicator;return z};x.prototype.$SphericalMediaHeadingIndicator13=function(y){__p&&__p();var z=arguments.length<=1||arguments[1]===undefined?true:arguments[1];this.$SphericalMediaHeadingIndicator5+=y?1:-1;if(y){this.$SphericalMediaHeadingIndicator8!==null&&clearTimeout(this.$SphericalMediaHeadingIndicator8);this.$SphericalMediaHeadingIndicator14()}else if(this.$SphericalMediaHeadingIndicator5===0)this.$SphericalMediaHeadingIndicator8=setTimeout(function(){this.$SphericalMediaHeadingIndicator8=null;this.$SphericalMediaHeadingIndicator15()}.bind(this),z?p:0)};x.prototype.$SphericalMediaHeadingIndicator16=function(){var y=this.$SphericalMediaHeadingIndicator17(),z=s();return{width:y.width*z,height:y.height*z}};x.prototype.$SphericalMediaHeadingIndicator17=function(){return this.props.useLargeHeadingIndicator?l:k};x.prototype.$SphericalMediaHeadingIndicator18=function(){var y=this.$SphericalMediaHeadingIndicator16();return{x:y.width/2,y:y.height/2}};x.prototype.draw=function(y){__p&&__p();if(!this.$SphericalMediaHeadingIndicator1)return;var z=this.$SphericalMediaHeadingIndicator1,A=this.$SphericalMediaHeadingIndicator16();if(z.width!==A.width||z.height!==A.height){z.width=A.width;z.height=A.height}var B=z.getContext("2d");if(!B)return;B.save();B.clearRect(0,0,A.width,A.height);this.$SphericalMediaHeadingIndicator19(B,y);this.$SphericalMediaHeadingIndicator20(B,y);this.$SphericalMediaHeadingIndicator21(B,y);B.restore()};x.prototype.$SphericalMediaHeadingIndicator19=function(y,z){__p&&__p();var A=this.$SphericalMediaHeadingIndicator17(),B=this.$SphericalMediaHeadingIndicator18(),C=z.fov*this.props.aspectRatio,D=c("degToRad")(C)/2;v(y,B,A.background_radius,this.$SphericalMediaHeadingIndicator22());if(this.props.isGuideAuto){var E=A.inner_radius+A.inner_stroke/2-A.center_radius;w(y,B,A.center_radius+E/2,0,2*Math.PI,E,this.$SphericalMediaHeadingIndicator23())}else{v(y,B,A.center_radius,this.$SphericalMediaHeadingIndicator23());var F=this.props.partialLimits;if(F&&F.partialLeftDegrees&&F.partialRightDegrees){var G=F.partialLeftDegrees,H=F.partialRightDegrees;w(y,B,A.inner_radius,0,2*Math.PI,A.inner_stroke,this.getPartialPanoElementColor());var I=270-z.initialYaw,J=c("degToRad")(G*-1+I+D),K=c("degToRad")(H+I-D);w(y,B,A.inner_radius,J||0,K||0,A.inner_stroke,this.$SphericalMediaHeadingIndicator23())}else w(y,B,A.inner_radius,0,2*Math.PI,A.inner_stroke,this.$SphericalMediaHeadingIndicator23())}};x.prototype.$SphericalMediaHeadingIndicator21=function(y,z){__p&&__p();var A=this.$SphericalMediaHeadingIndicator17(),B=this.$SphericalMediaHeadingIndicator18();if(this.$SphericalMediaHeadingIndicator11){var C=c("degToRad")((z.poiYaw||0)-z.initialYaw)-Math.PI/2;w(y,B,A.rim_radius,C-q/2,C+q/2,A.rim_stroke,this.$SphericalMediaHeadingIndicator23())}var D=s(),E=A.triangle[0]*D,F=A.triangle[1]*D,G=A.triangle[2]*D;y.translate(B.x,B.y);if(z.pointerYaw){var H=z.pointerYaw-z.initialYaw;y.rotate(c("degToRad")(H||0))}y.beginPath();y.moveTo(0,E-B.y);y.lineTo(-F,G-B.y);y.lineTo(F,G-B.y);y.fillStyle=this.$SphericalMediaHeadingIndicator23();y.fill()};x.prototype.$SphericalMediaHeadingIndicator20=function(y,z){__p&&__p();var A=this.$SphericalMediaHeadingIndicator17(),B=this.$SphericalMediaHeadingIndicator18(),C=this.props,D=C.partialLimits,E=C.aspectRatio,F=C.showNewPhotoRenderer,G=z.yaw-z.initialYaw,H=z.fov*this.props.aspectRatio,I=c("degToRad")(H)/2;if(F&&D){var J=c("SphericalPhotoProjectionUtils").getRelativeHfov(z.fov,E,D);I=J/2}var K=c("degToRad")(G)-Math.PI/2,L=this.props.isGuideAuto;if(L){var M=s();y.save();y.beginPath();y.lineWidth=A.arc_stroke*M;y.arc(B.x,B.y,(A.arc_radius+A.arc_stroke/2)*M,K-I,K+I,false);y.arc(B.x,B.y,(A.arc_radius-A.arc_stroke/2)*M,K+I,K-I,true);y.clip();var N=this.$SphericalMediaHeadingIndicator16();y.clearRect(0,0,N.width,N.height);y.restore()}w(y,B,A.arc_radius,K-I,K+I,A.arc_stroke,L?this.$SphericalMediaHeadingIndicator22():this.$SphericalMediaHeadingIndicator23())};x.prototype.getPartialPanoElementColor=function(){return"rgba(255, 255, 255, "+this.$SphericalMediaHeadingIndicator7*.4+")"};x.prototype.$SphericalMediaHeadingIndicator23=function(){return"rgba(255, 255, 255, "+this.$SphericalMediaHeadingIndicator7+")"};x.prototype.$SphericalMediaHeadingIndicator22=function(){return"rgba(0, 0, 0, "+this.$SphericalMediaHeadingIndicator6+")"};x.prototype.$SphericalMediaHeadingIndicator25=function(y,z,A,B){__p&&__p();this.$SphericalMediaHeadingIndicator10=this.$SphericalMediaHeadingIndicator9;this.$SphericalMediaHeadingIndicator9=true;var C=Date.now(),D=function(G){__p&&__p();var H=Date.now();if(this.$SphericalMediaHeadingIndicator10){this.$SphericalMediaHeadingIndicator10=false;return}if(H-C>o){this.$SphericalMediaHeadingIndicator9=false;this.$SphericalMediaHeadingIndicator6=z;this.$SphericalMediaHeadingIndicator7=B;return}c("requestAnimationFrame")(function(){D(G)});var I=c("easeInOutInterpolate")((H-C)/o),J=G.deltaAlphaBG*I+G.startAlphaBG,K=G.deltaAlphaElement*I+G.startAlphaElement;this.$SphericalMediaHeadingIndicator6=J;this.$SphericalMediaHeadingIndicator7=K;this.draw(this.__getDrawData())}.bind(this),E=z-y,F=B-A;c("requestAnimationFrame")(function(){D({startAlphaBG:y,deltaAlphaBG:E,startAlphaElement:A,deltaAlphaElement:F})})};x.prototype.componentDidMount=function(){if(this.props.isActive)this.draw(this.__getDrawData());if(this.props.useNativeListeners){this.$SphericalMediaHeadingIndicator12=new(c("SubscriptionsHandler"))();this.$SphericalMediaHeadingIndicator12.addSubscriptions(c("EventListener").listen(this.$SphericalMediaHeadingIndicator4,"click",function(event){return this.__onClick(event)}.bind(this)),c("EventListener").listen(this.$SphericalMediaHeadingIndicator4,"mouseover",function(){return this.$SphericalMediaHeadingIndicator13(true)}.bind(this)),c("EventListener").listen(this.$SphericalMediaHeadingIndicator4,"mouseout",function(){return this.$SphericalMediaHeadingIndicator13(false,false)}.bind(this)))}};x.prototype.componentDidUpdate=function(){if(this.props.isActive)this.draw(this.__getDrawData());c("requestAnimationFrame")(this.$SphericalMediaHeadingIndicator24)};x.prototype.componentWillUnmount=function(){this.$SphericalMediaHeadingIndicator1=null;if(this.props.useNativeListeners)this.$SphericalMediaHeadingIndicator12.release()};x.prototype.render=function(){__p&&__p();var y=this.$SphericalMediaHeadingIndicator17(),z=this.props.isActive,A={};if(!this.props.useNativeListeners){A.onClick=function(event){return this.__onClick(event)}.bind(this);A.onMouseOver=function(){return this.$SphericalMediaHeadingIndicator13(true)}.bind(this);A.onMouseOut=function(){return this.$SphericalMediaHeadingIndicator13(false,false)}.bind(this)}return c("React").createElement("button",babelHelpers["extends"]({},A,{ref:function(B){return this.$SphericalMediaHeadingIndicator4=B}.bind(this),className:"_17az sphericalHeadingIndicator"+(!z?" hidden_elem":""),style:{width:y.width,height:y.height}}),c("React").createElement("div",{className:"_17a-",ref:function(B){return this.$SphericalMediaHeadingIndicator3=B}.bind(this)},c("React").createElement("canvas",{className:"_5nxw _17ay",ref:function(B){return this.$SphericalMediaHeadingIndicator1=B}.bind(this)})))};f.exports=x}),null);
__d("SphericalVideoHeadingIndicator.react",["cx","fbt","BasicFBNux","ComposerVideoUploadSphericalEvents","React","SphericalVideoExperiments","SphericalViewportControlStore","SphericalMediaHeadingIndicator.react","SubscriptionsHandler","VideoPlayerStates","XUIAmbientNUX.react","XUIText.react"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l,m,n=4320,o=4596,p=i._("Preview your points of interest. Viewers will automatically see this guided version."),q=i._("You're watching the best views from this 360 video only. You can swipe or drag the video to watch it manually."),r=function r(u){return u!==undefined&&u!==null};j=babelHelpers.inherits(s,c("SphericalMediaHeadingIndicator.react"));k=j&&j.prototype;s.prototype.__onClick=function(event){"use strict";this.props.onClick(event)};s.prototype.__getDrawData=function(){"use strict";return{fov:this.props.fov,initialYaw:this.props.initialYaw,pointerYaw:this.props.pointerYaw,poiYaw:this.props.poiYaw,yaw:this.props.yaw}};s.prototype.$SphericalHeadingIndicatorImpl1=function(u){"use strict";return{fov:u.fov,initialYaw:u.initialYaw,pointerYaw:u.pointerYaw,poiYaw:u.poiYaw,yaw:u.yaw}};s.prototype.componentWillReceiveProps=function(u){"use strict";k.componentWillReceiveProps.call(this,u);if(!r(this.props.poiYaw)&&r(u.poiYaw))this.__blinkStartTime=Date.now();var v=u.isActive===this.props.isActive&&(u.initialYaw!==this.props.initialYaw||u.aspectRatio!==this.props.aspectRatio||u.fov!==this.props.fov||u.yaw!==this.props.yaw||u.pointerYaw!==this.props.pointerYaw||u.poiYaw!==this.props.poiYaw);if(v)this.draw(this.$SphericalHeadingIndicatorImpl1(u))};s.prototype.shouldComponentUpdate=function(u){"use strict";var v=k.shouldComponentUpdate.call(this,u)||u.poiYaw!==this.props.poiYaw;return v};function s(){"use strict";j.apply(this,arguments)}s.__subClassMethods={__onClick:true,__getDrawData:true};l=babelHelpers.inherits(t,c("React").Component);m=l&&l.prototype;function t(u){"use strict";__p&&__p();m.constructor.call(this,u);this.$SphericalVideoHeadingIndicator6=false;this.$SphericalVideoHeadingIndicator1=u.controller;this.$SphericalVideoHeadingIndicator5=u.isComposer;if(this.$SphericalVideoHeadingIndicator5){this.$SphericalVideoHeadingIndicator3=o;this.$SphericalVideoHeadingIndicator4=c("React").createElement(c("XUIText.react"),{size:"meta1",display:"block"},p)}else{this.$SphericalVideoHeadingIndicator3=n;this.$SphericalVideoHeadingIndicator4=q}this.$SphericalVideoHeadingIndicator2=new(c("SubscriptionsHandler"))()}t.prototype.componentDidMount=function(){"use strict";if(this.$SphericalVideoHeadingIndicator1.getOption("SphericalVideoPlayer","isReady"))this.$SphericalVideoHeadingIndicator7();else this.$SphericalVideoHeadingIndicator2.addSubscriptions(this.$SphericalVideoHeadingIndicator1.once("SphericalVideoPlayer/ready",function(){return this.$SphericalVideoHeadingIndicator7()}.bind(this)))};t.prototype.componentWillUnmount=function(){"use strict";this.$SphericalVideoHeadingIndicator2.release()};t.prototype.$SphericalVideoHeadingIndicator7=function(){"use strict";__p&&__p();var u=this.$SphericalVideoHeadingIndicator1.getVideoPlayerID();this.$SphericalVideoHeadingIndicator2.addSubscriptions(this.$SphericalVideoHeadingIndicator1.addListener("PhotoSnowlift/enterSnowlift",function(){return this.$SphericalVideoHeadingIndicator8(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("PhotoSnowlift/exitSnowlift",function(){return this.$SphericalVideoHeadingIndicator8(false)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("toggleFullscreen",function(){return this.$SphericalVideoHeadingIndicator9()}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("beginPlayback",function(){return this.$SphericalVideoHeadingIndicator10(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("finishPlayback",function(){return this.$SphericalVideoHeadingIndicator10(false)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoChannelController/enterChannel",function(){return this.$SphericalVideoHeadingIndicator11(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoChannelController/exitChannel",function(){return this.$SphericalVideoHeadingIndicator11(false)}.bind(this)),c("SphericalViewportControlStore").addListener(function(){var v=c("SphericalViewportControlStore"),w=v.getOrientation(u),x=w.pitch,y=w.yaw;this.setState({isActive:v.getViewportGrabbed(u),pitch:x,yaw:y,fov:v.getFieldOfView(u)})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("SphericalVideoRecenterControl/animationStart",function(){return this.$SphericalVideoHeadingIndicator12(true)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("SphericalVideoRecenterControl/animationEnd",function(){return this.$SphericalVideoHeadingIndicator12(false)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoControls/visibilityUpdate",function(v){var w=v.areControlsVisible;return this.$SphericalVideoHeadingIndicator12(w)}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("viewportChange",function(v,w){return this.forceUpdate()}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoWithSphericalGuide/viewportChange",function(v){return this.setState({pointerYaw:v})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoWithSphericalGuide/intervalUpdate",function(v){var w=v.deltaPitch===0&&v.deltaYaw===0;this.setState({poiYaw:w?undefined:v.baseYaw+v.deltaYaw,isActive:!w})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoWithSphericalGuide/toggle",function(v){return this.setState({isGuideAuto:v})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener("VideoWithSphericalGuide/stateToggle",function(v){if(!v)this.setState({isGuideAuto:false,poiYaw:undefined,pointerYaw:0})}.bind(this)),this.$SphericalVideoHeadingIndicator1.addListener(c("ComposerVideoUploadSphericalEvents").PREVIEW.GUIDE_KEYFRAMES_UPDATE,function(v){return this.setState({numGuidePoints:v.length})}.bind(this)));this.setState({isVisible:this.$SphericalVideoHeadingIndicator1.isState(c("VideoPlayerStates").PLAYING),isActive:false,inChannel:this.$SphericalVideoHeadingIndicator1.getIsInChannel(),inSnowlift:this.$SphericalVideoHeadingIndicator1.getOption("PhotoSnowlift","isInSnowlift"),inFullscreen:this.$SphericalVideoHeadingIndicator1.isFullscreen(),isGuideAuto:this.$SphericalVideoHeadingIndicator1.getOption("VideoWithSphericalGuide","auto"),showGuideNux:c("SphericalVideoExperiments").showGuideNux,showComposerNux:c("SphericalVideoExperiments").showComposerNux,numGuidePoints:0,pitch:c("SphericalViewportControlStore").getOrientation(u).pitch,yaw:c("SphericalViewportControlStore").getOrientation(u).yaw,fov:c("SphericalViewportControlStore").getFieldOfView(u)});this.$SphericalVideoHeadingIndicator6=true};t.prototype.$SphericalVideoHeadingIndicator10=function(u){"use strict";this.setState({isVisible:u})};t.prototype.$SphericalVideoHeadingIndicator9=function(){"use strict";this.setState({inFullscreen:this.$SphericalVideoHeadingIndicator1.isFullscreen()})};t.prototype.$SphericalVideoHeadingIndicator11=function(u){"use strict";this.setState({inChannel:u})};t.prototype.$SphericalVideoHeadingIndicator8=function(u){"use strict";this.setState({inSnowlift:u})};t.prototype.$SphericalVideoHeadingIndicator12=function(u){"use strict";this.setState({isActive:u})};t.prototype.$SphericalVideoHeadingIndicator13=function(){"use strict";this.setState({showGuideNux:false,showComposerNux:false});c("BasicFBNux").onDismiss(this.$SphericalVideoHeadingIndicator5?o:n)};t.prototype.render=function(){"use strict";__p&&__p();if(!this.$SphericalVideoHeadingIndicator6)return null;var u=this.$SphericalVideoHeadingIndicator1.getOption("SphericalVideoPlayer","getDimensions"),v=u.width,w=u.height,x=!this.state.inChannel&&!this.state.inSnowlift&&!this.state.inFullscreen,y=this.$SphericalVideoHeadingIndicator1.getOption("VideoWithSphericalGuide","enabled"),z=void 0;if(this.$SphericalVideoHeadingIndicator5)z=this.state.showComposerNux&&this.state.numGuidePoints>2;else z=this.state.showGuideNux&&y;var A=this.$SphericalVideoHeadingIndicator1.getOption("SphericalVideoPlayer","getIsSingleFisheye");if(A){var B=this.$SphericalVideoHeadingIndicator1.getOption("SphericalVideoPlayer","getOriginalFOV");if(B!==null&&B!==0)return c("React").createElement("div",{className:"_3ldo"+(x?" _42a0":"")},c("React").createElement(s,{ref:"compass",aspectRatio:v/w,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,useLargeHeadingIndicator:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw,partialLeftDegrees:B/2,partialRightDegrees:B/2}),c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.compass}.bind(this),shown:z,position:"left",onCloseButtonClick:function(){return this.$SphericalVideoHeadingIndicator13()}.bind(this)},this.$SphericalVideoHeadingIndicator4))}return c("React").createElement("div",{className:"_3ldo"+(x?" _42a0":"")},c("React").createElement(s,{ref:"compass",aspectRatio:v/w,initialYaw:this.props.initialYaw,isActive:this.state.isVisible,fov:this.state.fov,pitch:this.state.pitch,yaw:this.state.yaw,onClick:this.props.onClick,useLargeHeadingIndicator:this.state.inFullscreen,isPanning:this.state.isActive,isGuideAuto:this.state.isGuideAuto,pointerYaw:this.state.pointerYaw,poiYaw:this.state.poiYaw}),c("React").createElement(c("XUIAmbientNUX.react"),{contextRef:function(){return this.refs.compass}.bind(this),shown:z,position:"left",onCloseButtonClick:function(){return this.$SphericalVideoHeadingIndicator13()}.bind(this)},this.$SphericalVideoHeadingIndicator4))};f.exports=t}),null);
__d("MovingAverage",[],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j){"use strict";__p&&__p();this.$MovingAverage1=j;j=j||0;this.$MovingAverage2=0;this.$MovingAverage3=j*i;this.$MovingAverage4=i;this.$MovingAverage5=0;this.$MovingAverage6=[];for(var k=0;k<i;k++)this.$MovingAverage6[k]=j}h.prototype.add=function(i){"use strict";this.$MovingAverage3-=this.$MovingAverage6[this.$MovingAverage2];this.$MovingAverage3+=i;this.$MovingAverage6[this.$MovingAverage2]=i;this.$MovingAverage2=(this.$MovingAverage2+1)%this.$MovingAverage4;if(this.$MovingAverage5<this.$MovingAverage4)this.$MovingAverage5++;return this};h.prototype.get=function(i){"use strict";i=i===undefined?0:i;var j=(this.$MovingAverage2-i-1+this.$MovingAverage4)%this.$MovingAverage4;return this.$MovingAverage6[j]};h.prototype.getAvg=function(){"use strict";if(this.$MovingAverage5<this.$MovingAverage4&&this.$MovingAverage5!==0&&this.$MovingAverage1==null)return this.$MovingAverage3/this.$MovingAverage5;return this.$MovingAverage3/this.$MovingAverage4};h.prototype.getSum=function(){"use strict";return this.$MovingAverage3};h.prototype.getMax=function(){"use strict";return Math.max.apply(Math,this.$MovingAverage6)};h.prototype.getMin=function(){"use strict";return Math.min.apply(Math,this.$MovingAverage6)};g.MovingAverage=h}),null);
__d("SpatialAudioFallbackReasons",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CHANNEL:"channel",SCROLL:"scroll"})}),null);
__d("SphericalMediaPerformanceEvents",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SNAPSHOT:"snapshot",AUDIO_FALLBACK:"audio_fallback",SPATIAL_REACTIONS_CLUSTERS_COMPUTATION:"spatial_reactions_clusters_computation",SPATIAL_REACTIONS_CACHE_REBUILD:"spatial_reactions_cache_rebuild",LIVE_SPATIAL_REACTIONS_REGION_COUNT:"live_spatial_reactions_region_count",SPHERICAL_RENDERER_SETUP:"spherical_renderer_setup"})}),null);
__d("SphericalMediaProductNames",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({SPHERICAL_VIDEO:"spherical_video",SPATIAL_AUDIO:"spatial_audio",SPATIAL_REACTIONS:"spatial_reactions"})}),null);
__d("SphericalVideoPerformanceTracker",["MovingAverage","SpatialAudioFallbackReasons","SphericalMediaPerformanceTypedLogger","SphericalMediaPerformanceEvents","SphericalMediaProductNames","Visibility","performance"],(function a(b,c,d,e,f,g){__p&&__p();var h=c("MovingAverage").MovingAverage,i=60,j=1e3,k=10*j,l=15,m=j/i;function n(){"use strict";__p&&__p();n.$SphericalVideoPerformanceTracker1=false;this.$SphericalVideoPerformanceTracker10=new h(500,m);this.$SphericalVideoPerformanceTracker11=new(c("SphericalMediaPerformanceTypedLogger"))();this.$SphericalVideoPerformanceTracker12=false;this.$SphericalVideoPerformanceTracker7=-1;this.$SphericalVideoPerformanceTracker8=-1;this.$SphericalVideoPerformanceTracker5=false;this.$SphericalVideoPerformanceTracker6=false;var o=function(){this.$SphericalVideoPerformanceTracker4=false;this.$SphericalVideoPerformanceTracker16()}.bind(this),p=function(){this.$SphericalVideoPerformanceTracker4=true}.bind(this);c("Visibility").isHidden()?o():p();c("Visibility").addListener(c("Visibility").HIDDEN,o);c("Visibility").addListener(c("Visibility").VISIBLE,p)}n.get=function(){"use strict";if(!n.$SphericalVideoPerformanceTracker2)n.$SphericalVideoPerformanceTracker2=new n();return n.$SphericalVideoPerformanceTracker2};n.prototype.addFrameAtTime=function(o){"use strict";__p&&__p();if(!this.$SphericalVideoPerformanceTracker4)return;if(o!==this.$SphericalVideoPerformanceTracker9){n.$SphericalVideoPerformanceTracker1=true;this.$SphericalVideoPerformanceTracker9=o;if(!this.$SphericalVideoPerformanceTracker3)this.$SphericalVideoPerformanceTracker3=o;else{var p=o-this.$SphericalVideoPerformanceTracker3;this.$SphericalVideoPerformanceTracker3=o;this.$SphericalVideoPerformanceTracker10.add(p);if(!this.$SphericalVideoPerformanceTracker12){this.$SphericalVideoPerformanceTracker17();this.$SphericalVideoPerformanceTracker12=true}}}};n.prototype.setProjection=function(o){"use strict";this.$SphericalVideoPerformanceTracker15=o;return this};n.prototype.trackSpatialAudioMetrics=function(){"use strict";this.$SphericalVideoPerformanceTracker5=true;this.$SphericalVideoPerformanceTracker14=0};n.prototype.isTrackingSpatialAudioMetrics=function(){"use strict";return this.$SphericalVideoPerformanceTracker5};n.prototype.addAudioStutter=function(){"use strict";if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();this.$SphericalVideoPerformanceTracker14++};n.prototype.enterSpatialAudioFallback=function(){"use strict";if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();this.$SphericalVideoPerformanceTracker7=c("performance").now()};n.prototype.exitSpatialAudioFallback=function(){"use strict";if(!this.isTrackingSpatialAudioMetrics())this.trackSpatialAudioMetrics();if(this.$SphericalVideoPerformanceTracker7>0){var o=Math.trunc(c("performance").now()-this.$SphericalVideoPerformanceTracker7);this.$SphericalVideoPerformanceTracker7=-1;this.$SphericalVideoPerformanceTracker11.setProductName(c("SphericalMediaProductNames").SPATIAL_AUDIO).setEvent(c("SphericalMediaPerformanceEvents").AUDIO_FALLBACK).setFallbackDuration(o).setFallbackReason(c("SpatialAudioFallbackReasons").CHANNEL).log();this.$SphericalVideoPerformanceTracker11.clear()}};n.prototype.trackSphericalRendererMetrics=function(){"use strict";this.$SphericalVideoPerformanceTracker6=true};n.prototype.isTrackingSphericalRendererMetrics=function(){"use strict";return this.$SphericalVideoPerformanceTracker6};n.prototype.isOne360VideoActive=function(){"use strict";return n.$SphericalVideoPerformanceTracker1};n.prototype.enterSphericalRendererSetup=function(){"use strict";if(!this.isTrackingSphericalRendererMetrics())this.trackSphericalRendererMetrics();this.$SphericalVideoPerformanceTracker8=c("performance").now()};n.prototype.exitSphericalRendererSetup=function(){"use strict";if(!this.isTrackingSphericalRendererMetrics())this.trackSphericalRendererMetrics();if(this.$SphericalVideoPerformanceTracker8>0){var o=Math.trunc(c("performance").now()-this.$SphericalVideoPerformanceTracker8);this.$SphericalVideoPerformanceTracker8=-1;this.$SphericalVideoPerformanceTracker11.setProductName(c("SphericalMediaProductNames").SPHERICAL_VIDEO).setEvent(c("SphericalMediaPerformanceEvents").SPHERICAL_RENDERER_SETUP).setProjection(this.$SphericalVideoPerformanceTracker15).setSphericalRendererSetupDuration(o).log();this.$SphericalVideoPerformanceTracker11.clear()}};n.prototype.log=function(){"use strict";__p&&__p();if(!this.isOne360VideoActive())return;else{var o=Math.trunc(this.$SphericalVideoPerformanceTracker18()*Math.pow(10,l));this.$SphericalVideoPerformanceTracker11.setProductName(c("SphericalMediaProductNames").SPHERICAL_VIDEO).setEvent(c("SphericalMediaPerformanceEvents").SNAPSHOT).setNormalizedFrameTime(o);if(this.$SphericalVideoPerformanceTracker15)this.$SphericalVideoPerformanceTracker11.setProjection(this.$SphericalVideoPerformanceTracker15);if(this.$SphericalVideoPerformanceTracker5){this.$SphericalVideoPerformanceTracker11.setProductName(c("SphericalMediaProductNames").SPATIAL_AUDIO).setNumSpatialAudioStutters(this.$SphericalVideoPerformanceTracker14);this.$SphericalVideoPerformanceTracker14=0}this.$SphericalVideoPerformanceTracker11.log();this.$SphericalVideoPerformanceTracker11.clear()}this.$SphericalVideoPerformanceTracker16()};n.prototype.destroy=function(){"use strict";clearInterval(this.$SphericalVideoPerformanceTracker13);n.$SphericalVideoPerformanceTracker2=null};n.prototype.$SphericalVideoPerformanceTracker18=function(){"use strict";return this.$SphericalVideoPerformanceTracker10.getAvg()/m};n.prototype.$SphericalVideoPerformanceTracker16=function(){"use strict";this.$SphericalVideoPerformanceTracker3=null;n.$SphericalVideoPerformanceTracker1=false};n.prototype.$SphericalVideoPerformanceTracker17=function(){"use strict";this.$SphericalVideoPerformanceTracker13=setInterval(this.log.bind(this),k)};f.exports=n}),null);
__d("SphericalRenderer",["DOM","EventEmitter","EventListener","VideoProjection","VideoStereoFormat","gkx","gl-matrix"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("gl-matrix").glMatrix,k=c("gl-matrix").mat4,l=Math.max(window.devicePixelRatio||1,1);function m(){"use strict"}h=babelHelpers.inherits(n,c("EventEmitter"));i=h&&h.prototype;function n(o,p,q){"use strict";__p&&__p();i.constructor.call(this);this.$SphericalRenderer2=q;this.$SphericalRenderer21=q.fieldOfView;this.$SphericalRenderer16=true;this.$SphericalRenderer15=o;this.$SphericalRenderer1=p;this.$SphericalRenderer10=k.create();this.$SphericalRenderer11=k.create();this.$SphericalRenderer12=k.create();this.$SphericalRenderer3=false;this.$SphericalRenderer18=[];this.$SphericalRenderer20=null;this.$SphericalRenderer19=null;this.$SphericalRenderer17=q.projectionType===c("VideoProjection").UNPADDED_CUBESTRIP;this.$SphericalRenderer9=q.projectionType===c("VideoProjection").ROTATED_CUBEMAP;this.$SphericalRenderer7=q.projectionType===c("VideoProjection").CDS_BARREL;this.$SphericalRenderer8=false;this.$SphericalRenderer23=new m();this.$SphericalRenderer23.ready=false;this.$SphericalRenderer24=false;this.$SphericalRenderer4=this.$SphericalRenderer25.bind(this);this.$SphericalRenderer5=this.$SphericalRenderer26.bind(this);this.$SphericalRenderer1.addEventListener("webglcontextlost",this.$SphericalRenderer4);this.$SphericalRenderer1.addEventListener("webglcontextrestored",this.$SphericalRenderer5);this.$SphericalRenderer27()}n.prototype.destroy=function(){"use strict";this.removeAllListeners();this.$SphericalRenderer1.removeEventListener("webglcontextlost",this.$SphericalRenderer4);this.$SphericalRenderer1.removeEventListener("webglcontextrestored",this.$SphericalRenderer5)};n.prototype.reconfigure=function(o,p){__p&&__p();var q=arguments.length<=2||arguments[2]===undefined?false:arguments[2];"use strict";if(q){this.$SphericalRenderer18=[];this.$SphericalRenderer20=null;this.$SphericalRenderer19=null}this.$SphericalRenderer21=p.fieldOfView;this.$SphericalRenderer15=o;this.$SphericalRenderer2=p;this.$SphericalRenderer17=p.projectionType===c("VideoProjection").UNPADDED_CUBESTRIP;this.$SphericalRenderer9=p.projectionType===c("VideoProjection").ROTATED_CUBEMAP;this.$SphericalRenderer7=p.projectionType===c("VideoProjection").CDS_BARREL;this.$SphericalRenderer23.framebuffer=null;this.$SphericalRenderer24=false;this.$SphericalRenderer27()};n.prototype.hasRenderingContext=function(){"use strict";return!this.$SphericalRenderer3};n.prototype.$SphericalRenderer25=function(o){"use strict";o.preventDefault();this.emit("renderingContextLost");this.$SphericalRenderer3=true};n.prototype.$SphericalRenderer26=function(o){"use strict";this.$SphericalRenderer3=false;this.$SphericalRenderer27();this.emit("renderingContextRestore")};n.prototype.setAutoUpdateTexture=function(o){"use strict";this.$SphericalRenderer16=o};n.prototype.updateFieldOfView=function(o){"use strict";if(this.$SphericalRenderer21!==o){this.$SphericalRenderer21=o;this.$SphericalRenderer28()}};n.prototype.updateViewportDimensions=function(o,p){"use strict";this.$SphericalRenderer1.width=o*l;this.$SphericalRenderer1.height=p*l;this.$SphericalRenderer28()};n.prototype.$SphericalRenderer28=function(){"use strict";k.perspective(this.$SphericalRenderer10,j.toRadian(this.$SphericalRenderer21),this.$SphericalRenderer1.width/this.$SphericalRenderer1.height,.1,100);this.$SphericalRenderer6.viewport(0,0,this.$SphericalRenderer6.drawingBufferWidth,this.$SphericalRenderer6.drawingBufferHeight)};n.prototype.$SphericalRenderer27=function(){"use strict";__p&&__p();this.$SphericalRenderer29();if(this.$SphericalRenderer7){var o=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_VERTEX_TEXTURE_IMAGE_UNITS);this.$SphericalRenderer8=o==0}this.updateViewportDimensions(this.$SphericalRenderer1.clientWidth,this.$SphericalRenderer1.clientHeight);this.$SphericalRenderer22={x:this.$SphericalRenderer2.stereoFormat===c("VideoStereoFormat").LEFT_RIGHT?2:1,y:this.$SphericalRenderer2.stereoFormat===c("VideoStereoFormat").TOP_BOTTOM?2:1};this.$SphericalRenderer30();this.$SphericalRenderer31();this.$SphericalRenderer6.clearColor(0,0,0,1);this.$SphericalRenderer15.setAttribute("crossorigin","anonymous")};n.prototype.getScreenshotDataURL=function(o,p,q,r){"use strict";if(!this.$SphericalRenderer6||this.$SphericalRenderer3)return"";this.render(o,p);return this.$SphericalRenderer1.toDataURL(q,r)};n.prototype.$SphericalRenderer29=function(){"use strict";__p&&__p();if(this.$SphericalRenderer6&&!this.$SphericalRenderer3)return;if(!(b.WebGLRenderingContext||b.WebGL2RenderingContext))throw new Error("WebGLRenderingContext not available.");var o=["webgl2","webgl","experimental-webgl"],p=null,q=null,r=c("EventListener").listen(this.$SphericalRenderer1,"webglcontextcreationerror",function(t){return q=t.statusMessage});for(var s=0;s<o.length;s++){try{p=this.$SphericalRenderer1.getContext(o[s])}catch(t){}if(p)break}r.remove();if(!p){if(!q)q="Unknown error.";throw new Error("Failed to acquire 3D rendering context: "+q)}this.$SphericalRenderer6=p;this.$SphericalRenderer3=false};n.prototype.$SphericalRenderer30=function(){"use strict";var o=this.$SphericalRenderer32(),p=this.$SphericalRenderer33();this.$SphericalRenderer14=this.$SphericalRenderer6.createProgram();this.$SphericalRenderer6.attachShader(this.$SphericalRenderer14,o);this.$SphericalRenderer6.attachShader(this.$SphericalRenderer14,p);this.$SphericalRenderer6.linkProgram(this.$SphericalRenderer14)};n.prototype.$SphericalRenderer34=function(){"use strict";__p&&__p();if(!this.$SphericalRenderer6.getProgramParameter(this.$SphericalRenderer14,this.$SphericalRenderer6.LINK_STATUS)){var o="",p=this.$SphericalRenderer6.getAttachedShaders(this.$SphericalRenderer14);for(var q=0;q<p.length;q++)if(!this.$SphericalRenderer6.getShaderParameter(p[q],this.$SphericalRenderer6.COMPILE_STATUS)){o="Shader error: "+this.$SphericalRenderer6.getShaderInfoLog(p[q]);break}if(o==="")o="Program link error: "+this.$SphericalRenderer6.getProgramInfoLog(this.$SphericalRenderer14);throw new Error(o)}this.$SphericalRenderer6.useProgram(this.$SphericalRenderer14);this.$SphericalRenderer14.vertexPositionAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer14,"aVertexPosition");this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer14.vertexPositionAttribute);this.$SphericalRenderer14.pMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,"uPMatrix");this.$SphericalRenderer14.mvMatrixUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,"uMVMatrix");this.$SphericalRenderer14.samplerUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,"uSampler");if(!this.$SphericalRenderer17&&!this.$SphericalRenderer7){this.$SphericalRenderer14.textureCoordAttribute=this.$SphericalRenderer6.getAttribLocation(this.$SphericalRenderer14,"aTextureCoord");this.$SphericalRenderer6.enableVertexAttribArray(this.$SphericalRenderer14.textureCoordAttribute)}if(this.$SphericalRenderer8)this.$SphericalRenderer14.offsetUniform=this.$SphericalRenderer6.getUniformLocation(this.$SphericalRenderer14,"uOffset");this.$SphericalRenderer24=true};n.prototype.$SphericalRenderer31=function(){"use strict";this.$SphericalRenderer13=this.$SphericalRenderer6.createTexture();this.$SphericalRenderer13.image=this.$SphericalRenderer15;var o=this.$SphericalRenderer17?this.$SphericalRenderer6.TEXTURE_CUBE_MAP:this.$SphericalRenderer6.TEXTURE_2D;this.$SphericalRenderer6.bindTexture(o,this.$SphericalRenderer13);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_MAG_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_MIN_FILTER,this.$SphericalRenderer6.LINEAR);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_WRAP_S,this.$SphericalRenderer6.CLAMP_TO_EDGE);this.$SphericalRenderer6.texParameteri(o,this.$SphericalRenderer6.TEXTURE_WRAP_T,this.$SphericalRenderer6.CLAMP_TO_EDGE)};n.prototype.$SphericalRenderer35=function(o){__p&&__p();var p=arguments.length<=1||arguments[1]===undefined?30:arguments[1],q=arguments.length<=2||arguments[2]===undefined?30:arguments[2],r=arguments.length<=3||arguments[3]===undefined?Math.PI:arguments[3],s=arguments.length<=4||arguments[4]===undefined?Math.PI*2:arguments[4],t=arguments.length<=5||arguments[5]===undefined?0:arguments[5];"use strict";var u=2,v=[],w=[],x,y;for(x=0;x<=p;x++){var z=(x/p-.5)*r,A=Math.sin(z),B=Math.cos(z);for(y=0;y<=q;y++){var C=(y/q-.5)*s+t,D=Math.sin(C),E=Math.cos(C),F=E*B,G=A,H=D*B,I=y/q/this.$SphericalRenderer22.x,J=x/p/this.$SphericalRenderer22.y;w.push(I);w.push(J);v.push(u*F);v.push(u*G);v.push(u*H)}}var K=[];for(x=0;x<p;x++)for(y=0;y<q;y++){var L=x*(q+1)+y,M=L+q+1;K.push(L);K.push(M);K.push(L+1);K.push(M);K.push(M+1);K.push(L+1)}this.$SphericalRenderer18[o]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[o]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(w),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer18[o].itemSize=2;this.$SphericalRenderer18[o].numItems=w.length/2;this.$SphericalRenderer20=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(v),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer20){this.$SphericalRenderer20.itemSize=3;this.$SphericalRenderer20.numItems=v.length/3}this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(K),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=1;this.$SphericalRenderer19.numItems=K.length}};n.prototype.$SphericalRenderer36=function(o,p){"use strict";__p&&__p();var q=40,r=60,s=2,t=[],u=[],v=[],w=[],x,y;for(x=0;x<=q;x++){var z=x/q-.5,A=z*.5*Math.PI,B=Math.sin(A),C=Math.cos(A),D=(z/o+.5)/this.$SphericalRenderer22.y;for(y=0;y<=r;y++){var E=y/r-.5,F=E*2*Math.PI,G=Math.sin(F),H=Math.cos(F),I=H*C*s,J=B*s,K=G*C*s,L=(E/o*.8+.4)/this.$SphericalRenderer22.x;u.push(L);u.push(D);t.push(I);t.push(J);t.push(K);if(x==0||x==q){var M=Math.sign(1-x),N=(G*.1/o+.9)/this.$SphericalRenderer22.x,O=(H*.25*M/o+.5+z*.5)/this.$SphericalRenderer22.y;w.push(N);w.push(O);v.push(I);v.push(J);v.push(K)}}}var P=t.length/3;u.push.apply(u,w);t.push.apply(t,v);var Q=t.length/3,R=Math.sin(Math.PI*.25)*s;u.push(.9/this.$SphericalRenderer22.x);u.push(.25/this.$SphericalRenderer22.y);t.push(0);t.push(-R);t.push(0);u.push(.9/this.$SphericalRenderer22.x);u.push(.75/this.$SphericalRenderer22.y);t.push(0);t.push(R);t.push(0);var S=[];for(x=0;x<q;x++)for(y=0;y<r;y++){var T=x*(r+1)+y,U=T+r+1;S.push(T);S.push(U);S.push(T+1);S.push(U);S.push(U+1);S.push(T+1)}for(var V=0;V<2;V++)for(y=0;y<r;y++){S.push(y+P+V*(r+1));S.push(y+P+V*(r+1)+1);S.push(Q+V)}this.$SphericalRenderer18[p]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[p]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(u),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer18[p].itemSize=2;this.$SphericalRenderer18[p].numItems=u.length/2;this.$SphericalRenderer20=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(t),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer20){this.$SphericalRenderer20.itemSize=3;this.$SphericalRenderer20.numItems=t.length/3}this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(S),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=1;this.$SphericalRenderer19.numItems=S.length}};n.prototype.$SphericalRenderer37=function(o,p,q){"use strict";__p&&__p();var r;if(this.$SphericalRenderer9)r=[1,3,7,5,6,7,3,2,0,2,3,1,4,5,7,6,4,6,2,0,0,1,5,4];else r=[5,1,3,7,0,4,6,2,6,7,3,2,0,1,5,4,4,5,7,6,1,0,2,3];var s=[];for(var t=0;t<r.length;t++){var u=r[t]>>2&1,v=r[t]>>1&1,w=r[t]>>0&1;s.push(u*2-1);s.push(v*2-1);s.push(w*2-1)}this.$SphericalRenderer20=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(s),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer20){this.$SphericalRenderer20.itemSize=3;this.$SphericalRenderer20.numItems=s.length/3}if(!this.$SphericalRenderer17){var x,y,z,A,B,C=[];if(this.$SphericalRenderer9){var D=this.$SphericalRenderer13.image.videoWidth/2;p=D/(Math.floor(D/32)*32);z=(1-1/p)/2;x=3;y=2;A=1/y;B=1/x}else{z=(1-1/p)/2;x=2;y=3;A=1/y;B=1/x}for(var E=0;E<x;++E)for(var F=0;F<y;++F){var G=x-1-E,H=F;C.push((H+z)*A);C.push((G+z)*B);C.push((H+1-z)*A);C.push((G+z)*B);C.push((H+1-z)*A);C.push((G+1-z)*B);C.push((H+z)*A);C.push((G+1-z)*B)}this.$SphericalRenderer18[q]=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[q]);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ARRAY_BUFFER,new Float32Array(C),this.$SphericalRenderer6.STATIC_DRAW);this.$SphericalRenderer18[q].itemSize=2;this.$SphericalRenderer18[q].numItems=C.length/2}var I=[];for(var J=0;J<r.length;J+=4){I.push(J);I.push(J+2);I.push(J+1);I.push(J);I.push(J+3);I.push(J+2)}this.$SphericalRenderer19=this.$SphericalRenderer6.createBuffer();this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.bufferData(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,new Uint16Array(I),this.$SphericalRenderer6.STATIC_DRAW);if(this.$SphericalRenderer19){this.$SphericalRenderer19.itemSize=1;this.$SphericalRenderer19.numItems=I.length}};n.prototype.$SphericalRenderer32=function(){"use strict";var o=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.VERTEX_SHADER),p="\n      attribute vec3 aVertexPosition;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec3 vVertexDirectionVector;\n\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vVertexDirectionVector = aVertexPosition;\n      }\n    ",q="\n      attribute vec3 aVertexPosition;\n      attribute vec2 aTextureCoord;\n\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec2 vTextureCoord;\n\n      void main(void) {\n        gl_Position = uPMatrix * uMVMatrix * vec4(aVertexPosition, 1.0);\n        vTextureCoord = aTextureCoord;\n      }\n    ",r="\n      attribute vec3 aVertexPosition;\n\n      uniform sampler2D uSampler;\n      // It's actually inverse MV matrix\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n      varying highp vec2 vOffset;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      highp float calculateOffset(highp float offset[19])\n      {\n        highp float sig =  -2.0 * offset[18] + 1.0;\n        highp float e = -127.0\n          + offset[10]\n          + offset[11] * 2.0\n          + offset[12] * 4.0\n          + offset[13] * 8.0\n          + offset[14] * 16.0\n          + offset[15] * 32.0\n          + offset[16] * 64.0\n          + offset[17] * 128.0;\n\n        highp float v = 1.0\n          + offset[9] * 0.5\n          + offset[8] * 0.25\n          + offset[7] * 0.125\n          + offset[6] * 0.0625\n          + offset[5] * 0.03125\n          + offset[4] * 0.015625\n          + offset[3] * 0.0078125\n          + offset[2] * 0.00390625\n          + offset[1] * 0.001953125\n          + offset[0] * 0.0009765625;\n\n        return sig * v * pow(2.0, e);\n      }\n\n      highp vec4 extractFromSample(highp vec4 c)\n      {\n        highp float minC = min(0.5, min(c.r, min(c.g, c.b)));\n        highp float diffC = max(0.5, max(c.r, max(c.g, c.b))) - minC + 0.001;\n        return step(0.5, (c - minC) / diffC);\n      }\n\n      highp vec2 parseOffset()\n      {\n        highp float offsetX[19], offsetZ[19];\n        highp vec4 c;\n        highp float minC, diffC;\n\n        c = extractFromSample(texture2D(uSampler, vec2(0.396, 1.0)));\n        offsetX[0] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.404, 1.0)));\n        offsetX[1] = c.b;\n        offsetX[2] = c.g;\n        offsetX[3] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.412, 1.0)));\n        offsetX[4] = c.b;\n        offsetX[5] = c.g;\n        offsetX[6] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.420, 1.0)));\n        offsetX[7] = c.b;\n        offsetX[8] = c.g;\n        offsetX[9] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.428, 1.0)));\n        offsetX[10] = c.b;\n        offsetX[11] = c.g;\n        offsetX[12] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.436, 1.0)));\n        offsetX[13] = c.b;\n        offsetX[14] = c.g;\n        offsetX[15] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.444, 1.0)));\n        offsetX[16] = c.b;\n        offsetX[17] = c.g;\n        offsetX[18] = c.r;\n\n        c = extractFromSample(texture2D(uSampler, vec2(0.572, 1.0)));\n        offsetZ[0] = c.b;\n        offsetZ[1] = c.g;\n        offsetZ[2] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.580, 1.0)));\n        offsetZ[3] = c.b;\n        offsetZ[4] = c.g;\n        offsetZ[5] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.588, 1.0)));\n        offsetZ[6] = c.b;\n        offsetZ[7] = c.g;\n        offsetZ[8] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.596, 1.0)));\n        offsetZ[9] = c.b;\n        offsetZ[10] = c.g;\n        offsetZ[11] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.604, 1.0)));\n        offsetZ[12] = c.b;\n        offsetZ[13] = c.g;\n        offsetZ[14] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.612, 1.0)));\n        offsetZ[15] = c.b;\n        offsetZ[16] = c.g;\n        offsetZ[17] = c.r;\n        c = extractFromSample(texture2D(uSampler, vec2(0.620, 1.0)));\n        offsetZ[18] = c.b;\n\n        return vec2(calculateOffset(offsetX), -calculateOffset(offsetZ));\n      }\n\n      const float eps = 0.03;\n\n      void main(void) {\n        gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n        vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n        highp vec3 v = normalize( vPos );\n        vOffset = parseOffset();\n        highp float d = length( v.xz );\n        highp vec2 t = normalize(v.xz / d + vOffset) * d;\n        v = vec3(t.x, v.y, t.y);\n        vRecompute = 0.0;\n        if ( abs(v.y) < 0.707106781 ) {\n          vTextureCoord = EquirectPart( v );\n          vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n              vTextureCoord.x > 0.8 - eps * 0.5 );\n        } else {\n          vTextureCoord = FacePart( v );\n          vRecompute += float( abs(v.y) > 1.0 - eps );\n        }\n        vRecompute += float( abs(v.y) < 0.707106781 + eps &&\n            abs(v.y) > 0.707106781 - eps );\n      }\n    ",s="\n      attribute vec3 aVertexPosition;\n\n      uniform sampler2D uSampler;\n      // It's actually inverse MV matrix\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n      varying highp vec2 vOffset;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      highp vec4 extractFromSample(highp vec4 c)\n      {\n        highp float minC = min(0.5, min(c.r, min(c.g, c.b)));\n        highp float diffC = max(0.5, max(c.r, max(c.g, c.b))) - minC + 0.001;\n        return step(0.5, (c - minC) / diffC);\n      }\n\n      highp vec2 parseOffset()\n      {\n        highp float calculated_offsetX, calculated_offsetZ;\n        highp float offset_v, offset_e, offset_sig; // temp variables\n        highp vec4 texCoordsX[7], texCoordsZ[7]; // constants\n\n        texCoordsX[0] = extractFromSample(texture2D(uSampler, vec2(0.396, 1.0)));\n        texCoordsX[1] = extractFromSample(texture2D(uSampler, vec2(0.404, 1.0)));\n        texCoordsX[2] = extractFromSample(texture2D(uSampler, vec2(0.412, 1.0)));\n        texCoordsX[3] = extractFromSample(texture2D(uSampler, vec2(0.420, 1.0)));\n        texCoordsX[4] = extractFromSample(texture2D(uSampler, vec2(0.428, 1.0)));\n        texCoordsX[5] = extractFromSample(texture2D(uSampler, vec2(0.436, 1.0)));\n        texCoordsX[6] = extractFromSample(texture2D(uSampler, vec2(0.444, 1.0)));\n\n        offset_v = texCoordsX[0].r * 0.0009765625\n          + dot(texCoordsX[1].bgr, vec3(0.001953125, 0.00390625, 0.0078125))\n          + dot(texCoordsX[2].bgr, vec3(0.015625, 0.03125, 0.0625))\n          + dot(texCoordsX[3].bgr, vec3(0.125, 0.25, 0.5))\n          + 1.0;\n\n        offset_e = dot(texCoordsX[4].bgr, vec3(1.0, 2.0, 4.0))\n          + dot(texCoordsX[5].bgr, vec3(8.0, 16.0, 32.0))\n          + dot(texCoordsX[6].bg, vec2(64.0, 128.0))\n          - 127.0;\n\n        offset_sig = -2.0 * texCoordsX[6].r + 1.0;\n        calculated_offsetX = offset_sig * offset_v * pow(2.0, offset_e);\n\n\n        texCoordsZ[0] = extractFromSample(texture2D(uSampler, vec2(0.572, 1.0)));\n        texCoordsZ[1] = extractFromSample(texture2D(uSampler, vec2(0.580, 1.0)));\n        texCoordsZ[2] = extractFromSample(texture2D(uSampler, vec2(0.588, 1.0)));\n        texCoordsZ[3] = extractFromSample(texture2D(uSampler, vec2(0.596, 1.0)));\n        texCoordsZ[4] = extractFromSample(texture2D(uSampler, vec2(0.604, 1.0)));\n        texCoordsZ[5] = extractFromSample(texture2D(uSampler, vec2(0.612, 1.0)));\n        texCoordsZ[6] = extractFromSample(texture2D(uSampler, vec2(0.620, 1.0)));\n\n        offset_v = dot(texCoordsZ[0].bgr, vec3(0.0009765625, 0.001953125, 0.00390625))\n          + dot(texCoordsZ[1].bgr, vec3(0.0078125, 0.015625, 0.03125))\n          + dot(texCoordsZ[2].bgr, vec3(0.0625, 0.125, 0.25))\n          + texCoordsZ[3].b * 0.5\n          + 1.0;\n\n        offset_e = dot(texCoordsZ[3].gr, vec2(1.0, 2.0))\n          + dot(texCoordsZ[4].bgr, vec3(4.0, 8.0, 16.0))\n          + dot(texCoordsZ[5].bgr, vec3(32.0, 64.0, 128.0))\n          - 127.0;\n\n        offset_sig = 2.0 * texCoordsZ[6].b - 1.0;\n        calculated_offsetZ = offset_sig * offset_v * pow(2.0, offset_e);\n\n        return vec2(calculated_offsetX, calculated_offsetZ);\n      }\n\n      const float eps = 0.03;\n\n      void main(void) {\n        gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n        vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n        highp vec3 v = normalize( vPos );\n        vOffset = parseOffset();\n        highp float d = length( v.xz );\n        highp vec2 t = normalize(v.xz / d + vOffset) * d;\n        v.xz = t.xy;\n        vRecompute = 0.0;\n        highp float abs_vy = abs(v.y);\n        if ( abs_vy < 0.707106781 ) {\n          vTextureCoord = EquirectPart( v );\n          vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n              vTextureCoord.x > 0.8 - eps * 0.5 );\n        } else {\n          vTextureCoord = FacePart( v );\n          vRecompute += float( abs_vy > 1.0 - eps );\n        }\n        vRecompute += float( abs_vy < 0.707106781 + eps &&\n            abs_vy > 0.707106781 - eps );\n      }\n    ",t=c("gkx")("AT73kvJgjKMnumznH4av8YzVN25V2PEtu4Y2aMusJtPLGMxgQ6kD-_sQC8oQsXMzMb9gse6Q9ZPW1vyTdU3MNCo6DIYu0Aue01yfPXIRECrTbQ")?s:r,u="\n      attribute vec3 aVertexPosition;\n\n      // It's actually inverse MV matrix\n      uniform mat4 uMVMatrix;\n      uniform mat4 uPMatrix;\n      uniform highp vec2 uOffset;\n\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      const float eps = 0.03;\n\n      void main(void) {\n        gl_Position = uPMatrix * vec4(aVertexPosition, 1.0);\n        vPos = (uMVMatrix * vec4(aVertexPosition, 1.0)).xyz;\n        highp vec3 v = normalize( vPos );\n        highp float d = length( v.xz );\n        highp vec2 t = normalize(v.xz / d + uOffset) * d;\n        v = vec3(t.x, v.y, t.y);\n        vRecompute = 0.0;\n        if ( abs(v.y) < 0.707106781 ) {\n          vTextureCoord = EquirectPart( v );\n          vRecompute += float( vTextureCoord.x < eps * 0.5 ||\n              vTextureCoord.x > 0.8 - eps * 0.5 );\n        } else {\n          vTextureCoord = FacePart( v );\n          vRecompute += float( abs(v.y) > 1.0 - eps );\n        }\n        vRecompute += float( abs(v.y) < 0.707106781 + eps &&\n            abs(v.y) > 0.707106781 - eps );\n      }\n    ",v=this.$SphericalRenderer7?this.$SphericalRenderer8?u:t:this.$SphericalRenderer17?p:q;this.$SphericalRenderer6.shaderSource(o,v);this.$SphericalRenderer6.compileShader(o);return o};n.prototype.$SphericalRenderer33=function(){"use strict";var o=this.$SphericalRenderer6.createShader(this.$SphericalRenderer6.FRAGMENT_SHADER),p="\n      varying highp vec3 vVertexDirectionVector;\n      uniform samplerCube uSampler;\n\n      void main(void) {\n        gl_FragColor = textureCube(uSampler, vVertexDirectionVector);\n      }\n    ",q="\n      varying highp vec2 vTextureCoord;\n\n      uniform sampler2D uSampler;\n\n      void main(void) {\n        gl_FragColor = texture2D(\n          uSampler,\n          vec2(vTextureCoord.s, vTextureCoord.t)\n        );\n      }\n    ",r="\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n      varying highp vec2 vOffset;\n\n      uniform sampler2D uSampler;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      void main()\n      {\n        if (vRecompute > 0.0) {\n          highp vec3 v = normalize( vPos );\n          highp float d = length( v.xz );\n          highp vec2 t = normalize(v.xz / d + vOffset) * d;\n          v = vec3(t.x, v.y, t.y);\n          highp vec2 o;\n          if ( abs(v.y) < 0.707106781 ) {\n            o = EquirectPart( v );\n          } else {\n            o = FacePart( v );\n          }\n          gl_FragColor = texture2D( uSampler, o );\n        } else {\n          gl_FragColor = texture2D( uSampler, vTextureCoord );\n        }\n      }\n    ",s="\n      varying highp vec2 vTextureCoord;\n      varying highp vec3 vPos;\n      varying lowp float vRecompute;\n\n      uniform highp vec2 uOffset;\n      uniform sampler2D uSampler;\n\n      highp vec2 EquirectPart( highp vec3 p )\n      {\n        highp float xz = sqrt( p.x * p.x + p.z * p.z );\n        highp float lat = -atan( p.y, xz );\n        highp float t = lat / 1.57079633 / 1.01 + 0.5;\n        highp float s = atan( p.x, -p.z ) / 1.01 / (2.5 * 3.1415927) + 0.4;\n        highp vec2 st = vec2(s, t);\n        return st;\n      }\n\n      highp vec2 FacePart( highp vec3 p )\n      {\n          highp vec2 t = p.xz / p.y;\n          highp float s = sign(p.y);\n          return vec2(0.9 + t.x * s * 0.099009901,\n              0.5 - s * 0.25 - t.y * 0.247524752);\n      }\n\n      void main()\n      {\n        if (vRecompute > 0.0) {\n          highp vec3 v = normalize( vPos );\n          highp float d = length( v.xz );\n          highp vec2 t = normalize(v.xz / d + uOffset) * d;\n          v = vec3(t.x, v.y, t.y);\n          highp vec2 o;\n          if ( abs(v.y) < 0.707106781 ) {\n            o = EquirectPart( v );\n          } else {\n            o = FacePart( v );\n          }\n          gl_FragColor = texture2D( uSampler, o );\n        } else {\n          gl_FragColor = texture2D( uSampler, vTextureCoord );\n        }\n      }\n    ",t=this.$SphericalRenderer7?this.$SphericalRenderer8?s:r:this.$SphericalRenderer17?p:q;this.$SphericalRenderer6.shaderSource(o,t);this.$SphericalRenderer6.compileShader(o);return o};n.prototype.$SphericalRenderer38=function(){"use strict";this.$SphericalRenderer23.framebuffer=this.$SphericalRenderer6.createFramebuffer();this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer23.framebuffer);this.$SphericalRenderer6.framebufferTexture2D(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer6.COLOR_ATTACHMENT0,this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer13,0);this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,null)};n.prototype.$SphericalRenderer39=function(){"use strict";this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,this.$SphericalRenderer23.framebuffer);this.$SphericalRenderer6.readPixels(0,this.$SphericalRenderer13.image.videoHeight-1,this.$SphericalRenderer13.image.videoWidth,1,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer23.pixels);this.$SphericalRenderer6.bindFramebuffer(this.$SphericalRenderer6.FRAMEBUFFER,null)};n.prototype.$SphericalRenderer40=function(){"use strict";__p&&__p();this.$SphericalRenderer23.bitmask.fill(0);var o=[0,0,0],p=this.$SphericalRenderer13.image.videoWidth/125,q=Math.round(p),r;for(r=0;r<33;++r){var s=Math.floor((45+r)*p)*4,t=128,u=127;for(var v=0;v<3;++v){o[v]=0;for(var w=0;w<q;++w)o[v]+=this.$SphericalRenderer23.pixels[s+w*4+(2-v)];o[v]/=q;t=Math.max(t,o[v]);u=Math.min(u,o[v])}for(v=0;v<3;++v){var x=(o[v]-u)/(t-u);this.$SphericalRenderer23.bitmask[r*3+v]=x>.5?1:0}}for(r=0;r<12;++r){var y=0;for(var z=0;z<8;++z)y+=this.$SphericalRenderer23.bitmask[1+r*8+z]*Math.pow(2,z);this.$SphericalRenderer23.dataView.setUint8(r,y)}this.$SphericalRenderer23.offsetX=this.$SphericalRenderer23.dataView.getFloat32(0,true);this.$SphericalRenderer23.offsetZ=-this.$SphericalRenderer23.dataView.getFloat32(8,true)};n.prototype.$SphericalRenderer41=function(){"use strict";__p&&__p();try{if(!this.$SphericalRenderer23.ready){this.$SphericalRenderer23.pixels=new Uint8Array(3840*4);this.$SphericalRenderer23.bitmask=new Uint8Array(33*3);this.$SphericalRenderer23.dataView=new DataView(new ArrayBuffer(12));this.$SphericalRenderer23.ready=true}if(!this.$SphericalRenderer23.framebuffer)this.$SphericalRenderer38();this.$SphericalRenderer39();this.$SphericalRenderer40()}catch(o){this.emit("renderingError",o)}};n.prototype.$SphericalRenderer42=function(){"use strict";__p&&__p();if(this.$SphericalRenderer17)this.$SphericalRenderer43();else{this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_2D,this.$SphericalRenderer13);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,!this.$SphericalRenderer7);try{this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_2D,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,this.$SphericalRenderer13.image)}catch(o){this.emit("renderingError",o)}if(this.$SphericalRenderer8)this.$SphericalRenderer41()}};n.prototype.renderWithRotationMatrix=function(o){"use strict";if(this.$SphericalRenderer3)return;if(this.$SphericalRenderer16)this.$SphericalRenderer42();this.$SphericalRenderer11=o;if(this.$SphericalRenderer7)k.rotateY(this.$SphericalRenderer11,this.$SphericalRenderer11,j.toRadian(-90));this.$SphericalRenderer44()};n.prototype.render=function(o,p){"use strict";__p&&__p();if(this.$SphericalRenderer3)return;if(this.$SphericalRenderer16)this.$SphericalRenderer42();if(this.$SphericalRenderer9){k.identity(this.$SphericalRenderer11);k.rotateX(this.$SphericalRenderer11,this.$SphericalRenderer11,j.toRadian(-p));k.rotateY(this.$SphericalRenderer11,this.$SphericalRenderer11,j.toRadian(o-135));k.rotateZ(this.$SphericalRenderer11,this.$SphericalRenderer11,j.toRadian(45))}else{if(this.$SphericalRenderer7)o-=90;k.identity(this.$SphericalRenderer11);k.rotateX(this.$SphericalRenderer11,this.$SphericalRenderer11,-j.toRadian(p));k.rotateY(this.$SphericalRenderer11,this.$SphericalRenderer11,j.toRadian(o))}this.$SphericalRenderer44()};n.prototype.$SphericalRenderer44=function(){"use strict";__p&&__p();if(this.$SphericalRenderer17){if(this.$SphericalRenderer20===null)this.$SphericalRenderer37(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,0)}else{if(!this.$SphericalRenderer24){this.$SphericalRenderer34();this.$SphericalRenderer6.activeTexture(this.$SphericalRenderer6.TEXTURE0)}var o=this.$SphericalRenderer13.image.videoWidth;if(this.$SphericalRenderer2.projectionType===c("VideoProjection").CUBEMAP||this.$SphericalRenderer2.projectionType===c("VideoProjection").ROTATED_CUBEMAP){if(!(o in this.$SphericalRenderer18))this.$SphericalRenderer37(this.$SphericalRenderer2.projectionType,this.$SphericalRenderer2.expansionCoef||0,o)}else if(this.$SphericalRenderer2.projectionType===c("VideoProjection").BARREL){if(!(o in this.$SphericalRenderer18))this.$SphericalRenderer36(this.$SphericalRenderer2.expansionCoef||1.01,o)}else if(this.$SphericalRenderer7){if(!(o in this.$SphericalRenderer18))this.$SphericalRenderer35(o,40,40,Math.PI/180*111,Math.PI/180*142,-Math.PI/2)}else if(!(o in this.$SphericalRenderer18))this.$SphericalRenderer35(o);if(!this.$SphericalRenderer7){this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer18[o]);this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer14.textureCoordAttribute,this.$SphericalRenderer18[o].itemSize,this.$SphericalRenderer6.FLOAT,false,0,0)}}this.$SphericalRenderer6.uniform1i(this.$SphericalRenderer14.samplerUniform,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ARRAY_BUFFER,this.$SphericalRenderer20);if(this.$SphericalRenderer20)this.$SphericalRenderer6.vertexAttribPointer(this.$SphericalRenderer14.vertexPositionAttribute,this.$SphericalRenderer20.itemSize,this.$SphericalRenderer6.FLOAT,false,0,0);this.$SphericalRenderer6.bindBuffer(this.$SphericalRenderer6.ELEMENT_ARRAY_BUFFER,this.$SphericalRenderer19);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer14.pMatrixUniform,false,this.$SphericalRenderer10);if(this.$SphericalRenderer7){k.invert(this.$SphericalRenderer12,this.$SphericalRenderer11);this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer14.mvMatrixUniform,false,this.$SphericalRenderer12);if(this.$SphericalRenderer8)this.$SphericalRenderer6.uniform2f(this.$SphericalRenderer14.offsetUniform,this.$SphericalRenderer23.offsetX,this.$SphericalRenderer23.offsetZ)}else this.$SphericalRenderer6.uniformMatrix4fv(this.$SphericalRenderer14.mvMatrixUniform,false,this.$SphericalRenderer11);if(this.$SphericalRenderer19)this.$SphericalRenderer6.drawElements(this.$SphericalRenderer6.TRIANGLES,this.$SphericalRenderer19.numItems,this.$SphericalRenderer6.UNSIGNED_SHORT,0)};n.prototype.$SphericalRenderer45=function(){"use strict";var o=this.$SphericalRenderer6.getParameter(this.$SphericalRenderer6.MAX_CUBE_MAP_TEXTURE_SIZE),p=this.$SphericalRenderer13.image.width;return Math.min(o,p)};n.prototype.$SphericalRenderer43=function(){"use strict";var o=this.$SphericalRenderer45(),p=this.$SphericalRenderer13.image.width,q=c("DOM").create("canvas",{width:o,height:o}),r=q.getContext("2d");this.$SphericalRenderer6.bindTexture(this.$SphericalRenderer6.TEXTURE_CUBE_MAP,this.$SphericalRenderer13);this.$SphericalRenderer6.pixelStorei(this.$SphericalRenderer6.UNPACK_FLIP_Y_WEBGL,false);for(var s=0;s<6;s++){r.drawImage(this.$SphericalRenderer13.image,0,s*p,p,p,0,0,o,o);var t=new Uint8Array(r.getImageData(0,0,o,o).data);this.$SphericalRenderer6.texImage2D(this.$SphericalRenderer6.TEXTURE_CUBE_MAP_POSITIVE_X+s,0,this.$SphericalRenderer6.RGBA,o,o,0,this.$SphericalRenderer6.RGBA,this.$SphericalRenderer6.UNSIGNED_BYTE,t)}};f.exports=n}),null);
__d("SphericalVideoPlayer",["cx","invariant","Arbiter","Banzai","CSS","DOM","DOMDimensions","Event","FullScreen","SphericalVideoExperiments","SphericalVideoPerformanceTracker","QE2Logger","SphericalMediaCanvasPool","SphericalParallaxUtils","SphericalVideoComponentActions","SphericalVideoPlayerEvents","SphericalViewportControl","SphericalVideoComponentDispatcher","SubscriptionsHandler","SphericalRenderer","VideoPlayerFallbackEvents","VideoPlayerLoggerEvent","VideoPlayerLoggerSource","VideoPlayerReason","VideoPlayerReasonTransitionHelper","VideoPlayerStates","forwardEvent","getElementRect","gkx","requestAnimationFrame","uniqueID","getFullScreenElement","onViewportChanged","getViewportDimensions","SphericalViewportControlStore","VideoPlayerControllerStore"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=c("SphericalParallaxUtils").calculateYawOffset,k="SphericalVideoPlayer",l=2,m=1e3,n=32,o="www_videos_spherical_zoom",p="www_videos_spherical_parallax",q=.8,r=16,s=15,t=q/r/s,u=50,v=.1;c("SphericalMediaCanvasPool").setLimit(l,k);function w(x,y){__p&&__p();this.$SphericalVideoPlayer45=function(){__p&&__p();var z=!!this.$SphericalVideoPlayer1.getOption("VideoWithSphericalGuide","auto");if(this.$SphericalVideoPlayer1.getSource()!==c("VideoPlayerLoggerSource").INLINE||z)return;var A=this.$SphericalVideoPlayer52();if(A===null)return;typeof A==="number"||i(0);this.$SphericalVideoPlayer25=A;if(this.$SphericalVideoPlayer28){this.$SphericalVideoPlayer23=this.$SphericalVideoPlayer12.getOrientation().x-this.$SphericalVideoPlayer25;this.$SphericalVideoPlayer24=this.$SphericalVideoPlayer25;this.$SphericalVideoPlayer28=false}}.bind(this);this.$SphericalVideoPlayer47=function(){if(!this.$SphericalVideoPlayer1.isState(c("VideoPlayerStates").PAUSED))this.$SphericalVideoPlayer1.pause(c("VideoPlayerReason").SPHERICAL_SWITCH_CANVAS);this.$SphericalVideoPlayer54();this.$SphericalVideoPlayer43()}.bind(this);this.$SphericalVideoPlayer51=function(z){__p&&__p();if(!this.$SphericalVideoPlayer13)return;var A=this.$SphericalVideoPlayer13,B=this.$SphericalVideoPlayer29?z-this.$SphericalVideoPlayer29:0,C=this.$SphericalVideoPlayer53(B);if(C)this.$SphericalVideoPlayer35(this.$SphericalVideoPlayer23+this.$SphericalVideoPlayer24,null);if(this.$SphericalVideoPlayer2.readyState>=this.$SphericalVideoPlayer2.HAVE_CURRENT_DATA&&(this.$SphericalVideoPlayer41()||this.$SphericalVideoPlayer7||C)){c("SphericalVideoPerformanceTracker").get().setProjection(this.$SphericalVideoPlayer10.projectionType).addFrameAtTime(z);this.$SphericalVideoPlayer7=false;var D=this.$SphericalVideoPlayer12.getOrientation();A.render(D.x+90,D.y);if(this.$SphericalVideoPlayer15&&!c("gkx")("AT7g-6wUL2l3zqcle9L4ueRfS4fZ17IYQrLCkC75DrI9esnQVViFHEDra2QwMrprOv35vnNmRWRvnhgMQesRQwul")){this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=null}}this.$SphericalVideoPlayer29=z;c("requestAnimationFrame")(this.$SphericalVideoPlayer51)}.bind(this);this.$SphericalVideoPlayer32=function(z,A){this.$SphericalVideoPlayer12.setRelativeSphericalOrientation(z,A)}.bind(this);this.$SphericalVideoPlayer35=function(z,A){this.$SphericalVideoPlayer12.setSphericalOrientation(z,A)}.bind(this);this.$SphericalVideoPlayer36=function(z){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer13.updateFieldOfView(z);this.$SphericalVideoPlayer12.setFieldOfView(z);this.$SphericalVideoPlayer19=z;this.$SphericalVideoPlayer31()}}.bind(this);this.$SphericalVideoPlayer37=function(z){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer10.projectionType=z;this.$SphericalVideoPlayer13.reconfigure(this.$SphericalVideoPlayer2,this.$SphericalVideoPlayer10,true);this.$SphericalVideoPlayer31()}}.bind(this);this.$SphericalVideoPlayer38=function(z){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer10.stereoFormat=z;this.$SphericalVideoPlayer13.reconfigure(this.$SphericalVideoPlayer2,this.$SphericalVideoPlayer10,true);this.$SphericalVideoPlayer31()}}.bind(this);this.$SphericalVideoPlayer33=function(z,A){__p&&__p();if(c("FullScreen").isFullScreen()&&(z<this.$SphericalVideoPlayer5.width||A<this.$SphericalVideoPlayer5.height))return;if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer5.width=z;this.$SphericalVideoPlayer5.height=A;this.$SphericalVideoPlayer50(this.$SphericalVideoPlayer13,z,A);if(this.$SphericalVideoPlayer11.useViewportDimension)this.$SphericalVideoPlayer6=c("DOMDimensions").getElementDimensions(this.$SphericalVideoPlayer4);this.$SphericalVideoPlayer31()}else this.$SphericalVideoPlayer5={width:z,height:A}}.bind(this);this.$SphericalVideoPlayer49=function(z,A,B){__p&&__p();if(!this.$SphericalVideoPlayer13)return;z=z>=0?(z+180)%360-180:(z-180)%360+180;this.$SphericalVideoPlayer56(z,A);this.$SphericalVideoPlayer18.yaw=z;this.$SphericalVideoPlayer18.pitch=A;this.$SphericalVideoPlayer19=B;if(this.$SphericalVideoPlayer13)this.$SphericalVideoPlayer13.updateFieldOfView(B);this.$SphericalVideoPlayer55(z);this.$SphericalVideoPlayer31()}.bind(this);this.$SphericalVideoPlayer10=x;this.$SphericalVideoPlayer11=Object.assign({viewportClassName:"_2a6s",canvasClassName:"_38vt",placeholderImgClassName:"_44h9",videoID:"",playerID:undefined,eagerPreload:undefined,preventScrollDefaultAction:undefined,useViewportDimension:undefined,useContainerDimensions:undefined},y);this.$SphericalVideoPlayer21=0;this.$SphericalVideoPlayer27=true;this.$SphericalVideoPlayer28=false}w.prototype.enable=function(x){__p&&__p();if(this.$SphericalVideoPlayer1)return;this.$SphericalVideoPlayer1=x;if(typeof b.WebGLRenderingContext!=="function"&&typeof b.WebGL2RenderingContext!=="function"){this.$SphericalVideoPlayer30({error:"SPHERICAL_SETUP_FAILED",message:"WebGLRenderingContext not available."});return}if(!c("gkx")("AT5Aw7CfI_sJnKS7axSijFMja9sKcPHnyU2K5fdb4uGkxoDFZs19JW5Zy-t4TtlYWxayGfsI93QoiBEamC0x2sdSME272XcNyV5bNTBsKX4_BQ")){this.$SphericalVideoPlayer30({error:"SPHERICAL_RENDER_ERROR",message:"Unsupported browser version"});return}var y=x.getVideoNode();y instanceof HTMLVideoElement||i(0);this.$SphericalVideoPlayer2=y;this.$SphericalVideoPlayer7=false;this.$SphericalVideoPlayer17=true;this.$SphericalVideoPlayer8=new(c("SubscriptionsHandler"))();this.$SphericalVideoPlayer8.addSubscriptions(c("Event").listen(this.$SphericalVideoPlayer2,"loadeddata",function(){return this.$SphericalVideoPlayer31()}.bind(this)),c("Event").listen(this.$SphericalVideoPlayer2,"seeked",function(){return this.$SphericalVideoPlayer31()}.bind(this)),c("Event").listen(this.$SphericalVideoPlayer2,"ended",function(){return this.$SphericalVideoPlayer32(0,0)}.bind(this)),c("Event").listen(window,"resize",function(){if(c("FullScreen").isFullScreen()&&this.$SphericalVideoPlayer1.getContainerNode()===c("getFullScreenElement")())this.$SphericalVideoPlayer33(window.innerWidth,window.innerHeight)}.bind(this)),x.addListener("stateChange",function(){if(x.isState(c("VideoPlayerStates").DESTROYED)||x.isState(c("VideoPlayerStates").FALLBACK)&&(x.isLiveVideo()||!x.isFallbackRecoverable()))this.$SphericalVideoPlayer34()}.bind(this)),x.addListener(c("VideoPlayerFallbackEvents").RECOVER,function(){this.$SphericalVideoPlayer34();c("CSS").removeClass(this.$SphericalVideoPlayer2,"_3axk");this.$SphericalVideoPlayer1.play(new(c("VideoPlayerReasonTransitionHelper"))(c("VideoPlayerReason").SPHERICAL_FALLBACK))}.bind(this)),x.addListener(c("SphericalVideoPlayerEvents").SET_ABSOLUTE_SPHERICAL_ORIENTATION,this.$SphericalVideoPlayer35),x.addListener(c("SphericalVideoPlayerEvents").SET_RELATIVE_SPHERICAL_ORIENTATION,this.$SphericalVideoPlayer32),x.addListener(c("SphericalVideoPlayerEvents").SET_FIELD_OF_VIEW,this.$SphericalVideoPlayer36),x.addListener(c("SphericalVideoPlayerEvents").SET_VIDEO_PROJECTION,this.$SphericalVideoPlayer37),x.addListener(c("SphericalVideoPlayerEvents").SET_STEREO_MODE,this.$SphericalVideoPlayer38),x.addListener("dimensionsChange",this.$SphericalVideoPlayer33),x.once("changeVolume",function(){return this.$SphericalVideoPlayer17=false}.bind(this)),x.once("muteVideo",function(){return this.$SphericalVideoPlayer17=false}.bind(this)),x.once("unmuteVideo",function(){return this.$SphericalVideoPlayer17=false}.bind(this)),x.addListener("toggleFullscreen",function(){return this.$SphericalVideoPlayer4.focus()}.bind(this)),x.addListener("TahoeController/enterTahoe",function(){this.$SphericalVideoPlayer4.focus();if(c("SphericalVideoExperiments").enableWWWZoom){this.$SphericalVideoPlayer12.setEnableZoom(true);this.$SphericalVideoPlayer22=true;this.$SphericalVideoPlayer1.emit("SphericalVideoPlayer/zoomEnabled")}c("QE2Logger").logExposureForUser(o)}.bind(this)),x.addListener("TahoeController/exitTahoe",function(){this.$SphericalVideoPlayer4.focus();if(c("SphericalVideoExperiments").enableWWWZoom){this.$SphericalVideoPlayer12.setEnableZoom(false);this.$SphericalVideoPlayer22=false;this.$SphericalVideoPlayer1.emit("SphericalVideoPlayer/zoomDisabled")}}.bind(this)));if(this.$SphericalVideoPlayer11.useContainerDimensions){var z=x.getContainerNode();this.$SphericalVideoPlayer5=c("DOMDimensions").getElementDimensions(z)}else{this.$SphericalVideoPlayer5=c("DOMDimensions").getElementDimensions(y);if(this.$SphericalVideoPlayer5.width===0||this.$SphericalVideoPlayer5.height===0)this.$SphericalVideoPlayer5={width:y.width,height:y.height}}this.$SphericalVideoPlayer14=this.$SphericalVideoPlayer1.getVideoPlayerID()||c("uniqueID")();this.$SphericalVideoPlayer18={yaw:this.$SphericalVideoPlayer10.initialHeading,pitch:this.$SphericalVideoPlayer10.initialPitch};this.$SphericalVideoPlayer19=this.$SphericalVideoPlayer10.fieldOfView;this.$SphericalVideoPlayer22=false;var A=x.getVideoProjection();if(A)this.$SphericalVideoPlayer10.projectionType=A;c("CSS").addClass(y,"_3axk");this.$SphericalVideoPlayer39();x.registerOption("SphericalVideoPlayer","getDimensions",function(){return this.$SphericalVideoPlayer11.useViewportDimension?this.$SphericalVideoPlayer6:this.$SphericalVideoPlayer5}.bind(this));x.registerOption("SphericalVideoPlayer","isReady",function(){return!!this.$SphericalVideoPlayer13}.bind(this));x.registerOption("SphericalVideoPlayer","getScreenshotDataURL",function(){return this.$SphericalVideoPlayer40()}.bind(this));x.registerOption("SphericalVideoPlayer","getIsSingleFisheye",function(){return this.$SphericalVideoPlayer10.isSingleFisheye&&this.$SphericalVideoPlayer10.originalFOV!==null}.bind(this));x.registerOption("SphericalVideoPlayer","getOriginalFOV",function(){return this.$SphericalVideoPlayer10.originalFOV}.bind(this));x.registerOption("SphericalVideoPlayer","getEnableZoom",function(){return this.$SphericalVideoPlayer22}.bind(this));if(this.$SphericalVideoPlayer41()||this.$SphericalVideoPlayer11.eagerPreload)this.$SphericalVideoPlayer42();else this.$SphericalVideoPlayer43()};w.prototype.disable=function(){this.$SphericalVideoPlayer34()};w.prototype.$SphericalVideoPlayer42=function(){__p&&__p();if(this.$SphericalVideoPlayer1.getOption("SphericalVideoPlayer","isUnavailable"))return;if(this.$SphericalVideoPlayer16){this.$SphericalVideoPlayer16.remove();this.$SphericalVideoPlayer16=null}try{c("SphericalVideoPerformanceTracker").get().setProjection(this.$SphericalVideoPlayer10.projectionType).enterSphericalRendererSetup();this.$SphericalVideoPlayer44();c("SphericalVideoPerformanceTracker").get().exitSphericalRendererSetup()}catch(x){this.$SphericalVideoPlayer30({error:"SPHERICAL_SETUP_FAILED",message:x.message});return}this.$SphericalVideoPlayer1.setStillFrameEnabled(false);this.$SphericalVideoPlayer31();this.$SphericalVideoPlayer1.emit("SphericalVideoPlayer/ready");c("QE2Logger").logExposureForUser(p);if(c("SphericalVideoExperiments").enableWWWParallax){var y=this.$SphericalVideoPlayer12.getOrientation().x;if(this.$SphericalVideoPlayer27)this.$SphericalVideoPlayer23=y;else this.$SphericalVideoPlayer28=true;this.$SphericalVideoPlayer26=c("onViewportChanged")(this.$SphericalVideoPlayer45)}this.$SphericalVideoPlayer27=false};w.prototype.$SphericalVideoPlayer43=function(){this.$SphericalVideoPlayer16=this.$SphericalVideoPlayer1.addListener("stateChange",function(){if(this.$SphericalVideoPlayer41())this.$SphericalVideoPlayer42()}.bind(this))};w.prototype.$SphericalVideoPlayer46=function(){if(!this.$SphericalVideoPlayer13)return;var x=this.$SphericalVideoPlayer40(),y=c("DOM").create("img",{width:this.$SphericalVideoPlayer5.width,height:this.$SphericalVideoPlayer5.height,src:x,className:this.$SphericalVideoPlayer11.placeholderImgClassName});c("DOM").insertAfter(this.$SphericalVideoPlayer2,y);if(this.$SphericalVideoPlayer15)this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=y;this.$SphericalVideoPlayer47()};w.prototype.$SphericalVideoPlayer40=function(x,y){if(!this.$SphericalVideoPlayer13)return"";var z=this.$SphericalVideoPlayer13,A=this.$SphericalVideoPlayer12.getOrientation(),B=A.x,C=A.y;return z.getScreenshotDataURL(B+90,C,x,y)};w.prototype.$SphericalVideoPlayer39=function(){__p&&__p();var x=c("DOM").create("div",{className:this.$SphericalVideoPlayer11.viewportClassName,tabIndex:0}),y={};if(this.$SphericalVideoPlayer10.isSingleFisheye&&this.$SphericalVideoPlayer10.originalFOV){var z=this.$SphericalVideoPlayer10.originalFOV/2;this.$SphericalVideoPlayer10.partialLimits={partialLeftDegrees:z,partialRightDegrees:z,partialTopDegrees:z,partialBottomDegrees:z};y=this.$SphericalVideoPlayer48()}var A=new(c("SphericalViewportControl"))(x,this.$SphericalVideoPlayer10,y);this.$SphericalVideoPlayer8.addSubscriptions(A.addListener("DOM/click",function(C){if(C.button!==0)return;this.$SphericalVideoPlayer1.clickVideo();C.preventDefault()}.bind(this)),A.addListener("mouseMove",function(C){this.$SphericalVideoPlayer1.mouseMove(C);C.preventDefault()}.bind(this)),A.addListener("mouseUp",function(C){this.$SphericalVideoPlayer1.mouseUp(C);C.preventDefault()}.bind(this)),A.addListener("mouseLeave",function(C){this.$SphericalVideoPlayer1.mouseLeave(C);C.preventDefault()}.bind(this)),A.addListener("viewportChange",this.$SphericalVideoPlayer49),A.addListener("updateViewportBegin",function(){if(this.$SphericalVideoPlayer1.isMuted()&&this.$SphericalVideoPlayer17){this.$SphericalVideoPlayer17=false;this.$SphericalVideoPlayer1.unmute()}this.$SphericalVideoPlayer1.logEvent(c("VideoPlayerLoggerEvent").VIEWPORT_ROTATED)}.bind(this)));this.$SphericalVideoPlayer1.registerOption("SphericalVideoPlayer","getCurrentViewport",function(){return this.$SphericalVideoPlayer18}.bind(this));this.$SphericalVideoPlayer1.registerOption("SphericalVideoPlayer","getFieldOfView",function(){return this.$SphericalVideoPlayer19}.bind(this));var B=["DOM/click","updateViewportBegin","updateViewportMove","updateViewportEnd","wheelScroll","viewportChange"];this.$SphericalVideoPlayer8.addSubscriptions.apply(this.$SphericalVideoPlayer8,B.map(function(C){return c("forwardEvent")(A,this.$SphericalVideoPlayer1,C)}.bind(this)));this.$SphericalVideoPlayer12=A;this.$SphericalVideoPlayer4=x;c("Arbiter").subscribe("VideoChannelView/opened",function(){this.$SphericalVideoPlayer20=true;this.$SphericalVideoPlayer12.disableKeyboard()}.bind(this));c("Arbiter").subscribe("VideoChannelView/closed",function(){this.$SphericalVideoPlayer20=false;this.$SphericalVideoPlayer12.enableKeyboard()}.bind(this));c("FullScreen").subscribe("changed",function(){if(c("FullScreen").isFullScreen())this.$SphericalVideoPlayer12.enableKeyboard();else if(this.$SphericalVideoPlayer20)this.$SphericalVideoPlayer12.disableKeyboard()}.bind(this));if(this.$SphericalVideoPlayer11.preventScrollDefaultAction)this.$SphericalVideoPlayer12.setPreventScrollDefaultAction(true);c("DOM").insertAfter(this.$SphericalVideoPlayer2,x);if(this.$SphericalVideoPlayer11.useViewportDimension)this.$SphericalVideoPlayer6=c("DOMDimensions").getElementDimensions(x);c("SphericalVideoComponentDispatcher").explicitlyRegisterStores([c("SphericalViewportControlStore"),c("VideoPlayerControllerStore")]);c("SphericalVideoComponentActions").registerSphericalViewportControl(this.$SphericalVideoPlayer1.getVideoPlayerID(),this.$SphericalVideoPlayer12,this.$SphericalVideoPlayer4)};w.prototype.$SphericalVideoPlayer44=function(){__p&&__p();var x={canvasAttrs:{width:this.$SphericalVideoPlayer5.width,height:this.$SphericalVideoPlayer5.height,className:this.$SphericalVideoPlayer11.canvasClassName,tabIndex:0},beforeCanvasLost:function(){return this.$SphericalVideoPlayer46()}.bind(this)},y=c("SphericalMediaCanvasPool").get(this.$SphericalVideoPlayer14,x,k),z=new(c("SphericalRenderer"))(this.$SphericalVideoPlayer2,y,this.$SphericalVideoPlayer10);this.$SphericalVideoPlayer9=new(c("SubscriptionsHandler"))();this.$SphericalVideoPlayer9.addSubscriptions(z.addListener("renderingError",function(A){return this.$SphericalVideoPlayer30({error:"SPHERICAL_RENDER_ERROR",message:A.message})}.bind(this)),z.addListener("renderingContextLost",this.$SphericalVideoPlayer47));this.$SphericalVideoPlayer3=y;this.$SphericalVideoPlayer13=z;c("DOM").insertAfter(this.$SphericalVideoPlayer2,y);this.$SphericalVideoPlayer50(z,this.$SphericalVideoPlayer5.width,this.$SphericalVideoPlayer5.height);c("requestAnimationFrame")(this.$SphericalVideoPlayer51);if(!c("gkx")("AT7g-6wUL2l3zqcle9L4ueRfS4fZ17IYQrLCkC75DrI9esnQVViFHEDra2QwMrprOv35vnNmRWRvnhgMQesRQwul"))c("CSS").show(y);else{c("CSS").hide(y);setTimeout(function(){c("requestAnimationFrame")(function(){c("CSS").show(y);if(this.$SphericalVideoPlayer15){this.$SphericalVideoPlayer15.remove();this.$SphericalVideoPlayer15=null}}.bind(this))}.bind(this),n)}};w.prototype.$SphericalVideoPlayer52=function(){var x=this.$SphericalVideoPlayer1.getRootNode();if(!x)return null;var y=c("getElementRect")(x),z=y.top+y.bottom/2,A=c("getViewportDimensions").withoutScrollbars().height,B=z/A*100,C=this.$SphericalVideoPlayer12.getHorizontalFieldOfView(),D=j(B,null,null,C),E=D.yaw,F=D.success;if(F)return E;return null};w.prototype.$SphericalVideoPlayer53=function(x){__p&&__p();if(typeof this.$SphericalVideoPlayer25!=="number")return false;if(typeof this.$SphericalVideoPlayer24!=="number")this.$SphericalVideoPlayer24=0;var y=Math.abs(this.$SphericalVideoPlayer24-this.$SphericalVideoPlayer25);if(y<v)return false;var z=y*t,A=Math.max(x,u);if(this.$SphericalVideoPlayer24<this.$SphericalVideoPlayer25)this.$SphericalVideoPlayer24+=Math.min(this.$SphericalVideoPlayer25-this.$SphericalVideoPlayer24,z*A);else this.$SphericalVideoPlayer24-=Math.min(this.$SphericalVideoPlayer24-this.$SphericalVideoPlayer25,z*A);return true};w.prototype.$SphericalVideoPlayer30=function(event){this.$SphericalVideoPlayer1.logError(event);this.$SphericalVideoPlayer1.emit(c("VideoPlayerLoggerEvent").ERROR,event);this.$SphericalVideoPlayer34()};w.prototype.$SphericalVideoPlayer41=function(){return this.$SphericalVideoPlayer1.isState(c("VideoPlayerStates").PLAYING)};w.prototype.$SphericalVideoPlayer55=function(x){if(!this.$SphericalVideoPlayer24)return;this.$SphericalVideoPlayer23=x-this.$SphericalVideoPlayer24};w.prototype.$SphericalVideoPlayer50=function(x,y,z){x.updateViewportDimensions(y,z);c("SphericalVideoComponentActions").updateViewportDimensions(this.$SphericalVideoPlayer1.getVideoPlayerID(),y,z)};w.prototype.$SphericalVideoPlayer31=function(){this.$SphericalVideoPlayer7=true};w.prototype.$SphericalVideoPlayer56=function(x,y){var z=Date.now();if(z-this.$SphericalVideoPlayer21>=m){this.$SphericalVideoPlayer21=z;var A=!!this.$SphericalVideoPlayer1.getOption("VideoWithSphericalGuide","auto");c("Banzai").post("spherical_video_viewport",{video_fbid:this.$SphericalVideoPlayer1.getVideoID(),yaw_degrees:x,pitch_degrees:y,roll_degrees:0,field_of_view_y:this.$SphericalVideoPlayer10.fieldOfView,aspect_ratio:this.$SphericalVideoPlayer5.height/this.$SphericalVideoPlayer5.width,video_player_position:this.$SphericalVideoPlayer2.currentTime,video_player_position_ms:this.$SphericalVideoPlayer2.currentTime*1e3,guide_enabled:A,timestamp:z})}};w.prototype.$SphericalVideoPlayer54=function(){if(this.$SphericalVideoPlayer13){this.$SphericalVideoPlayer13.destroy();this.$SphericalVideoPlayer13=null;this.$SphericalVideoPlayer26&&this.$SphericalVideoPlayer26.remove();this.$SphericalVideoPlayer26=null;this.$SphericalVideoPlayer9.release();this.$SphericalVideoPlayer3.remove()}};w.prototype.$SphericalVideoPlayer34=function(){__p&&__p();if(!this.$SphericalVideoPlayer1.hasOption("SphericalVideoPlayer","isUnavailable"))this.$SphericalVideoPlayer1.registerOption("SphericalVideoPlayer","isUnavailable",function(){return true});if(this.$SphericalVideoPlayer8)this.$SphericalVideoPlayer8.release();this.$SphericalVideoPlayer54();if(this.$SphericalVideoPlayer12)this.$SphericalVideoPlayer12.destroy();if(this.$SphericalVideoPlayer4)this.$SphericalVideoPlayer4.remove();c("SphericalVideoPerformanceTracker").get().destroy()};w.prototype.$SphericalVideoPlayer48=function(){return{disableAutoClientSizeUpdate:false,enableGyro:false,enableRubberBanding:false,maxSpringDegrees:0,maxStretchXDegrees:0,maxStretchYDegrees:0,minVFOV:3,rubberBandConstant:0,slipFactor:0,springFactor:0,enableZoomWithShiftKey:false,enablePanningWithRightMouse:false}};f.exports=w}),null);
__d("SphericalVideoRecenterControl",["SubscriptionsHandler","easeInOutInterpolate","requestAnimationFrame"],(function a(b,c,d,e,f,g){__p&&__p();var h=1e3;function i(j,k,l){"use strict";__p&&__p();this.$SphericalVideoRecenterControl2=j;this.$SphericalVideoRecenterControl1=false;this.$SphericalVideoRecenterControl7=this.$SphericalVideoRecenterControl10.bind(this);this.$SphericalVideoRecenterControl6={yaw:k,pitch:l};this.$SphericalVideoRecenterControl5={yaw:k,pitch:l};if(j.getOption("SphericalVideoPlayer","isReady"))this.$SphericalVideoRecenterControl11();else j.once("SphericalVideoPlayer/ready",function(){return this.$SphericalVideoRecenterControl11()}.bind(this))}i.prototype.$SphericalVideoRecenterControl11=function(){"use strict";__p&&__p();this.$SphericalVideoRecenterControl9=new(c("SubscriptionsHandler"))();this.$SphericalVideoRecenterControl9.addSubscriptions(this.$SphericalVideoRecenterControl2.addListener("updateViewportBegin",function(){return this.$SphericalVideoRecenterControl12()}.bind(this)),this.$SphericalVideoRecenterControl2.addListener("SphericalHeadingIndicator/click",function(){return this.$SphericalVideoRecenterControl13()}.bind(this)),this.$SphericalVideoRecenterControl2.addListener("VideoWithSphericalGuide/intervalUpdate",function(j){return this.updateTargetViewport(j.baseYaw+j.deltaYaw,j.basePitch+j.deltaPitch)}.bind(this)),this.$SphericalVideoRecenterControl2.addListener("VideoWithSphericalGuide/stateToggle",function(j){if(!j){this.$SphericalVideoRecenterControl6.yaw=this.$SphericalVideoRecenterControl5.yaw;this.$SphericalVideoRecenterControl6.pitch=this.$SphericalVideoRecenterControl5.pitch}}.bind(this)),this.$SphericalVideoRecenterControl2.addListener("SphericalVideoViewportTagComment/click",function(j){return this.$SphericalVideoRecenterControl13(j)}.bind(this)))};i.prototype.updateTargetViewport=function(j,k){"use strict";this.$SphericalVideoRecenterControl6.yaw=j;this.$SphericalVideoRecenterControl6.pitch=k};i.prototype.$SphericalVideoRecenterControl13=function(j){"use strict";__p&&__p();if(this.$SphericalVideoRecenterControl1||this.$SphericalVideoRecenterControl2.getOption("VideoWithSphericalGuide","enabled")&&this.$SphericalVideoRecenterControl2.isState("playing"))return;this.$SphericalVideoRecenterControl1=true;this.$SphericalVideoRecenterControl3=Date.now();var k=this.$SphericalVideoRecenterControl2.getOption("SphericalVideoPlayer","getCurrentViewport"),l=j||this.$SphericalVideoRecenterControl6,m=l.yaw-k.yaw;if(Math.abs(m)>180)m=m>0?m-360:m+360;this.$SphericalVideoRecenterControl8={basePitch:k.pitch,deltaPitch:l.pitch-k.pitch,baseYaw:k.yaw,deltaYaw:m};this.$SphericalVideoRecenterControl2.emit("SphericalVideoRecenterControl/animationStart");c("requestAnimationFrame")(this.$SphericalVideoRecenterControl7)};i.prototype.$SphericalVideoRecenterControl12=function(){"use strict";this.$SphericalVideoRecenterControl1=false};i.prototype.$SphericalVideoRecenterControl10=function(){"use strict";__p&&__p();if(!this.$SphericalVideoRecenterControl1){this.$SphericalVideoRecenterControl2.emit("SphericalVideoRecenterControl/animationEnd");return}var j=Date.now();if(j-this.$SphericalVideoRecenterControl3>h){this.$SphericalVideoRecenterControl1=false;this.$SphericalVideoRecenterControl2.emit("SphericalVideoRecenterControl/animationEnd");return}c("requestAnimationFrame")(this.$SphericalVideoRecenterControl7);var k=this.$SphericalVideoRecenterControl8,l=c("easeInOutInterpolate")((j-this.$SphericalVideoRecenterControl3)/h),m=k.deltaPitch*l+k.basePitch,n=k.deltaYaw*l+k.baseYaw;this.$SphericalVideoRecenterControl2.setSphericalOrientation(n,m)};i.prototype.destroy=function(){"use strict";this.$SphericalVideoRecenterControl9.release()};f.exports=i}),null);
__d("VideoSphericalHeadingIndicator",["cx","CSS","React","ReactDOM","SphericalVideoHeadingIndicator.react","VideoPlayerFallbackEvents","VideoPlayerLoggerEvent","destroyOnUnload"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();function i(j,k,l,m,n){__p&&__p();var o,p=this,q=arguments.length<=5||arguments[5]===undefined?false:arguments[5];this.$VideoSphericalHeadingIndicator7=function(event){event.preventDefault();this.$VideoSphericalHeadingIndicator1.emit("SphericalHeadingIndicator/click");this.$VideoSphericalHeadingIndicator1.logEvent(c("VideoPlayerLoggerEvent").HEADING_RESET)}.bind(this);this.$VideoSphericalHeadingIndicator1=j;this.$VideoSphericalHeadingIndicator2=k;this.$VideoSphericalHeadingIndicator3=l;this.$VideoSphericalHeadingIndicator4=q;var r=j.addListener(c("VideoPlayerFallbackEvents").ENTER,function(){r.remove();c("ReactDOM").unmountComponentAtNode(k)});if(j.isState("ready")||j.isState("playing"))this.$VideoSphericalHeadingIndicator5();else(function(){var s=j.addListener("stateChange",function(){if(this.$VideoSphericalHeadingIndicator1.isState("ready")||this.$VideoSphericalHeadingIndicator1.isState("playing")){s.remove();this.$VideoSphericalHeadingIndicator5()}}.bind(p))})();c("destroyOnUnload")(function(){return c("ReactDOM").unmountComponentAtNode(k)})}i.prototype.$VideoSphericalHeadingIndicator5=function(){this.$VideoSphericalHeadingIndicator1.addListener("toggleFullscreen",this.$VideoSphericalHeadingIndicator6.bind(this));c("ReactDOM").render(c("React").createElement(c("SphericalVideoHeadingIndicator.react"),{initialYaw:this.$VideoSphericalHeadingIndicator3,onClick:this.$VideoSphericalHeadingIndicator7,controller:this.$VideoSphericalHeadingIndicator1,isComposer:this.$VideoSphericalHeadingIndicator4}),this.$VideoSphericalHeadingIndicator2)};i.prototype.$VideoSphericalHeadingIndicator6=function(){if(this.$VideoSphericalHeadingIndicator1.isFullscreen())c("CSS").addClass(this.$VideoSphericalHeadingIndicator2,"_4ubd");else c("CSS").removeClass(this.$VideoSphericalHeadingIndicator2,"_4ubd")};f.exports=i}),null);
__d("FileVideoThumbnail",["Promise","DOM","VideoThumbnail","canvasToBlob"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=b.URL||b.webkitURL||{};h=babelHelpers.inherits(k,c("VideoThumbnail"));i=h&&h.prototype;function k(l){"use strict";i.constructor.call(this,null);this.$FileVideoThumbnail1=l}k.prototype.getURL=function(){"use strict";if(!this.$FileVideoThumbnail2)this.$FileVideoThumbnail2=j.createObjectURL(this.$FileVideoThumbnail1);return this.$FileVideoThumbnail2};k.prototype.getData=function(){"use strict";return c("Promise").resolve(this.$FileVideoThumbnail1)};k.prototype.getDataWithText=function(l,m,n,o,p,q,r,s,t,u){"use strict";__p&&__p();var v=c("DOM").create("canvas"),w=v.getContext("2d");v.width=l;v.height=m;return new(c("Promise"))(function(x,y){var z=new Image();z.onload=function(){w.drawImage(z,0,0,v.width,v.height);w=c("VideoThumbnail").addTextToCanvasContext(w,n,o,p,q,r,s,t,u);c("canvasToBlob")(v,"image/jpeg").then(x,y).done()};z.src=this.$FileVideoThumbnail2}.bind(this))};f.exports=k}),null);
__d("generateSelectedThumbnails",["Promise","CanvasVideoThumbnail","EventListener","VideoFrameBuffer"],(function a(b,c,d,e,f,g){__p&&__p();function h(i,j,k,l){__p&&__p();var m=arguments.length<=4||arguments[4]===undefined?"contain":arguments[4];return new(c("Promise"))(function(n,o){__p&&__p();var p=document.createElement("canvas");p.width=k;p.height=l;var q=[],r=0,s=new(c("VideoFrameBuffer"))(p,i,m),t=void 0,u=void 0,v=function v(){s.updateFrameBuffer();var x=new(c("CanvasVideoThumbnail"))(p,i,u);q.push(x);x.getURL();w()},w=function w(){__p&&__p();if(r===0){t=c("EventListener").listen(i,"seeked",v);u=j[r];i.currentTime=u;r++}else if(q.length<j.length){u=j[r];i.currentTime=u;r++}else{if(t)t.remove();n({thumbnails:q})}};w()})}f.exports=h}),null);
__d("VideoProducerDuration.react",["React"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();f.exports=function(){__p&&__p();var h,i;h=babelHelpers.inherits(j,c("React").PureComponent);i=h&&h.prototype;j.prototype.render=function(){"use strict";var k=this.props,l=k.duration,m=k.className,n=k.showMilliseconds;if(l==null)return null;var o=l/1e3,p=Math.floor((o-Math.floor(o))*1e3),q=(""+p).padStart(3,"0"),r=Math.floor(o),s=(""+r%60).padStart(2,"0"),t=Math.floor(r/60),u=(""+t%60).padStart(2,"0"),v=Math.floor(t/60),w=(""+v).padStart(2,"0"),x=w+":"+u+":"+s+(n?"."+q:"");return c("React").createElement("span",{className:m},x)};function j(){"use strict";h.apply(this,arguments)}return j}()}),null);
__d("ComposerVideoThumbnailScrubber.react",["ix","cx","fbt","DateConsts","generateSelectedThumbnails","Image.react","React","Set","Style","UserAgent","VideoProducerDuration.react","VideoThumbnailUIActionsTypedLogger","XUIButton.react","XUIDialog.react","XUIDialogBody.react","XUIDialogFooter.react","XUIDialogTitle.react","XUIText.react","fbglyph"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=10,n=1e3,o=900,p=15,q=10,r=48,s=45,t=45,u=80,v=285,w=463,x=15,y=8;k=babelHelpers.inherits(z,c("React").Component);l=k&&k.prototype;function z(A){__p&&__p();l.constructor.call(this,A);this.$ComposerVideoThumbnailScrubber8=function(C){var D=parseInt(C.target.value,10);this.setState({scrubberValue:D});this.$ComposerVideoThumbnailScrubber9(D)}.bind(this);this.$ComposerVideoThumbnailScrubber11=function(){this.$ComposerVideoThumbnailScrubber4()}.bind(this);var B=new(c("Set"))();if(A.scrubbedThumbnail)B.add(A.scrubbedThumbnail);this.state={scrubberValue:0,videoURL:"",maxScrubberValue:n,selectedFrames:B,savedFrame:A.scrubbedThumbnail,buffer:false}}z.prototype.componentDidMount=function(){this.setState({videoURL:this.props.videoURL})};z.prototype.componentDidUpdate=function(){if(this.state.buffer)this.setState({buffer:false})};z.prototype.shouldComponentUpdate=function(A,B){return A.thumbnails!==this.props.thumbnails||A.showThumbnailScrubberDialog!==this.props.showThumbnailScrubberDialog||B!=this.state};z.prototype.$ComposerVideoThumbnailScrubber1=function(A){__p&&__p();A=A.sort(function(G,H){return G-H});var B=[],C=0;A.forEach(function(G){G=this.$ComposerVideoThumbnailScrubber2(G,r);if(G-C<p)G=C+p;C=G;B.push(G)}.bind(this));var D=void 0;if(this.refs.scrubber)D=parseInt(c("Style").get(this.refs.scrubber,"width"),10)+s;else{this.setState({buffer:true});return[]}var E=D,F=A.length-1;while(B[F]-E>0){B[F]=E;E-=p;F--}return B};z.prototype.$ComposerVideoThumbnailScrubber2=function(A,B){if(this.refs.scrubber){var C=parseInt(c("Style").get(this.refs.scrubber,"width"),10)-y;return Math.floor(A/this.state.maxScrubberValue*C)+B}return B};z.prototype.$ComposerVideoThumbnailScrubber3=function(A){var B=this.refs.video;if(B&&B.duration)return B.duration*A/this.state.maxScrubberValue;return 0};z.prototype.$ComposerVideoThumbnailScrubber4=function(){this.setState({scrubberValue:0});this.props.closeDialog()};z.prototype.$ComposerVideoThumbnailScrubber5=function(){if(this.state.selectedFrames.length!==0){var A=this.refs.videoPlayer,B=Array.from(this.state.selectedFrames);B=B.sort(function(C,D){return C-D});B=B.map(function(C){return this.$ComposerVideoThumbnailScrubber3(C)}.bind(this));return c("generateSelectedThumbnails")(A,B,w,v)}return null};z.prototype.$ComposerVideoThumbnailScrubber6=function(){if(this.state.savedFrame)return this.$ComposerVideoThumbnailScrubber1([this.state.savedFrame])[0];return 0};z.prototype.$ComposerVideoThumbnailScrubber7=function(){if(this.state.selectedFrames.size===1)return Array.from(this.state.selectedFrames)[0];return 0};z.prototype.$ComposerVideoThumbnailScrubber10=function(A){if(A){this.setState({scrubberValue:A});this.$ComposerVideoThumbnailScrubber9(A)}};z.prototype.$ComposerVideoThumbnailScrubber12=function(){var A=this.$ComposerVideoThumbnailScrubber5();this.props.onSelectedThumbnailsFromScrubber&&this.props.onSelectedThumbnailsFromScrubber(A);if(this.state.selectedFrames.size===1){var B=this.$ComposerVideoThumbnailScrubber7();this.props.onScrubbedThumbnailSave&&this.props.onScrubbedThumbnailSave(B);this.setState({savedFrame:B})}new(c("VideoThumbnailUIActionsTypedLogger"))().setEvent("saved_scrubbed_thumbnail").setEditLocation("upload").setProfileID(this.props.pageID).log();this.$ComposerVideoThumbnailScrubber4()};z.prototype.$ComposerVideoThumbnailScrubber13=function(A){var B=this.state.selectedFrames;B.clear();B.add(A);this.setState({selectedFrames:B})};z.prototype.$ComposerVideoThumbnailScrubber14=function(){if(this.refs.video&&this.refs.video.duration&&this.state.maxScrubberValue!=this.refs.video.duration*m)this.setState({maxScrubberValue:this.refs.video.duration*m})};z.prototype.$ComposerVideoThumbnailScrubber9=function(A){var B=this.refs.video;if(B)B.currentTime=this.$ComposerVideoThumbnailScrubber3(A)};z.prototype.render=function(){if(!this.props.showThumbnailScrubberDialog)return null;return c("React").createElement(c("XUIDialog.react"),{shown:this.props.showThumbnailScrubberDialog,layerHideOnBlur:false,onToggle:this.$ComposerVideoThumbnailScrubber11,width:o},c("React").createElement(c("XUIDialogTitle.react"),null,j._("Choose thumbnail from video")),c("React").createElement(c("XUIDialogBody.react"),null,c("React").createElement("div",null,c("React").createElement("video",{ref:"video",src:this.state.videoURL,className:"_eaa",onLoadedMetadata:function(){return this.$ComposerVideoThumbnailScrubber14()}.bind(this),muted:true}),c("React").createElement("div",{style:{paddingLeft:this.$ComposerVideoThumbnailScrubber2(this.state.scrubberValue,x)}},c("React").createElement(c("VideoProducerDuration.react"),{duration:this.$ComposerVideoThumbnailScrubber3(this.state.scrubberValue)*c("DateConsts").MS_PER_SEC})),this.$ComposerVideoThumbnailScrubber15(),c("React").createElement("input",{className:c("UserAgent").isBrowser("Firefox")?"_eab":"_eac",onChange:this.$ComposerVideoThumbnailScrubber8,min:0,max:this.state.maxScrubberValue,ref:"scrubber",type:"range",value:this.state.scrubberValue}),this.$ComposerVideoThumbnailScrubber16(),c("React").createElement("video",{ref:"videoPlayer",className:"_2mpk",key:"videoPlayer",src:this.state.videoURL}))),c("React").createElement(c("XUIDialogFooter.react"),null,c("React").createElement("div",null,this.state.savedFrame?c("React").createElement(c("XUIText.react"),{className:"_61l-"},j._("Your current thumbnail will be replaced if you save a new one.")):null,c("React").createElement(c("XUIButton.react"),{label:j._("Cancel"),onClick:function(){return this.$ComposerVideoThumbnailScrubber4()}.bind(this)}),c("React").createElement(c("XUIButton.react"),{use:"confirm",label:j._("Save Thumbnail"),onClick:function(){this.$ComposerVideoThumbnailScrubber13(this.state.scrubberValue);this.$ComposerVideoThumbnailScrubber12()}.bind(this)}))))};z.prototype.$ComposerVideoThumbnailScrubber16=function(){if(!this.state.savedFrame)return null;var A=this.$ComposerVideoThumbnailScrubber6(),B=c("React").createElement(c("Image.react"),{key:A,className:"_ead",onClick:function(){return this.$ComposerVideoThumbnailScrubber10(this.state.savedFrame)}.bind(this),style:{left:A},src:h("119370")});return c("React").createElement("div",{className:"_eae"},B)};z.prototype.$ComposerVideoThumbnailScrubber15=function(){var A=this.props.thumbnails;if(A.length===0)return c("React").createElement("div",{className:"_eag _eai"},"Loading...");var B=A.slice(0,q),C=B.map(function(D,E){return c("React").createElement(c("Image.react"),{key:E,width:u,height:t,src:D.getURL()})});return c("React").createElement("div",{className:"_eai _eaj"},C)};f.exports=z}),null);