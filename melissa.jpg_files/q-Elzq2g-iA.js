if (self.CavalryLogger) { CavalryLogger.start_js(["KdcE2"]); }

__d("AppsDivebarDisplayController",["cx","AppsDivebarConfigData","AsyncRequest","Arbiter","CSS","UIPagelet","$"],(function a(b,c,d,e,f,g,h){__p&&__p();var i=171,j={isVisible:function k(){if(this._visible!==undefined)return this._visible;this._visible=!c("AppsDivebarConfigData").hidden;return this._visible},showApps:function k(){this._visible=true;var l={fb_source_category:"sidebar"};c("UIPagelet").loadFromEndpoint("GamesDivebarPagelet","pagelet_canvas_nav_content",l);c("CSS").show(c("$")("apps_gripper"));c("CSS").show(c("$")("pagelet_canvas_nav_content"));c("CSS").addClass(c("$")("pagelet_canvas_nav_content"),"_4woj");c("Arbiter").inform("AppsDivebar/show-apps");new(c("AsyncRequest"))("/ajax/feed/apps/resize").setData({height:""+i,menu:true}).setMethod("POST").send()},hideApps:function k(){this._visible=false;c("CSS").hide(c("$")("pagelet_canvas_nav_content"));c("CSS").hide(c("$")("apps_gripper"));c("Arbiter").inform("AppsDivebar/hide-apps");new(c("AsyncRequest"))("/ajax/feed/apps/resize").setData({height:"1",menu:true}).setMethod("POST").send()}};f.exports=j}),null);
__d("AsyncLoader",["AsyncRequest","BaseAsyncLoader"],(function a(b,c,d,e,f,g){function h(i,j){this._endpoint=i;this._type=j}Object.assign(h.prototype,c("BaseAsyncLoader").prototype);h.prototype.send=function(i,j,k,l,m){new(c("AsyncRequest"))(i).setData({ids:j}).setHandler(l).setErrorHandler(m).setAllowCrossPageTransition(true).setMethod("GET").setReadOnly(true).send()};f.exports=h}),null);
__d("ChatHovercard",["Arbiter","AsyncLoader","Bootloader","JSLogger","TimeSlice","debounce","emptyFunction","gkx","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){__p&&__p();var h=5,i=new(c("AsyncLoader"))("/ajax/chat/hovercard/sidebar.php","hover"),j=c("JSLogger").create("chat_hovercard");c("Arbiter").subscribe("Hovercard/dirty",i.reset.bind(i));function k(p,q){var r=function r(){i.get(p,q)};if(c("gkx")("AT45Q0YAtTF77a1x8ZT9-rWfsF83gTI5tMuldZujY0KaNI6icTW09jBEE5BSuvPKdZtVIIdleK4appEhrvQPrVOyhvdXTeLDSdYEXUe9KmbS3Q"))c("TimeSlice").guard(r,"superfluous request to first open DD",{propagationType:c("TimeSlice").PropagationType.ORPHAN})();else r()}function l(p,q){__p&&__p();if(!p)return;k(p,function(r){__p&&__p();c("setTimeoutAcrossTransitions")(function(){__p&&__p();if(!r){j.error("fetch_failure",{id:p});return}c("Bootloader").loadModules(["Hovercard"],function(s){var t=s.getDialog(r);if(!t){j.error("no_hovercard",{id:p,endpoint:r});return}if(p==q.getActiveID())q.showHovercard(p,t)},"ChatHovercard")},0)})}function m(p,q){__p&&__p();var r=[];function s(v){if(v>=0&&v<p.length)r.push(p[v])}var t=p.indexOf(q);if(t>-1){s(t);for(var u=1;u<h;u++){s(t+u);s(t-u)}}return r.filter(function(v){return v})}function n(p,q){var r=q.getActiveID();if(r){var s=p.getShowingUsers(),t=m(s,r);k(t,c("emptyFunction"))}}function o(p){var q=p.getHoverController();q.registerDefault(l);q.subscribe("hover",c("debounce")(n.bind(null,p,q),100))}f.exports=o}),null);
__d("ChatOrderedListHover",["csx","ArbiterMixin","CSS","ErrorUtils","Event","LayerHideOnBlur","Parent","mixin","setTimeoutAcrossTransitions","shield"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;function k(n){c("CSS").addClass(n,"fetching")}function l(n){c("CSS").removeClass(n,"fetching")}i=babelHelpers.inherits(m,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function m(n){"use strict";j.constructor.call(this);this._orderedList=n;this._root=n.getRoot();c("Event").listen(this._root,"mouseover",this._mouseOver.bind(this));c("Event").listen(this._root,"mouseleave",this._mouseLeave.bind(this));n.subscribe("click",c("shield")(this._hide,this))}m.prototype._mouseOver=function(event){"use strict";if(this._paused)return;var n=event.getTarget(),o=c("Parent").bySelector(n,"._42fz")||c("Parent").bySelector(n,"._5a58");o&&this._setActiveItem(o)};m.prototype._mouseLeave=function(event){"use strict";this._setActiveItem(null)};m.prototype._clearTimeouts=function(){"use strict";this._showTimeout&&clearTimeout(this._showTimeout);this._showTimeout=null;this._hideTimeout&&clearTimeout(this._hideTimeout);this._hideTimeout=null};m.prototype._hide=function(){"use strict";if(this._showingDialog){this._showingDialog.hide();this._showingDialog=null;this._showingID=null}};m.prototype._show=function(){"use strict";var n=this.getActiveID(),o=false;if(this._defaultHandler){o=true;c("ErrorUtils").applyWithGuard(this._defaultHandler,{},[n,this])}if(o&&this._showingID!=this.getActiveID())k(this._activeItem)};m.prototype._setActiveItem=function(n){"use strict";__p&&__p();if(n!=this._activeItem){this._clearTimeouts();this._activeItem&&l(this._activeItem);if(n){this._activeItem=n;var o=this._showingDialog?0:600;this._showTimeout=c("setTimeoutAcrossTransitions")(function(){return this._show()}.bind(this),o);this.inform("hover")}else{this._activeItem=null;this._hideTimeout=c("setTimeoutAcrossTransitions")(function(){return this._hide()}.bind(this),10);this.inform("leave")}}};m.prototype.registerDefault=function(n){"use strict";this._defaultHandler=n};m.prototype.getActiveID=function(){"use strict";var n=this._activeItem&&this._orderedList.getUserForNode(this._activeItem);return n||null};m.prototype.showHovercard=function(n,o){"use strict";__p&&__p();if(n==this.getActiveID()&&n!=this._showingID){this._clearTimeouts();l(this._activeItem);this._hide();this._showingDialog=o;this._showingID=n;var p=o.subscribe("mouseenter",this._setActiveItem.bind(this,this._activeItem)),q=o.subscribe("mouseleave",function(){p.unsubscribe();this._setActiveItem(null)}.bind(this)),r=o.subscribe("hide",function(){this.inform("hovercard_hide");p.unsubscribe();q.unsubscribe();r.unsubscribe()}.bind(this));o.enableBehavior(c("LayerHideOnBlur")).setContext(this._activeItem).setPosition("left").show();this.inform("hovercard_show")}};Object.assign(m.prototype,{_root:null,_activeItem:null,_hideTimeout:null,_showTimeout:null,_showingDialog:null,_showingID:null,_defaultHandler:null});f.exports=m}),null);
__d("ChatSidebarConstants",["ChatConfig"],(function a(b,c,d,e,f,g){"use strict";var h=c("ChatConfig").get("divebar_rounded_profile",false),i={IMAGE_SIZE:32,getImageSize:function j(){return i.IMAGE_SIZE+(h?2:0)},getItemHeight:function j(){return i.IMAGE_SIZE+8}};f.exports=i}),null);
__d("XGamesQuicksilverController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/instantgames/{?game_or_link}/",{game_or_link:{type:"String"},source:{type:"Enum",defaultValue:"www_bookmark",enumType:1}})}),null);
__d("AbstractBadge.react",["cx","invariant","React","formatNumber","joinClasses"],(function a(b,c,d,e,f,g,h,i){__p&&__p();var j,k,l=c("React").PropTypes;function m(o){return parseInt(o,10)===o}j=babelHelpers.inherits(n,c("React").PureComponent);k=j&&j.prototype;function n(o){"use strict";k.constructor.call(this,o)}n.prototype.render=function(){"use strict";var o=this.props,p=o.count,q=o.maxcount,r=o.label,s=babelHelpers.objectWithoutProperties(o,["count","maxcount","label"]);m(p)||i(0);m(q)||i(0);var t="_51lp"+(p>q?" _51lr":"")+(!this.props.allowZero&&p===0?" hidden_elem":""),u=r?c("React").createElement("span",{className:"accessible_elem","aria-hidden":p?"false":"true"},"\xa0",r):null,v=c("formatNumber").withMaxLimit(p,q);if(u!==null)v=c("React").createElement("span",{"aria-hidden":"true"},v);return c("React").createElement("span",babelHelpers["extends"]({},s,{className:c("joinClasses")(this.props.className,t)}),v,u)};n.propTypes={className:l.string,count:l.number.isRequired,maxcount:l.number,label:l.string};n.defaultProps={maxcount:20};f.exports=n}),null);
__d("XUIBadge.react",["cx","React","AbstractBadge.react","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;l.prototype.render=function(){"use strict";var m=this.props.type,n="_5ugh"+(m==="regular"?" _5ugf":"")+(m==="special"?" _5ugg":"");return c("React").createElement(c("AbstractBadge.react"),babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,n),type:null}))};function l(){"use strict";i.apply(this,arguments)}l.propTypes={type:k.oneOf(["regular","special"]),allowZero:k.bool};l.defaultProps={type:"regular"};f.exports=l}),null);
__d("ChatSidebarItem.react",["cssVar","cx","ix","xuiglyph","AvailableListConstants","CurrentUser","QuicksilverSources","XGamesQuicksilverController","XUIBadge.react","BootloadOnRender.react","ChatConfig","ChatSidebarConstants","ErrorBoundary.react","Image.react","InstantGamesWWWChatSidebarConfig","JSResource","LazyComponent.react","Link.react","QE2Logger","React","SplitImage.react","TextWithEmoticons.react","emptyFunction","fbglyph","gkx","goURI"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l,m,n=c("React").PropTypes,o=c("ChatConfig").get("divebar_rounded_profile",false),p=9,q=function q(){return c("React").createElement(c("Link.react"),{"aria-hidden":true,tabIndex:-1})};l=babelHelpers.inherits(r,c("React").PureComponent);m=l&&l.prototype;function r(){var y,z;for(var A=arguments.length,B=Array(A),C=0;C<A;C++)B[C]=arguments[C];return z=(y=m.constructor).call.apply(y,[this].concat(B)),this.state={hover:false},this.$ChatSidebarItem1=function(){this.setState({hover:true});this.props.onMouseEnter()}.bind(this),this.$ChatSidebarItem2=function(){this.setState({hover:false})}.bind(this),this.renderLastActiveTime=function(){return c("React").createElement("div",{className:"_568-"},this.props.statusTime)}.bind(this),z}r.prototype.render=function(){var y="_55ln"+(this.props.context?" _55lo":"")+(o?" _qhr":"");return c("React").createElement(c("ErrorBoundary.react"),{fallbackComponent:q},c("React").createElement(c("Link.react"),{className:y,href:this.props.href,onClick:this.props.onClick,onMouseEnter:this.$ChatSidebarItem1,onMouseLeave:this.$ChatSidebarItem2,rel:"ignore"},c("React").createElement("div",{className:"_55lp"},c("React").createElement("div",{className:"_55lq","aria-hidden":true},c("React").createElement(c("SplitImage.react"),{size:this.props.imageSize||c("ChatSidebarConstants").IMAGE_SIZE,srcs:this.props.image||this.props.images})),c("React").createElement("div",{className:"_5bon"},this.renderWaveButton(),this.renderPlayingGame(),this.renderBirthday(),this.renderUnreadCount(),this.renderStatus()),c("React").createElement("div",{className:"_55lr"},this.renderName()),c("React").createElement("div",{className:"_55ls"},this.props.context))))};r.prototype.renderName=function(){if(this.props.nameCanHaveEmoji)return c("React").createElement(c("TextWithEmoticons.react"),{renderEmoticons:true,renderEmoji:true,text:this.props.name});else return this.props.name};r.prototype.renderUnreadCount=function(){var y=this.props.unreadCount;if(!y)return null;return c("React").createElement(c("XUIBadge.react"),{count:y,maxcount:p,type:"regular"})};r.prototype.renderStatus=function(){var y=this.$ChatSidebarItem3();if(!y&&!this.props.statusTime)return null;var z=true;if(this.props.unreadCount&&this.props.unreadCount>0){y=this.props.statusTime?null:y;z=false}return c("React").createElement("div",{className:"_568z"+(this.props.showRelationshipIndicator?" _2oov":"")},z?this.renderLastActiveTime():null,y)};r.prototype.renderWaveButton=function(){if(!this.props.showWave||!this.props.userID)return null;return c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("WaveButton.react").__setRef("ChatSidebarItem.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{userID:this.props.userID,hover:this.state.hover})})};r.prototype.renderBirthday=function(){if(!this.props.birthday)return null;if(c("CurrentUser").isWorkUser()&&!c("gkx")("AT6xZmI2OdSYphpl234QKktFXq5sRz0kw7_B2KSTTJG4l__HXq2R95tfCOGk3WHJAmEbSfznHtUDjqZLC1cYF7k9"))return null;return c("React").createElement(c("Image.react"),{className:"_5dv3",src:v()})};r.prototype.renderPlayingGame=function(){if(this.props.statusTime||this.props.birthday||!this.props.isPlayingGame)return null;return c("React").createElement("div",{className:"_46b2"},c("React").createElement(c("Image.react"),{onClick:this.$ChatSidebarItem4,className:"_46b3",src:x()}))};r.prototype.$ChatSidebarItem4=function(){c("QE2Logger").logExposureForUser("instant_games_presence");if(!c("InstantGamesWWWChatSidebarConfig").games_icon_link)return;var y=c("XGamesQuicksilverController").getURIBuilder().setEnum("source",c("QuicksilverSources").WWW_CHAT_SIDEBAR_PRESENCE).getURI();c("goURI")(y)};r.prototype.$ChatSidebarItem3=function(){if(this.props.isMessengerOnlyContact)return c("React").createElement(c("Image.react"),{className:"_568_",src:w()});else if(this.props.status===c("AvailableListConstants").ACTIVE)if(this.props.showRelationshipIndicator)return c("React").createElement(c("Image.react"),{className:"_568_",src:j("118297")});else return c("React").createElement("span",{style:{background:"#42b72a",borderRadius:"50%",display:"inline-block",height:"6px",marginLeft:"4px",veritcalAlign:"middle",width:"6px"}});return null};r.defaultProps={onMouseEnter:c("emptyFunction")};r.propTypes={birthday:n.bool,context:n.node,href:n.string,imageSize:n.number,image:n.string,images:n.array,isPlayingGame:n.bool,isMessengerOnlyContact:n.bool,name:n.node.isRequired,nameCanHaveEmoji:n.bool,onClick:n.func,showRelationshipIndicator:n.bool,status:n.number,statusTime:n.string,unreadCount:n.number,userID:n.string,showWave:n.bool};var s=void 0,t=void 0,u=void 0;function v(){if(!s)s=j("74517");return s}function w(){if(!u)u=j("28076");return u}function x(){if(!t)t=j("89258");return t}f.exports=r}),null);
__d("ChatSidebarThread.react",["fbt","ChatOpenTabEventLogger","ChatSidebarItem.react","FantaTabActions","MercuryIDs","MercuryParticipantListRenderer","WebMessengerThreadPermalinks","React","TooltipData","requireWeak"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes,l=10,m="\n";i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(){__p&&__p();var q,r;for(var s=arguments.length,t=Array(s),u=0;u<s;u++)t[u]=arguments[u];return r=(q=j.constructor).call.apply(q,[this].concat(t)),this.$ChatSidebarThread2=function(v){var w=this.props.threadFBID;v.preventDefault();if(w){c("FantaTabActions").openTab(c("MercuryIDs").getThreadIDFromThreadFBID(w),["divebar_groups"]);c("ChatOpenTabEventLogger").logClickOpen(this.props.referrer,w)}}.bind(this),r}n.prototype.render=function(){var q=this.props.name,r=o(this.props.threadFBID,this.props.participants,this.props.numOtherParticipants),s=q?r:undefined,t=this.props.image?[]:p(this.props.participants),u=q?q:r;return c("React").createElement("div",c("TooltipData").propsFor(this.$ChatSidebarThread1()),c("React").createElement(c("ChatSidebarItem.react"),{context:s,href:this.props.threadFBID&&c("WebMessengerThreadPermalinks").getThreadURIFromServerID(this.props.threadFBID),imageSize:this.props.imageSize,image:this.props.image,images:t,name:u,nameCanHaveEmoji:true,onClick:this.$ChatSidebarThread2,referrer:this.props.referrer,status:this.props.status,unreadCount:this.props.unreadCount,showWave:false}))};n.prototype.$ChatSidebarThread1=function(){__p&&__p();var q=[],r=this.props.participants.length,s=this.props.numOtherParticipants,t=Math.min(l,r);if(s-t===1)t--;var u=0;while(q.length<t&&u<this.props.participants.length){var v=this.props.participants[u].name;if(v)q.push(v);u++}if(t<s)q.push(h._("and {num} more...",[h.param("num",s-t)]));return q.join(m)};n.propTypes={image:k.string,imageSize:k.number,name:k.string,participants:k.array.isRequired,numOtherParticipants:k.number.isRequired,referrer:k.string,status:k.number,threadFBID:k.string,unreadCount:k.number};n.defaultProps={numOtherParticipants:l};function o(q,r,s){return new(c("MercuryParticipantListRenderer"))().setIsNewThread(!q).setUseShortName(true).setTotalParticipantCount(s).renderParticipantList(r).toString()}function p(q){return q.map(function(r){return r.image_src}).filter(function(r){return r})}f.exports=n}),null);
__d("ChatSidebarGroupThreadsGroup.react",["cx","ChatSidebarThread.react","ChatSidebarSections","ChatSidebarConstants","PresencePrivacy","PresenceStatus","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(){var m,n;for(var o=arguments.length,p=Array(o),q=0;q<o;q++)p[q]=arguments[q];return n=(m=j.constructor).call.apply(m,[this].concat(p)),this.$ChatSidebarGroupThreadsGroup1=function(r){var s=r.mercury_thread.participants,t=this.props.isDisconnected||c("PresencePrivacy").isUserOffline();return c("React").createElement("li",{className:"_42fz"+(t?" _570-":""),"data-id":r.uid,key:r.uid},c("React").createElement(c("ChatSidebarThread.react"),{image:r.mercury_thread.image_src,imageSize:c("ChatSidebarConstants").getImageSize(),name:r.mercury_thread.name,participants:r.participants_to_render,numOtherParticipants:s.length-1,referrer:c("ChatSidebarSections").ORDERED_LIST,status:c("PresenceStatus").getGroup(s),threadFBID:r.uid}))}.bind(this),n}l.prototype.render=function(){return c("React").createElement("ul",null,this.props.groups.map(this.$ChatSidebarGroupThreadsGroup1))};l.propTypes={groups:k.array.isRequired,isDisconnected:k.bool};f.exports=l}),null);
__d("ChatSidebarHeader.react",["cx","React","joinClasses"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("React").PureComponent);j=i&&i.prototype;k.prototype.render=function(){"use strict";return c("React").createElement("div",babelHelpers["extends"]({},this.props,{className:c("joinClasses")(this.props.className,"_55ob")}),c("React").createElement("div",{className:"_55oc"},this.props.children))};function k(){"use strict";i.apply(this,arguments)}f.exports=k}),null);
__d("ChatSidebarItemPlaceholder.react",["cx","React"],(function a(b,c,d,e,f,g,h){"use strict";var i=function i(k){return 50+Math.ceil(50-2*(Math.pow(7+k,2)%10))},j=function j(k){return c("React").createElement("li",{className:"_42fz"+(k.isDisconnected?" _570-":"")},c("React").createElement("div",{className:"_55ln"+(k.roundedProfile?" _qhr":"")},c("React").createElement("div",{className:"_55lp"},c("React").createElement("span",{className:"_1qh _55lq"}),c("React").createElement("span",{className:"_55lr"},c("React").createElement("span",{className:"_1qh",style:{width:i(k.slot)+"px"}})))))};f.exports=j}),null);
__d("ChatSidebarUser.react",["Bootloader","ChatConfig","ChatOpenTabEventLogger","ChatSidebarItem.react","FantaTabActions","MercuryIDs","WebMessengerThreadPermalinks","React","requireWeak"],(function a(b,c,d,e,f,g){__p&&__p();var h,i,j=c("React").PropTypes;h=babelHelpers.inherits(k,c("React").PureComponent);i=h&&h.prototype;function k(){__p&&__p();var l,m;"use strict";for(var n=arguments.length,o=Array(n),p=0;p<n;p++)o[p]=arguments[p];return m=(l=i.constructor).call.apply(l,[this].concat(o)),this.$ChatSidebarUser1=function(q){var r=this.props,s=r.sectionName,t=r.slot,u=r.userID,v=c("MercuryIDs").getThreadIDFromUserID(u);c("FantaTabActions").openTab(v,["divebar_"+s]);c("ChatOpenTabEventLogger").logUserClickOpen(s,u,{global_slot:t});q.preventDefault();this.$ChatSidebarUser2()}.bind(this),m}k.prototype.render=function(){"use strict";var l=c("WebMessengerThreadPermalinks").getThreadURIFromUserID(this.props.userID);return c("React").createElement(c("ChatSidebarItem.react"),{onClick:this.$ChatSidebarUser1,href:l,imageSize:this.props.imageSize,image:this.props.image,isPlayingGame:this.props.isPlayingGame,name:this.props.name,nameCanHaveEmoji:false,showRelationshipIndicator:this.props.showRelationshipIndicator,status:this.props.status,birthday:this.props.birthday,statusTime:this.props.statusTime,context:this.props.context,unreadCount:this.props.unreadCount,isMessengerOnlyContact:this.props.isMessengerOnlyContact,userID:this.props.userID,showWave:this.props.showWave})};k.prototype.$ChatSidebarUser2=function(){"use strict";var l=this.props.sectionName;if(c("ChatConfig").get("in_recents_experiment"))c("Bootloader").loadModules(["FunnelLogger"],function(m){m.appendAction("WWW_DIVEBAR_RECENTS_FUNNEL","open_tab_"+l)},"ChatSidebarUser.react")};k.propTypes={birthday:j.bool,image:j.string,imageSize:j.number,isPlayingGame:j.bool,name:j.string,sectionName:j.string.isRequired,showRelationshipIndicator:j.bool,slot:j.number,status:j.number,statusTime:j.string,unreadCount:j.number,userID:j.string.isRequired,isMessengerOnlyContact:j.bool,context:j.string,showWave:j.bool};f.exports=k}),null);
__d("ChatSidebarUserGroup.react",["cx","AvailableListConstants","ChatConfig","ChatSidebarItemPlaceholder.react","ChatSidebarSections","ChatSidebarUser.react","LastActiveTimes","MercuryConfig","PresencePrivacy","React","gkx"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i=c("React").PropTypes,j=c("ChatConfig").get("divebar_rounded_profile",false),k=Object.keys(c("ChatSidebarSections")).map(function(n){return c("ChatSidebarSections")[n]}),l=function l(n,o,p){if(!o)return c("React").createElement(c("ChatSidebarItemPlaceholder.react"),{isDisconnected:!!n.isDisconnected,key:"placeholder"+p,roundedProfile:j,slot:p});if(!o.id)return null;var q=n.statusMap[o.id],r=q!==c("AvailableListConstants").ACTIVE?c("LastActiveTimes").getShortDisplay(o.id):undefined,s=n.isDisconnected||!c("PresencePrivacy").allows(o.id),t=n.sectionName===c("ChatSidebarSections").NEARBY?o.location:undefined,u=c("gkx")("AT5N7c3vp2KZeBLcdLGCkrCGhNAJHtjW4P7Xmlq4tK83K879cfHJ4CNLjdjOGJAQApRspNV8z5qOFgj3xZqsPbN0");return c("React").createElement("li",{className:"_42fz"+(s?" _570-":""),"data-id":o.id,key:o.id},c("React").createElement(c("ChatSidebarUser.react"),{birthday:o.is_birthday,image:o.thumbSrc,imageSize:n.imageSize,isPlayingGame:!!n.playingMap[o.id],name:o.name,roundedProfile:j,showRelationshipIndicator:o.show_relationship_indicator,sectionName:n.sectionName,slot:p,status:q,statusTime:r?r.toString():undefined,userID:o.id,unreadCount:n.unreadCounts[o.id],isMessengerOnlyContact:o.is_messenger_only,context:t,showWave:u}))},m=function m(n){var o=n.userData,p=babelHelpers.objectWithoutProperties(n,["userData"]);delete p.imageSize;delete p.isDisconnected;delete p.playingMap;delete p.sectionName;delete p.statusMap;delete p.unreadCounts;return c("React").createElement("ul",p,o.map(function(q,r){return l(n,q,r)}))};m.propTypes={imageSize:i.number.isRequired,isDisconnected:i.bool.isRequired,sectionName:i.oneOf(k).isRequired,playingMap:i.object.isRequired,statusMap:i.object.isRequired,unreadCounts:i.object.isRequired,userData:i.arrayOf(i.object).isRequired};f.exports=m}),null);
__d("ChatUnreadCountStore",["ChatDispatcher","ChatUnreadCountActionTypes","FluxStore","ifRequired"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"))}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c("ChatUnreadCountActionTypes").COUNT_UPDATED:this.__emitChange();break;default:break}};j.prototype.get=function(k){return c("ifRequired")("ChatUnreadCount",function(l){return l.get().getUnreadCountForUID(k)},function(){return 0})};f.exports=new j()}),null);
__d("PresenceStatusStore",["ChatDispatcher","FluxStore","PresenceStatus","PresenceStatusActionTypes"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"))}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c("PresenceStatusActionTypes").AVAILABILITY_CHANGED:this.__emitChange();break;default:break}};j.prototype.get=function(k){return c("PresenceStatus").get(k)};j.prototype.getIsPlaying=function(k){return c("PresenceStatus").isPlayingCanvasGameUser(k)};f.exports=new j()}),null);
__d("ShortProfilesActionTypes",["keyMirror"],(function a(b,c,d,e,f,g){"use strict";f.exports=c("keyMirror")({PROFILE_UPDATED:null})}),null);
__d("ShortProfilesStore",["ChatDispatcher","ChatProfileStore","FluxStore","ShortProfiles","ShortProfilesActionTypes","debounce","gkx"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i;h=babelHelpers.inherits(j,c("FluxStore"));i=h&&h.prototype;function j(){i.constructor.call(this,c("ChatDispatcher"));if(c("gkx")("AT7b-T545bsAAbOyiRE0i8vzwAqg-R4NRaZ4WCkL5TZUAjQ3ntria2ZiM69962yv5cnbq6KuBYvaMYzUdYYVWB-O"))this.$ShortProfilesStore1=c("debounce")(this.$ShortProfilesStore1,50)}j.prototype.__onDispatch=function(k){var l=k.type;switch(l){case c("ShortProfilesActionTypes").PROFILE_UPDATED:this.__emitChange();break;default:break}};j.prototype.getNow=function(k){var l=c("ChatProfileStore").get(k);if(!l)l=c("ShortProfiles").getNow(k);return l};j.prototype.getMulti=function(k){c("ShortProfiles").getMulti(k,this.$ShortProfilesStore1)};j.prototype.$ShortProfilesStore1=function(k){c("ChatDispatcher").dispatch({type:c("ShortProfilesActionTypes").PROFILE_UPDATED})};f.exports=new j()}),null);
__d("ChatSidebarUserGroupContainer.react",["AvailableListConstants","ChatSidebarSections","ChatSidebarUserGroup.react","ChatUnreadCountStore","PresenceStatusStore","ShortProfilesStore","React","emptyFunction","requireWeak","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=c("React").PropTypes,k=400,l=5e3,m=Object.keys(c("ChatSidebarSections")).map(function(o){return c("ChatSidebarSections")[o]});h=babelHelpers.inherits(n,c("React").Component);i=h&&h.prototype;function n(o){__p&&__p();i.constructor.call(this,o);this.$ChatSidebarUserGroupContainer1={};this.$ChatSidebarUserGroupContainer2=null;this.$ChatSidebarUserGroupContainer3=null;this.$ChatSidebarUserGroupContainer4=null;this.componentWillReceiveProps=function(u){this.$ChatSidebarUserGroupContainer9(u)}.bind(this);this.componentWillUnmount=function(){this.$ChatSidebarUserGroupContainer2&&this.$ChatSidebarUserGroupContainer2.remove();this.$ChatSidebarUserGroupContainer3&&this.$ChatSidebarUserGroupContainer3.remove();this.$ChatSidebarUserGroupContainer4&&this.$ChatSidebarUserGroupContainer4.remove()}.bind(this);this.$ChatSidebarUserGroupContainer10=function(){if(!this.$ChatSidebarUserGroupContainer5)this.$ChatSidebarUserGroupContainer5=c("setTimeoutAcrossTransitions")(function(){c("requireWeak")("FantaTabsEagerBootloader",function(u){return u.bootload()});this.$ChatSidebarUserGroupContainer10=c("emptyFunction")}.bind(this),k)}.bind(this);this.$ChatSidebarUserGroupContainer11=function(){clearTimeout(this.$ChatSidebarUserGroupContainer5);this.$ChatSidebarUserGroupContainer5=null}.bind(this);var p=this.$ChatSidebarUserGroupContainer6(o.ids,o.loadExtras),q=p.playingMap,r=p.statusMap,s=this.$ChatSidebarUserGroupContainer7(o.ids),t=this.$ChatSidebarUserGroupContainer8(o.ids);this.state={playingMap:q,statusMap:r,unreadCounts:s,userData:t}}n.prototype.componentDidMount=function(){this.$ChatSidebarUserGroupContainer2=c("ChatUnreadCountStore").addListener(function(){this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this));this.$ChatSidebarUserGroupContainer3=c("PresenceStatusStore").addListener(function(){this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this));this.$ChatSidebarUserGroupContainer4=c("ShortProfilesStore").addListener(function(){this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this))};n.prototype.shouldComponentUpdate=function(o,p){__p&&__p();for(var q=Object.keys(this.$ChatSidebarUserGroupContainer1),r=Array.isArray(q),s=0,q=r?q:q[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var t;if(r){if(s>=q.length)break;t=q[s++]}else{s=q.next();if(s.done)break;t=s.value}var u=t;if(this.$ChatSidebarUserGroupContainer1[u])return false}if(this.props.ids!==o.ids||this.props.imageSize!==o.imageSize||this.props.isDisconnected!==o.isDisconnected||this.props.loadExtras!==o.loadExtras||this.props.sectionName!==o.sectionName||this.state.userData.length!==p.userData.length)return true;for(var v=Object.keys(this.state.unreadCounts),w=Array.isArray(v),x=0,v=w?v:v[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var y;if(w){if(x>=v.length)break;y=v[x++]}else{x=v.next();if(x.done)break;y=x.value}var z=y;if(p.unreadCounts[z]!==this.state.unreadCounts[z])return true}for(var A=Object.keys(this.state.statusMap),B=Array.isArray(A),C=0,A=B?A:A[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var D;if(B){if(C>=A.length)break;D=A[C++]}else{C=A.next();if(C.done)break;D=C.value}var E=D;if(p.statusMap[E]!==this.state.statusMap[E])return true}for(var F=Object.keys(p.statusMap),G=Array.isArray(F),H=0,F=G?F:F[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var I;if(G){if(H>=F.length)break;I=F[H++]}else{H=F.next();if(H.done)break;I=H.value}var J=I;if(p.statusMap[J]!==this.state.statusMap[J])return true}for(var K=0;K<this.state.userData.length;K++)if(!this.state.userData[K]||!p.userData[K]||this.state.userData[K].id!==p.userData[K].id)return true;return false};n.prototype.render=function(){return c("React").createElement(c("ChatSidebarUserGroup.react"),{imageSize:this.props.imageSize,isDisconnected:this.props.isDisconnected,playingMap:this.state.playingMap,sectionName:this.props.sectionName,statusMap:this.state.statusMap,unreadCounts:this.state.unreadCounts,userData:this.state.userData,onMouseEnter:this.$ChatSidebarUserGroupContainer10,onMouseLeave:this.$ChatSidebarUserGroupContainer11})};n.prototype.$ChatSidebarUserGroupContainer9=function(o){var p=this.$ChatSidebarUserGroupContainer7(o.ids),q=this.$ChatSidebarUserGroupContainer6(o.ids,o.loadExtras),r=q.playingMap,s=q.statusMap,t=this.$ChatSidebarUserGroupContainer8(o.ids);this.setState({playingMap:r,statusMap:s,unreadCounts:p,userData:t})};n.prototype.$ChatSidebarUserGroupContainer6=function(o,p){__p&&__p();var q={},r={};o.forEach(function(s){if(p){var t=c("PresenceStatusStore").getIsPlaying(s);q[s]=t}var u=c("PresenceStatusStore").get(s);if(u===c("AvailableListConstants").ACTIVE)r[s]=u});return{statusMap:r,playingMap:q}};n.prototype.$ChatSidebarUserGroupContainer7=function(o){var p={};o.forEach(function(q){p[q]=c("ChatUnreadCountStore").get(q)});return p};n.prototype.$ChatSidebarUserGroupContainer8=function(o){__p&&__p();var p=[],q=[];o.forEach(function(r){var s=c("ShortProfilesStore").getNow(r);p.push(s);if(s)this.$ChatSidebarUserGroupContainer12(r);else{this.$ChatSidebarUserGroupContainer13(r);q.push(r)}}.bind(this));if(q.length>0)c("ShortProfilesStore").getMulti(q);return p};n.prototype.$ChatSidebarUserGroupContainer13=function(o){if(this.$ChatSidebarUserGroupContainer1[o]===undefined)this.$ChatSidebarUserGroupContainer1[o]=c("setTimeoutAcrossTransitions")(function(){this.$ChatSidebarUserGroupContainer1[o]=null;this.$ChatSidebarUserGroupContainer9(this.props)}.bind(this),l)};n.prototype.$ChatSidebarUserGroupContainer12=function(o){var p=this.$ChatSidebarUserGroupContainer1[o];if(!p)return;clearTimeout(p);this.$ChatSidebarUserGroupContainer1[o]=null};n.propTypes={ids:j.arrayOf(j.string).isRequired,imageSize:j.number.isRequired,isDisconnected:j.bool.isRequired,loadExtras:j.bool.isRequired,sectionName:j.oneOf(m).isRequired};f.exports=n}),null);
__d("MessengerDivebarGroupSectionTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerDivebarGroupSectionLoggerConfig",this.$MessengerDivebarGroupSectionTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerDivebarGroupSectionLoggerConfig",this.$MessengerDivebarGroupSectionTypedLogger1,c("Banzai").VITAL)};h.prototype.logImmediately=function(){c("GeneratedLoggerUtils").log("logger:MessengerDivebarGroupSectionLoggerConfig",this.$MessengerDivebarGroupSectionTypedLogger1,{signal:true})};h.prototype.clear=function(){this.$MessengerDivebarGroupSectionTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerDivebarGroupSectionTypedLogger1)};h.prototype.updateData=function(j){this.$MessengerDivebarGroupSectionTypedLogger1=babelHelpers["extends"]({},this.$MessengerDivebarGroupSectionTypedLogger1,j);return this};h.prototype.setNewDataSource=function(j){this.$MessengerDivebarGroupSectionTypedLogger1.new_data_source=j;return this};h.prototype.setNumThreadsActive=function(j){this.$MessengerDivebarGroupSectionTypedLogger1.num_threads_active=j;return this};h.prototype.setNumThreadsGenned=function(j){this.$MessengerDivebarGroupSectionTypedLogger1.num_threads_genned=j;return this};h.prototype.setVC=function(j){this.$MessengerDivebarGroupSectionTypedLogger1.vc=j;return this};var i={new_data_source:true,num_threads_active:true,num_threads_genned:true,vc:true};f.exports=h}),null);
__d("XPagesBrowserController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/pages/",{category:{type:"String"},ref:{type:"String"},cityid:{type:"Int"},similar:{type:"Int"},frompageid:{type:"Int"},actAsPageID:{type:"Int"},source:{type:"String"},pyml:{type:"Int"},viewallpywo:{type:"Bool",defaultValue:false},notif_id:{type:"Int"}})}),null);
__d("ChatSidebarOrderedList.react",["cx","fbt","ix","AvailableListConstants","Bootloader","BootloadOnRender.react","ChatConfig","ChatQuietLinks","ChatReliabilityInstrumentation","ChatSidebarConstants","ChatSidebarGroupThreadsGroup.react","ChatSidebarHeader.react","ChatSidebarSections","ChatSidebarUserGroupContainer.react","CurrentUser","CSS","Image.react","LazyComponent.react","JSResource","LeftRight.react","Link.react","MessengerDivebarGroupSectionTypedLogger","MessengerWebDriverTestIDs","PresencePrivacy","PresenceStatus","React","ReactDOM","Run","Scroll","SubscriptionsHandler","URI","WorkInviteSource","WorkModeConfig","XPagesBrowserController","XUIButton.react","XWorkInviteCoworkersDialogController","fbglyph","ifRequired"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("React").PropTypes,n=3;k=babelHelpers.inherits(o,c("React").PureComponent);l=k&&k.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=l.constructor).call.apply(p,[this].concat(s)),this.state={isDisconnected:false,renderBelowFold:false},this.$ChatSidebarOrderedList1=null,this.$ChatSidebarOrderedList2=null,this.$ChatSidebarOrderedList3=null,this.$ChatSidebarOrderedList4=null,this.$ChatSidebarOrderedList5=null,q}o.prototype.componentDidMount=function(){c("ChatQuietLinks").nukeLinks(c("ReactDOM").findDOMNode(this.refs.noLinks));this.$ChatSidebarOrderedList1=new(c("SubscriptionsHandler"))();var p=this.props.groups.filter(function(q){return c("PresenceStatus").getGroup(q.mercury_thread.participants)===c("AvailableListConstants").ACTIVE});new(c("MessengerDivebarGroupSectionTypedLogger"))().setNumThreadsGenned(this.props.groups.length).setNewDataSource(c("ChatConfig").get("only_active_groups")||c("ChatConfig").get("update_groups_source")).setNumThreadsActive(p.length).log();c("Run").onAfterLoad(function(){this.setState({renderBelowFold:true});this.$ChatSidebarOrderedList6()}.bind(this))};o.prototype.componentWillUnmount=function(){this.$ChatSidebarOrderedList1.release()};o.prototype.render=function(){var p=c("PresencePrivacy").getOnlinePolicy()===c("PresencePrivacy").ONLINE_TO_WHITELIST&&c("PresencePrivacy").getVisibility()?this.$ChatSidebarOrderedList7():this.$ChatSidebarOrderedList8();if(c("WorkModeConfig").test_group_section_order||c("ChatConfig").get("display_groups_top"))return c("React").createElement("div",{"data-testid":c("MessengerWebDriverTestIDs").CHAT_SIDEBAR},c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList9()),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList10()),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList11(),this.$ChatSidebarOrderedList12(),this.$ChatSidebarOrderedList13(),this.$ChatSidebarOrderedList14()),this.$ChatSidebarOrderedList15(),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList16(),p,this.$ChatSidebarOrderedList17(),this.$ChatSidebarOrderedList18()));return c("React").createElement("div",{"data-testid":c("MessengerWebDriverTestIDs").CHAT_SIDEBAR},c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList9()),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList10()),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList12()),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList13(),this.$ChatSidebarOrderedList14()),this.$ChatSidebarOrderedList15(),c("React").createElement("div",{ref:"noLinks"},this.$ChatSidebarOrderedList16(),this.$ChatSidebarOrderedList11(),p,this.$ChatSidebarOrderedList17(),this.$ChatSidebarOrderedList18()))};o.prototype.$ChatSidebarOrderedList19=function(p){var q=this.props.scrollContainer;if(!q)return;var r=q.clientHeight,s=q.scrollHeight,t=c("Scroll").getTop(q),u=Math.min(p.offsetTop,s-r);if(t!==u)c("ifRequired")("Animation",function(v){var w=Math.abs(u-t)/q.clientHeight*500;new v(q).to("scrollTop",u).ease(v.ease.end).duration(w).go()},function(){c("Scroll").setTop(q,u)})};o.prototype.$ChatSidebarOrderedList13=function(){if(!c("ChatConfig").get("show_header")&&!c("WorkModeConfig").test_group_section_order&&!(c("ChatConfig").get("display_groups_top")&&this.props.groups.length!==0))return null;var p=this.state.isDisconnected||c("PresencePrivacy").isUserOffline();return c("React").createElement(c("ChatSidebarHeader.react"),{className:p?"_570-":"",key:"header"},i._("CONTACTS"))};o.prototype.$ChatSidebarOrderedList7=function(){var p=c("ChatSidebarConstants").getImageSize(),q=this.props.topUsers.filter(function(u){return!c("PresencePrivacy").allows(u)});q.splice(-2);var r=c("React").createElement("a",{ajaxify:"/ajax/chat/privacy/settings_dialog.php?ref=whitelist_separator",href:"#",rel:"dialog"},i._("Edit")),s=c("WorkModeConfig").is_work_user?i._("MORE COLLEAGUES"):i._("MORE CONTACTS"),t=c("WorkModeConfig").is_work_user?i._("These colleagues can't see you on chat. {=link}",[i.param("=link",r)]):i._("These contacts can't see you on chat. {=link}",[i.param("=link",r)]);return[c("React").createElement(c("ChatSidebarHeader.react"),{key:"usersSeparator1"},s),c("React").createElement(c("ChatSidebarHeader.react"),{className:"_5j9-",key:"usersSeparator2"},t),c("React").createElement(c("ChatSidebarUserGroupContainer.react"),{ids:q,isDisconnected:this.state.isDisconnected,imageSize:p,key:c("ChatSidebarSections").OFFLINE_USERS,loadExtras:this.state.renderBelowFold,sectionName:c("ChatSidebarSections").OFFLINE_USERS})]};o.prototype.$ChatSidebarOrderedList8=function(){__p&&__p();if(this.props.availableUsers.length===0)return null;if(!this.state.renderBelowFold){var p=c("ChatSidebarConstants").getItemHeight();return[c("React").createElement("div",{key:c("ChatSidebarSections").MORE_ONLINE_FRIENDS,style:{height:p*this.props.availableUsers.length}})]}var q=c("ChatSidebarConstants").getImageSize(),r=c("WorkModeConfig").is_work_user?i._({"*":"{MORE ONLINE COWORKERS} ({=count})"},[i.param("MORE ONLINE COWORKERS",i._("MORE COLLEAGUES")),i.param("=count",this.props.availableUsers.length,[0])]):i._({"*":"{MORE ONLINE CONTACTS} ({=count})"},[i.param("MORE ONLINE CONTACTS",i._("MORE CONTACTS")),i.param("=count",this.props.availableUsers.length,[0])]),s=c("React").createElement(c("ChatSidebarUserGroupContainer.react"),{ids:this.props.availableUsers,imageSize:q,isDisconnected:this.state.isDisconnected,key:c("ChatSidebarSections").MORE_ONLINE_FRIENDS,loadExtras:this.state.renderBelowFold,sectionName:c("ChatSidebarSections").MORE_ONLINE_FRIENDS});return[c("React").createElement(c("ChatSidebarHeader.react"),{ref:function(t){this.$ChatSidebarOrderedList4=t}.bind(this),key:"usersSeparator",onClick:function(){return this.$ChatSidebarOrderedList19(c("ReactDOM").findDOMNode(this.$ChatSidebarOrderedList4))}.bind(this)},r),s]};o.prototype.$ChatSidebarOrderedList15=function(){if(!c("ChatConfig").get("nearby_friends_www_chatbar")||this.props.nearby.length===0)return null;return c("React").createElement(c("ChatSidebarHeader.react"),{ref:"nearbySeparator",key:"nearbySeparator"},c("React").createElement(c("LeftRight.react"),null,i._("NEARBY"),c("React").createElement(c("Link.react"),{target:"_blank",href:new(c("URI"))("/help/android-app/291236034364603")},c("React").createElement(c("Image.react"),{className:"_3-90",src:j("129548")}))))};o.prototype.$ChatSidebarOrderedList16=function(){if(!c("ChatConfig").get("nearby_friends_www_chatbar")||this.props.nearby.length===0)return null;var p=c("ChatSidebarConstants").getImageSize(),q=this.props.nearby;if(c("PresencePrivacy").getVisibility()==c("PresencePrivacy").ONLINE)q=this.props.nearby.filter(function(r){return c("PresencePrivacy").allows(r)});return c("React").createElement(c("ChatSidebarUserGroupContainer.react"),{key:c("ChatSidebarSections").NEARBY,ids:q,isDisconnected:this.state.isDisconnected,imageSize:p,loadExtras:this.state.renderBelowFold,sectionName:c("ChatSidebarSections").NEARBY})};o.prototype.$ChatSidebarOrderedList12=function(){if(!c("ChatConfig").get("show_rc_section")||this.props.recents.length===0)return null;var p=this.props.recents;p=this.props.recents.filter(function(r){return c("PresencePrivacy").allowsIfViewerIsOnline(r)});var q=c("ChatSidebarConstants").getImageSize();return[c("React").createElement(c("ChatSidebarHeader.react"),{ref:function(r){this.$ChatSidebarOrderedList5=r}.bind(this),key:"recentsSeparator",onClick:function(){return this.$ChatSidebarOrderedList19(c("ReactDOM").findDOMNode(this.$ChatSidebarOrderedList5))}.bind(this)},i._("RECENT CONVERSATIONS")),c("React").createElement(c("ChatSidebarUserGroupContainer.react"),{ids:p,isDisconnected:this.state.isDisconnected,imageSize:q,key:c("ChatSidebarSections").RECENTS,loadExtras:this.state.renderBelowFold,sectionName:c("ChatSidebarSections").RECENTS})]};o.prototype.$ChatSidebarOrderedList11=function(){__p&&__p();if(this.props.groups.length===0)return null;var p=this.state.isDisconnected||c("PresencePrivacy").isUserOffline(),q=this.props.groups;if(!p)if(c("ChatConfig").get("only_active_groups"))q=this.props.groups.filter(function(s){return c("PresenceStatus").getGroup(s.mercury_thread.participants)===c("AvailableListConstants").ACTIVE});else if(c("ChatConfig").get("sort_by_active_groups"))q=q.sort(function(s,t){return c("PresenceStatus").getGroup(t.mercury_thread.participants)-c("PresenceStatus").getGroup(s.mercury_thread.participants)});if(q.length===0)return null;var r=q.length;if(c("ChatConfig").get("only_active_groups")||c("ChatConfig").get("update_groups_source"))r=Math.min(q.length,c("ChatConfig").get("num_groups_to_show"));return[c("React").createElement(c("ChatSidebarHeader.react"),{ref:function(s){this.$ChatSidebarOrderedList2=s}.bind(this),key:"groupSeparator",className:p?"_570-":"",onClick:function(){return this.$ChatSidebarOrderedList19(c("ReactDOM").findDOMNode(this.$ChatSidebarOrderedList2))}.bind(this)},i._("GROUP CONVERSATIONS")),c("React").createElement(c("ChatSidebarGroupThreadsGroup.react"),{groups:q.slice(0,r),isDisconnected:this.state.isDisconnected,key:"group_threads_section",loadExtras:this.state.renderBelowFold})]};o.prototype.$ChatSidebarOrderedList14=function(){var p=c("ChatSidebarConstants").getImageSize(),q=this.props.topUsers;if(c("PresencePrivacy").getVisibility()==c("PresencePrivacy").ONLINE)q=this.props.topUsers.filter(function(r){return c("PresencePrivacy").allows(r)});return c("React").createElement(c("ChatSidebarUserGroupContainer.react"),{key:c("ChatSidebarSections").ORDERED_LIST,ids:q,isDisconnected:this.state.isDisconnected,imageSize:p,loadExtras:this.state.renderBelowFold,sectionName:c("ChatSidebarSections").ORDERED_LIST})};o.prototype.$ChatSidebarOrderedList18=function(){__p&&__p();if(!c("ChatConfig").get("work_show_invites"))return null;var p=this.state.isDisconnected||c("PresencePrivacy").isUserOffline();if(p){if(this.props.workWelcomeOverlay)this.$ChatSidebarOrderedList20(false);return null}var q=this.props.availableUsers.length===0&&this.props.topUsers.length===0&&this.props.workOthers.length===0&&this.props.groups.length===0,r=null;if(this.props.workWelcomeOverlay){if(c("CurrentUser").isWorkUser())this.$ChatSidebarOrderedList20(q)}else if(q)r=c("React").createElement("div",{className:"_3-8z"},c("React").createElement(c("Image.react"),{className:"_3-8z",src:j("286109")}),c("React").createElement("h3",{className:"_3-8k"},i._("Reach anyone instantly")),c("React").createElement("div",{className:"_3-8k _5-km"},i._("Invite colleagues to see them here as chat contacts.")));var s=c("XWorkInviteCoworkersDialogController").getURIBuilder().setEnum("source",c("WorkInviteSource").WWW_CHAT_SIDEBAR).getURI(),t=i._("Invite Colleagues");return c("React").createElement("div",{className:"_5-kn"},r,c("React").createElement(c("XUIButton.react"),{className:"_3-8i _2w3v ellipsis",label:t,use:"confirm",size:"large",href:"#",ajaxify:s,rel:"dialog"}))};o.prototype.$ChatSidebarOrderedList10=function(){if(!this.props.pymmList)return null;var p=this.props.pymmList.pages;if(!this.props.isSidebar||!c("ChatConfig").get("show_businesses")||!p||p.length===0)return null;return[c("React").createElement(c("BootloadOnRender.react"),{key:"bootloader",loader:c("JSResource")("ChatSidebarPymmListContainer.react").__setRef("ChatSidebarOrderedList.react"),placeholder:c("React").createElement("div",null),component:c("React").createElement(c("LazyComponent.react"),{key:"pymm_container",pymmList:p})})]};o.prototype.$ChatSidebarOrderedList9=function(){if(!c("ChatConfig").get("show_admined_pages")||this.props.adminedPages.length===0||!this.props.pageListModule)return null;var p=null;if(this.props.adminedPages.length>=n){var q=c("XPagesBrowserController").getURIBuilder().setString("category","your_pages").setString("ref",this.props.adminedPages[0].ref).getURI();p=c("React").createElement(c("Link.react"),{className:"_2l56",href:q,target:"_blank"},i._("SEE ALL"))}var r=this.props.pageListModule;return[c("React").createElement(c("ChatSidebarHeader.react"),{className:"_4kqp",key:c("ChatSidebarSections").ADMINED_PAGES},c("React").createElement(c("LeftRight.react"),null,i._("YOUR PAGES"),p)),c("React").createElement(r,{adminedPages:this.props.adminedPages,key:"pages_section"})]};o.prototype.$ChatSidebarOrderedList17=function(){if(!c("WorkModeConfig").is_work_user||this.props.workOthers.length===0)return null;var p=c("ChatSidebarConstants").getImageSize(),q=i._("{OTHERS} ({count})",[i.param("OTHERS",i._("OTHERS")),i.param("count",this.props.workOthers.length)]),r=c("React").createElement(c("ChatSidebarUserGroupContainer.react"),{ids:this.props.workOthers,imageSize:p,isDisconnected:this.state.isDisconnected,key:c("ChatSidebarSections").WORKPLACE_OTHERS,loadExtras:this.state.renderBelowFold,sectionName:c("ChatSidebarSections").WORKPLACE_OTHERS});return c("React").createElement("div",null,c("React").createElement(c("ChatSidebarHeader.react"),{ref:function(s){this.$ChatSidebarOrderedList3=s}.bind(this),key:"othersSeparator",onClick:function(){return this.$ChatSidebarOrderedList19(c("ReactDOM").findDOMNode(this.$ChatSidebarOrderedList3))}.bind(this)},q),r)};o.prototype.$ChatSidebarOrderedList6=function(){c("Bootloader").loadModules(["ChannelConnection"],function(p){this.$ChatSidebarOrderedList1.addSubscriptions(p.subscribe([p.CONNECTED,p.RECONNECTING,p.SHUTDOWN,p.MUTE_WARNING,p.UNMUTE_WARNING],function(){var q=p.disconnected();if(q!==this.state.isDisconnected){if(q)c("ChatReliabilityInstrumentation").logCHANNEL_DISCONNECT();else c("ChatReliabilityInstrumentation").logCHANNEL_CONNECT();this.setState({isDisconnected:q})}}.bind(this)))}.bind(this),"ChatSidebarOrderedList.react")};o.prototype.$ChatSidebarOrderedList20=function(p){if(this.props.workWelcomeOverlay)if(p)c("CSS").show(this.props.workWelcomeOverlay);else c("CSS").hide(this.props.workWelcomeOverlay)};o.propTypes={availableUsers:m.array.isRequired,workOthers:m.array.isRequired,groups:m.array.isRequired,recents:m.array.isRequired,scrollContainer:m.object,topUsers:m.array.isRequired,nearby:m.array.isRequired,adminedPages:m.array.isRequired,pageListModule:m.func,pymmList:m.object.isRequired,isSidebar:m.bool,workWelcomeOverlay:m.object};f.exports=o}),null);
__d("MessengerDivebarSizingTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();function h(){this.clear()}h.prototype.log=function(){c("GeneratedLoggerUtils").log("logger:MessengerDivebarSizingLoggerConfig",this.$MessengerDivebarSizingTypedLogger1,c("Banzai").BASIC)};h.prototype.logVital=function(){c("GeneratedLoggerUtils").log("logger:MessengerDivebarSizingLoggerConfig",this.$MessengerDivebarSizingTypedLogger1,c("Banzai").VITAL)};h.prototype.clear=function(){this.$MessengerDivebarSizingTypedLogger1={};return this};h.prototype.getData=function(){return babelHelpers["extends"]({},this.$MessengerDivebarSizingTypedLogger1)};h.prototype.updateData=function(j){this.$MessengerDivebarSizingTypedLogger1=babelHelpers["extends"]({},this.$MessengerDivebarSizingTypedLogger1,j);return this};h.prototype.setMaxItemSlots=function(j){this.$MessengerDivebarSizingTypedLogger1.max_item_slots=j;return this};h.prototype.setNumAdminedPages=function(j){this.$MessengerDivebarSizingTypedLogger1.num_admined_pages=j;return this};h.prototype.setNumGroups=function(j){this.$MessengerDivebarSizingTypedLogger1.num_groups=j;return this};h.prototype.setNumNearby=function(j){this.$MessengerDivebarSizingTypedLogger1.num_nearby=j;return this};h.prototype.setNumPymm=function(j){this.$MessengerDivebarSizingTypedLogger1.num_pymm=j;return this};h.prototype.setNumRecents=function(j){this.$MessengerDivebarSizingTypedLogger1.num_recents=j;return this};h.prototype.setNumTopFriends=function(j){this.$MessengerDivebarSizingTypedLogger1.num_top_friends=j;return this};h.prototype.setNumTopFriendsShown=function(j){this.$MessengerDivebarSizingTypedLogger1.num_top_friends_shown=j;return this};h.prototype.setSidebarType=function(j){this.$MessengerDivebarSizingTypedLogger1.sidebar_type=j;return this};h.prototype.updateExtraData=function(j){j=c("nullthrows")(c("GeneratedLoggerUtils").serializeMap(j));c("GeneratedLoggerUtils").checkExtraDataFieldNames(j,i);this.$MessengerDivebarSizingTypedLogger1=babelHelpers["extends"]({},this.$MessengerDivebarSizingTypedLogger1,j);return this};h.prototype.addToExtraData=function(j,k){var l={};l[j]=k;return this.updateExtraData(l)};var i={max_item_slots:true,num_admined_pages:true,num_groups:true,num_nearby:true,num_pymm:true,num_recents:true,num_top_friends:true,num_top_friends_shown:true,sidebar_type:true};f.exports=h}),null);
__d("ChatSortUsers",["ShortProfiles","TokenizeUtil"],(function a(b,c,d,e,f,g){__p&&__p();var h={};function i(k){if(h[k])return h[k];var l=(c("ShortProfiles").getNow(k)||{}).name;if(l)return h[k]=c("TokenizeUtil").flatten(l);return"~"}var j={sortAlphabetical:function k(l,m){var n=i(l),o=i(m);if(n!==o)return n<o?-1:1;return 0}};f.exports=j}),null);
__d("PresenceOrderedList",["ChatSidebarPreloadStore","ChatSortUsers","PresencePrivacy","PresenceStatus"],(function a(b,c,d,e,f,g){__p&&__p();function h(k){return k.map(function(l){var m=l.slice(0,-2),n=Number(l.slice(-1));return[m,n]})}function i(k,l){__p&&__p();var m=arguments.length<=2||arguments[2]===undefined?[]:arguments[2],n=[];k.forEach(function(o){var p=o[0],q=o[1];if(n.length>=l)return;if(c("PresencePrivacy").getFriendVisibility(p)==c("PresencePrivacy").BLACKLISTED)return;if(q==c("PresenceStatus").get(p)&&!m.includes(p))n.push(p)});return n}function j(){"use strict";this.$PresenceOrderedList1=null}j.prototype.getSorted=function(k,l){__p&&__p();var m=arguments.length<=2||arguments[2]===undefined?[]:arguments[2];"use strict";if(this.$PresenceOrderedList1){l(i(this.$PresenceOrderedList1,k,m));return}c("ChatSidebarPreloadStore").onLoaded(function(n){var o=n.buddies;this.$PresenceOrderedList1=h(o);l(i(this.$PresenceOrderedList1,k,m))}.bind(this))};j.prototype.getAvailableSorted=function(k){"use strict";var l=c("PresenceStatus").getOnlineIDs();if(k)l=l.filter(function(m){return k&&k.indexOf(m)===-1});return l.sort(c("ChatSortUsers").sortAlphabetical)};j.prototype.getAllSorted=function(k){"use strict";var l=[],m=this.$PresenceOrderedList1||[];c("PresenceStatus").getAllIDs().concat(m.map(function(n){return n[0]})).forEach(function(n){return l.indexOf(n)===-1&&l.push(n)});if(k)l=l.filter(function(n){return k&&k.indexOf(n)===-1});return l.sort(c("ChatSortUsers").sortAlphabetical)};f.exports=new j()}),null);
__d("ChatOrderedList",["csx","Arbiter","ArbiterMixin","AvailableList","AvailableListConstants","Bootloader","ChatConfig","ChatHovercard","ChatOptions","ChatOrderedListHover","ChatSidebarConstants","ChatSidebarOrderedList.react","ChatSidebarPreloadStore","ChatSidebarStore","CSS","DataStore","DOM","Event","JSLogger","MercuryParticipantTypes","MessengerDivebarSizingTypedLogger","Parent","PresenceOrderedList","PresencePrivacy","React","ReactDOM","ShortProfilesStore","SidebarType","WorkModeConfig","debounceAcrossTransitions","gkx","mixin"],(function a(b,c,d,e,f,g,h){__p&&__p();var i,j;i=babelHelpers.inherits(k,c("mixin")(c("ArbiterMixin")));j=i&&i.prototype;function k(l,m,n){"use strict";__p&&__p();j.constructor.call(this);this._workWelcomeOverlay=n;this._root=m;this._isVisible=false;this._excludedIds={};this._numTopFriends=5;this._adminedPages=[];this._pageListModule=null;this._pymmList={config:null,pages:[]};this._groups=[];this._nearby=[];this._recents=[];this._hoverController=null;this._isHovering=false;this._skippedRenderDuringHover=false;this._isSidebar=l;this._orderedList=c("DOM").find(this._root,".fbChatOrderedList");c("Event").listen(this._orderedList,"mouseover",function(){this._isHovering=true}.bind(this));c("Event").listen(this._orderedList,"mouseout",function(){this._isHovering=false;if(this._skippedRenderDuringHover){this._skippedRenderDuringHover=false;this._render()}}.bind(this));this._scrollableOrderedList=c("Parent").byClass(this._root,"scrollableOrderedList");this._scrollableArea=c("Parent").byClass(this._root,"scrollable");if(l)new(c("ChatHovercard"))(this);c("Arbiter").subscribe(c("JSLogger").DUMP_EVENT,function(o,p){this.getSortedList(function(q){p.chat_lists=p.chat_lists||{sorted_list:q,available_list:c("PresenceOrderedList").getAvailableSorted(),excluded_list:this._excludedIds}}.bind(this))}.bind(this));c("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){return this._render()}.bind(this));c("AvailableList").subscribe(c("AvailableListConstants").ON_AVAILABILITY_CHANGED,function(){return this._render()}.bind(this));this._maybeStartRecentsSectionFunnelLog()}k.prototype.getShowingUsers=function(){"use strict";return c("DOM").scry(this._root,"li._42fz,li._5a58").map(this.getUserForNode)};k.prototype.getUserForNode=function(l){"use strict";return c("DataStore").get(l,"id")||c("DataStore").get(l,"serverthreadid")};k.prototype.getHoverController=function(){"use strict";if(!this._hoverController)this._hoverController=new(c("ChatOrderedListHover"))(this);return this._hoverController};k.prototype.getItemHeight=function(){"use strict";return c("ChatSidebarConstants").getItemHeight()};k.prototype.getRoot=function(){"use strict";return this._root};k.prototype.getSortedList=function(l){"use strict";c("PresenceOrderedList").getSorted(this._numTopFriends,function(m){return l(m)})};k.prototype.hide=function(){"use strict";if(!this._isVisible)return;this._isVisible=false;c("CSS").hide(this._scrollableOrderedList||this._root);this.inform("hide")};k.prototype.setNumTopFriends=function(l,m,n){"use strict";__p&&__p();c("ChatSidebarPreloadStore").onLoaded(function(o){__p&&__p();var p=o.groups,q=o.nearby,r=o.adminedPages,s=o.pageListModule,t=o.pymmList,u=o.recents,v=new(c("MessengerDivebarSizingTypedLogger"))();v.setMaxItemSlots(l).setSidebarType(n);l--;if(c("ChatConfig").get("show_header"))l--;var w=c("gkx")("AT6ezxCFIuDr3f155YU0cVompttkL6-4ye5A4xnJR5wWiQ5IOmLV0d94XM9VgwajF9248OtJTIz0cnvOn5PCMW2_"),x=!c("ChatOptions").getSetting("hide_businesses")&&t.pages;if(w&&x)l-=3;var y=!c("ChatOptions").getSetting("hide_admined_pages")?r:[];if(w&&y.length)l-=y.length+1;var z=l,A=!c("ChatOptions").getSetting("hide_groups")?p:[],B=x?t:{config:null,pages:[]},C=Math.min(A.length,c("ChatConfig").get("num_groups_to_show"));if(C>0)z-=C+1;if(c("ChatConfig").get("nearby_friends_www_chatbar")&&q.length>0)z-=q.length+1;if(c("ChatConfig").get("show_admined_pages")&&y.length>0)z-=y.length+1;if(c("ChatConfig").get("show_rc_section")&&u.length>0)z-=u.length+1;if(c("ChatConfig").get("show_businesses")&&B.pages.length>0)z-=2;var D=z;z=Math.min(l,Math.max(z,c("ChatConfig").get("min_top_friends")||0));if(z!==this._numTopFriends||A.length!==this._groups.length||q.length!==this._nearby.length||y.length!==this._adminedPages.length||B.pages.length!==this._pymmList.pages.length||u.length!==this._recents.length){this._groups=A;this._numTopFriends=z;this._nearby=q;this._adminedPages=y;this._pageListModule=s;this._pymmList=B;this._recents=u;v.setNumTopFriends(z).setNumNearby(q.length).setNumGroups(p.length).setNumAdminedPages(y.length).setNumPymm(B.pages.length).setNumRecents(u.length);var E=0;if(n===c("SidebarType").BUDDYLIST&&y.length>0){E+=y.length+1;v.setNumAdminedPages(0)}if(n===c("SidebarType").BUDDYLIST&&B.pages.length>0){v.setNumPymm(0);E+=2}D+=E;if(z>D)D+=1;v.setNumTopFriendsShown(Math.max(D,0));if(c("ChatSidebarStore").getVisibleType()===n)v.log();if(m){typeof this._render.reset==="function"&&this._render.reset();this._renderOrderedList()}else this._render()}}.bind(this))};k.prototype._renderOrderedList=function(){"use strict";__p&&__p();if(!this._isVisible||this._isHovering){if(this._isHovering)this._skippedRenderDuringHover=true;return}c("PresenceOrderedList").getSorted(this._numTopFriends,function(l){var m=c("WorkModeConfig").is_work_user?c("PresenceOrderedList").getAllSorted(l.concat(this._nearby).concat(this._recents)).filter(function(p){var q=c("ShortProfilesStore").getNow(p);return!q||q.type===c("MercuryParticipantTypes").FB4C}):c("PresenceOrderedList").getAvailableSorted(l.concat(this._nearby).concat(this._recents)),n=c("WorkModeConfig").is_work_user?c("PresenceOrderedList").getAllSorted(l.concat(this._nearby).concat(this._recents)).filter(function(p){var q=c("ShortProfilesStore").getNow(p);return q&&q.type!==c("MercuryParticipantTypes").FB4C}):[],o=l.filter(function(p){return!this._nearby||this._nearby.indexOf(p)===-1}.bind(this));c("ReactDOM").render(c("React").createElement(c("ChatSidebarOrderedList.react"),{availableUsers:m,workOthers:n,scrollContainer:this._scrollContainer,topUsers:o,groups:this._groups,nearby:this._nearby,adminedPages:this._adminedPages,pageListModule:this._pageListModule,pymmList:this._pymmList,isSidebar:this._isSidebar,workWelcomeOverlay:this._workWelcomeOverlay,recents:this._recents}),this._orderedList);this.inform("render")}.bind(this),this._recents)};k.prototype._render=function(){"use strict";this._render=c("debounceAcrossTransitions")(this._renderOrderedList.bind(this),300);this._render()};k.prototype.show=function(){"use strict";if(this._isVisible)return;this._isVisible=true;c("CSS").show(this._scrollableOrderedList||this._root);this._render();this.inform("show")};k.prototype.isVisible=function(){"use strict";return this._isVisible};k.prototype.setScrollContainer=function(l){"use strict";if(c("DOM").contains(l,this._root))this._scrollContainer=l};k.prototype._maybeStartRecentsSectionFunnelLog=function(){"use strict";if(this._isSidebar&&c("ChatConfig").get("in_recents_experiment"))c("Bootloader").loadModules(["FunnelLogger"],function(l){l.startFunnel("WWW_DIVEBAR_RECENTS_FUNNEL");if(c("ChatConfig").get("show_rc_section"))l.appendAction("WWW_DIVEBAR_RECENTS_FUNNEL","show_recents")},"ChatOrderedList")};f.exports=k}),null);
__d("MessengerSearchFunnelLoggerConstants",[],(function a(b,c,d,e,f,g){"use strict";f.exports={NAME:"WWW_MESSENGER_SEARCH_SESSION_FUNNEL",FETCHED_STATE_IMPRESSION_LIST:"fetched_state_impression_list",LOADING_STATE_IMPRESSION_LIST:"loading_state_impression_list",SEND_SERVER_REQUEST:"send_server_request",WWW_SIDEBAR_TAG:"www",MESSENGER_DOT_COM:"messenger_dot_com",UNIVERSAL_SEARCH:"universal_search",USER_CONTACT:"user_contact",USER_NON_CONTACT:"user_non_contact",GROUP:"group",PAGE:"page",GAME:"game",TINCAN:"tincan",SMS:"sms",SMS_GROUP:"sms_group",COWORKER:"coworker",OTHER:"other"}}),null);
__d("ChatSearchSource",["requireWeak","AbstractSearchSource","AsyncRequest","Bootloader","CurrentUser","MercuryParticipantTypes","MessengerSearchFunnelLoggerConstants","SearchableEntry","SearchSourceCallbackManager","ShortProfiles","TokenizeUtil","debounce","emptyFunction","isValidUniqueID"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=null;c("requireWeak")("OrderedFriendsList",function(l){j=l});h=babelHelpers.inherits(k,c("AbstractSearchSource"));i=h&&h.prototype;function k(l){i.constructor.call(this);this.$ChatSearchSource1=new(c("SearchSourceCallbackManager"))({parseFn:c("TokenizeUtil").parse,matchFn:c("TokenizeUtil").isQueryMatch,indexFn:l.indexFn});this.$ChatSearchSource2=l.queryRequests||[];this.$ChatSearchSource3=l.searchType||"";this.$ChatSearchSource4=false;this.$ChatSearchSource5=c("debounce")(this.$ChatSearchSource5,100,this);this.$ChatSearchSource6=l.excludeMemorializedUsers||false;this.$ChatSearchSource7=""}k.prototype.bootstrapImpl=function(l){c("ShortProfiles").fetchAll().done(function(){this.$ChatSearchSource4=true;this.$ChatSearchSource8();l()}.bind(this))};k.prototype.searchImpl=function(l,m,n){__p&&__p();var o=null,p={},q=n&&n.onQueryFinished,r=n&&n.onQueryStarted;r&&r(l);var s=this.$ChatSearchSource1.search(l,function(v){__p&&__p();if(!o){o=v;o.forEach(function(w){return p[w.getUniqueID()]=true})}else v.forEach(function(w){var x=w.getUniqueID();if(!p[x]){o.push(w);p[x]=true}});m(o,l);if(l.length===1&&this.$ChatSearchSource4)q&&q(l)}.bind(this),n);if(!s||!this.$ChatSearchSource2||!this.$ChatSearchSource2.length||l.length===0){q&&q(l);return}if(l.length===1){if(this.$ChatSearchSource4)q&&q(l);return}var t={value:l,existing_ids:o&&o.map(function(v){return v.getUniqueID()}).join(","),limit:n&&n.threadLimit,exclude_memorialized_users:this.$ChatSearchSource6},u=this.$ChatSearchSource2.length;this.$ChatSearchSource2.forEach(function(v){this.$ChatSearchSource5(t,v,function(w){this.$ChatSearchSource9(this.$ChatSearchSource10(this.$ChatSearchSource11(w)).filter(function(x){return!!x}),l);u--;if(u===0){this.$ChatSearchSource1.setQueryStringAsExhausted(l);q&&q(l)}}.bind(this))}.bind(this),this)};k.prototype.getAllEntriesMap=function(){return this.$ChatSearchSource1.getAllEntries()};k.prototype.$ChatSearchSource8=function(){var l=c("ShortProfiles").getCachedProfileIDs(),m=l.filter(function(o){var p=c("ShortProfiles").getNow(o);return o==c("CurrentUser").getID()||p.type===c("MercuryParticipantTypes").FRIEND||p.type===c("MercuryParticipantTypes").FB4C}),n=m.map(this.$ChatSearchSource12);if(n.length)this.$ChatSearchSource1.addLocalEntries(n)};k.prototype.$ChatSearchSource10=function(l){return l.map(this.$ChatSearchSource13,this)};k.prototype.$ChatSearchSource13=function(l,m){__p&&__p();if(l.mercury_thread){if(!j)return null;return j.normalizeThreadEntry(l,m)}var n=l.text,o=l.uid;if(!n||!c("isValidUniqueID")(o))return null;var p=j?j.getActiveRank(o):0;if(j&&!j.contains(o))p+=m;return new(c("SearchableEntry"))({uniqueID:o,title:n,order:p,subtitle:l.subtext,type:l.render_type||l.type,photo:l.photo,uri:l.path,auxiliaryData:{isMessengerUser:l.is_messenger_user,alias:l.alias}})};k.prototype.$ChatSearchSource11=function(l){var m=l.getPayload();if(Array.isArray(m))return m;else if(m&&m.entries)return m.entries;else return[]};k.prototype.$ChatSearchSource12=function(l){var m=c("ShortProfiles").getNow(l),n=l==c("CurrentUser").getID()?c("MercuryParticipantTypes").FRIEND:m.type,o=[m.additionalName,m.alternateName].concat(m.searchTokens||[]).join(" "),p=m.name,q=null;return new(c("SearchableEntry"))({uniqueID:l,title:p,order:j?j.getActiveRank(l):0,subtitle:q,keywordString:o,type:n,photo:m.thumbSrc,uri:m.uri,auxiliaryData:{isMessengerUser:m.is_messenger_user,alias:m.alias}})};k.prototype.$ChatSearchSource5=function(l,m,n,o){if(this.$ChatSearchSource3===c("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG&&l.value!==this.$ChatSearchSource7){c("Bootloader").loadModules(["MessengerSearchFunnelLogger"],function(p){p.logStartQuery(c("MessengerSearchFunnelLoggerConstants").NAME,l.value)},"ChatSearchSource");this.$ChatSearchSource7=l.value}new(c("AsyncRequest"))(m.uri).setData(babelHelpers["extends"]({},l,m.data)).setMethod("GET").setReadOnly(true).setHandler(n).setErrorHandler(o||c("emptyFunction")).setAllowCrossPageTransition(true).send()};k.prototype.$ChatSearchSource9=function(l,m){if(l.length)this.$ChatSearchSource1.addQueryEntries(l,m)};k.prototype.addLocalEntries=function(l){this.$ChatSearchSource1.addLocalEntries(l)};k.prototype.refreshData=function(){c("ShortProfiles").fetchAll()};f.exports=k}),null);
__d("ChatTypeaheadConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({USER_TYPE:"user",THREAD_TYPE:"thread",FRIEND_TYPE:"friend",NON_FRIEND_TYPE:"non_friend",FB4C_TYPE:"fb4c",PAGE_TYPE:"page",MEETING_ROOM_PAGE_TYPE:"meeting_room_page",COMMERCE_PAGE_TYPE:"commerce_page",HEADER_TYPE:"header",INTERNAL_BOT_PAGE_TYPE:"internal_bot_page",GAME_TYPE:"game"});f.exports=h}),null);
__d("ChatSidebarComposeLink.react",["fbt","ChatOpenTabEventLogger","FantaTabActions","Link.react","MercuryThreads","React","TooltipData"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("MercuryThreads").get();i=babelHelpers.inherits(l,c("React").Component);j=i&&i.prototype;function l(m){j.constructor.call(this,m)}l.prototype.render=function(){var m=h._("New Message");return c("React").createElement(c("Link.react"),babelHelpers["extends"]({className:this.props.className,href:"#",onClick:this.$ChatSidebarComposeLink1},c("TooltipData").propsFor(m,"below")))};l.prototype.$ChatSidebarComposeLink1=function(m){var n=k.createNewLocalThreadGenerateID();c("FantaTabActions").openTab(n,"compose_link");c("ChatOpenTabEventLogger").logClickOpen("sidebar",n);m.preventDefault()};f.exports=l}),null);
__d("ChatSidebarDropdownConstants",[],(function a(b,c,d,e,f,g){var h=Object.freeze({SOUND:"sound",ADVANCED_SETTINGS:"advanced_settings",BLOCK_SETTINGS:"block_settings",TURN_OFF_DIALOG:"turn_off_dialog",CLOSE_ALL_TABS:"close_all_tabs",LOWER_ALL_TABS:"lower_all_tabs",TOGGLE_DISCOVER_BOTS:"toggle_discover_bots",SIDEBAR:"sidebar",HIDE_GROUPS:"hide_groups",ONLINE:"online",VIDEOCALL_ON:"videoon",VIDEOCALL_OFF:"videooff",PAUSE:"pause",SHOW_APPS:"show_apps",HIDE_APPS:"hide_apps",SHOW_TICKER:"show_ticker",HIDE_TICKER:"hide_ticker",HIDE_ADMINED_PAGES:"hide_admined_pages",HIDE_BUSINESSES:"hide_businesses",EMOJI_SETTINGS:"emoji_settings"});f.exports=h}),null);
__d("XChatEmojiSettingsController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/chat/emoji_settings/",{__asyncDialog:{type:"Int"}})}),null);
__d("ChatSidebarDropdown.react",["cx","fbt","AppsDivebarDisplayController","Arbiter","AsyncRequest","ChatConfig","ChatOptions","ChatSidebarBotsActions","ChatSidebarBotsStore","ChatSidebarDropdownConstants","ChatVisibility","ContextualDialogArrow","ContextualLayerAutoFlip","ConversationNubUtils","CurrentUser","FantaTabActions","FBRTCCallBlockingStore","FBRTCSupport","LayerHideOnBlur","Link.react","LogHistory","MenuSeparator.react","PinnedConversationNubsConfig","PopoverMenu.react","PresencePrivacy","PresenceState","React","ReactXUIMenu","SidebarType","SubscriptionsHandler","TrackingNodes","URI","XChatEmojiSettingsController","emptyFunction","ge","gkx","joinClasses"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=c("ChatSidebarBotsActions").module,m=c("ChatSidebarBotsStore").module,n=c("ReactXUIMenu").SelectableItem,o=c("ReactXUIMenu").SelectableMenu,p=c("ReactXUIMenu").Item,q=c("React").PropTypes,r=c("LogHistory").getInstance("blackbird");j=babelHelpers.inherits(s,c("React").PureComponent);k=j&&j.prototype;function s(){var t,u;for(var v=arguments.length,w=Array(v),x=0;x<v;x++)w[x]=arguments[x];return u=(t=k.constructor).call.apply(t,[this].concat(w)),this.$ChatSidebarDropdown6=function(y,z){var A=z.item.getValue(),B=z.item.isSelected&&z.item.isSelected();this.$ChatSidebarDropdown5(A,!!B)}.bind(this),this.state={appsVisible:c("AppsDivebarDisplayController").isVisible(),isConversationsEnabled:c("PinnedConversationNubsConfig").isEnabled,isDiscoverBotsHidden:m?m.getState().isHidden:true,isOnline:c("ChatVisibility").isOnline(),isTickerVisible:this.$ChatSidebarDropdown2(),isCallBlocked:c("FBRTCCallBlockingStore").getBlockingStatus(),pendingChange:false},u}s.prototype.componentDidMount=function(){__p&&__p();this.$ChatSidebarDropdown1=new(c("SubscriptionsHandler"))();this.$ChatSidebarDropdown1.addSubscriptions(c("Arbiter").subscribe(["Ticker/resized","ticker/show"],function(){this.setState({isTickerVisible:this.$ChatSidebarDropdown2()})}.bind(this)),c("Arbiter").subscribe(["AppsDivebar/show-apps","AppsDivebar/hide-apps"],function(){this.setState({appsVisible:c("AppsDivebarDisplayController").isVisible()})}.bind(this)),c("PresencePrivacy").subscribe("privacy-user-presence-changed",function(){this.setState({isOnline:c("ChatVisibility").isOnline()})}.bind(this)),c("Arbiter").subscribe("buddylist/hide",function(){this.refs.menu.hidePopover()}.bind(this)),c("Arbiter").subscribe("sidebar/visibility",function(t,u){if(!u)this.refs.menu.hidePopover()}.bind(this)),c("FBRTCCallBlockingStore").addListener(function(){this.setState({isCallBlocked:c("FBRTCCallBlockingStore").getBlockingStatus()})}.bind(this)));if(m)this.$ChatSidebarDropdown1.addSubscriptions(m.addListener(function(){this.setState({isDiscoverBotsHidden:m.getState().isHidden})}.bind(this)));if(c("PinnedConversationNubsConfig").userSettingsIsEnabled)this.$ChatSidebarDropdown1.addSubscriptions(c("Arbiter").subscribe(c("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT,function(){this.setState({isConversationsEnabled:false})}.bind(this)),c("Arbiter").subscribe(c("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT,function(){this.setState({isConversationsEnabled:true})}.bind(this)))};s.prototype.componentWillUnmount=function(){this.$ChatSidebarDropdown1&&this.$ChatSidebarDropdown1.release()};s.prototype.$ChatSidebarDropdown2=function(){var t=c("ge")("pagelet_ticker");return!!(t&&t.offsetHeight!==0)};s.prototype.$ChatSidebarDropdown3=function(t,u){var v=u?"sidebar_dropdown_visibility_error":"sidebar_dropdown_set_visibility";r.debug(v,JSON.stringify({action:t}))};s.prototype.$ChatSidebarDropdown4=function(t,u){if(this.state.pendingChange)return;this.setState({pendingChange:true});var v={};v[t]=!u;c("ChatOptions").setSetting(t,!u,"mini_sidebar_menu");new(c("AsyncRequest"))("/ajax/chat/settings.php").setHandler(c("PresenceState").doSync).setErrorHandler(function(){return c("ChatOptions").setSetting(t,u,"mini_sidebar_menu_error")}).setFinallyHandler(function(){return this.setState({pendingChange:false})}.bind(this)).setData(v).setAllowCrossPageTransition(true).send()};s.prototype.$ChatSidebarDropdown5=function(t,u){__p&&__p();var v=true;switch(t){case c("ChatSidebarDropdownConstants").SOUND:this.$ChatSidebarDropdown4(t,u);break;case c("ChatSidebarDropdownConstants").ADVANCED_SETTINGS:case c("ChatSidebarDropdownConstants").TURN_OFF_DIALOG:this.$ChatSidebarDropdown3(t,false);break;case c("ChatSidebarDropdownConstants").LOWER_ALL_TABS:c("FantaTabActions").minimizeAllTabs();break;case c("ChatSidebarDropdownConstants").CLOSE_ALL_TABS:c("FantaTabActions").closeAllTabs();this.$ChatSidebarDropdown3(t,false);break;case c("ChatSidebarDropdownConstants").HIDE_GROUPS:this.$ChatSidebarDropdown4(t,u);break;case c("ChatSidebarDropdownConstants").TOGGLE_DISCOVER_BOTS:if(l)l.saveSettings({isHidden:!this.state.isDiscoverBotsHidden});break;case c("ChatSidebarDropdownConstants").SIDEBAR:this.props.onToggleSidebar();v=false;break;case c("ChatSidebarDropdownConstants").ONLINE:!this.state.isOnline?c("ChatVisibility").goOnline():this.$ChatSidebarDropdown3(t,true);break;case c("ChatSidebarDropdownConstants").VIDEOCALL_ON:c("FBRTCCallBlockingStore").turnOnVideoCalling();break;case c("ChatSidebarDropdownConstants").VIDEOCALL_OFF:break;case c("ChatSidebarDropdownConstants").PAUSE:break;case c("ChatSidebarDropdownConstants").SHOW_TICKER:c("Arbiter").inform("ChatSidebarDropdown/openTicker");break;case c("ChatSidebarDropdownConstants").HIDE_TICKER:c("Arbiter").inform("ChatSidebarDropdown/closeTicker");break;case c("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT:c("ConversationNubUtils").turnConversationsOff();break;case c("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT:c("ConversationNubUtils").turnConversationsOn();break;case c("ChatSidebarDropdownConstants").SHOW_APPS:c("AppsDivebarDisplayController").showApps();break;case c("ChatSidebarDropdownConstants").HIDE_APPS:c("AppsDivebarDisplayController").hideApps();break;case c("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES:this.$ChatSidebarDropdown4(t,u);break;case c("ChatSidebarDropdownConstants").HIDE_BUSINESSES:this.$ChatSidebarDropdown4(t,u);break}if(v&&this.refs.menu)this.refs.menu.hidePopover()};s.prototype.$ChatSidebarDropdown7=function(){return c("React").createElement(n,{value:c("ChatSidebarDropdownConstants").SOUND,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").SOUND)},i._("Chat Sounds"))};s.prototype.$ChatSidebarDropdown8=function(){var t=c("XChatEmojiSettingsController").getURIBuilder().getURI();return c("React").createElement(p,{href:t,rel:"dialog",value:c("ChatSidebarDropdownConstants").EMOJI_SETTINGS},i._("Emoji"))};s.prototype.$ChatSidebarDropdown9=function(){if(c("CurrentUser").isWorkUser())return null;return c("React").createElement(p,{href:new(c("URI"))("/settings?tab=blocking"),value:c("ChatSidebarDropdownConstants").BLOCK_SETTINGS},i._("Block Settings"))};s.prototype.$ChatSidebarDropdown10=function(){return c("React").createElement(p,{href:new(c("URI"))("/ajax/chat/privacy/settings_dialog.php"),rel:"dialog",value:c("ChatSidebarDropdownConstants").ADVANCED_SETTINGS},i._("Advanced Settings"))};s.prototype.$ChatSidebarDropdown11=function(){return c("React").createElement(p,{value:c("ChatSidebarDropdownConstants").LOWER_ALL_TABS},i._("Collapse All Chat Tabs"))};s.prototype.$ChatSidebarDropdown12=function(){return c("React").createElement(p,{value:c("ChatSidebarDropdownConstants").CLOSE_ALL_TABS},i._("Close All Chat Tabs"))};s.prototype.$ChatSidebarDropdown13=function(){return c("React").createElement(p,{className:"_4kqp",value:c("ChatSidebarDropdownConstants").SIDEBAR},i._("Hide Sidebar"))};s.prototype.$ChatSidebarDropdown14=function(){if(this.props.sidebarType===c("SidebarType").BUDDYLIST_NUB||!c("ChatConfig").get("show_admined_pages"))return null;return c("React").createElement(n,{className:"_4kqp",value:c("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").HIDE_ADMINED_PAGES)},i._("Hide Pages You Manage"))};s.prototype.$ChatSidebarDropdown15=function(){if(this.props.sidebarType===c("SidebarType").BUDDYLIST_NUB||!c("ChatConfig").get("show_businesses"))return null;return c("React").createElement(n,{className:"_4kqp",value:c("ChatSidebarDropdownConstants").HIDE_BUSINESSES,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").HIDE_BUSINESSES)},i._("Hide Pages to Contact"))};s.prototype.$ChatSidebarDropdown16=function(){if(this.props.sidebarType===c("SidebarType").BUDDYLIST_NUB)return null;return c("React").createElement(n,{value:c("ChatSidebarDropdownConstants").HIDE_GROUPS,selected:c("ChatOptions").getSetting(c("ChatSidebarDropdownConstants").HIDE_GROUPS)},i._("Hide Groups"))};s.prototype.$ChatSidebarDropdown17=function(){var t=c("ChatVisibility").isOnline(),u=t?new(c("URI"))("/ajax/chat/privacy/settings_dialog.php").addQueryData("dialog_type","turn_off_dialog"):"#",v="";if(c("gkx")("AT69r4Tjj4qkJ_vN9jQ6gElERSeEr7u62xiMa_cx47RRkJ105PHueucCfKn05FryjNTRlgeKhVV5K6cdO6mpY_4fixxY2c-NmAOkc0BTwRAPmw"))v=t?i._("Turn Off Chat (Advanced Settings)"):i._("Turn On Chat");else v=t?i._("Turn Off Chat"):i._("Turn On Chat");var w=t?c("ChatSidebarDropdownConstants").TURN_OFF_DIALOG:c("ChatSidebarDropdownConstants").ONLINE;return c("React").createElement(p,{href:u,rel:t?"dialog":"",value:w},v)};s.prototype.$ChatSidebarDropdown18=function(){if(!c("FBRTCSupport").isVideoCallBlockingSupported())return null;var t=this.state.isCallBlocked,u=t?"#":new(c("URI"))("/videocall/off/"),v=t?i._("Turn On Video\/Voice Calls"):i._("Turn Off Video\/Voice Calls"),w=t?c("ChatSidebarDropdownConstants").VIDEOCALL_ON:c("ChatSidebarDropdownConstants").VIDEOCALL_OFF;return c("React").createElement(p,{href:u,rel:t?"":"dialog",value:w},v)};s.prototype.$ChatSidebarDropdown19=function(){var t=m?m.getState().bots:[];if(!l||t.length===0)return null;var u=this.state.isDiscoverBotsHidden?i._("Show bot discovery"):i._("Hide bot discovery");return c("React").createElement(p,{value:c("ChatSidebarDropdownConstants").TOGGLE_DISCOVER_BOTS},u)};s.prototype.$ChatSidebarDropdown20=function(){if(!c("PinnedConversationNubsConfig").userSettingsIsEnabled)return null;var t=this.state.isConversationsEnabled,u=t?i._("Turn Off Post Tabs"):i._("Turn On Post Tabs"),v=t?c("ConversationNubUtils").TURN_CONVERSATIONS_OFF_EVENT:c("ConversationNubUtils").TURN_CONVERSATIONS_ON_EVENT;return c("React").createElement(p,{value:v},u)};s.prototype.$ChatSidebarDropdown21=function(){if(!c("ChatConfig").get("has_apps_option")||this.props.sidebarType!==c("SidebarType").SIDEBAR)return null;var t=this.state.appsVisible,u=t?i._("Hide Games"):i._("Show Games"),v=t?c("ChatSidebarDropdownConstants").HIDE_APPS:c("ChatSidebarDropdownConstants").SHOW_APPS;return[c("React").createElement(c("MenuSeparator.react"),{key:"apps_separator"}),c("React").createElement(p,{value:v,key:"apps_menu"},u)]};s.prototype.$ChatSidebarDropdown22=function(){return c("React").createElement(o,{className:"fbChatSidebarDropdown/PopoverMenu",multiple:true,onItemClick:this.$ChatSidebarDropdown6},this.$ChatSidebarDropdown7(),this.$ChatSidebarDropdown8(),this.$ChatSidebarDropdown9(),this.$ChatSidebarDropdown10(),c("React").createElement(c("MenuSeparator.react"),null),this.$ChatSidebarDropdown11(),this.$ChatSidebarDropdown12(),this.$ChatSidebarDropdown19(),this.$ChatSidebarDropdown13(),this.$ChatSidebarDropdown14(),this.$ChatSidebarDropdown15(),this.$ChatSidebarDropdown16(),this.$ChatSidebarDropdown17(),this.$ChatSidebarDropdown18(),this.$ChatSidebarDropdown20(),this.$ChatSidebarDropdown21())};s.prototype.render=function(){var t=i._("Options"),u=c("joinClasses")(this.props.className,"_5qth _5vm9"+(!c("ChatVisibility").isOnline()?" _5vma":"")),v=c("TrackingNodes").getTrackingInfo(c("TrackingNodes").types.DROPDOWN_BUTTON);return c("React").createElement(c("PopoverMenu.react"),{alignh:"right",alignv:"top",className:u,layerBehaviors:[c("ContextualLayerAutoFlip"),c("ContextualDialogArrow"),c("LayerHideOnBlur")],menu:this.$ChatSidebarDropdown22(),onHide:this.props.onHide,onShow:this.props.onShow,ref:"menu"},c("React").createElement(c("Link.react"),{"aria-label":t,className:"_5vmb button","data-ft":v,"data-hover":"tooltip","data-tooltip-content":t,"data-tooltip-position":"below",href:"#"}))};s.propTypes={className:q.string,onHide:q.func,onShow:q.func,onToggleSidebar:q.func.isRequired,sidebarType:q.string.isRequired};s.defaultProps={className:"",onHide:c("emptyFunction"),onShow:c("emptyFunction")};f.exports=s}),null);
__d("ChatNotificationConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({NORMAL:0,NO_USER_MESSAGE_NOTIFICATION:1})}),null);
__d("ChatBehavior",["Arbiter","AvailableList","AvailableListConstants","ChatNotificationConstants"],(function a(b,c,d,e,f,g){__p&&__p();var h=false,i=c("AvailableList").getWebChatNotification&&c("AvailableList").getWebChatNotification(),j=h,k=true,l=Object.assign(new(c("Arbiter"))(),{ON_CHANGED:"changed",notifiesUserMessages:function n(){return i!==c("ChatNotificationConstants").NO_USER_MESSAGE_NOTIFICATION},ignoresRemoteTabRaise:function n(){return j},showsTabUnreadUI:function n(){return k}});function m(){l.inform(l.ON_CHANGED)}c("AvailableList").subscribe&&c("AvailableList").subscribe(c("AvailableListConstants").ON_CHAT_NOTIFICATION_CHANGED,function(){var n=i,o=c("AvailableList").getWebChatNotification();i=o;if(n!=o)m()});c("Arbiter").subscribe("chat/set_does_page_occlude_tabs",function(n,o){j=!!o;m()});c("Arbiter").subscribe("chat/set_show_tab_unread_ui",function(n,o){k=!!o;m()});f.exports=l}),null);
__d("ChatSidebarSheetChatOffline.react",["fbt","Link.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){return c("React").createElement("div",null,h._("{=Go online} to see who's available.",[h.param("=Go online",c("React").createElement(c("Link.react"),{className:"fbChatGoOnlineLink",onClick:this.props.onGoOnlineClick},h._("Turn on chat")))]))};function l(){i.apply(this,arguments)}l.propTypes={onGoOnlineClick:k.func.isRequired};f.exports=l}),null);
__d("ImageReact.bs",["Image.react","ReasonReact.bs","bs_js_null_undefined"],(function a(b,c,d,e,f,g){"use strict";function h(i,j,k,l,m,n,o,p){return c("ReasonReact.bs").wrapJsForReason(c("Image.react"),{className:c("bs_js_null_undefined").from_opt(i),alt:c("bs_js_null_undefined").from_opt(j),src:c("bs_js_null_undefined").from_opt(k),height:c("bs_js_null_undefined").from_opt(l),title:c("bs_js_null_undefined").from_opt(m),width:c("bs_js_null_undefined").from_opt(n),style:c("bs_js_null_undefined").from_opt(o)},p)}g.make=h}),null);
__d("MessengerSpinnerReact.bs",["cx","ix","fbt","React","ImageReact.bs","ReasonReact.bs","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=i("86853"),l=i("86857"),m=i("86854"),n=c("ReasonReact.bs").statelessComponent("MessengerSpinnerReact");function o(s,t,u,v){__p&&__p();var w=s?s[0]:"",x=t?t[0]:"blue",y=u?u[0]:24,z=function z(){var B=+(y===24);if(B!==0){var C=+(x==="blue");if(C!==0)return k;else return l}else return m},A=n.slice();A[9]=function(){return c("React").cloneElement(c("ReasonReact.bs").element(0,0,c("ImageReact.bs").make([c("joinClasses")(w,"_3u55 _3qh2")],0,[z(0)],[y],0,[y],0,[])),{"aria-label":j._("Loading..."),"aria-busy":true})};return A}var p=c("ReasonReact.bs").wrapReasonForJs(n,function(s){var t=s.className,u=s.color,v=s.size;return o([t==null?"":t],[u==null?"blue":u],[v==null?24:v],[])}),q=32,r=24;g.large_size=q;g.medium_size=r;g.blue_src=k;g.grey_src=l;g.large_blue_src=m;g.component=n;g.make=o;g.jsComponent=p}),null);
__d("MessengerSpinner.react",["MessengerSpinnerReact.bs"],(function a(b,c,d,e,f,g){f.exports=c("MessengerSpinnerReact.bs").jsComponent;f.exports.large_size=c("MessengerSpinnerReact.bs").large_size;f.exports.medium_size=c("MessengerSpinnerReact.bs").medium_size}),null);
__d("ChatSidebarSheetChatReconnectMsg.react",["fbt","ChannelConstants","Link.react","MessengerSpinner.react","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.isMessenger,o=m.msecs,p=c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("No Internet connection"));if(o==null||false===navigator.onLine)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. Check your Internet connection."));else if(o>c("ChannelConstants").WARNING_COUNTDOWN_THRESHOLD_MSEC)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. {try-again-link}",[h.param("try-again-link",c("React").createElement(c("Link.react"),{className:"fbChatReconnectLink",onClick:this.props.onManuallyConnectClick},h._("Try again")))]));else if(o>1e3)return n?p:c("React").createElement("div",null,h._("Unable to connect to chat. Reconnecting in {seconds}",[h.param("seconds",Math.floor(o/1e3))]));else return n?c("React").createElement("div",null,c("React").createElement(c("MessengerSpinner.react"),{color:"grey"}),h._("Connecting...")):c("React").createElement("div",null,h._("Unable to connect to chat. Reconnecting..."))};function l(){i.apply(this,arguments)}l.propTypes={isMessenger:k.bool,msecs:k.number,onManuallyConnectClick:k.func};f.exports=l}),null);
__d("ChatSidebarSheetChatShutdownMsg.react",["fbt","ChannelConstants","CurrentUser","React"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("React").PropTypes;i=babelHelpers.inherits(l,c("React").PureComponent);j=i&&i.prototype;l.prototype.render=function(){var m=this.props,n=m.hint,o=m.isMessenger;switch(n){case c("ChannelConstants").HINT_AUTH:return c("React").createElement("div",null,h._("Your session has timed out. Please log in."));case c("ChannelConstants").HINT_MAINT:return o?c("React").createElement("div",null,h._("Messenger is currently down for maintenance.")):c("React").createElement("div",null,h._("{Chat} is currently down for maintenance.",[h.param("Chat",h._("Chat"))]));case c("ChannelConstants").HINT_CONN:default:if(!o)return c("React").createElement("div",null,h._("{Chat} is currently unavailable.",[h.param("Chat",h._("Chat"))]));else if(c("CurrentUser").isWorkUser())return c("React").createElement("div",null,h._("Workplace Chat is currently unavailable."));else return c("React").createElement("div",null,h._("Messenger is currently unavailable."))}};function l(){i.apply(this,arguments)}l.propTypes={hint:k.string,isMessenger:k.bool};f.exports=l}),null);
__d("ChatSidebarSheet.react",["fbt","Arbiter","ChannelConnection","ChatBehavior","ChatSidebarSheetChatOffline.react","ChatSidebarSheetChatReconnectMsg.react","ChatSidebarSheetChatShutdownMsg.react","ChatVisibility","MercuryConfig","MessengerEnvironment","CSS","JSLogger","LogHistory","MercurySyncConstants","PresencePrivacy","React","SubscriptionsHandler","emptyFunction","joinClasses","setTimeoutAcrossTransitions"],(function a(b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j,k=c("JSLogger").create("sidebar_sheet"),l=c("LogHistory").getInstance("sidebar_sheet"),m=c("React").PropTypes;i=babelHelpers.inherits(n,c("React").PureComponent);j=i&&i.prototype;function n(o){j.constructor.call(this,o);this.$ChatSidebarSheet3=function(p,q){this.setState({channelStatus:p,channelData:q});this.$ChatSidebarSheet4()}.bind(this);this.$ChatSidebarSheet4=function(){this.setState({isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages()})}.bind(this);this.state={channelStatus:null,channelData:null,isConnected:!c("ChannelConnection").disconnected(),isOnline:c("ChatVisibility").isOnline(),notifiesUserMessages:c("ChatBehavior").notifiesUserMessages(),syncStateInvalid:false,syncStateReconnecting:false}}n.prototype.componentDidMount=function(){this.$ChatSidebarSheet1=new(c("SubscriptionsHandler"))();this.$ChatSidebarSheet1.addSubscriptions(c("ChannelConnection").subscribe([c("ChannelConnection").CONNECTED,c("ChannelConnection").SHUTDOWN,c("ChannelConnection").RECONNECTING],this.$ChatSidebarSheet3),c("ChannelConnection").subscribe([c("ChannelConnection").MUTE_WARNING,c("ChannelConnection").UNMUTE_WARNING],this.$ChatSidebarSheet4),c("PresencePrivacy").subscribe("privacy-user-presence-changed",this.$ChatSidebarSheet4),c("ChatBehavior").subscribe(c("ChatBehavior").ON_CHANGED,this.$ChatSidebarSheet4),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE,function(){l.log("invalid state fatal","{}");this.setState({syncStateInvalid:true,syncStateReconnecting:false})}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RETRY,function(){l.log("retry from invalid state","{}");this.$ChatSidebarSheet5()}.bind(this)),c("Arbiter").subscribe(c("MercurySyncConstants").ARBITER_EVENT_INVALID_STATE_RECOVER,function(){l.log("recover from invalid state","{}");this.$ChatSidebarSheet6()}.bind(this)))};n.prototype.componentWillUpdate=function(){if(this.$ChatSidebarSheet2){clearTimeout(this.$ChatSidebarSheet2);this.$ChatSidebarSheet2=null}};n.prototype.componentWillUnmount=function(){this.$ChatSidebarSheet1&&this.$ChatSidebarSheet1.release()};n.prototype.render=function(){__p&&__p();var o=c("MessengerEnvironment").messengerui,p=void 0,q=void 0;if(!this.state.isOnline&&!o){p="offline";q=this.$ChatSidebarSheet7()}else if(!this.state.isConnected||this.state.syncStateInvalid||this.state.syncStateReconnecting){p="error";q=this.$ChatSidebarSheet8(o)}else if(!this.state.notifiesUserMessages&&!o){p="notice";q=this.$ChatSidebarSheet9()}if(this.state.channelStatus===c("ChannelConnection").RECONNECTING&&this.state.channelData<1e3||this.state.syncStateReconnecting)p=c("joinClasses")(p,"reconnecting");return c("React").createElement("div",{className:c("joinClasses")(this.props.className,p)},o?null:c("React").createElement("div",{className:"img"}),c("React").createElement("div",{className:"message"},q))};n.prototype.$ChatSidebarSheet8=function(o){__p&&__p();if(this.state.channelStatus===c("ChannelConnection").SHUTDOWN||this.state.syncStateInvalid)return c("React").createElement(c("ChatSidebarSheetChatShutdownMsg.react"),{hint:this.state.syncStateInvalid?undefined:this.state.channelData,isMessenger:o});else if(this.state.channelStatus===c("ChannelConnection").RECONNECTING||this.state.syncStateReconnecting){var p=this.state.syncStateReconnecting?1:this.state.channelData;if(p>1e3)this.$ChatSidebarSheet2=c("setTimeoutAcrossTransitions")(this.$ChatSidebarSheet3.bind(this,c("ChannelConnection").RECONNECTING,p-1e3),1e3);return c("React").createElement(c("ChatSidebarSheetChatReconnectMsg.react"),{isMessenger:o,msecs:p,onManuallyConnectClick:function(){if(!this.state.syncStateReconnecting)c("ChannelConnection").reconnect()}.bind(this)})}return null};n.prototype.$ChatSidebarSheet7=function(){return c("React").createElement(c("ChatSidebarSheetChatOffline.react"),{onGoOnlineClick:function o(p){k.log("sidebar_go_online");c("ChatVisibility").goOnline()}})};n.prototype.$ChatSidebarSheet9=function(){return c("React").createElement("div",null,h._("Alerts are off while you use another client to chat."))};n.prototype.$ChatSidebarSheet5=function(){this.setState({syncStateReconnecting:true})};n.prototype.$ChatSidebarSheet6=function(){this.setState({syncStateInvalid:false,syncStateReconnecting:false})};f.exports=n}),null);
__d("MessengerSearchFunnelLogger",["FunnelLogger","MessengerSearchFunnelLoggerConstants","MercuryIDs"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h;function i(q,r,s){c("FunnelLogger").startFunnel(q);c("FunnelLogger").addFunnelTag(q,r);c("FunnelLogger").addFunnelTag(q,s);c("FunnelLogger").appendActionIfNew(q,"search_start");h=[]}function j(q){c("FunnelLogger").appendActionIfNew(q,"search_end");c("FunnelLogger").endFunnel(q)}function k(q,r){c("FunnelLogger").appendActionWithPayload(q,"initiate_content_search",{query_string:r,impression_list:h});c("FunnelLogger").endFunnel(q)}function l(q,r,s,t){if(s==null||h==null||h.length===0){c("FunnelLogger").appendActionWithPayload(q,"search_result_error",{error:"threadID or latest impression list are null",thread_id:s,impression_list:h});c("FunnelLogger").endFunnel(q);return}s=c("MercuryIDs").getThreadFBIDFromThreadID(s);c("FunnelLogger").appendActionWithPayload(q,"log_result_selection",{thread_id:s,type:t,rank:h.indexOf(s),search_query:r?r:""})}function m(q,r,s){c("FunnelLogger").appendActionWithPayloadIfNew(q,"loading_state_impression_list",{search_query:r,impression_list:s});h=s}function n(q,r){c("FunnelLogger").appendActionWithPayload(q,c("MessengerSearchFunnelLoggerConstants").SEND_SERVER_REQUEST,{search_query:r})}function o(q,r,s,t){c("FunnelLogger").appendActionWithPayload(q,r,{search_query:s,impression_list:t});h=t}function p(q){c("FunnelLogger").appendAction(q,"clear_search_query");this.endFunnel(q)}f.exports={startFunnel:i,logResultSelection:l,logStartQuery:n,endFunnel:j,logContentSearchInitiation:k,logLoadingStateQuery:m,logUpdateQuery:o,logClearQuery:p}}),null);
__d("MessengerTypeaheadUtils",["fbt","ix","immutable","MercuryTypeaheadConstants","MessengerEnvironment","ReactDOM","SearchableEntry","WorkModeConfig","gkx","mapObject"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=c("immutable").OrderedMap,l=500,m=100,n=c("WorkModeConfig").is_work_user||c("gkx")("AT62Bmuf0c-b-qsSo41XTNJvFn7VwRrjwsI0onsrzyJ35XDxvhLHgPbXt3hZorqUAYplG7jtkngT9YqyGngqDfMq")?[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE]:[c("MercuryTypeaheadConstants").SEARCH_TYPE,c("MercuryTypeaheadConstants").FRIEND_TYPE,c("MercuryTypeaheadConstants").THREAD_TYPE,c("MercuryTypeaheadConstants").FB4C_TYPE,c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE,c("MercuryTypeaheadConstants").PAGE_TYPE,c("MercuryTypeaheadConstants").NON_FRIEND_TYPE,c("MercuryTypeaheadConstants").GAME_TYPE],o=(j={},j[c("MercuryTypeaheadConstants").SEARCH_TYPE]={header:""},j[c("MercuryTypeaheadConstants").FRIEND_TYPE]={header:h._("Contacts")},j[c("MercuryTypeaheadConstants").FB4C_TYPE]={header:h._("Colleagues")},j[c("MercuryTypeaheadConstants").THREAD_TYPE]={header:h._("Group conversations")},j[c("MercuryTypeaheadConstants").PAGE_TYPE]={header:h._("Businesses")},j[c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE]={header:h._("Meeting rooms")},j[c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE]={header:h._("Bots")},j[c("MercuryTypeaheadConstants").NON_FRIEND_TYPE]={header:h._("More people")},j.game={header:h._("Games")},j),p={sortEntries:function q(r,s){__p&&__p();var t=[],u=[],v=[],w=[],x=[],y=[],z=[],A=[],B=[];r.forEach(function(C){__p&&__p();switch(C.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:u.push(C);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:v.push(C);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:w.push(C);break;case c("MercuryTypeaheadConstants").PAGE_TYPE:case c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:y.push(C);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:x.push(C);break;case c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:z.push(C);break;case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:A.push(C);break;case c("MercuryTypeaheadConstants").SEARCH_TYPE:t.push(C);break;case c("MercuryTypeaheadConstants").GAME_TYPE:B.push(C);break}});return t.concat(u,v,w,z,A,y,x,B)},sortEntriesWithoutPages:function q(r){__p&&__p();var s=[],t=[],u=[],v=[];r.forEach(function(w){switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:s.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").THREAD_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return s.concat(t,u,v)},sortEntriesWithoutGroupsOrViewer:function q(r,s){__p&&__p();var t=[],u=[],v=[];r.forEach(function(w){if(w.getUniqueID()===s)return;switch(w.getType()){case c("MercuryTypeaheadConstants").FRIEND_TYPE:t.push(w);break;case c("MercuryTypeaheadConstants").FB4C_TYPE:u.push(w);break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:v.push(w);break}});return t.concat(u,v)},getEntryOrder:function q(r){var s=arguments.length<=1||arguments[1]===undefined?n:arguments[1];return s},orderEntries:function q(r,s){var t=[];this.getEntryOrder(s).filter(function(u){return u!==c("MercuryTypeaheadConstants").SEARCH_TYPE}).concat(c("MercuryTypeaheadConstants").SEARCH_TYPE).forEach(function(u){return t.push.apply(t,r.filter(function(v){return this.areSectionsEqual(v.getType(),u)}.bind(this)))}.bind(this));return t},buildSingleSection:function q(r){return k([["",r]])},buildListSections:function q(r,s,t){__p&&__p();if(!r.length)return k();t=this.getEntryOrder(s,t);var u=c("mapObject")(o,function(v){return babelHelpers["extends"]({},v,{entries:[]})});u[c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE]=u[c("MercuryTypeaheadConstants").PAGE_TYPE];r.forEach(function(v){var w=v.getType();if(u[w])u[w].entries.push(v)});return k(t.filter(function(v){return u[v].entries.length}).map(function(v){return[u[v].header,u[v].entries]}))},buildCustomSection:function q(r,s){var t;return t={},t[r]=s,t},areSectionsEqual:function q(r,s){if(r===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE)return s===c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE||s===c("MercuryTypeaheadConstants").PAGE_TYPE;return r===s},scrollEntryIntoView:function q(r,s){var t=c("ReactDOM").findDOMNode(s),u=s.getScrollTop(),v=r.offsetTop-u,w=t.offsetHeight-r.offsetHeight,x=Math.abs(w-v);if(v>=w&&x<=m)s.scrollToPosition(u+v-w,true,{duration:l});else if(v<0&&x<=w+m)s.scrollToPosition(u+v,true,{duration:l})},getMessageSearchEntry:function q(r){if(!c("MessengerEnvironment").messengerui||r.length<2)return null;return new(c("SearchableEntry"))({uniqueID:"__special_search_entry__",title:h._("Search messages for \"{queryString}\"",[h.param("queryString",r)]),photo:i("86924"),type:c("MercuryTypeaheadConstants").SEARCH_TYPE})}};f.exports=p}),null);
__d("MessengerSearchSource",["ChatSearchSource","MercuryConfig","MercuryIDs","MercuryParticipants","MercuryParticipantTypes","MercurySingletonProvider","MessengerEnvironment","MessengerSearchFunnelLoggerConstants","MessengerTypeaheadUtils","SearchableEntry","emptyFunction","requireWeak"],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=50,k=c("MessengerEnvironment").messengerui;h=babelHelpers.inherits(l,c("ChatSearchSource"));i=h&&h.prototype;l.getForFBID=function(n){return m.getForFBID(n)};l.get=function(){return m.get()};function l(n){i.constructor.call(this,{queryRequests:[{uri:"/ajax/mercury/composer_query.php"}],searchType:c("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG});this.$MessengerSearchSource1=[];this.$MessengerSearchSource2=n}l.prototype.bootstrapImpl=function(n){c("requireWeak")("OrderedFriendsList",function(p){return p.getSearchableEntries(j,true,function(q){this.$MessengerSearchSource1=q;i.addLocalEntries.call(this,q)}.bind(this))}.bind(this));var o=c("MercuryIDs").getParticipantIDFromUserID(this.$MessengerSearchSource2);c("MercuryParticipants").get(o,function(p){i.addLocalEntries.call(this,[new(c("SearchableEntry"))({uniqueID:p.fbid?p.fbid.toString():p.id,title:p.name,type:c("MercuryParticipantTypes").FRIEND,photo:p.big_image_src||p.image_src,uri:p.href,auxiliaryData:{isMessengerUser:p.is_messenger_user}})])}.bind(this));i.bootstrapImpl.call(this,c("emptyFunction"));n()};l.prototype.searchImpl=function(n,o,p){p=p||{};if(n===""&&p.showDefaultEntries){o(this.$MessengerSearchSource1,n);var q=p&&p.onQueryFinished;q&&q(n);return}p.threadLimit=c("MercuryConfig").MaxThreadResults;i.searchImpl.call(this,n,this.$MessengerSearchSource3(o,p),p)};l.prototype.$MessengerSearchSource3=function(n,o){return k&&o&&o.showThreadSearchEntry?function(p,q){var r=c("MessengerTypeaheadUtils").getMessageSearchEntry(q);if(r)n([r].concat(p),q);else n(p,q)}:n};var m=new(c("MercurySingletonProvider"))(l);f.exports=l}),null);
__d("MessengerSearchTypeahead.react",["cx","fbt","ix","AbstractTypeahead.react","Bootloader","CurrentUser","Image.react","MercuryIDs","MercuryThreadIDMap","MercuryThreads","MercuryTypeaheadConstants","MercuryVanityIDMap.bs","MessengerActions","MessengerSearchFunnelLogger","MessengerSearchFunnelLoggerConstants","MessengerSearchSource","React","TypeaheadNavigation","ifRequired","joinClasses"],(function a(b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k,l,m=c("MercuryThreadIDMap").get(),n=c("MercuryThreads").get(),o=c("React").PropTypes,p=j("86933"),q=100,r=null,s=null;k=babelHelpers.inherits(t,c("React").PureComponent);l=k&&k.prototype;function t(){var v,w;for(var x=arguments.length,y=Array(x),z=0;z<x;z++)y[z]=arguments[z];return w=(v=l.constructor).call.apply(v,[this].concat(y)),u.call(this),w}t.prototype.componentWillMount=function(){__p&&__p();var v=function v(x,y,z){var A=x.indexOf(y),B=A==-1?x.length-1:A-1;z(B==-1?x[x.length-1]:x[B])},w=function w(x,y,z){var A=x.indexOf(y)+1;z(A==x.length?x[0]:x[A])};v=c("TypeaheadNavigation").moveDown;w=c("TypeaheadNavigation").moveUp;this.$MessengerSearchTypeahead1=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),A=1;A<y;A++)z[A-1]=arguments[A];return v.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this);this.$MessengerSearchTypeahead2=function(x){for(var y=arguments.length,z=Array(y>1?y-1:0),A=1;A<y;A++)z[A-1]=arguments[A];return w.apply(undefined,[s.orderEntries(x,this.props.queryString)].concat(z))}.bind(this)};t.prototype.render=function(){var v=this.props.isFacebookChat?i._("Search"):i._("Search Messenger"),w=c("CurrentUser").isWorkUser()?i._("coworkers to message"):i._("friends to message");return c("React").createElement("div",{className:"_3rh8"},c("React").createElement(c("AbstractTypeahead.react"),{"aria-label":w,autoHighlight:this.props.isFacebookChat,blurOnWindowBlur:false,className:c("joinClasses")(this.props.className||"","_5iwm"+(this.props.isFocused||!!this.props.queryString?" _5iwn":"")+" _150g"+(this.props.hideResults?" _1a03":"")),disabled:this.props.hideResults,inputClassName:"_3rhb navigationFocus",navigation:{moveUp:this.$MessengerSearchTypeahead1,moveDown:this.$MessengerSearchTypeahead2},onBlur:this.$MessengerSearchTypeahead3,onChange:this.$MessengerSearchTypeahead4,onFocus:this.$MessengerSearchTypeahead5,onMouseOver:this.$MessengerSearchTypeahead6,onClick:this.$MessengerSearchTypeahead6,onSelectAttempt:this.$MessengerSearchTypeahead7,placeholder:v.toString(),presenter:{ViewRenderer:r,alwaysVisibleOnFocus:true,extraRendererProps:{className:"_11_d",hasHoverState:this.props.isFacebookChat,isLoading:this.state.isLoading,onScrollIntoView:this.props.onScrollIntoView,viewer:this.props.viewer},maxEntries:this.props.maxEntries||q,sortEntries:this.$MessengerSearchTypeahead8,useLayer:false},queryString:this.props.queryString,role:"search",searchSource:c("MessengerSearchSource").getForFBID(this.props.viewer),searchSourceOptions:{onQueryFinished:this.$MessengerSearchTypeahead9,onQueryStarted:this.$MessengerSearchTypeahead10,showDefaultEntries:!this.props.isFacebookChat,showThreadSearchEntry:!this.props.isFacebookChat&&!!this.props.queryString},selectOnTab:true,spellCheck:false,showEntriesOnFocus:!this.props.isFacebookChat}),c("React").createElement(c("Image.react"),{onMouseDown:function(){var x;this.$MessengerSearchTypeahead11();(x=this.props).onClear.apply(x,arguments)}.bind(this),className:c("joinClasses")(this.props.className||"",(!this.props.queryString?"hidden_elem":"")+" _2xme"),src:p}))};t.prototype.$MessengerSearchTypeahead11=function(){c("MessengerSearchFunnelLogger").logClearQuery(c("MessengerSearchFunnelLoggerConstants").NAME)};t.propTypes={className:o.string,hideResults:o.bool,isFacebookChat:o.bool,isFocused:o.bool,maxEntries:o.number,onBlur:o.func,onChange:o.func,onClear:o.func,onFocus:o.func,onSelect:o.func.isRequired,onScrollIntoView:o.func,queryString:o.string,viewer:o.string.isRequired};var u=function u(){__p&&__p();this.state={isLoading:false,orderable:!!s};this.$MessengerSearchTypeahead3=function(){var v;(v=this.props).onBlur.apply(v,arguments);c("MessengerSearchFunnelLogger").endFunnel(c("MessengerSearchFunnelLoggerConstants").NAME)}.bind(this);this.$MessengerSearchTypeahead4=function(){var v;(v=this.props).onChange.apply(v,arguments)}.bind(this);this.$MessengerSearchTypeahead5=function(){var v;this.$MessengerSearchTypeahead6();(v=this.props).onFocus.apply(v,arguments)}.bind(this);this.$MessengerSearchTypeahead6=function(){if(!this.state.orderable)c("Bootloader").loadModules(["MessengerTypeaheadView.react","MessengerTypeaheadUtils"],function(v,w){c("ifRequired")("FantaTabsEagerBootloader",function(x){return x.bootload()});r=v;s=w;this.setState({orderable:true})}.bind(this),"MessengerSearchTypeahead.react")}.bind(this);this.$MessengerSearchTypeahead10=function(v){if(v===this.props.queryString)this.setState({isLoading:true})}.bind(this);this.$MessengerSearchTypeahead9=function(v){if(v===this.props.queryString)this.setState({isLoading:false})}.bind(this);this.$MessengerSearchTypeahead8=function(v){return s?s.sortEntries(v,this.props.queryString):v}.bind(this);this.$MessengerSearchTypeahead7=function(v,w){__p&&__p();var x,y=this,z=v.getUniqueID(),A=v.getType(),B=v.getAuxiliaryData().alias;if(B)c("MercuryVanityIDMap.bs").set(B,c("MercuryIDs").getParticipantIDFromUserID(z));if(A===c("MercuryTypeaheadConstants").THREAD_TYPE)m.getClientIDFromServerID(z,function(C){this.props.onSelect(C,A);c("MessengerSearchFunnelLogger").logResultSelection(c("MessengerSearchFunnelLoggerConstants").NAME,this.props.queryString,C,c("MessengerSearchFunnelLoggerConstants").GROUP)}.bind(this));else(function(){__p&&__p();var C=void 0;switch(A){case c("MercuryTypeaheadConstants").FRIEND_TYPE:C=c("MessengerSearchFunnelLoggerConstants").USER_CONTACT;break;case c("MercuryTypeaheadConstants").NON_FRIEND_TYPE:C=c("MessengerSearchFunnelLoggerConstants").USER_NON_CONTACT;break;case c("MercuryTypeaheadConstants").FB4C_TYPE:C=c("MessengerSearchFunnelLoggerConstants").COWORKER;break;case c("MercuryTypeaheadConstants").GAME_TYPE:C=c("MessengerSearchFunnelLoggerConstants").GAME;break;case c("MercuryTypeaheadConstants").PAGE_TYPE:case c("MercuryTypeaheadConstants").INTERNAL_BOT_PAGE_TYPE:case c("MercuryTypeaheadConstants").COMMERCE_PAGE_TYPE:case c("MercuryTypeaheadConstants").MEETING_ROOM_PAGE_TYPE:C=c("MessengerSearchFunnelLoggerConstants").PAGE;break;default:C=c("MessengerSearchFunnelLoggerConstants").OTHER}n.getThreadMeta(c("MercuryIDs").getThreadIDFromUserID(z),function(D){this.props.onSelect(D.thread_id,A);c("MessengerSearchFunnelLogger").logResultSelection(c("MessengerSearchFunnelLoggerConstants").NAME,this.props.queryString,D.thread_id,C)}.bind(y))})()}.bind(this)};f.exports=t}),null);
__d("ChatTypeaheadWrapper.react",["cx","fbt","Arbiter","Bootloader","BootloadOnRender.react","ChatConfig","ChatOpenTabEventLogger","ChatSidebarActions","ChatSidebarSections","ChatSidebarSheet.react","ChatTypeaheadConstants","FantaTabActions","JSResource","LazyComponent.react","LoadOnRender.react","MercuryIDs","MercuryParticipantTypes","MessengerSearchFunnelLogger","MessengerSearchFunnelLoggerConstants","React","SidebarType","emptyFunction","getActiveElement","gkx"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k,l=40,m=c("ChatConfig").get("divebar_rounded_profile",false);function n(p){c("Arbiter").inform("sidebar/typeahead/active",p)}j=babelHelpers.inherits(o,c("React").Component);k=j&&j.prototype;function o(){var p,q;for(var r=arguments.length,s=Array(r),t=0;t<r;t++)s[t]=arguments[t];return q=(p=k.constructor).call.apply(p,[this].concat(s)),this.state={height:0,value:"",isSearching:false},this.$ChatTypeaheadWrapper1=function(){this.setState({isSearching:false,value:""});c("MessengerSearchFunnelLogger").endFunnel(c("MessengerSearchFunnelLoggerConstants").NAME)}.bind(this),q}o.prototype.componentDidMount=function(){if(this.props.isSidebar)c("Arbiter").subscribe("sidebar/resized",function(p,q){this.setState({height:q})}.bind(this));else c("Arbiter").subscribe("buddyList/resized",function(p,q){this.setState({height:q})}.bind(this))};o.prototype.componentWillUpdate=function(p,q){if(q.isSearching!==this.state.isSearching)n(q.isSearching)};o.prototype.render=function(){__p&&__p();var p=this.state.height!=null?Math.floor((this.state.height-l*2)/l):null;return c("React").createElement("div",{className:!m?"squareProfile":""},c("React").createElement(c("ChatSidebarSheet.react"),{className:"fbChatSidebarMessage"}),c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("MessengerSearchTypeahead.react").__setRef("ChatTypeaheadWrapper.react"),placeholder:c("React").createElement("div",{className:"_5iwm _5iwn"+(c("gkx")("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?" _62it":"")},c("React").createElement("label",{className:"_58ak"},c("React").createElement("input",{className:"_58al",type:"text",placeholder:i._("Search")}))),component:c("React").createElement(c("LazyComponent.react"),{className:c("gkx")("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?"_62it":"",isFacebookChat:true,isFocused:true,maxEntries:p,queryString:this.state.value,viewer:this.props.id,onBlur:this.$ChatTypeaheadWrapper1,onChange:function(q){var r=q.target.value;this.setState({isSearching:r!=="",value:r})}.bind(this),onClear:c("emptyFunction"),onFocus:this.$ChatTypeaheadWrapper2,onScrollIntoView:c("emptyFunction"),onSelect:function(q,r){__p&&__p();c("getActiveElement")().blur();if(r===c("ChatTypeaheadConstants").MEETING_ROOM_PAGE_TYPE)c("Bootloader").loadModules(["goURI"],function(t){this.setState({isSearching:false,value:""});var s=c("MercuryIDs").getUserIDFromThreadID(q);t("/"+(s||""))}.bind(this),"ChatTypeaheadWrapper.react");else{c("FantaTabActions").openTab(q,"chat_sidebar_typeahead");var s=null;if(!r||r===c("MercuryParticipantTypes").FRIEND||r===c("ChatTypeaheadConstants").FRIEND_TYPE||r===c("ChatTypeaheadConstants").PAGE_TYPE||r===c("ChatTypeaheadConstants").USER_TYPE)if(c("MercuryIDs").isValidThreadID(q))s=c("MercuryIDs").getUserIDFromThreadID(q);c("ChatOpenTabEventLogger").logClickOpen(c("ChatSidebarSections").TYPEAHEAD,q,s)}}.bind(this)})}),this.props.isSidebar?c("React").createElement("div",{className:"_531b"},c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("ChatSidebarDropdown.react").__setRef("ChatTypeaheadWrapper.react"),placeholder:c("React").createElement("div",{className:"_5qth _6a _6e"},c("React").createElement("div",{className:"_5vmb"})),component:c("React").createElement(c("LazyComponent.react"),{sidebarType:c("SidebarType").SIDEBAR,onToggleSidebar:c("ChatSidebarActions").disable})}),c("React").createElement(c("BootloadOnRender.react"),{loader:c("JSResource")("ChatSidebarComposeLink.react").__setRef("ChatTypeaheadWrapper.react"),placeholder:c("React").createElement("div",{className:"_3a-4 _5q85"}),component:c("React").createElement(c("LazyComponent.react"),{className:"_3a-4 _5q85"})}),c("gkx")("AT6J1vB0127_zCpL0d3C1CDK6TpXfjEXDoYutS_XbZEA9PsQy3Z-T6z-UhJgN1iSiqRIxb9juStJ1peN6QPRtgoq_yNdbXcfU-GsGYDVPbhirA")?c("React").createElement(c("LoadOnRender.react"),{component:c("React").createElement(c("LazyComponent.react"),null),loader:function q(r){c("Bootloader").loadModules(["ChatSidebarGroupCreateButtonReact.bs"],function(s){var t=s.jsComponent;return r(t)},"ChatTypeaheadWrapper.react")},placeholder:c("React").createElement("div",{className:"_1-4-"})}):null):null)};o.prototype.$ChatTypeaheadWrapper2=function(){c("MessengerSearchFunnelLogger").startFunnel(c("MessengerSearchFunnelLoggerConstants").NAME,c("MessengerSearchFunnelLoggerConstants").WWW_SIDEBAR_TAG,c("MessengerSearchFunnelLoggerConstants").UNIVERSAL_SEARCH)};f.exports=o}),null);
__d("ChatTypeaheadCore",["ChatTypeaheadWrapper.react","React","ReactDOM"],(function a(b,c,d,e,f,g){"use strict";var h={init:function i(j,k,l){c("ReactDOM").render(c("React").createElement(c("ChatTypeaheadWrapper.react"),{id:k,isSidebar:l}),j)}};f.exports=h}),null);